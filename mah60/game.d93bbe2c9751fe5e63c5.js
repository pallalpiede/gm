(function(){var e={16977:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,h=0;c<s;c++)o[c]=i.charCodeAt(h++)|i.charCodeAt(h++)<<8|i.charCodeAt(h++)<<16|i.charCodeAt(h++)<<24;for(var l=3&a;l--;)r[h]=i.charCodeAt(h++);e(new Blob([r],{type:t||"image/png"}))}})},61154:function(e,t,n){"use strict";n.d(t,{J:function(){return g}});var i=n(33938),a=n(58118),s=n.n(a),r=n(35627),o=n.n(r),c=n(30222),h=n.n(c),l=n(71944),u=n(46352),d=n(39482),p=GameCore.Configs.Notification,m=p.GameTitle,f=p.GameImage,g=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),v=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new u.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,i.Z)(h().mark((function e(){var t,n,i,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,"ANDROID"!==GameSDK.getPlatform()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut)||!(0,d.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(a=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:a}),s()(t=GameSDK.getSupportedAPIs()).call(t,"canCreateShortcutAsync")){e.next=20;break}return e.abrupt("return",!1);case 20:return e.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!e.sent){e.next=40;break}return r=l._.SHORTCUT_CREATE,o=l._.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=27,e.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return e.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 36:return e.prev=36,e.t1=e.catch(27),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 40:return e.abrupt("return",!1);case 43:return e.prev=43,e.t2=e.catch(2),e.abrupt("return",!1);case 46:case"end":return e.stop()}}),e,this,[[2,43],[27,36]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,i.Z)(h().mark((function e(){var t,n,i,a,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,s()(t=GameSDK.getSupportedAPIs()).call(t,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(n=e.t0,!(i=n.lastCallSubscribeBot)||!(0,d.Gm)(+i)){e.next=19;break}return e.abrupt("return",!1);case 19:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=l._.BOT_SUBSCRIBE,o=l._.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(t,n,i){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s()(a=GameSDK.getSupportedAPIs()).call(a,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,n.e(357).then(n.bind(n,19357));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new g;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,i=t.delayTime,e.next=5,FBInstant.graphApi.requestAsync("/me/notifications","POST",{message:o()({title:m,body:n,media_url:f}),schedule_interval:i});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}();t.Z=v},10793:function(e,t,n){"use strict";var i=n(25110),a=n.n(i),s=n(24278),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(14418),h=n.n(c),l=n(58118),u=n.n(l),d=function(e,t){return h()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},m=n(11882),f=n.n(m),g=function(e,t,n){return f()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return h()(e).call(e,g)},y={chunk:o,difference:d,shuffle:p,unique:v},S=n(47475),E=n.n(S),b=n(42568),A=n.n(b),C=A()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),I=A()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),w=A()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),h=a[o-1],l=E()(s=new Array(+c)).call(s,h);n.push.apply(n,l)}else n.push(a)}return n})),T=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return I(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),w(e).forEach((function(e){s++,a[r][s]=C(e,i)}))})),a},P=A()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),x=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var h=t[c];if(GameCore.Utils.Valid.isObject(h))a+=":"+e(h,n,!0);else if(GameCore.Utils.Valid.isString(h)){var l=P(h,n);l===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+l,s=l}}return a=a.replace(/1([A-Z])/g,"$1")},k=function(e){try{return atob(e)}catch(t){return""}},D={decodeMap:T,encodeMap:x,hashToString:k,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},O=function(e){try{return JSON.parse(e)}catch(t){return null}},_=n(35627),R=n.n(_),M=function(e){try{return R()(e,null,0)}catch(t){return""}},B=function(e){return O(M(e))},N={clone:B,decode:O,encode:M},L=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!L(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];L(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(28222),V=n.n(U),Y=function(e){var t={};return V()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},H=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},W={clear:F,hasOwn:Z,invert:Y,keyBy:H},K=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},z=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},X=n(24282),j=n.n(X),J=function(e){var t;return j()(t=V()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(Math.random()*n.length);i+=n.charAt(r)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(39022),te=n.n(ee),ne=n(57269),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(12196),re=n.n(se),oe={capitalize:K,hashCode:z,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q,removeDiacritics:$,getShortName:ae,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},he=function(){return false},le=function(e){return"function"===typeof e},ue=function(e){return"number"===typeof e},de=function(e){var t;return f()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},me=n(6226),fe=n.n(me),ge=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(fe())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ve=function(e){if(f()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ye=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,h=n.maxLength,l=void 0===h?-1:h,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,m=void 0===p?["","k","m","b","t","q"]:p,f=-1===l?99999999:l;if(e>=r){var g=Math.floor(e/Math.pow(10,c)),v=Math.floor((g.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),S=f-m[v].length,E=y.substring(0,S);return(d?ve(E):E)+m[v]}var b=e.toFixed(a),A=f-m[0].length,C=b.substring(0,A);return d?ve(C):C+m[0]},Se={Array:y,Hash:D,Json:N,Object:W,String:oe,Valid:{isBoolean:ce,isDebugger:he,isFunction:le,isNumber:ue,isObject:L,isPropertyKey:de,isString:pe,isValueChangeAsync:ge},Image:{drawCircle:function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},drawBorder:function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),h=c.context,l=Math.min(s,r)/100*a/2;return h.beginPath(),h.moveTo(0+l,0),h.lineTo(0+s-l,0),h.quadraticCurveTo(0+s,0,0+s,0+l),h.lineTo(0+s,0+r-l),h.quadraticCurveTo(0+s,0+r,0+s-l,0+r),h.lineTo(0+l,0+r),h.quadraticCurveTo(0,0+r,0,0+r-l),h.lineTo(0,0+l),h.quadraticCurveTo(0,0,0+l,0),h.closePath(),h.clip(),c.draw(0,0,o),!0},getImageScale:function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}},Number:{toAbbreviatedString:ye,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i}},Device:{isDesktop:function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)&&!/like Mac OS/.test(e)},isMobile:function(){var e=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(e)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},Ee=n(73126),be=n(15177),Ae={AppId:"70159e1f-39dc-4e46-89f0-be88ea034b5a",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",LeadersBoard:{Prefix:"leaderboards",LeaderboardId:"642e9a7ecd7d8c6525ee11af",Limit:10},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed"]}}},Debugger:{ShowConsole:!1},Statistics:{Enable:!1,ShowFPSInGame:!1},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1}},Ce={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},Ie={ENV:"development",AppId:"652227222441772",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,Notification:{Enable:!1,DisableSendNotification:!0,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:500,EnableVibrate:!0,VibrateValue:[200,350,500],StartScoreCool:5,StartScoreGood:30,StartScoreExcellent:80,Progress:{BonusScore:5e3,Milestone:3}},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,AutoDropFps:!1,DisableLandscape:!0,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},Match:{MaxRescueCount:1,RescueGamePopupTimeout:10,DelayNoThank:1e3,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",JourneyMatchStore:"journeyMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}},Levels:[200,450,900,1400,2100,3200,4600,5500,7500,9e3,11500,13e3,15e3,17e3,19e3,21e3,23e3,25e3,1e5]},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"61c937c4b572280b304b6d3f",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!0,secondsFirstTime:0,secondsBetweenAds:0},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"desktop-right",position:"right",bannerWidth:120,bannerHeight:600,secondsReload:60,platform:"DESKTOP"},{placementId:"mobile-bottom",position:"bottom",bannerHeight:50,secondsReload:60,platform:"MOBILE"}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},MagnetItem:{key:"magnet-item",scoreForOnePercent:4,maxMagnetPerMatch:5},Board:{cols:5,rows:5},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Ie=(0,be.TS)((0,Ee.Z)({},Ie),Ce);var we=Ie=(0,be.TS)((0,Ee.Z)({},Ie),Ae),Te=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},Pe=n(17061),xe=n.n(Pe),ke=n(29692),De=n.n(ke),Oe=n(94115),_e=n.n(Oe),Re=n(2938),Me=!1,Be=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name),Me&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),a){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",s.name)}var o=xe()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=h()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(f()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=De()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===De()(a,e))))}));l.length<1||(Me&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,l),l.forEach((function(e){if(a){var t=De()(n,e),i=De()(a,e),s=_e()(a,e,t);Me&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",s,e,{oldValue:i,newValue:t})}})))}}}))},Ne={Configs:we,Utils:Se,LiveUpdate:{Scene:Te,SceneObjects:function(e,t){return void 0===t&&(t=Me),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Me=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Re.D)((function(){var e=c.children.getAll();Be(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(h){console.warn(h)}}}}};window.GameCore=Ne;console.warn("production",{Configs:we,isDebugger:Se.Valid.isDebugger()})},1998:function(e,t,n){"use strict";var i=n(33938),a=n(41819),s=n(30222),r=n.n(s),o=n(56629),c=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.PRE_ROLL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.MID_ROLL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=22;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 22:return e.prev=22,window.focus(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,16,22,25]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.MID_ROLL||e.t0===GameCore.Ads.Types.PRE_ROLL?4:e.t0===GameCore.Ads.Types.REWARDED?7:10;break;case 4:return e.next=6,n.getInterstitialAdAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getRewardedVideoAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},98297:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return a},kL:function(){return i},qj:function(){return r},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},62187:function(e,t,n){"use strict";var i=n(15177),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},53270:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},66573:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:400,ease:n(97308).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},87922:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:400,ease:n(97308).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},97308:function(e,t,n){"use strict";var i=n(73431),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},20746:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},77087:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},62698:function(e,t,n){"use strict";var i=n(41819),a=n(62187),s={targets:[],duration:300,ease:n(97308).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},22438:function(e,t,n){"use strict";var i=n(41884),a=n(5281),s=n(41819),r=n(71944),o=n(66573),c=n(20468),h=n(4396),l=n(93397),u=function(e){function t(t,n,i,s,r,l){var u;return void 0===l&&(l=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e,t;u.isClicked||null!=(e=u.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n,i,a;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(i=u.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e,t;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=l,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},20402:function(e,t,n){"use strict";var i=n(5281),a=n(41819),s=n(54255),r=n(53270),o=s.Z.DEFAULT,c=o.KEY,h=o.FRAME,l=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,h.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(60,60),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=l},26108:function(e,t,n){"use strict";var i=n(73126),a=n(41884),s=n(5281),r=n(41819),o=n(97606),c=n.n(o),h=n(24282),l=n.n(h),u=n(47475),d=n.n(u),p=n(14418),m=n.n(p),f=n(24278),g=n.n(f),v=n(25110),y=n.n(v),S=n(33733),E=n.n(S),b=n(19389),A=n.n(b),C=n(20468),I=n(2938);function w(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return T(e,t);var i=g()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return T(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,I.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var h=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,h)}var l=a*o,u=r.maxScrollOver*r.height;r.value+l>r.marginTop+u?r.value=r.marginTop+u:r.value+l<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=l,r.callOnScrollEvents(r.value,l)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var n=l()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,h=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,h),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return m()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),i&&(this.boundTop.setTint(i),this.boundBottom.setTint(i)),this.boundTop.setAlpha(0,0,0,0),this.boundBottom.setAlpha(0,0,0,0),this.boundTop.setDepth(C.Z.PRIORITY),this.boundBottom.setDepth(C.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=w(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},10515:function(e,t,n){"use strict";var i=n(54255).Z.EFFECTS,a=i.KEY,s=i.FRAME,r={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:a,PREFIX:s.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:a,PREFIX:s.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:a,PREFIX:s.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}};t.Z=r},20468:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:100,MESSAGE:33,POPUP:999,PRIORITY:80,DEBUG:90,DICE:99,PIECE:99,ON_TOP:1e4}},70932:function(e,t){"use strict";t.Z={min:18,max:60}},27033:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"font-main",TEXTURE:"./assets/fonts/main.png",DATA:"./assets/fonts/main.xml"},DARK:{KEY:"font-dark",TEXTURE:"./assets/fonts/dark.png",DATA:"./assets/fonts/dark.xml"},NUMBER_DARK:{KEY:"number-dark",TEXTURE:"./assets/fonts/number-dark.png",DATA:"./assets/fonts/number-dark.xml"},NUMBER_YELLOW:{KEY:"number-yellow",TEXTURE:"./assets/fonts/number-yellow.png",DATA:"./assets/fonts/number-yellow.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},90143:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},54255:function(e,t,n){"use strict";var i=n(73126),a=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",STEP_1:"step-1",STEP_1_1:"step-1-1",STEP_2:"step-2",STEP_2_1:"step-2-1",STEP_2_2:"step-2-2",STEP_2_3:"step-2-3",BG_TOP:"bg-top",BG_MIDDLE:"bg-middle",BG_BOTTOM:"bg-bottom",M_STEP_1:"m-step-1",M_STEP_2:"m-step-2",M_STEP_3:"m-step-3",M_STEP_4:"m-step-4",M_STEP_5:"m-step-5",M_STEP_6:"m-step-6",M_STEP_7:"m-step-7"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",URL:"./assets/textures/"+a+"x/",FRAME:{BLANK:"blank",LOGO:"title-logo",PANEL_BROWN:"panel-brown",PANEL_GREEN:"panel-green",PANEL_BOTTOM:"panel-bottom",BG_BROWN_DARK:"bg-brown-dark",BG_PURPLE_DARK:"bg-purple-dark",BG_SCORE_BROWN_DARK:"bg-score-brown",BG_PROGRESS_CIRCLE:"bg-progress-circle",BG_SMALL_CIRCLE:"bg-small-circle",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LINE_LEFT:"line-left",LINE_RIGHT:"line-right",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",LEADERBOARD_BG_OWN:"leaderboards/bg-own",LEADERBOARD_BORDER_TOP:"leaderboards/border-top",LEADERBOARD_BORDER_MIDDLE:"leaderboards/border-middle",LEADERBOARD_BORDER_BOTTOM:"leaderboards/border-bottom",AVATAR_BORDER:"avatar/border",AVATAR_BACKGROUND:"avatar/background",AVATAR_RANDOM:"avatar/avatar-random",AVATAR_INVITE:"avatar/avatar-invite",POPUP_TOP:"popup/popup-top",POPUP_MIDDLE:"popup/popup-middle",POPUP_BOTTOM:"popup/popup-botom",POPUP_TOP_WIN:"popup/popup-top-win",POPUP_TOP_LOSE:"popup/popup-top-lose",POPUP_SCORE_PANEL:"popup/score-panel",POPUP_DASHBOARD:"popup/popup",POPUP_TOP_LEVEL:"popup/popup-top-level",POPUP_MIDDLE_LEVEL:"popup/popup-middle-level",POPUP_BOTTOM_LEVEL:"popup/popup-bottom-level",BOTTOM_PANEL:"popup/bottom-panel",BOTTOM_PANEL_BOT:"popup/bottom-panel-bot",BOTTOM_PANEL_TOP:"popup/bottom-panel-top",POPUP_TOP_DARK:"popup/popup-top-dark",POPUP_MIDDLE_DARK:"popup/popup-middle-dark",POPUP_BOTTOM_DARK:"popup/popup-bottom-dark",PROGRESS_BACKGROUND:"progress/bg",PROGRESS_LEFT:"progress/progress-left",PROGRESS_MIDDLE:"progress/progress-middle",PROGRESS_RIGHT:"progress/progress-right",CIRCLE_ACTIVE:"progress/circle-active",CIRCLE_INACTIVE:"progress/circle-inactive",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_ADS:"icons/flat-ad",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_RESTART:"icons/restart",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_COIN:"icons/coin",ICON_CHALLENGE_BIG:"icons/challenge-big",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_DOT_WOODEN:"icons/dot-wooden",ICON_BATTLE:"icons/battle",ICON_SHARE_BLUE:"icons/share-blue",ICON_CUP_BEST_SCORE:"icons/cup-best-score",ICON_BACK:"icons/back",ICON_RETRY:"icons/retry",ICON_CUP_OFF:"icons/icon-cup-off",ICON_CUP_ON:"icons/icon-cup-on",ICON_MODE_DICE_OFF:"icons/icon-mode-dice-off",ICON_MODE_DICE_ON:"icons/icon-mode-dice-on",ICON_ADVENTURE_OFF:"icons/icon-adven-off",ICON_ADVENTURE_ON:"icons/icon-adven-on",ICON_PLAY:"icons/icon-play",ICON_PLAY_SOLO:"icons/icon-playsolo",ICON_PLAY_WITH:"icons/icon-playwith",ICON_CIRCLE:"icons/circle",ICON_CIRCLE_ACTIVE:"icons/circle-active",ICON_CIRCLE_ACTIVED:"icons/circle-actived",ICON_GIFT_LEVEL:"icons/gift-level",BUTTON_CLOSE:"buttons/close",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_MEDIUM:"buttons/blue-medium",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_MEDIUM:"buttons/green-medium",BUTTON_GREEN_HIGH_LIGHT:"buttons/green-high-light",BUTTON_MINOR_BUTTON:"buttons/minor-button",BUTTON_CHALLENGE:"buttons/challenge",BUTTON_SHARE:"buttons/share",MINOR_BUTTON:"buttons/minor-button",BUTTON_LIGHT:"buttons/button-light",BUTTON_DARK:"buttons/button-dark",BUTTON_GREEN_SHORT:"buttons/green-short",NO_THANK_TEXT:"texts/no-thank",TEXT_YOUR_SCORE:"texts/your-score",TEXT_SECOND_CHANGE:"texts/second-chance",TEXT_SECOND_CHANCE:"texts/second-chance",TEXT_LEADER_BOARD:"texts/leaderboard",TEXT_FRIEND_LIGHT:"texts/friend-light",TEXT_FRIEND_DARK:"texts/friend-dark",TEXT_WORLD_LIGHT:"texts/world-light",TEXT_WORLD_DARK:"texts/world-dark",TEXT_PLAY:"texts/play",TEXT_JOIN:"texts/join",TEXT_INVITE:"texts/invite",TEXT_WAITING_FOR_OPPONENT:"texts/waiting-for-opponent",TEXT_YOU_WIN:"texts/text-you-win",TEXT_YOU_LOSE:"texts/text-you-lose",TEXT_SHARE:"texts/text-share",TEXT_CONTINUE:"texts/continue",TEXT_RESTART:"texts/text-restart",TEXT_SETTING:"texts/settings",TEXT_FIRST_MILESTONE:"texts/first-milestone",TEXT_NEXT_MILESTONE:"texts/next-milestone",TEXT_CONGRATULATION:"texts/congratulations",TEXT_NEXT_LEVEL:"texts/text-next-level",TEXT_LEVEL_FAIL:"texts/level-failed",TEXT_RETRY:"texts/text-retry",TEXT_MISSION:"texts/mission",TEXT_REPLAY:"texts/replay",TEXT_PLAY_WITH:"texts/play-with",TEXT_PLAY_DASHBOARD:"texts/text-play",TEXT_LEADERBOARD_OFF:"texts/text-leaderboards-off",TEXT_LEADERBOARD_ON:"texts/text-leaderboards-on",TEXT_MODE_DICE_OFF:"texts/text-mode-dice-off",TEXT_MODE_DICE_ON:"texts/text-mode-dice-on",TEXT_ADVENTURE_OFF:"texts/text-adven-off",TEXT_ADVENTURE_ON:"texts/text-adven-on",TEXT_PLAY_SOLO:"texts/text-playsolo",TEXT_PLAY_WITH_DASHBOARD:"texts/text-playwith",TEXT_CLASSIC_MODE:"texts/text-classic-mode",TEXT_ADVENTURE_LEVEL:"texts/text-adventure",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/effects-resources.png",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",BG_OUT_OF_MOVE:"bg-out-of-move",GLARE_CROSS:"glare-cross",DUST:"dust",GLOW_CIRCLE:"glow-circle",FX_COMET:"comet",FX_SPARK:"spark",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",TEXT_COOL:"text/text_cool",TEXT_EXCELLENT:"text/text_excellent",TEXT_GOOD:"text/text_good",TEXT_OUT_OF_ROOM:"text/out-of-room",TEXT_SCORE:"text/score",TEXT_GOAL:"text/goal",TEXT_REACH:"text/reach",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",GLARE:"glare",DUST:"dust",VIOLET_GLOW:"violet-glow",MASK_SMALL:"mask-small",BG_BOARD:"board",BG_PIECE:"bg-piece",BG_NEXT_PANEL:"next-panel",GLASS:"glass",BG_RED_CIRCLE:"bg-red-circle",BG_HEADER:"bg-header",BG_GREEN_DARK:"bg-green-dark",BG_BLUE_DARK:"bg-blue-dark",BG_GREEN_SQUARE:"bg-green-square",AVATAR_BORDER:"avatars/border",AVATAR_BACKGROUND:"avatars/background",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ITEM_BG_CIRCLE:"items/bg-circle",ITEM_BG_CIRCLE_SMALL:"items/bg-circle-small",ITEM_MAGNET:"items/magnet",BUTTON_MINOR:"buttons/minor-button",ICON_CHECK:"icons/check",ICON_SETTING:"icons/setting",ICON_CUP:"icons/cup",ICON_SOUND:"icons/sound",ICON_SOUND_OFF:"icons/sound-off",ICON_CROWN:"icons/crown",ICON_BATTLE:"icons/battle",ICON_MILESTONE:"icons/milestone",ICON_STAR:"icons/star",ICON_STAR_1:"icons/star-1",CIRCLE_1:"effects/circle-1",CIRCLE_2:"effects/circle-2",CIRCLE_3:"effects/circle-3",CIRCLE_4:"effects/circle-4",STAR:"effects/star",STAR_YELLOW:"effects/star-yellow",GLOW:"effects/glow",GLOW_BORDER:"effects/glow-border",GLARE_CIRCLE:"effects/glare-circle",GLARE_CROSS:"effects/glare-cross",TAIL:"effects/tail",GLARE_YELLOW_CIRCLE:"effects/yellow-circle",GLOW_CIRCLE:"effects/glow-circle",WHITE_CIRCLE_SMALL:"effects/white-circle-small",TEXT_NEXT_DICE:"text/text-next-dice"}},GAMEPLAY_32:{KEY:"gameplay-resources-32",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources-32.png",JSON:"./assets/textures/"+a+"x/gameplay-resources-32.json",FRAME:{DICE_1:"dice/dice-1",DICE_2:"dice/dice-2",DICE_3:"dice/dice-3",DICE_4:"dice/dice-4",DICE_5:"dice/dice-5",DICE_6:"dice/dice-6",DICE_7:"dice/dice-star",DICE_8:"dice/dice-special",DICE_11:"dice/dice-11",DICE_12:"dice/dice-12",DICE_13:"dice/dice-13",DICE_14:"dice/dice-14",DICE_15:"dice/dice-15",DICE_16:"dice/dice-16",DICE_21:"dice/dice-21",DICE_22:"dice/dice-22",DICE_23:"dice/dice-23",DICE_24:"dice/dice-24",DICE_25:"dice/dice-25",DICE_26:"dice/dice-26",DICE_31:"dice/dice-31",DICE_32:"dice/dice-32",DICE_33:"dice/dice-33",DICE_34:"dice/dice-34",DICE_35:"dice/dice-35",DICE_36:"dice/dice-36",BIG_DICE_1:"dice/big-dice-1",BIG_DICE_2:"dice/big-dice-2",BIG_DICE_3:"dice/big-dice-3",BIG_DICE_4:"dice/big-dice-4",BIG_DICE_5:"dice/big-dice-5",BIG_DICE_6:"dice/big-dice-6",DICE_BLUE:"dice/dice-blue",DICE_RED:"dice/dice-red",DICE_YELLOW:"dice/dice-yellow",DOT_BLUE:"dice/dot-blue",DOT_RED:"dice/dot-red",DOT_YELLOW:"dice/dot-yellow",DICE_TRANSPARENT:"dice/dice-transparent",DICE_HIGHT_LIGHT:"dice/dice-hight-light"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},58123:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return s}});var i=n(33733),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEVEL_SCENE:"LEVEL_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},58644:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",RESULT_MATCH_SCREEN:"RESULT_MATCH_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",REACHED_SCORE_SCREEN:"REACHED_SCORE_SCREEN",TARGET_SCORE_SCREEN:"TARGET_SCORE_SCREEN",LEVEL_SCREEN:"LEVEL_SCREEN",COLLISION_COMPLETED_SCREEN:"COLLISION_COMPLETED_SCREEN",MISSION_COLLECTION_COMPLETE_SCREEN:"MISSION_COLLECTION_COMPLETE_SCREEN",MISSION_FAIL_SCREEN:"MISSION_FAIL_SCREEN",COLLECTION_ITEMS_SCREEN:"COLLECTION_ITEMS_SCREEN",CLAIM_GIFT_SCREEN:"CLAIM_GIFT_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},4396:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",DIAMONDS_EAT:"diamonds_eat",GAME_OVER_SCENE:"game_over_scene",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",START_LEVEL:"start_level",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNTER:"score_counter",START_GAME:"start_game",YOU_LOSE:"you_lose",YOU_WIN:"you_win",DICE_PICKUP:"pickup_dice",DICE_DROP:"drop_dice",DICE_MERGE:"merge_dice",DICE_SHUFFLE:"shuffle_dices",DICE_INVALID_MOVE:"invalid_move",DICE_MAGNET_BONUS:"magnet_bonus",SCORE_REACHED:"score_reached",RESCUE_TIME:"rescue_timer"}},62157:function(e,t,n){"use strict";var i=n(5281),a=n(41819),s=n(54255),r=n(15177),o=s.Z.EFFECTS,c=o.KEY,h=o.FRAME,l=function(e){function t(t,n){var a;return(a=e.call(this,t,c,h.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=h.FX_CONFETTI_SMALL_1,t=h.FX_CONFETTI_SMALL_2,n=h.FX_CONFETTI_SMALL_3,i=h.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=l},45353:function(e,t,n){"use strict";n.d(t,{Z:function(){return ue}});var i=n(73126),a=n(5281),s=n(41819),r=n(54255),o=n(10515),c=o.Z.RIBBON_A,h=c.KEY,l=c.TEXTURE,u=c.FRAME_RATE,d=c.END,p=c.PREFIX,m=c.ZERO_PAD,f=function(e){function t(t){var n={repeat:-1,frameRate:u,frames:t.generateFrameNames(l,{prefix:p,end:d,zeroPad:m,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,h,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),g=o.Z.RIBBON_B,v=g.KEY,y=g.TEXTURE,S=g.FRAME_RATE,E=g.END,b=g.PREFIX,A=g.ZERO_PAD,C=function(e){function t(t){var n={repeat:-1,frameRate:S,frames:t.generateFrameNames(y,{prefix:b,end:E,zeroPad:A,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,v,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),I=o.Z.RIBBON_C,w=I.KEY,T=I.TEXTURE,P=I.FRAME_RATE,x=I.END,k=I.PREFIX,D=I.ZERO_PAD,O=function(e){function t(t){var n={repeat:-1,frameRate:P,frames:t.generateFrameNames(T,{prefix:k,end:x,zeroPad:D,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,w,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),_=o.Z.RIBBON_D,R=_.KEY,M=_.TEXTURE,B=_.FRAME_RATE,N=_.END,L=_.PREFIX,G=_.ZERO_PAD,F=function(e){function t(t){var n={repeat:-1,frameRate:B,frames:t.generateFrameNames(M,{prefix:L,end:N,zeroPad:G,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,R,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),Z=o.Z.CONFETTI_STAR_X,U=Z.KEY,V=Z.TEXTURE,Y=Z.FRAME_RATE,H=Z.END,W=Z.PREFIX,K=Z.ZERO_PAD,z=function(e){function t(t){var n={repeat:-1,frameRate:Y,frames:t.generateFrameNames(V,{prefix:W,end:H,zeroPad:K,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,U,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),X=o.Z.CONFETTI_STAR_Y,j=X.KEY,J=X.TEXTURE,q=X.FRAME_RATE,Q=X.END,$=X.PREFIX,ee=X.ZERO_PAD,te=function(e){function t(t){var n={repeat:-1,frameRate:q,frames:t.generateFrameNames(J,{prefix:$,end:Q,zeroPad:ee,start:1}),showOnStart:!0};return e.call(this,t,j,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),ne=n(97606),ie=n.n(ne),ae=n(47475),se=n.n(ae),re=function(e){function t(t){var n,i,a;(a=e.call(this,t)||this).scene=void 0,a.ribbon=void 0,a.graphics=void 0,a.colorUse=void 0,a.lastChange=void 0,a.currentFrame=void 0,a.isYoyo=void 0,a.isGravityChanged=void 0,a.points=void 0,a.scene=t.manager.scene;var s=a.emitter.manager,r=s.x,o=s.y;return a.points=ie()(n=se()(i=new Array(10)).call(i,null)).call(n,(function(){return{x:a.x+r,y:a.y+o}})),a.isYoyo=!1,a.isGravityChanged=!1,a.lastChange=0,a.currentFrame=-1,a.createGraphics(),a.randomRibbonUsedWhenFall(),a}(0,s.Z)(t,e);var n=t.prototype;return n.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){case 0:default:this.ribbon=this.scene.anims.get(o.Z.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(o.Z.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(o.Z.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(o.Z.RIBBON_D.KEY)}},n.setRibbonPosition=function(e,t){var n;ie()(n=this.points).call(n,(function(n){n.x=e,n.y=t}))},n.createGraphics=function(){var e=[8443204,2928867,12013036,16376097,15285798];this.colorUse=e[Phaser.Math.Between(0,e.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var t=this.emitter.manager,n=t.x,i=t.y,a=t.depth;this.graphics.setDepth(a),this.graphics.setPosition(n,i)},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateFrames(t),this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity(),this.updateColor(),a},n.updateFrames=function(e){this.lastChange+=e,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},n.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},n.updateGraphics=function(){this.graphics.visible&&(this.graphics.clear(),this.graphics.strokePoints(this.points))},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},n.updateVelocity=function(){this.graphics.visible&&(this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-12,12):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-10,6):this.velocityX+=Phaser.Math.Between(-6,10))},n.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},t}(Phaser.GameObjects.Particles.Particle),oe=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isYoyo=void 0,n.isGravityChanged=void 0,n.lastChange=void 0,n.currentFrame=void 0,n.star=void 0,n.starX=void 0,n.starY=void 0,n.isYoyo=!1,n.isGravityChanged=!1,n.lastChange=0,n.currentFrame=-1,n.scene=t.manager.scene,n.starX=n.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY),n.starY=n.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY),n.star=n.starX,n}(0,s.Z)(t,e);var n=t.prototype;return n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateGravity(),this.updateVelocity(),this.updateFrameRate(),this.updateFrames(t),a},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},n.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},n.updateFrames=function(e){if(this.lastChange+=e,this.lastChange>=this.star.msPerFrame){var t=Phaser.Math.RND.between(0,1);this.star=t>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},n.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},t}(Phaser.GameObjects.Particles.Particle),ce=r.Z.EFFECTS,he=ce.KEY,le=ce.FRAME,ue=function(e){function t(t){var n;return(n=e.call(this,t,he,le.BLANK)||this).emitterConfetti=void 0,n.emitterRibbons=void 0,n.ribbonConfig=void 0,n.confettiConfig=void 0,n.width=void 0,n.height=void 0,n.emitterRibbons=[],n.emitterConfetti=[],n.createConfigs(),n.createAnimations(),n.scene.add.existing((0,a.Z)(n)),n}(0,s.Z)(t,e);var n=t.prototype;return n.createConfigs=function(){var e=1/GameCore.Utils.Image.getImageScale();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:le.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4e3,max:6e3},rotate:{start:0,end:1800,random:!0},scale:{min:.6*e,max:e},particleClass:re},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:le.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:8e3},rotate:{start:0,end:1080},scale:{min:.6*e,max:e},particleClass:oe}},n.createAnimations=function(){if(!this.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY)){var e=new z(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_X.KEY,e)}if(!this.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY)){var t=new te(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(o.Z.RIBBON_A.KEY)){var n=new f(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_A.KEY,n)}if(!this.scene.anims.get(o.Z.RIBBON_B.KEY)){var i=new C(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_B.KEY,i)}if(!this.scene.anims.get(o.Z.RIBBON_C.KEY)){var a=new O(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_C.KEY,a)}if(!this.scene.anims.get(o.Z.RIBBON_D.KEY)){var s=new F(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_D.KEY,s)}},n.run=function(e,t,n,i){this.setPosition(e,t),this.width=n,this.height=i,this.createEmitters(),this.emitterConfetti.forEach((function(e){e.emitParticle(25)})),this.emitterRibbons.forEach((function(e){e.emitParticle(20)}))},n.stop=function(){this.emitterConfetti.forEach((function(e){e.killAll()})),this.emitterRibbons.forEach((function(e){e.killAll()})),this.kill()},n.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},n.createConfettiLeftEmitter=function(){var e=(0,i.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),t=this.createEmitter(e);this.emitterConfetti.push(t)},n.createConfettiRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.confettiConfig,{x:e,speedX:{min:-5,max:-90}}),n=this.createEmitter(t);this.emitterConfetti.push(n)},n.createRibbonLeftEmitter=function(){var e=(0,i.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(e){e.setRibbonPosition(0,0)}}),t=this.createEmitter(e);this.emitterRibbons.push(t)},n.createRibbonRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.ribbonConfig,{x:e,speedX:{min:-20,max:-80},emitCallback:function(t){t.setRibbonPosition(e,0)}}),n=this.createEmitter(t);this.emitterRibbons.push(n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},16470:function(e,t,n){"use strict";var i=n(5281),a=n(41819),s=n(54255).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:o.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:500,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},75742:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(41819),a=n(14418),s=n.n(a),r=n(71944),o=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),c=n(20468),h=n(70932),l=n(54255),u=n(58123),d=l.Z.DEFAULT,p=d.KEY,m=d.FRAME,f=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){var e=this;this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone(),this.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.autoUpdateFPS()}))},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new o(this,t,n)},n.autoUpdateFPS=function(){this.scene.key!==u.C.GLOBAL_SCENE&&(this.tweenPlaying()||this.particlePlaying()?this.game.updateFps(h.Z.max):this.game.updateFps(h.Z.min))},n.tweenPlaying=function(){for(var e=this.tweens.getAllTweens(),t=0;t<e.length;t++)if(e[t].isPlaying())return!0;return!1},n.particlePlaying=function(){var e=this.getAllParticles();if(!e)return!0;var t=!1;return e.forEach((function(e){e.emitters.list.forEach((function(e){e.alive&&e.alive.length>0&&(t=!0)}))})),t},n.getAllParticles=function(){if(this.input.enabled&&this.scene.isActive()&&!this.scene.isPaused()){var e=this.children.list;return!e||e.length<=0?[]:s()(e).call(e,(function(e){return"ParticleEmitterManager"===e.type}))}},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/2.4},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.createLine=function(){var e=this.make.image({key:p,frame:m.LINE_LEFT});e.setOrigin(0,.5).setDepth(c.Z.ON_TOP);var t=this.make.image({key:p,frame:m.LINE_RIGHT});t.setOrigin(1,.5).setDepth(c.Z.ON_TOP);var n=this.gameZone.displayHeight;e.setDisplaySize(12,n),t.setDisplaySize(12,n),Phaser.Display.Align.In.LeftCenter(e,this.gameZone,7),Phaser.Display.Align.In.RightCenter(t,this.gameZone,8)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},56629:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var i=n(41884),a=n(41819),s=n(39022),r=n.n(s),o=n(20746),c=n(77087),h=n(54255),l=n(58123),u=n(58644),d=n(55481),p=(0,n(20573).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),m=n(93397),f=n(75742),g=n(5281),v=n(27033),y=n(20468),S=h.Z.DEFAULT,E=S.KEY,b=S.FRAME,A=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,g.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:E,frame:b.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),C=A,I=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(y.Z.DEBUG),n.scene.add.existing((0,g.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,g.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:v.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),w=I,T=n(62698),P=n(20402),x=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(u.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,h=a[2],l=void 0!==h&&h;this.setMessage(r),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new P.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:v.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t,n=this;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new T.Z({targets:[this.messageText],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}},onComplete:function(){n.messageText.setScale(1)}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),k=x,D=h.Z.DEFAULT,O=D.KEY,_=D.FRAME,R=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,m.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(u.o4.NOTIFY_SCREEN,k);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:O,frame:_.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new w(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=p(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(f.Z),M=R},14689:function(e,t,n){"use strict";var i,a=n(93397),s=n(70268),r=n(73126),o=n(33938),c=n(41819),h=n(30222),l=n.n(h),u=n(61154),d=0,p=0,m=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;p=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!p||p<30)&&(p=60),d=p;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-p,n=Math.round(e*t+p);n>d&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),f=m,g=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,h=this.scene.add.rectangle(n,i,a,s,e,t);h.setName("Debug Box"),h.setDepth(r);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&h.setOrigin(o,c),h},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),v=g,y=n(39022),S=n.n(y),E=n(80040),b=n.n(E),A=n(14418),C=n.n(A),I=n(97606),w=n.n(I),T={LOADED:"loaded",DISPLAYED:"displayed"};!function(e){e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing"}(i||(i={}));var P,x=i;!function(e){e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.MID_ROLL="mid-roll"}(P||(P={}));var k=P,D=n(42131),O=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),_=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=x.IDLE},R=GameCore.Configs.Ads.Mockup.GiphyApiKey,M=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(n=e.sent,i=document.getElementById(t.placementId),a=t.bannerHeight,s=t.bannerWidth,console.log({bannerAds:i}),!i){e.next=13;break}if((r=i.getElementsByTagName("img"))&&!(r.length<=0)){e.next=10;break}return e.abrupt("return");case 10:r[0].src=n,e.next=30;break;case 13:(o=document.createElement("div")).id=t.placementId,o.style.bottom="var(--sab)",o.style.position="fixed",o.style.background="#fff url("+n+") center center/auto no-repeat",o.style.outline="2px solid #ffffff40",o.style.outlineOffset="-2px",o.style.zIndex="98",o.style.overflow="hidden","right"==t.position?(o.style.bottom="0px",o.style.right="0px",o.style.top="0px",o.style.height="100%",o.style.width=s+"px"):"left"==t.position?(o.style.bottom="0px",o.style.left="0px",o.style.top="0px",o.style.height="100%",o.style.width=s+"px"):"bottom"==t.position?(o.style.bottom="0px",o.style.top="",o.style.height=a+"px",o.style.width="100%"):"top"==t.position&&(o.style.top="0px",o.style.bottom="",o.style.height=a+"px",o.style.width="100%"),c=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(c),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",c.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),o.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(o);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+R+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(i=e.sent,GameCore.Utils.Valid.isObject(i)){e.next=9;break}return e.abrupt("return","");case 9:return a=i.data,s=Math.floor(Math.random()*a.length),e.abrupt("return",a[s].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById(t)){e.next=3;break}return e.abrupt("return");case 3:n.remove();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),B=function(){function e(e){this.config=void 0,this.isShowing=void 0,this.reloadBannerAdInterval=void 0,this.config=e,this.reloadBannerAdInterval=null}var t=e.prototype;return t.show=function(){var e=this;if(!this.isShowing){var t=this.config,n=t.placementId,i=t.secondsReload;if(i>0){if(this.reloadBannerAdInterval)return;return this.loadBannerAdAsync(n),void(this.reloadBannerAdInterval=setInterval((function(){e.loadBannerAdAsync(n)}),1e3*i))}this.loadBannerAdAsync(n)}},t.loadBannerAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!GameCore.Configs.Ads.Mockup.Enable){e.next=7;break}return e.next=5,M.loadBannerAdAsync(this.config);case 5:e.next=9;break;case 7:return e.next=9,GameSDK.loadBannerAdAsync(t,this.config);case 9:this.isShowing=!0,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),t.hideAsync=function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isShowing){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,t=GameCore.Configs.Ads,n=this.config.placementId,this.isShowing=!1,this.reloadBannerAdInterval&&(clearInterval(this.reloadBannerAdInterval),this.reloadBannerAdInterval=null),!t.Mockup.Enable){e.next=12;break}return e.next=10,M.hideBannerAdAsync(n);case 10:e.next=14;break;case 12:return e.next=14,GameSDK.hideBannerAdAsync(n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),e}();GameCore.Ads={Types:k,Status:x,Events:T,AdError:O,AdInstance:_};var N=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastRewardAdShownTime=void 0,n.preRollAd=void 0,n.midRollAd=void 0,n.rewardedVideo=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n.bannerAds=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.bannerAds=[]},n.calculateSafeAreaBottom=function(){try{if(!this.config.CalculateSafeAreaBottom)return;this.safeAreaBottom=b()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.Enabled,this.config=t,this.initBannerAd(),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){this.preRollAd=new e(k.PRE_ROLL,"pre-roll"),this.midRollAd=new e(k.MID_ROLL,"mid-roll"),this.rewardedVideo=new e(k.REWARDED,"rewarded")},n.preloadPreRollAdAsync=function(){return this.preloadAdAsync(k.PRE_ROLL)},n.showPreRollAdAsync=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new O("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(k.PRE_ROLL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadMidRollAdAsync=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(k.MID_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showMidRollAdAsync=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new O("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(k.MID_ROLL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(k.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new O("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(k.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.RewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new O("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new O("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(T.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new O("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new O("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==k.PRE_ROLL&&t!==k.MID_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===k.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.EnableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(T.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case k.PRE_ROLL:return this.preRollAd;case k.MID_ROLL:return this.midRollAd;case k.REWARDED:return this.rewardedVideo;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.InterstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.RewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.initBannerAd=function(){for(var e=this.config.BannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)&&this.bannerAds.push(new B(i))}return this.bannerAds.length>0},n.isEnoughSpaceToShowBannerAds=function(e){var t=this.game.world.getScreenWidth(),n=this.game.world.getScreenHeight(),i=this.game.world.getPixelRatio(),a=this.game.canvas,s=a.width,r=a.height;s/=i,r/=i;var o=this.game.world.getDefaultRatio();if("left"==e.position||"right"==e.position){var c=e.bannerWidth||120;return!(n<(e.bannerHeight||600))&&(t-s)/2>c}var h=e.bannerHeight||90;return!(e.bannerWidth&&t<e.bannerWidth)&&((n-r)/2>h||s/(r-e.bannerHeight+50)<o)},n.showBannerAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:n=0;case 3:if(!(n<this.bannerAds.length)){e.next=11;break}if(void 0==t){e.next=7;break}if(this.bannerAds[n].config.placementId==t){e.next=7;break}return e.abrupt("continue",8);case 7:this.bannerAds[n].show();case 8:n++,e.next=3;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:n=0;case 3:if(!(n<this.bannerAds.length)){e.next=11;break}if(void 0==t){e.next=7;break}if(this.bannerAds[n].config.placementId==t){e.next=7;break}return e.abrupt("continue",8);case 7:this.bannerAds[n].hideAsync();case 8:n++,e.next=3;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){var e;if(!this.enabled)return 0;var t=C()(e=this.bannerAds).call(e,(function(e){return"bottom"==e.config.position})),n=0;t.length>0&&(n=Math.max.apply(Math,w()(t).call(t,(function(e){return e.config.bannerHeight}))));var i=n+this.safeAreaBottom;if(this.game.world){var a=this.game.world,s=a.getPixelRatio(),r=a.getZoomRatio();return this.game.world.getPhysicPixels(i,s/r)}return i},t}(Phaser.Plugins.BasePlugin),L=N,G=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,{level:e,score:t,levelName:n})},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:G};var F=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),Z=F,U=function(){function e(e,t,n){var i=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!i.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!i.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=n,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,s=(0,r.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),V=U,Y=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new V(n.game,e,!1),n.setMusicVolume(1)},n.initSound=function(e){n.soundManager=new V(n.game,e,!0),n.setSoundVolume(1)},n}(0,c.Z)(t,e);var n=t.prototype;return n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),H=Y,W=n(41884),K="AUTH_TOKEN_REQUEST",z="AUTH_TOKEN_RECEIVED",X=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),j=n(20573),J="auth",q=(0,j.P1)([function(e){return e[J].token}],(function(e){return e})),Q=(0,j.P1)([function(e){return e[J].isRequesting}],(function(e){return e})),$=function(e){return{type:z,payload:{token:e}}},ee=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,s=n(),r=q(s),!Q(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:K,payload:{}}),e.next=10,i.getPlayerToken();case 10:o=e.sent,t($(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t($("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,a.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,a.tO)(new X);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return q(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),te=ee,ne=n(28222),ie=n.n(ne),ae=n(6226),se=n.n(ae),re=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,i,a=(n=this.width*t,i=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(i/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+a.string,a.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},oe=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ie()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(se())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],s=a.name,r=a.image;if(r)e.scene.textures.get(s).key!==s&&e.scene.load.image(s,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,h=this.scene.textures.get(a),l=h.getSourceImage(s);"__MISSING"===h.key&&c&&(l=(h=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&re(e),e},t}(Phaser.Plugins.ScenePlugin),ce=oe,he=n(58118),le=n.n(he),ue=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,c.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),de=ue,pe=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],me=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(le()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,a=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,s.Z)(e,pe);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=a,this.trackingSceneKeys=r,this.fpsTracker=new de(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),fe=me,ge={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},ve=ge.sound,ye=ge.music,Se=ge.vibrate,Ee=ge.language,be=ge.theme,Ae=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:ve,this.music=GameCore.Utils.Valid.isBoolean(i)?i:ye,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:Se,this.language=GameCore.Utils.Valid.isString(s)?s:Ee,this.theme=GameCore.Utils.Valid.isString(r)?r:be}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Ce=Ae,Ie=GameCore.Utils,we=Ie.Valid,Te=Ie.Object,Pe=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,r.Z)({},ge),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==we.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==we.isObject(t)){var n=new Ce(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==we.isObject(t)){if(Te.hasOwn(t,"coins")&&we.isNumber(t.coins)&&(this.gameData.coins=t.coins),Te.hasOwn(t,"diamond")&&we.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Te.hasOwn(t,"lastReceiveGift")&&we.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Te.hasOwn(t,"dailyRewarded")&&we.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Te.hasOwn(n,"lastRewarded")&&we.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Te.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Te.hasOwn(t,"dailyTasks")&&we.isObject(t.dailyTasks)){var i=t.dailyTasks;Te.hasOwn(i,"startedTime")&&we.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Te.hasOwn(i,"logTasks")&&we.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==we.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),xe=n(35627),ke=n.n(xe),De=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Oe=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),_e=n(39482),Re=GameCore.Configs,Me=Re.AppId,Be=Re.Network,Ne=function(e){if(!e.ok)throw new De(null,{response:e})},Le=function(){var e=window.game.auth.getToken();return{token:e,timeout:Be.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},Ge=function(e,t,n,i){return(0,o.Z)(l().mark((function a(){var s,r,o,c,h;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+Me+"/"+t,r=new AbortController,n.signal=r.signal,o=setTimeout((function(){r.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=ke()(i)),a.next=8,fetch(s,n);case 8:return c=a.sent,clearTimeout(o),Ne(c),a.next=13,c.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return h=a.t0,a.abrupt("return",h);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof De)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new Oe(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},Fe=function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof Oe&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,_e.qZ)(600);case 10:return e.next=12,Fe(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof Oe)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,o.Z)(l().mark((function e(t,n,i,a){var s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=Be.Retries),e.prev=2,s=(0,r.Z)({},Le(),n,{method:"GET"}),o=Ge(i,t,s),e.next=7,Fe(o,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,o.Z)(l().mark((function e(t,n,i,a,s){var o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===s&&(s=Be.Retries),e.prev=2,o=(0,r.Z)({},Le(),i,{method:"POST"}),c=Ge(a,t,o,n),e.next=7,Fe(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}(),Ve=GameCore.Configs.ApiHost,Ye=(function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,Ze("players?"+n,{},Ve);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("players",t,{},Ve,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),He=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("players/"+t+"/user-guide-displays/inc",{},{},Ve);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We="PLAYER_RECEIVED",Ke="PLAYER_DATA_UPDATE",ze="PLAYER_SCORE_UPDATE",Xe="PLAYER_PROFILE_UPDATE",je="PLAYER_SETTING_UPDATE",Je="PLAYER_CONNECTED_PLAYERS_UPDATE",qe=n(46352),Qe=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),$e=n(24278),et=n.n($e),tt="player",nt=(0,j.P1)([function(e){return e[tt]}],(function(e){return e})),it=(0,j.P1)([nt],(function(e){return e.playerId})),at=(0,j.P1)([nt],(function(e){return e.ASID})),st=(0,j.P1)([function(e){return e[tt].data}],(function(e){return e})),rt=((0,j.P1)([st],(function(e){return e.settings})),(0,j.P1)([function(e){return e[tt].connectedPlayers}],(function(e){return e}))),ot=(0,j.P1)([rt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=ie()(e);return et()(i).call(i,n,t+n)||[]})),ct=(0,j.P1)([st],(function(e){return e.score})),ht=(0,j.P1)([st],(function(e){return e.customFields})),lt=GameCore.Configs,ut=lt.AppId,dt=lt.Tutorial,pt=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:We,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},mt=function(e){return{type:Je,payload:{connectedPlayers:e}}},ft=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({type:je,payload:{name:e,value:t}});case 3:r=s(),o=st(r),c=new Pe({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,a.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},gt=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,i(yt(o));case 4:c=s(),h=st(c),u=new Pe({}).convertToFacebookData(h),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Qe)){n.next=14;break}return n.abrupt("return");case 14:(0,a.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},vt=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n,i){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(yt(s));case 4:r=i(),o=st(r),c=new Pe({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof Qe)){t.next=15;break}return t.abrupt("return");case 15:(0,a.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},yt=function(e){return{type:Ke,payload:{data:e}}},St=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n,i){var s,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:ze,payload:{score:e}});case 3:Ye({score:e}),s=i(),r=st(s),o=new Pe({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,a.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Et=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("incUserGuideDisplays",dt.ForceUseTutorial),!dt.ForceUseTutorial){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t(yt({userGuideDisplays:1}));case 6:i=n(),s=it(i),r=st(i),o=new Pe({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),He(s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,a.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(pt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n(),s=nt(i),r=s.playerId,o=s.name,c=s.photo,h=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,d={appId:ut,playerId:r,name:o,photo:c,locale:h,ASID:u},e.next=10,t({type:Xe,payload:{profile:d}});case 10:return e.next=12,Ye(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,a.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(St(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ft(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(gt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(vt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.facebook,e.next=4,new(se())((function(e,t){i.once("players",(function(t){e(t)})),i.once("playersfail",(function(){return t([])})),i.getPlayers()}));case 4:if(s=e.sent,r=function(e){return!!e},o=C()(n=w()(s).call(s,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new qe.Z(t,n,i).toObject():null}))).call(n,r),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(mt(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,a.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(mt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return nt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return at(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ge,e)?ge[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return ct(this.state)},n.getCustomData=function(e){var t=ht(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return rt(this.state)},n.getConnectedPlayerIds=function(e,t){return ot(this.state,{limit:e,offset:t})},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),bt=Et,At=GameCore.Configs.ApiHost,Ct=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,Ze("players?"+n,{},At);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),It="PROFILES_DATA_UPDATE",wt="profile",Tt=(0,j.P1)([function(e){return e[wt].data}],(function(e){return e})),Pt=(0,j.P1)([function(e){return e[wt].profileIds}],(function(e){return e})),xt=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n,i){var s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=i(),r=Pt(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Ct({playerIds:o});case 8:c=t.sent,n({type:It,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,a.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},kt=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(xt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return Tt(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Dt=kt,Ot=n(11882),_t=n.n(Ot),Rt=n(57662),Mt=n.n(Rt),Bt=["player","match"],Nt="null",Lt=GameCore.Configs.Rollbar,Gt=Lt.UseMockup,Ft=Lt.FilterError,Zt=Lt.ListPlayerDevIds,Ut=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){Gt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s,r,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(s=a.trace)?void 0:s.frames)||[];(r=n.events).push.apply(r,c);var h=document.getElementById("popup-error");h||((h=document.createElement("div")).id="popup-error",document.body.appendChild(h)),h.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+ke()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',h.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var l=document.getElementById("close");l&&(l.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=Ft.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(_t()(i).call(i,t)>=0)return!1;if(_t()(a).call(a,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var s=e.name,r=Ft.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(_t()(o).call(o,s)>=0)return!1;if(_t()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=Ft.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(_t()(i).call(i,t)>=0)return!1;if(_t()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,a=(0,s.Z)(e,Bt);n.rollbar.configure({payload:{player:t,match:i,other:a}})}catch(r){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",r)}},n}(0,c.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Mt())({accessToken:Nt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"1"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();le()(Zt).call(Zt,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),Vt=Ut,Yt=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Ht=Yt,Wt=n(71944),Kt=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Wt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),zt=Kt,Xt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=zt,GameCore.Screens={Events:Xt};var jt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).events=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Ht,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Jt=jt,qt=n(20050),Qt=n.n(qt),$t=n(14791),en=n(53894),tn=n(98297),nn=n(12902),an={currentSceneKey:"",prevSceneKey:""};(0,nn.pV)();for(var sn,rn,on,cn,hn,ln,un,dn,pn,mn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},fn=mn,gn={data:{}},vn={token:"",isRequesting:!1},yn=((sn={})[J]=function(e,t){return void 0===e&&(e=vn),(0,nn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case K:e.isRequesting=!0;break;case z:e.token=i,e.isRequesting=!1}}}))},sn),Sn=n(15177),En={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:ge,userGuideDisplays:0,customFields:{}},isUserNew:!0},bn=((rn={})[tt]=function(e,t){return void 0===e&&(e=En),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,h=i.connectedPlayers,l=void 0===h?[]:h,u=i.profile;switch(t.type){case We:var d=i.playerId,p=i.name,m=i.photo,f=i.locale,g=i.data;if(n.playerId=d,n.name=p,n.photo=m,n.locale=f,GameCore.Utils.Valid.isObject(g)){var v=g;n.data=(0,Sn.TS)(e.data,v)}g.userGuideDisplays>0&&(n.isUserNew=!1);break;case Xe:var y=u.playerId,S=u.name,E=u.photo,b=u.locale,A=u.ASID;n.ASID=A,n.playerId=y,n.name=S,n.photo=E,n.locale=b;break;case ze:n.data.score=c;break;case je:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Ke:n.data=(0,Sn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Je:if(l.length<=0)break;var C=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,Sn.TS)(e.connectedPlayers,C)}}}))},rn),An=n(82737),Cn=n.n(An),In={data:{},profileIds:[]},wn=((on={})[wt]=function(e,t){return void 0===e&&(e=In),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,s=void 0===a?[]:a;if(t.type===It){var o,c,h=GameCore.Utils.Object.keyBy(s,"playerId"),l=ie()(h);n.data=(0,Sn.TS)((0,r.Z)({},e.data),h),n.profileIds=S()(o=[]).call(o,new(Cn())(S()(c=[]).call(c,e.profileIds,l)))}}}))},on),Tn="match",Pn="MATCH_GAMEPLAY_INITIALIZE",xn="MATCH_GAMEPLAY_START",kn="MATCH_GAMEPLAY_FINISH",Dn="MATCH_GAMEPLAY_UPDATE",On="MATCH_GAMEPLAY_RESCUE",_n="MATCH_GAMEPLAY_RESET_RESCUE",Rn="MATCH_STATS_DATA_CLEAR",Mn="MATCH_STATS_DATA_UPDATE",Bn="MATCH_STATS_CURRENT_UPDATE",Nn="MATCH_SINGLE_CREATE_REQUEST",Ln="MATCH_SINGLE_DETAIL_REQUEST",Gn="MATCH_SINGLE_MOVE_UPDATED",Fn="MATCH_SINGLE_DATA_RECEIVED",Zn="MATCH_SINGLE_DATA_CLEAR",Un="MATCH_CHALLENGE_JOIN_REQUEST",Vn="MATCH_CHALLENGE_CREATE_REQUEST",Yn="MATCH_CHALLENGE_FINISH_REQUEST",Hn="MATCH_CHALLENGE_CONTINUE_REQUEST",Wn="MATCH_CHALLENGE_DATA_RECEIVED",Kn="MATCH_CHALLENGE_DATA_CLEAR",zn="MATCH_GROUP_CREATE_REQUEST",Xn="MATCH_GROUP_FINISH_REQUEST",jn="MATCH_ONLINE_DATA_RECEIVED",Jn="MATCH_JOURNEY_CREATE_REQUEST",qn="MATCH_JOURNEY_DATA_RECEIVED",Qn="MATCH_JOURNEY_MOVE_UPDATED",$n="open",ei="active",ti="finished",ni={mode:"",status:$n,rescued:0,startAt:0,finishAt:0},ii={single:{_id:"",data:{fen:""},playerId:"",status:$n},group:{status:$n,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:$n,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:$n,players:{}},journey:{_id:"",data:{fen:"",magnetPercent:0,magnetAmount:0,magnetScore:0,jsonAmount:{}},playerId:"",level:0,status:$n},updateAt:0,isRequesting:!1},ai={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},si=((cn={})[Tn]=(0,$t.UY)({gameplay:function(e,t){return void 0===e&&(e=ni),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status,r=i.rescued;switch(t.type){case Pn:n.status=$n,n.mode=ni.mode,n.rescued=ni.rescued,n.startAt=ni.startAt,n.finishAt=ni.finishAt,n.opponentInfo=ni.opponentInfo;break;case xn:n.mode=a,n.status=ei,n.rescued=r,n.startAt=Date.now();break;case Dn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case kn:n.status=ti,n.finishAt=Date.now();break;case On:n.rescued+=1;break;case _n:n.rescued=0}}}))},match:function(e,t){return void 0===e&&(e=ii),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,s=i.opponentInfo,o=i.players;switch(t.type){case Nn:case Ln:case Un:case Yn:case"MATCH_ONLINE_CREATE_REQUEST":case Jn:n.isRequesting=!0;break;case Gn:n.single=(0,r.Z)({},e.single,a),n.updateAt=Date.now();break;case Qn:n.journey=(0,r.Z)({},e.journey,a),n.updateAt=Date.now();break;case Fn:n.isRequesting=!1,n.single=a||ii.single;break;case qn:n.isRequesting=!1,n.journey=a||ii.journey;break;case Zn:n.isRequesting=!1,n.single=ii.single;break;case"MATCH_JOURNEY_DATA_CLEAR":n.isRequesting=!1,n.journey=ii.journey;break;case Vn:case Hn:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case Wn:n.isRequesting=!1,n.challenge=(0,r.Z)({},a||ii.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Kn:n.isRequesting=!1,n.challenge=ii.challenge;break;case zn:n.group.status=ei,s&&(n.group.opponentInfo=s);break;case Xn:n.group.status=ti;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=ii.online.status,n.online.players=ii.online.players;break;case jn:n.online.status=ei,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=ti}}}))},stats:function(e,t){return void 0===e&&(e=ai),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,s=i.stats,o=i.match,c=i.current,h=i.players,l=i.leaders;switch(t.type){case Rn:delete n.data[a],n.current=ai.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=ai.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case Mn:n.data[a]=s;break;case Bn:n.current=(0,Sn.TS)((0,r.Z)({},e.current),s);break;case jn:ie()(h).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":l.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Wn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,m=u.whitePlayerId,f=u.whitePlayerScore,g=u.whitePlayerLevel,v=u.blackPlayerLevel;if(!d||!m)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[m]={score:f,level:g}}}}))}}),cn),ri="TOURNAMENT_ACTIVE",oi="TOURNAMENT_REQUEST",ci="TOURNAMENT_RECEIVED",hi={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},li=((hn={}).tournament=function(e,t){return void 0===e&&(e=hi),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case ri:n.active=!0,n.tournamentId=r;break;case oi:n.isRequesting=!0;break;case ci:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},hn),ui=n(3665),di=n.n(ui),pi=n(2578),mi=n.n(pi),fi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},gi=((ln={}).leaderboards=function(e,t){return void 0===e&&(e=fi),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,h=i.leaders;switch(t.type){case"LEADERBOARD_DATA_REQUEST":e.type!==s&&0===c&&(n.leaders=fi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case"LEADERBOARD_DATA_UPDATE":if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,h)),u=di()(l),d=C()(u).call(u,(function(e){return!!e.name&&!!e.photo}));mi()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=fi.type,n.limit=fi.limit,n.offset=fi.offset,n.leaders=fi.leaders,n.leaderboardId=fi.leaderboardId}}}))},ln),vi="missions",yi="MISSIONS_DATA_REQUEST",Si="MISSIONS_DATA_RECEIVE",Ei="MISSION_UPDATE",bi="MISSION_COMPLETED",Ai={mission:null,missions:null,isRequesting:!1},Ci=((un={})[vi]=function(e,t){return void 0===e&&(e=Ai),(0,nn.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,h=s.missions;switch(t.type){case yi:n.isRequesting=!0;break;case Si:if(n.isRequesting=!1,h.length<1)return;n.missions={},h.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[r];n.mission={name:r,process:{},require:l.require,reward:l.reward},ie()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case Ei:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case bi:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},un),Ii="dailyTasks",wi="DAILY_TASKS_DATA_REQUEST",Ti="DAILY_TASKS_DATA_RECEIVE",Pi="DAILY_TASKS_PROCESS_UPDATE",xi="DAILY_TASK_VALUE_ADD",ki="DAILY_TASK_FINISHED",Di={tasks:[],process:[],isRequesting:!1,isNotice:!1},Oi=((dn={})[Ii]=function(e,t){return void 0===e&&(e=Di),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case wi:n.isRequesting=!0;break;case Ti:n.isRequesting=!1,n.tasks=o;break;case Pi:n.process=c;break;case xi:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case ki:n.isNotice=!0}}}))},dn),_i={rewards:[],isRequesting:!1},Ri=((pn={}).dailyRewards=function(e,t){return void 0===e&&(e=_i),(0,nn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},pn),Mi=(0,$t.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=an),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===tn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=mn),(0,nn.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case tn.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case tn.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case tn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=gn),(0,nn.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case tn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case tn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},yn,bn,wn,si,li,gi,Ci,Oi,Ri)),Bi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Ni=$t.qC,Li=function(e){Bi&&(Ni=Bi({trace:!0,traceLimit:25})||$t.qC);var t=Ni((0,$t.md)(en.Z));return(0,$t.MT)(Mi,e,t)},Gi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Qt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Li({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Fi=Gi,Zi=n(75933),Ui=n.n(Zi),Vi=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,c.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Ui().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r='@font-face { font-family: "'+n+'"; src: url("./resource/v1/assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';s.insertRule(r,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Yi=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.addFont=function(e){var t=new Vi(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Hi=Yi,Wi=n(2938),Ki=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.defaultRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,Wi.D)((function(){n.resize(),FBInstant.updateSizeBannerAds()}),300),n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,h=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=h,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}}))},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.defaultRatio=this.worldWidth/this.worldHeight,this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.defaultRatio=this.worldWidth/this.worldHeight,this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},n.getDefaultRatio=function(){return this.defaultRatio},t}(Phaser.Plugins.BasePlugin),zi=Ki,Xi=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||fn.contextId,this.contextType=t||fn.contextType,this.entryPointData=n||fn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ji=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Ji={score:0,settings:(0,r.Z)({},ge),userGuideDisplays:0,customFields:{diamond:300,lastReceiveGift:0}},qi=Ji.userGuideDisplays,Qi=Ji.customFields,$i=Ji.settings,ea=function(){function e(e){this.data=void 0;var t=e.settings,n=e.score,i=e.customFields,a=e.userGuideDisplays,s=GameCore.Utils.Valid.isNumber(n)&&n>0?n:0,r=GameCore.Utils.Valid.isNumber(a)?a:qi,o=GameCore.Utils.Valid.isObject(i)?i:Qi,c=$i;GameCore.Utils.Valid.isObject(t)&&(c=new Ce(t).toObject()),this.data={score:s,userGuideDisplays:r,settings:c,customFields:o}}return e.prototype.toObject=function(){return this.data},e}(),ta="share_invite",na="tournament",ia="challenge_friend_match",aa="matching_group_match",sa=n(90143),ra=new qe.Z("10","Your Friend",sa.Z.AVATAR.FILE).toObject(),oa="single",ca="challenge-friends",ha="matching-group",la="tournaments",ua="journey",da=(0,j.P1)([function(e){return e.context}],(function(e){return e})),pa=(0,j.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),ma=function(e,t){return{type:tn.fJ,payload:{contextId:e,contextType:t}}},fa=function(e){return function(t){t({type:tn.EH,payload:{gameMode:e}}),(0,a.sw)("game-mode",e)}},ga=n(87339),va=GameCore.Configs.PlayerDataStore,ya=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new Xi(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:tn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=function(){var e=t.getPlayerInfo(),n=t.getPlayerDataLocal();console.log("playerInfo ============== ",e,n),t.game.player.receiveData(e,n)},this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new ji(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new qe.Z(e,t,n,i).toObject()}catch(a){return new qe.Z("123","You").toObject()}},this.getPlayerDataLocal=function(){try{var e=(0,ga.Th)(va);return console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa ============== ",va,e),GameCore.Utils.Valid.isObject(e)?new ea(e).toObject():null}catch(t){return console.warn(t),null}},this.game=e},Sa=n(58123),Ea=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return _t()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=ie()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),ba={en:JSON.parse('{"Text":{"empty_{X}":"empty_{X}"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}')},Aa=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:ba,locale:"en",upperCaseText:!1},t))},t}(Ea),Ca=Aa,Ia=[Wt._.BUTTON_CLICK,Wt._.SCREEN_OPEN],wa=function(e){function t(t,n,i){var a;return(a=e.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,a.game=t,a.selfLog=!!i,a}(0,c.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){var i;if(!(_t()(Ia).call(Ia,e)>=0)){var a=this.getEventName(e),s={};w()(i=ie()(t||{})).call(i,(function(e){t&&"string"===typeof t[e]&&(s[e]=t[e])})),FBInstant.logEvent(a,n,s)}},n.processPageView=function(e){},n.processLevelStart=function(e,t,n){this.processEvent(Wt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Wt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Wt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Wt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowInterstitialAd=function(e){this.processEvent(Wt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e})},n.processShowRewardedVideoAd=function(e){this.processEvent(Wt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Wt._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.getEventName=function(e){return this.options.prefix+"_"+e},t}(GameCore.Analytics.BaseAnalytics),Ta=wa,Pa=[Wt._.SCREEN_OPEN],xa=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,c.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(_t()(Pa).call(Pa,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Wt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Wt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Wt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Wt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowInterstitialAd=function(e){this.processEvent(Wt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(Wt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(Wt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(Wt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Wt._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.processPageView=function(e){var t="/"+this.getGameplayMode()+"/"+e;this.currentPath=t,gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return pa(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},t}(GameCore.Analytics.BaseAnalytics),ka=xa,Da="G-1NFBBDDW51",Oa="UA-261518513-12",_a=(GameCore.Configs.Match,function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,S()(t=[this]).call(t,s))||this).startGame=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:n.configureSentry(),n.configureRollbar(),n.detectGameMode(),n.initGoogleAnalytics(),n.initFacebookAnalytics(),n.analytics.event(Wt._.LOAD_START),n.scene.launch(Sa.C.GLOBAL_SCENE),n.scene.start(Sa.C.LOAD_SCENE),n.analytics.pageview(Sa.C.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,a.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Sa.C.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,c.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame(),this.ads.showBannerAdAsync().catch((function(e){console.warn(e)}))},n.configureSentry=function(){var e=this.player.getPlayer();(0,a.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){this.storage.dispatch((function(e,t){var n,i=t(),a=da(i),s=window.game.player.getPlayerId(),r=a.contextId,o=a.entryPointData||{},c=o.type,h=o.matchId,l=o.playerId,u=o.opponentId,d=void 0===u?ra.playerId:u,p=o.tournamentContextId,m=s===l,f=d===ra.playerId||_t()(n=[d,l]).call(n,s)>=0,g=oa;!r||void 0!==c&&c!==na||(g=la),c===na&&p&&(g=la),r&&c===ta&&!m&&(g=ca),h&&r&&f&&c===ia&&(g=ca),r&&c===aa&&(g=ha),e(fa(g))}))},n.initGoogleAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new ka(this.game,{userId:e,trackingId:Oa,measuringId:Da,version:"1"}))},n.initFacebookAnalytics=function(){var e=GameCore.Configs.Analytics.FacebookAnalytics||{},t=e.prefix,n=e.consoleLog;"string"===typeof t?this.analytics.add(new Ta(this.game,t,n)):console.error("FacebookAnalytics: prefix is not defined")},t}(Phaser.Scene)),Ra=_a,Ma=n(20468),Ba=n(58644),Na=[{key:"level-0",mapJson:"assets/json/levels/basemap.json"}],La=1;La<=150;La++)Na.push({key:"level-"+La,mapJson:"assets/json/levels/level-"+La+".json"});var Ga,Fa=Na,Za=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Ua=Za,Va={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins",GAME_OVER:"game-over"},Ya="global",Ha="friend",Wa=GameCore.Configs,Ka=Wa.ApiHost,za=Wa.OtherHost,Xa=Wa.LeadersBoard,ja=Xa.Prefix,Ja=Xa.LeaderboardId,qa=Xa.Name,Qa=ja+"/"+Ja+"/leaders",$a=ja+"/"+Ja+"/players",es=function(e){var t="";return Ja?(e===Ya?t=Qa:e===Ha&&(t=$a),t):t},ts=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,Ze("players?"+s,{},Ka);case 5:return o=e.sent,c=w()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ns=(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Ja){e.next=3;break}return e.abrupt("return",ns(t));case 3:return e.abrupt("return",is(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=es(Ya)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Ze(i+"?"+a,{},za);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",ts(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),is=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(qa);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),as=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Ja){e.next=3;break}return e.abrupt("return",ss(t));case 3:return e.abrupt("return",rs(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ss=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=es(Ha)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Ze(i+"?"+a,{},za);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",ts(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rs=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(qa);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),os=(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Ja){e.next=2;break}return e.abrupt("return",os(t));case 2:return e.abrupt("return",cs());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=es(Ha)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,Ze(i+"?"+a,{},za);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,ts(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),cs=function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(qa);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hs=function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Ja){e.next=2;break}return e.abrupt("return",ls(t,n));case 2:return e.abrupt("return",us(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ls=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("leaderboards/"+Ja+"/players/"+t,{score:n},{},za);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),us=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(qa);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ds=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),ps=ds,ms=function(e){return e[Tn]},fs=(0,j.P1)([function(e){return ms(e).gameplay.mode}],(function(e){return e})),gs=((0,j.P1)([function(e){return ms(e).gameplay.status}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).gameplay.rescued}],(function(e){return e}))),vs=(0,j.P1)([function(e){return ms(e).gameplay.startAt}],(function(e){return e})),ys=(0,j.P1)([function(e){return ms(e).gameplay.finishAt}],(function(e){return e})),Ss=n(47475),Es=n.n(Ss),bs=GameCore.Configs,As=bs.AppId,Cs=bs.OtherHost,Is=bs.LeadersBoard,ws=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:As,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!Is.UseMock){e.next=5;break}return e.next=4,(0,_e.qZ)(1e3);case 4:return e.abrupt("return",(0,r.Z)({},n,t,{_id:Is.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,Ue("leaderboards",(0,r.Z)({},n,t),{},Cs);case 8:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ts=(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,a,s,r,o,c,h,u,d,p,m,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!Is.UseMock){e.next=7;break}return e.next=5,(0,_e.qZ)(1e3);case 5:return o=(r=n).limit,c=void 0===o?10:o,h=r.offset,u=void 0===h?0:h,e.abrupt("return",w()(a=Es()(s=new Array(c)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(u+1);return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())}})));case 7:return d=GameCore.Utils.String.params(n),p="leaderboards/"+t+"/leaders",e.next=11,Ze(p+"?"+d,{},Cs);case 11:if((m=e.sent)&&(null==m||!m.error)){e.next=14;break}throw new Error((null==m?void 0:m.error)||"Leaderboard not found");case 14:if(!((f=(null==m?void 0:m.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=f,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("leaderboards/"+t+"/players/"+n,{score:i},{},Cs);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()),Ps=GameCore.Configs.Tournament.UseLeaderboard,xs=function(e){return{type:ri,payload:{tournamentId:e}}},ks=function(e){return{type:ci,payload:{score:e}}},Ds=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game.facebook,i=t.playerId,s=t.playerName,r=t.score,o=t.autoStartGame,c=s+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),u={playerId:i,playerName:s,leaderboardId:h},e.next=8,n.createTournamentAsync(r,u);case 8:return d=e.sent,p=d.getID(),o&&(window.game.storage.dispatch(xs(p)),window.game.storage.dispatch(Oo())),e.next=13,ws({_id:h,createdBy:i,name:p,description:c,expireTime:6048e5});case 13:if(e.sent._id!==h){e.next=17;break}return e.next=17,Ts(h,i,r);case 17:e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(0),"INVALID_OPERATION"!==(null==e.t0?void 0:e.t0.code)){e.next=23;break}throw new Error("Tournament is not available");case 23:(0,a.tO)(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),Os=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.facebook,a=n.player,e.next=3,_s();case 3:return s=e.sent,r=a.getPlayer(),o=r.playerId,c=r.name,s&&Ts(s,o,t),e.next=8,i.tournament.shareAsync({score:t,data:{type:na,playerId:o,playerName:c}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_s=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Rs=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n,i){var a,s,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i(),r=fs(s),le()(a=[oa,la]).call(a,r)){t.next=4;break}return t.abrupt("return");case 4:if(n({type:oi,payload:{}}),!Ps){t.next=10;break}return t.next=8,Ms(e);case 8:t.next=12;break;case 10:return t.next=12,Zs(e);case 12:n(ks(e));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ms=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getPlayer(),r=s.playerId,o=s.name,e.prev=2,e.next=5,a.getTournamentAsync();case 5:return e.next=7,Os(t);case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=15;break}return c={playerId:r,playerName:o,score:t,autoStartGame:!1},e.next=15,Ds(c);case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}}),e,null,[[2,9,15,17]])})));return function(t){return e.apply(this,arguments)}}(),Bs=0,Ns=!1,Ls=0,Gs=!1,Fs=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(Gs||Ls>1)&&Math.random()<.5},Zs=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(Ns||Bs>1){e.next=12;break}return Bs+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:Ns=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(Fs(t,s)){e.next=21;break}return e.abrupt("return");case 21:return Ls+=1,e.next=24,a.createTournamentAsync(t).then((function(){Gs=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),Us=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Vs=Us,Ys=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Hs=Ys,Ws={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},Ks=function(e,t){return t.playerId},zs=((0,j.P1)([function(e){return ms(e).match.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).match.single}],(function(e){return e}))),Xs=(0,j.P1)([function(e){return ms(e).match.single._id}],(function(e){return e})),js=(0,j.P1)([function(e){return ms(e).match.single.score}],(function(e){return e||0})),Js=((0,j.P1)([function(e){return ms(e).match.single.level}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=ms(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=ms(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,j.P1)([function(e){return ms(e).match.single.status}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).match.single.playerId}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).match.challenge}],(function(e){return e}))),qs=(0,j.P1)([function(e){return ms(e).match.challenge._id}],(function(e){return e})),Qs=(0,j.P1)([function(e){return ms(e).match.challenge.status}],(function(e){return e})),$s=(0,j.P1)([function(e){return ms(e).match.challenge.opponentInfo}],(function(e){return e})),er=((0,j.P1)([function(e){return ms(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,j.P1)([Js,Ks],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,j.P1)([Js,Ks],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ra.playerId}))),tr=(0,j.P1)([Js,Ks],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),nr=(0,j.P1)([Js,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),ir=(0,j.P1)([function(e){return ms(e).match.group.opponentInfo}],(function(e){return e})),ar=((0,j.P1)([function(e){return ms(e).match.online.players}],(function(e){return e})),(0,j.P1)([function(e){return ms(e).match.journey}],(function(e){return e}))),sr=(0,j.P1)([function(e){return ms(e).match.journey._id}],(function(e){return e})),rr=(0,j.P1)([function(e){return ms(e).match.journey.level}],(function(e){return e})),or=(0,j.P1)([function(e){return ms(e).stats.data}],(function(e){return e})),cr=(0,j.P1)([function(e){return ms(e).stats.current}],(function(e){return e})),hr=((0,j.P1)([function(e){return ms(e).stats.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return e.messages.data}],(function(e){return e}))),lr=(0,j.P1)([hr,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),ur=n(26729),dr=new(n.n(ur)()),pr=n(8712),mr=n.n(pr),fr=function(e){if("string"!==typeof e||!e)throw new Hs(null,{imageShare:e})},gr=function(){return(0,o.Z)(l().mark((function e(){var t,n,i,s,r,o,c,h,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,s=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,vr();case 5:return o=e.sent,fr(o),c=n.getPlayer(),h=c.playerId,u=c.name,d=c.photo,e.next=10,s.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:h,playerName:u,playerPhoto:d,type:ta}});case 10:i.event(Wt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(Wt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,a.tO)(e.t0);case 17:return e.prev=17,r.screen.close(Ba.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},vr=function(){var e=(0,o.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,h=Sr({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:h},e.next=10,i.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yr=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=or(t),r=i.getPlayer(),o=r.playerId,c=r.photo,h=s[o]||{},u=h.score,d=Sr({playerId:o,playerPhoto:c,playerScore:u})){e.next=8;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:100,y:220,image:a,width:140,height:140,fallbackWithImage:sa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScore:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#f4a528",text:""+r,textAlign:"center"}}},Er=(function(){var e=(0,o.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h,u,d,p,m,f,g,v,y,S,E,b;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(h=n.getConnectedPlayerIds(99,0)).push(r),u=[],e.next=7,as({playerIds:GameCore.Utils.Array.unique(h),limit:h.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),m={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(m=p[r]),u.push(m),e.t0=mr()(l()).call(l(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(f=e.t1.value,!GameCore.Utils.Object.hasOwn(p,f)){e.next=25;break}if(g=p[f],3!==u.length){e.next=20;break}return e.abrupt("break",27);case 20:if(g.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(g.score)>Number(m.score))){e.next=24;break}return e.abrupt("continue",14);case 24:u.push(g);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(h),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),u.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,s=i.photo;u[t].name=a,u[t].photo=s}})),u.length<3)for(S=0;S<=3-u.length;)u.push({playerId:"bot"+S,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),S++;if(E=Er({playerId:r,playerName:o,playerPhoto:c,listLeaders:u})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return b={name:"share-leaderboard",width:1500,height:2e3,renderOptions:E},e.next=40,a.frameCapture.capture(b);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:258,image:a,width:525,height:525,fallbackWithImage:sa.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:456,y:1235+195*t,image:i,width:124,height:124,fallbackWithImage:sa.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:650,y:1320+195*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1050,y:1320+195*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o}),br=function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o,c,h,u,d,p,m,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,s=i.player,r=i.analytics,o=i.facebook,c=i.globalScene,e.prev=1,c.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),h=n(),e.next=6,Ar(h);case 6:return u=e.sent,console.log("imageShare === ",u),fr(u),d=s.getPlayer(),p=d.playerId,m=d.name,f=d.photo,e.next=12,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:u||"",data:{playerId:p,playerName:m,playerPhoto:f,type:ta}});case 12:r.event(Wt._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),r.event(Wt._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,a.tO)(e.t0);case 19:return e.prev=19,c.screen.close(Ba.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()},Ar=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,m,f,g,v,y,S,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=or(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=$s(t),u=h.playerId,d=h.photo,p=tr(t,{playerId:c}),m=nr(t,{opponentId:u}),f=s[c]||{},g=f.score,v=s[u]||{},y=v.score,S=Ir({playerId:c,playerPhoto:o,playerScore:g,opponentId:u,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:m})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return E={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(E);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cr=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r,o,c,h,u,d,p,m,f,g,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=or(t),r=i.getPlayer(),o=r.photo,c=r.playerId,h=ir(t),u=h.playerId,d=h.photo,p=h.score,m=s[c]||{},f=m.score,g=Ir({playerId:c,playerPhoto:o,playerScore:f,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:g},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ir=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,h=e.opponentPhoto,l=void 0===h?"":h,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,m=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof m)return null;var f=r===d,g=r>d,v=p||m,y=p&&m,S={leftPhoto:{name:""+n,type:"image",x:92,y:150,image:a,width:140,height:140,fallbackWithImage:sa.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:720,y:150,image:l,width:140,height:140,fallbackWithImage:sa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return(v||!m&&!p&&!d&&!r)&&(S.leftScoreShadow={type:"text",x:158,y:404,font:"600 46px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:158,y:400,font:"600 46px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:790,y:404,font:"600 46px",fillStyle:"#c4683f",text:m?""+d:"???",textAlign:"center"},S.rightScore={type:"text",x:790,y:400,font:"600 46px",fillStyle:"#f2a62e",text:m?""+d:"???",textAlign:"center"}),!f&&y&&(g?S.leftCrown={name:"crown-icon",type:"image",x:118,y:82,image:"./assets/images/others/crown-icon.png",width:84,height:70}:S.rightCrown={name:"crown-icon",type:"image",x:738,y:82,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S},wr=(function(){var e=(0,o.Z)(l().mark((function e(){var t,n,i,a,s,r,o,c,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=n.getBestScore(),c=wr({playerId:s,playerPhoto:r,playerScore:o})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return h={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:100,y:220,image:a,width:140,height:140,fallbackWithImage:sa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:167,y:418,font:"600 46px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}}),Tr=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Ua(null,{contextId:t})},Pr=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Vs(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new Ua(null,{contextId:n})},xr=function(e){if(null===e.imageShare)throw new Hs},kr=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=hr(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Dr(e))}null!=(a=r[e])&&a.sent&&n(Or(e))}},Dr=function(e){return{type:tn.qj,payload:{opponentId:e}}},Or=function(e){return{type:tn.rh,payload:{opponentId:e}}},_r=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,Pr({opponentId:t,contextId:n}),(s=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,i.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,a.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Rr=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u,d,p,m,f,g,v,y;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,_r(e,d);case 5:return p=n.sent,Tr({contextId:p}),m=s(),n.next=10,Ar(m);case 10:return f=n.sent,xr({imageShare:f}),g=o.getPlayer(),v=g.name,y=g.playerId,n.next=15,h.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:v+" challenges you",localizations:{en_US:v+" challenges you",vi_VN:v+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:f||"",template:"challenge",data:{type:ia,matchId:u,playerId:y,opponentId:e,status:ei}});case 15:i(kr(e)),c.event(Wt._.MESSAGE,{message_content_type:"Invite",success:!0}),dr.emit(Ws.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),c.event(Wt._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,a.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Mr=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u,d,p,m,f,g,v,y;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,_r(e,d);case 5:return p=n.sent,Tr({contextId:p}),m=s(),n.next=10,Ar(m);case 10:return f=n.sent,xr({imageShare:f}),g=o.getPlayer(),v=g.name,y=g.playerId,n.next=15,h.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" just finished. Check them now.",localizations:{en_US:v+" just finished. Check them now.",vi_VN:v+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:f||"",template:"finished",data:{type:ia,matchId:u,playerId:y,opponentId:e,status:ti}});case 15:i(kr(e)),c.event(Wt._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),c.event(Wt._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,a.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},Br=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u,d,p,m,f,g,v,y,S,E,b,A;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,_r(e,d);case 5:return p=n.sent,Tr({contextId:p}),m=s(),n.next=10,Ar(m);case 10:return f=n.sent,xr({imageShare:f}),g=o.getPlayer(),v=g.name,y=g.playerId,S=or(m),E=S[y]||{},b=E.score,A=void 0===b?0:b,n.next=17,h.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" beat your high score. Their score: "+A,localizations:{en_US:v+" beat your high score. Their score: "+A,vi_VN:v+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+A+" \u0111i\u1ec3m!"}},image:f||"",template:"pass_score",data:{type:ia,matchId:u,playerId:y,opponentId:e,status:ti}});case 17:i(kr(e)),c.event(Wt._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Wt._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,a.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},Nr=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u,d,p,m,f,g,v,y,S;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,h=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,p=t.score,n.next=5,_r(e,d);case 5:return m=n.sent,Tr({contextId:m}),f=s(),n.next=10,Ar(f);case 10:return g=n.sent,xr({imageShare:g}),v=o.getPlayer(),y=v.name,S=v.playerId,n.next=15,h.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:y+" got "+p+" scores. So easy! Can you?",localizations:{en_US:y+" got "+p+" scores. So easy! Can you?",vi_VN:y+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:g||"",template:"play_turn",data:{type:ia,matchId:u,playerId:S,opponentId:e,status:ei}});case 15:i(kr(e)),c.event(Wt._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(1),c.event(Wt._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof Ua)){n.next=24;break}return n.abrupt("return");case 24:(0,a.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},Lr=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o,c,h,u,d,p,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,s=i.player,r=i.facebook,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,d=cr(n),p=d.score,m={type:aa,playerId:c,playerName:h,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:h+" beats your high score. Their score: "+p+".",localizations:{en_US:h+" beats your high score. Their score: "+p+".",vi_VN:h+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:m});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,a.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Gr=function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o,c,h,u,d,p,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,s=i.player,r=i.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,h=o.name,u=o.photo,d=cr(n),p=d.score,m={type:aa,playerId:c,playerName:h,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+p+" scores. So easy! Can you?",localizations:{en_US:h+" got "+p+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:m});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,a.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Fr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Zr=GameCore.Configs.ApiHost,Ur=(function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,Ue("single-matches",t,{},Zr);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,Ze("single-matches/active",{},Zr);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,Ue(i,n,{},Zr);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,Ue(n,{},{},Zr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,Ue("matches",{opponentPlayerId:t},{},Zr);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Vr=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,Ue(n,{},{},Zr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yr=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,Ze(n,{},Zr);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hr=function(){var e=(0,o.Z)(l().mark((function e(t,n,i,a){var s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,Ue(s,{matchId:t,score:n,level:i,extraData:a},{},Zr);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Wr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Kr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),zr=Kr,Xr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),jr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Jr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),qr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Qr=function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new Fr(null,{matchId:t});if("number"!==typeof n)throw new Jr(null,{score:n})},$r=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Fr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Fr(null,{currentMatchId:n});if(t!==n)throw new jr(null,{matchId:t,currentMatchId:n})},eo=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Fr(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Fr(null,{currentMatchId:n});if(t!==n)throw new jr(null,{matchId:t,currentMatchId:n})},to=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new Fr(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new Wr("This match is finished",{status:s});if(a!==t)throw new ji(null,{playerId:a,currentPlayerId:t})},no=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new zr(null,{opponentId:t})},io=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Fr(null,{matchId:t})},ao=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Fr(null,{matchId:n});if(""===i||"string"!==typeof i)throw new qr(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new Xr(null,{blackPlayerId:a})},so=GameCore.Configs.Match,ro=function(e){try{return GameCore.Utils.Hash.stringToHash(ke()(e))}catch(t){return""}},oo=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},co=function(){return function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game.player,t({type:Nn,payload:{}}),i=n.getPlayerId(),s=(0,r.Z)({},so.LocalSingleMatchDefault,{status:"active",playerId:i,startedAt:Date.now()}),to({playerId:i,match:s}),t(uo(s)),(0,ga.vk)(so.SingleMatchStore,s),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),t(uo(null)),!(e.t0 instanceof Fr)){e.next=15;break}return e.abrupt("return");case 15:if(!(e.t0 instanceof Wr)){e.next=17;break}return e.abrupt("return");case 17:(0,a.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},ho=function(e,t){return function(n,i){try{Qr((0,r.Z)({matchId:e},t));var s=i(),o=Xs(s);$r({matchId:e,currentMatchId:o}),n({type:Gn,payload:{match:t}});var c=t.data;t.data=ro(c),(0,ga.vk)(so.SingleMatchStore,t)}catch(h){if(h instanceof Fr)return;(0,a.tO)(h)}}},lo=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n,i){var s,o,c,h,u,d,p,m;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,io({matchId:e}),o=i(),c=Xs(o),h=s.getPlayerId(),eo({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=zs(o),to({playerId:h,match:u}),d=(0,r.Z)({},so.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:h,finishAt:Date.now()}),n(uo(d)),p=d.data,(m=(0,r.Z)({},d)).data=ro(p),(0,ga.vk)(so.SingleMatchStore,m),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(uo(null)),!(t.t0 instanceof Fr)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Wr)){t.next=25;break}return t.abrupt("return");case 25:(0,a.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},uo=function(e){return{type:Fn,payload:{match:e}}},po=function(){return{type:Zn,payload:{}}},mo=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n){var i,s,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.profile,i.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),r=e.playerId,no({opponentId:r}),n({type:Vn,payload:{opponentInfo:e}}),t.next=8,Ur(r);case 8:return o=t.sent,ao({match:o}),t.next=12,s.requestProfiles([r]);case 12:n(yo(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(yo(null)),!(t.t0 instanceof Fr)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof zr)){t.next=22;break}return t.abrupt("return");case 22:(0,a.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},fo=function(e){return function(){var t=(0,o.Z)(l().mark((function t(n){var i,s,r,o,c,h,u,d,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.player,r=i.profile,i.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),io({matchId:e}),n({type:Un,payload:{matchId:e}}),t.next=7,Vr(e);case 7:if(o=t.sent,ao({match:o}),c=o.status,h=o.whitePlayerId,u=o.blackPlayerId,c!==ei){t.next=16;break}return d=s.getPlayerId(),p=d===h?u:h,t.next=16,r.requestProfiles([p]);case 16:n(yo(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(yo(null)),!(t.t0 instanceof Fr)){t.next=24;break}return t.abrupt("return");case 24:(0,a.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},go=function(e,t,n){return void 0===n&&(n=!0),function(){var i=(0,o.Z)(l().mark((function i(s){var r,o,c,h,u,d,p,m,f,g;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r=window.game,o=r.player,c=r.globalScene,n&&c.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),io({matchId:e}),s({type:Hn,payload:{matchId:e,opponentInfo:t}}),i.next=7,Yr(e);case 7:h=i.sent,ao({match:h}),u=h.whitePlayerId,d=h.whitePlayerScore,p=h.blackPlayerScore,m=o.getPlayerId(),f=o.getPlayerData(),g=f.score,s(yo(h,{score:m===u?d:p,bestScore:g})),i.next=23;break;case 17:if(i.prev=17,i.t0=i.catch(0),s(yo(null)),!(i.t0 instanceof Fr)){i.next=22;break}return i.abrupt("return");case 22:(0,a.tO)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[0,17]])})));return function(e){return i.apply(this,arguments)}}()},vo=function(e,t,n){return function(){var i=(0,o.Z)(l().mark((function i(s){var r,o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,window.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),io({matchId:e}),s({type:Yn,payload:{matchId:e,score:t,extraData:n}}),r=n.level,i.next=8,Hr(e,t,r,n);case 8:return o=i.sent,ao({match:o}),i.next=12,s(yo(o));case 12:i.next=20;break;case 14:if(i.prev=14,i.t0=i.catch(0),s(yo(null)),!(i.t0 instanceof Fr)){i.next=19;break}return i.abrupt("return");case 19:(0,a.tO)(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(e){return i.apply(this,arguments)}}()},yo=function(e,t,n){return void 0===n&&(n=null),{type:Wn,payload:{match:e,opponentInfo:t,current:n}}},So=function(e){return{type:zn,payload:{opponentInfo:e}}},Eo=function(e){return{type:qn,payload:{match:e}}},bo=function(e,t){return function(n,i){try{Qr((0,r.Z)({matchId:e},t));var s=i(),o=sr(s);$r({matchId:e,currentMatchId:o}),n({type:Qn,payload:{match:t}});var c=t.data;t.data=ro(c);var h=window.game.player;(0,ga.vk)(so.JourneyMatchStore+"-"+h.getPlayerId(),t)}catch(l){if(l instanceof Fr)return;(0,a.tO)(l)}}},Ao=function(){return function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,s,o,c,h,u,d,p,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),s=i.playerId,e.prev=2,t({type:Ln,payload:{}}),e.next=6,window.FBInstant.player.getDataAsync(["level"]);case 6:o=e.sent,c=o.level,h=(0,ga.Th)(so.JourneyMatchStore+"-"+s)||{},u=h.data,d=h.level,h.data=oo(u),c!==d&&(h.data={}),p=c||1,m=(0,r.Z)({},h,{level:p,playerId:s}),t({type:Qn,payload:{match:m}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),(0,a.tO)(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},Co=function(e){return{type:Rn,payload:{playerId:e}}},Io=function(e,t){return{type:Mn,payload:{playerId:e,stats:t}}},wo=function(e){return{type:Bn,payload:{stats:e}}},To=GameCore.Configs.Match,Po=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Ua(null,{contextId:t})},xo=null,ko=function(e){clearTimeout(xo),xo=setTimeout((function(){window.game.globalScene.screen.close(Ba.o4.NOTIFY_SCREEN)}),e)},Do=function(){return{type:Pn,payload:{}}},Oo=function(){return function(e){try{e(po()),e(Zo(la))}catch(t){(0,a.tO)(t)}}},_o=function(){return function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,window.game.facebook.getTournamentAsync();case 4:return t(Oo()),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(1);case 10:t(po()),t(Zo(oa)),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),(0,a.tO)(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14],[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Ro=function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),s=n(),r=fs(s),_t()(i=[oa,la]).call(i,r)>=0&&(t(po()),t(co())),o=null,r===ca&&(o=$s(s),t({type:Kn,payload:{}})),t(Co()),e.next=11,t(Zo(r,o));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,a.tO)(e.t0);case 16:return e.prev=16,ko(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()},Mo=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(Bo("reset",e,t))}catch(i){(0,a.tO)(i)}}},Bo=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var i=(0,o.Z)(l().mark((function i(s){var r,o,c,h,u,d,p,m,f,g,v,y,S,E,b,A,C;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,r=window.game,o=r.player,c=r.facebook,(h=r.globalScene).screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),u=e,d=c.contextType,t||(p=GameCore.Configs.PlayerIdMock,m=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===p?m:p),e){i.next=15;break}return i.next=9,c.chooseAsync();case 9:if(!1!==(u=i.sent)){i.next=13;break}return n&&h.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),i.abrupt("return");case 13:i.next=25;break;case 15:if(!t||t===ra.playerId){i.next=23;break}return i.next=18,c.createAsync(t);case 18:if(!1!==(u=i.sent)){i.next=22;break}return n&&h.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),i.abrupt("return");case 22:u||"reset"===e||(u=e);case 23:d=c.contextType,s(ma(u,d));case 25:return Po({contextId:u}),f=o.getPlayerId(),g=o.getConnectedPlayers(),i.next=30,c.getContextPlayers(f);case 30:return v=i.sent,t!==(y=ra).playerId&&g[t]?y=g[t]:1===v.length&&(y=v[0]),s(Co()),E=(S=y).playerId,b=S.name,A=S.photo,C={playerId:E,name:b,photo:A},i.next=38,s(Zo(ca,C));case 38:s(ma(u,d)),i.next=50;break;case 41:if(i.prev=41,i.t0=i.catch(0),!(i.t0 instanceof Ua)){i.next=45;break}return i.abrupt("return");case 45:if("USER_INPUT"!==(null==i.t0?void 0:i.t0.code)){i.next=47;break}return i.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==i.t0?void 0:i.t0.code)){i.next=49;break}return i.abrupt("return");case 49:(0,a.tO)(i.t0);case 50:return i.prev=50,ko(1e3),i.finish(50);case 53:case"end":return i.stop()}}),i,null,[[0,41,50,53]])})));return function(e){return i.apply(this,arguments)}}()},No=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,o,c,h,u,d,p,m,f,g,v,y,S,E,b;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.profile,h=r.facebook,(u=r.globalScene).screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),d=s(),p=o.getPlayerId(d),!((m=o.getConnectedPlayers(d)).length>0)||m[t]){n.next=9;break}return u.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),n.abrupt("return");case 9:return f=ra,n.next=12,h.getContextPlayers(p);case 12:if(g=n.sent,t===p||t===f.playerId||!m[t]){n.next=17;break}f=m[t],n.next=25;break;case 17:if(1!==g.length){n.next=21;break}f=g[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(v=c.getProfiles())[t]&&(f=v[t]);case 25:return console.log("opponentInfo= === ",f),n.next=28,i(go(e,f));case 28:if(d=s(),er(d,{playerId:p})!==ra.playerId){n.next=33;break}return n.next=33,i(fo(e));case 33:if(d=s(),er(d,{playerId:p})===p||!m[t]){n.next=38;break}return i(Mo(t,!0)),n.abrupt("return");case 38:if(qs(d)===e){n.next=42;break}return u.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),n.abrupt("return");case 42:if(y=Qs(d),S=tr(d,{playerId:p}),i(Vo({mode:ca,status:y})),E=h.getContextID(),b=h.contextType,i(ma(E,b)),!S){n.next=53;break}return n.next=51,o.requestConnectedPlayers();case 51:return u.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE),n.abrupt("return");case 53:u.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE),n.next=59;break;case 56:n.prev=56,n.t0=n.catch(0),(0,a.tO)(n.t0);case 59:return n.prev=59,ko(1e3),n.finish(59);case 62:case"end":return n.stop()}}),n,null,[[0,56,59,62]])})));return function(e,t){return n.apply(this,arguments)}}()},Lo=function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game,s=i.analytics,c=i.facebook,h=i.globalScene,u=c.getContextID(),d=n(),p=rr(d)||1,s.event(Wt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(ua),level:p}),t(Do()),d=n(),sr(d)){e.next=12;break}return e.next=12,t(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,o,c,h,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=window.game,s=i.player,i.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:Jn,payload:{}}),o=n(),c=rr(o)||1,h=s.getPlayerId(),u=(0,r.Z)({},so.LocalSingleMatchDefault,{level:c,status:"active",playerId:h,startedAt:Date.now()}),to({playerId:h,match:u}),t(Eo(u)),(0,ga.vk)(so.JourneyMatchStore+"-"+h,u),e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(0),t(Eo(null)),!(e.t0 instanceof Fr)){e.next=18;break}return e.abrupt("return");case 18:if(!(e.t0 instanceof Wr)){e.next=20;break}return e.abrupt("return");case 20:(0,a.tO)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:t({type:xn,payload:{mode:ua,contextId:u}}),h.events.emit(Sa.K.SWITCH,Sa.C.JOURNEY_SCENE),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(0),!(e.t0 instanceof Fr)){e.next=22;break}return window.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),e.abrupt("return");case 22:(0,a.tO)(e.t0);case 23:return e.prev=23,ko(0),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,16,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},Go=function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,c,h,u,d,p,m,f,g,v,y,S,E,b,A,C,I,w,T,P,x,k,D;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,s=i.analytics,r=i.facebook,i.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=n(),h=fs(c),u=cr(c),d=u.score,p=void 0===d?0:d,m=u.level,f=void 0===m?0:m,g=u.bestScore,setTimeout((function(){t(Rs(p))}),g<p?2e3:0),t(Fo(p)),e.next=11,t(Uo(h,{score:p}));case 11:if(c=n(),v=vs(c),y=ys(c),S=Math.floor((y-v)/1e3),s.event(Wt._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(h),level:f,level_name:"level_"+f,time_played:S}),E=r.getContextID(),h===ha&&E&&t(function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,s,r,o,c,h,u,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game.analytics,e.prev=1,s=FBInstant.context.getID(),Tr({contextId:s}),r=n(),o=ir(r),c=o.playerId,h=o.score,u=cr(r),d=u.score,!c||c===ra.playerId){e.next=25;break}if(!(d>h)){e.next=18;break}return e.next=13,Cr(r);case 13:return p=e.sent,e.next=16,Lr(p,r);case 16:e.next=23;break;case 18:return e.next=20,yr(r);case 20:return p=e.sent,e.next=23,Gr(p,r);case 23:e.next=30;break;case 25:return e.next=27,yr(r);case 27:return p=e.sent,e.next=30,Gr(p,r);case 30:xr({imageShare:p}),i.event(Wt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),i.event(Wt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,a.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!E||h!==ca){e.next=27;break}if(b=$s(c),(A=b.playerId)&&A!==ra.playerId){e.next=22;break}return e.abrupt("return");case 22:C=or(c),I=C[A]||{},w=I.score,T=void 0===w?0:w,P=Js(c),x=P._id,k=P.whitePlayerFinish,D=P.blackPlayerFinish,t(k&&D?p>T?Br(A,{matchId:x,contextId:E}):Mr(A,{matchId:x,contextId:E}):Nr(A,{matchId:x,contextId:E,score:p}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),(0,a.tO)(e.t0);case 32:return e.prev=32,ko(300),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}()},Fo=function(e){return function(t){try{var n=window.game.player,i=n.getPlayerId();hs(i,e).catch((function(e){(0,a.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setBestScore(e);var h={score:e,level:c};t(Io(i,h)),t(wo(h))}catch(l){if(l instanceof ps)return;(0,a.tO)(l)}}},Zo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,o.Z)(l().mark((function n(i,s){var r,c,h,u,d,p,m,f,g,v,y,S,E,b,A,C,I,w,T;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,h=c.player,u=c.analytics,d=c.facebook,p=c.globalScene,m=d.getContextID(),f=0,g=s(),u.event(Wt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),i(Do()),-1===_t()(r=[oa,la]).call(r,e)){n.next=16;break}return n.next=10,i((function(e){try{var t=window.game.player;e({type:Ln,payload:{}});var n=t.getPlayerId(),i=(0,ga.Th)(so.SingleMatchStore)||{},s=i.data;i.data=oo(s),to({playerId:n,match:i}),e(uo(i))}catch(r){if(e(uo(null)),r instanceof Fr)return;if(r instanceof ji)return;if(r instanceof Wr)return;(0,a.tO)(r)}}));case 10:if(g=s(),Xs(g)){n.next=15;break}return n.next=15,i(co());case 15:f=js(g);case 16:if(e===ha&&i(So(t)),e!==ca){n.next=26;break}return n.next=20,i(mo(t));case 20:g=s(),v=qs(g),y=$s(g),S=y.playerId,m||(m=window.FBInstant.context.getID()),E=lr(g,{opponentId:S}),m&&S&&!E&&i(Rr(S,{contextId:m,matchId:v}));case 26:"online"===e&&i(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=s(),b=h.getPlayerData(g),A=b.score,C=void 0===A?0:A,I=zs(g),w=I.rescued,T=void 0===w?0:w,i(wo({score:f,bestScore:C})),i({type:xn,payload:{mode:e,contextId:m,rescued:T}}),i(fa(e)),p.events.emit(Sa.K.SWITCH,Sa.C.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof Fr)){n.next=43;break}return window.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 43:(0,a.tO)(n.t0);case 44:return n.prev=44,ko(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},Uo=function(e,t){return function(){var n=(0,o.Z)(l().mark((function n(i,a){var s,r,o,c,h,u,d,p,m,f,g;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game,o=r.player,r.globalScene,c=t.score,h=void 0===c?0:c,u=t.level,d=void 0===u?0:u,p=a(),!(_t()(s=[oa,la]).call(s,e)>=0)){n.next=7;break}return m=Xs(p),n.next=7,i(lo(m));case 7:if(e===ha&&(i({type:Xn,payload:{}}),f=o.getPlayerId(),i(Io(f,t))),e!==ca){n.next=12;break}return g=qs(p),n.next=12,i(vo(g,h,{level:d}));case 12:i({type:kn,payload:{mode:e}}),dr.emit(Va.GAME_OVER);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Vo=function(e){return function(t){var n=e.mode,i=e.status;t({type:Dn,payload:{mode:n,status:i}}),(0,a.sw)("game-mode",n)}},Yo=function(){return function(e,t){var n=t(),i=cr(n).level,a=void 0===i?0:i,s=fs(n);window.game.analytics.event(Wt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a}),e({type:On,payload:{}})}},Ho=n(75742),Wo=n(5281),Ko=n(54255),zo=n(62187),Xo={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},jo=function(e){function t(t){return e.call(this,Xo,t)||this}return(0,c.Z)(t,e),t}(zo.Z),Jo=(Ko.Z.DEFAULT.FRAME,function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t)||this).buttonFooter=void 0,r.textButtonFooter=void 0,r.tweenScaleButton=void 0,r.createButton(n,i,a,s),r.scene.add.existing((0,Wo.Z)(r)),r}(0,c.Z)(t,e);var n=t.prototype;return n.createButton=function(e,t,n,i){this.buttonFooter=this.scene.make.image({key:e,frame:t}),this.buttonFooter.setWorldSize(n,i),this.add(this.buttonFooter)},n.createText=function(e,t,n,i){this.textButtonFooter=this.scene.make.image({key:e,frame:t}),this.textButtonFooter.setWorldSize(n,i),this.add(this.textButtonFooter),Phaser.Display.Align.In.Center(this.textButtonFooter,this.buttonFooter,0,27)},n.setFrameButton=function(e){this.buttonFooter.setFrame(e)},n.setFrameText=function(e){this.textButtonFooter.setFrame(e)},n.playTweenClickButton=function(){var e,t,n=this.buttonFooter.scale;null!=(e=this.tweenScaleButton)&&null!=(t=e.tween)&&t.isPlaying()||(this.tweenScaleButton=new jo({targets:[this.buttonFooter],duration:150,props:{scale:{from:n,to:n-.1}}}),this.tweenScaleButton.play())},(0,W.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container)),qo=Jo,Qo=Ko.Z.DEFAULT,$o=Qo.KEY,ec=Qo.FRAME,tc=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttonModeDice=void 0,n.buttonAdventure=void 0,n.textLeaderBoard=void 0,n.textModeDice=void 0,n.textAdventure=void 0,n.tweenScaleButton=void 0,n.createBackground(),n.createButtons(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.ads.getBannerHeight(),t=this.scene.make.image({key:$o,frame:ec.BOTTOM_PANEL_TOP,origin:{x:.5,y:1}});t.setDepth(Ma.Z.BACKGROUND),t.setWorldSize(375,12);var n=this.scene.make.image({key:$o,frame:ec.BOTTOM_PANEL_BOT,origin:{x:.5,y:1}});n.setDepth(Ma.Z.BACKGROUND),n.setWorldSize(375,95+e),this.add([n,t]),Phaser.Display.Align.In.TopCenter(t,n,0,12)},n.createButtons=function(){this.createButtonModeDice(),this.createButtonAdventure()},n.createButtonModeDice=function(){var e=this.scene.ads.getBannerHeight();this.buttonModeDice=new qo(this.scene,$o,ec.ICON_MODE_DICE_ON,54,40),this.buttonModeDice.setSize(94,70),this.buttonModeDice.createText($o,ec.TEXT_MODE_DICE_ON,52,11),this.add(this.buttonModeDice),Phaser.Display.Align.In.Center(this.buttonModeDice,this,-70,-58-e)},n.createButtonAdventure=function(){var e=this.scene.ads.getBannerHeight();this.buttonAdventure=new qo(this.scene,$o,ec.ICON_ADVENTURE_OFF,49,35),this.buttonAdventure.setSize(94,70),this.buttonAdventure.createText($o,ec.TEXT_ADVENTURE_OFF,56,11),this.add(this.buttonAdventure),Phaser.Display.Align.In.Center(this.buttonAdventure,this,70,-58-e)},n.clickButtonLeaderBoard=function(){this.buttonModeDice.setFrameButton(ec.ICON_MODE_DICE_OFF),this.buttonModeDice.setFrameText(ec.TEXT_MODE_DICE_OFF),this.buttonAdventure.setFrameButton(ec.ICON_ADVENTURE_OFF),this.buttonAdventure.setFrameText(ec.TEXT_ADVENTURE_OFF)},n.clickButtonModeDice=function(){this.buttonModeDice.setFrameButton(ec.ICON_MODE_DICE_ON),this.buttonModeDice.setFrameText(ec.TEXT_MODE_DICE_ON),this.buttonAdventure.setFrameButton(ec.ICON_ADVENTURE_OFF),this.buttonAdventure.setFrameText(ec.TEXT_ADVENTURE_OFF),this.buttonModeDice.playTweenClickButton()},n.clickButtonAdventure=function(){this.buttonModeDice.setFrameButton(ec.ICON_MODE_DICE_OFF),this.buttonModeDice.setFrameText(ec.TEXT_MODE_DICE_OFF),this.buttonAdventure.setFrameButton(ec.ICON_ADVENTURE_ON),this.buttonAdventure.setFrameText(ec.TEXT_ADVENTURE_ON),this.buttonAdventure.playTweenClickButton()},t}(Phaser.GameObjects.Container),nc=tc,ic=n(22438),ac=Ko.Z.DEFAULT,sc=ac.KEY,rc=ac.FRAME,oc=function(e){function t(t){var n;return(n=e.call(this,t,sc,rc.MINOR_BUTTON)||this).button.setWorldSize(41,37),n.setName("Setting"),n.createIcon(),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:sc,frame:rc.ICON_SETTING});e.setWorldSize(25,24),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ic.Z),cc=oc,hc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.scene=t,n.createButtons(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new cc(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,-148,30)},t}(Phaser.GameObjects.Container),lc=hc,uc=n(20402),dc=Ko.Z.DEFAULT,pc=dc.KEY,mc=dc.FRAME,fc=function(e){function t(t){var n;return(n=e.call(this,t,pc,mc.BUTTON_LIGHT)||this).button.setWorldSize(227,49),n.setName("PlayJourney"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:pc,frame:mc.ICON_PLAY});e.setWorldSize(16,21),this.add(e),Phaser.Display.Align.In.Center(e,this,-31,0)},n.createText=function(){var e=this.scene.make.image({key:pc,frame:mc.TEXT_PLAY_DASHBOARD});e.setWorldSize(47,15),this.add(e),Phaser.Display.Align.In.Center(e,this,16,1)},t}(ic.Z),gc=fc,vc=Ko.Z.DEFAULT,yc=vc.KEY,Sc=vc.FRAME,Ec=function(e){function t(t){var n;return(n=e.call(this,t,yc,Sc.BUTTON_GREEN)||this).button.setWorldSize(227,49),n.setName("PlaySolo"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:yc,frame:Sc.ICON_PLAY_SOLO});e.setWorldSize(29,29),this.add(e),Phaser.Display.Align.In.Center(e,this,-59,1)},n.createText=function(){var e=this.scene.make.image({key:yc,frame:Sc.TEXT_PLAY_SOLO});e.setWorldSize(114,16),this.add(e),Phaser.Display.Align.In.Center(e,this,21,1)},t}(ic.Z),bc=Ec,Ac="board_highlight",Cc="board_merge_dice",Ic="board_remove_highlight",wc="board_remove_dice_merged_highlight",Tc="board_check_game_over",Pc="handle_change_setting_sound",xc="handle_claim_gift",kc="best_score_screen_close",Dc="game_over_screen_close",Oc="your_score_screen_close",_c=n(27033),Rc=Ko.Z.DEFAULT,Mc=Rc.KEY,Bc=Rc.FRAME,Nc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.circle=void 0,n.textLevelJourney=void 0,n.scene=t,n.createCircle(),n.createText(),n.alignText(),n.setSize(25,24),n}(0,c.Z)(t,e);var n=t.prototype;return n.createCircle=function(){this.circle=this.scene.make.image({key:Mc,frame:Bc.CIRCLE_INACTIVE}),this.circle.setWorldSize(25,24),this.add(this.circle),Phaser.Display.Align.In.Center(this.circle,this)},n.createText=function(){this.textLevelJourney=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:"0",origin:{x:.5,y:.5}}),this.add(this.textLevelJourney),Phaser.Display.Align.In.Center(this.textLevelJourney,this.circle,-1,-2.2)},n.setText=function(e){this.textLevelJourney.setText(""+e)},n.getText=function(){return b()(this.textLevelJourney.text)},n.changeCircleActive=function(){this.circle.setFrame(Bc.CIRCLE_ACTIVE),this.circle.setWorldSize(25,24)},n.changeCircleInactive=function(){this.circle.setFrame(Bc.CIRCLE_INACTIVE),this.circle.setWorldSize(25,24)},n.alignText=function(){},n.setItemActive=function(e){console.log("wwwww",e),e?this.setTextLight():this.setTextDark()},n.setTextLight=function(){this.textLevelJourney.setTint(5318681)},n.setTextDark=function(){this.textLevelJourney.setTint(15975573)},t}(Phaser.GameObjects.Container),Lc=Ko.Z.DEFAULT,Gc=Lc.KEY,Fc=Lc.FRAME,Zc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backgroundProgress=void 0,n.iconGift=void 0,n.level=void 0,n.levelJourneyFirst=void 0,n.levelJourneySecond=void 0,n.levelJourneyThird=void 0,n.levelJourneyFourth=void 0,n.progressMid=void 0,n.progressRight=void 0,n.canClickGift=!1,n.isClaimGift=!1,n.tweenRunProgress=void 0,n.scene=t,n.createBackGround(),n.createProgressBar(),n.createLevels(),n.createTweenProgressLevel(),n.setOnClickGiftClick(),n.listenEvents(),n}(0,c.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){dr.on(xc,this.handleClaimGift.bind(this))},n.createBackGround=function(){this.backgroundProgress=this.scene.make.image({key:Gc,frame:Fc.PROGRESS_BACKGROUND}),this.backgroundProgress.setWorldSize(209,26),this.add(this.backgroundProgress),Phaser.Display.Align.In.Center(this.backgroundProgress,this,-5,-4)},n.createLevels=function(){this.levelJourneyFirst=new Nc(this.scene),this.levelJourneySecond=new Nc(this.scene),this.levelJourneyThird=new Nc(this.scene),this.levelJourneyFourth=new Nc(this.scene),this.add(this.levelJourneyFirst),this.add(this.levelJourneySecond),this.add(this.levelJourneyThird),this.add(this.levelJourneyFourth),this.iconGift=this.scene.make.image({key:Gc,frame:Fc.ICON_GIFT}),this.iconGift.setVisible(!1),this.iconGift.setWorldSize(35,40),this.add(this.iconGift),Phaser.Display.Align.In.Center(this.levelJourneyFirst,this.backgroundProgress,-91,.5),Phaser.Display.Align.In.Center(this.levelJourneySecond,this.backgroundProgress,-29.5,.5),Phaser.Display.Align.In.Center(this.levelJourneyThird,this.backgroundProgress,31.5,.5),Phaser.Display.Align.In.Center(this.levelJourneyFourth,this.backgroundProgress,93.5,.5),Phaser.Display.Align.In.Center(this.iconGift,this.backgroundProgress,98,-2)},n.updateTextLevel=function(){var e=this.scene.storage.getState();this.level=rr(e)||1;var t=this.level-(this.level-1)%4;this.levelJourneyFirst.setText(t),this.levelJourneyFirst.setItemActive(this.level>t),this.levelJourneySecond.setText(t+1),this.levelJourneySecond.setItemActive(this.level>t+1),this.levelJourneyThird.setText(t+2),this.levelJourneyThird.setItemActive(this.level>t+2),this.levelJourneyFourth.setText(t+3),this.levelJourneyFourth.setItemActive(this.level>t+3)},n.createProgressBar=function(){this.createProgressBarMid(),this.createProgressBarRight()},n.createProgressBarMid=function(){this.progressMid=this.scene.make.image({key:Gc,frame:Fc.PROGRESS_MIDDLE}),this.progressMid.setOrigin(0,.5),this.progressMid.setWorldSize(7.5,7.5),this.add(this.progressMid),Phaser.Display.Align.In.LeftCenter(this.progressMid,this.backgroundProgress,-5,1.5)},n.createProgressBarRight=function(){this.progressRight=this.scene.make.image({key:Gc,frame:Fc.PROGRESS_RIGHT}),this.progressRight.setWorldSize(7.5,7.5),this.add(this.progressRight),Phaser.Display.Align.In.RightCenter(this.progressRight,this.progressMid,7.5,0)},n.setLevelActive=function(){switch(console.log("this.level === ",this.level),this.level%4-1){case 2:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleActive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case 1:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case 0:this.levelJourneyFirst.changeCircleInactive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive(),this.levelJourneyFourth.changeCircleInactive();break;case-1:this.levelJourneyFirst.changeCircleActive(),this.levelJourneySecond.changeCircleActive(),this.levelJourneyThird.changeCircleActive(),this.levelJourneyFourth.changeCircleInactive()}},n.createTweenProgressLevel=function(){this.tweenRunProgress=this.scene.tweens.addCounter({from:0,to:1,duration:5e3,paused:!0,onUpdate:function(e){e.getValue(0)}})},n.runTweenProgressLevel=function(){this.tweenRunProgress.play()},n.setOnClickGiftClick=function(){var e=this;this.iconGift.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){e.handleClaimGift()}))},n.handleClaimGift=function(){console.log("handleClaimGift"),this.levelJourneyFirst.setText(this.levelJourneyFirst.getText()+3),this.levelJourneySecond.setText(this.levelJourneySecond.getText()+3),this.levelJourneyThird.setText(this.levelJourneyThird.getText()+3),this.progressMid.setVisible(!1),this.canClickGift=!1,this.isClaimGift=!0,this.levelJourneyFirst.alignText(),this.levelJourneySecond.alignText(),this.levelJourneyThird.alignText(),this.levelJourneyFirst.changeCircleInactive(),this.levelJourneySecond.changeCircleInactive(),this.levelJourneyThird.changeCircleInactive()},n.runAnimProgress=function(){var e=this,t=0;switch(this.level%4-1){case-1:t=150;break;case 1:t=32;break;case 2:t=92}this.scene.tweens.addCounter({delay:50,from:0,to:t,duration:300,onUpdate:function(t){var n=t.getValue(0);e.progressMid.setWorldSize(n,7.5),Phaser.Display.Align.In.RightCenter(e.progressRight,e.progressMid,7.5,0)}})},t}(Phaser.GameObjects.Container),Uc=Ko.Z.DEFAULT,Vc=Uc.KEY,Yc=Uc.FRAME,Hc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.logo=void 0,n.backGroundJourney=void 0,n.buttonPlayJourney=void 0,n.buttonPlaySolo=void 0,n.progressJourneyBar=void 0,n.tweenShowProgress=void 0,n.iconLoading=void 0,n.scene=t,n.createLogo(),n.createBackGroundJourney(),n.createProgressJourneyBar(),n.createTexts(),n.createButtons(),n.createIconLoading(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=this.scene.make.image({key:Vc,frame:Yc.LOGO}),this.logo.setWorldSize(234,120),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-167)},n.createBackGroundJourney=function(){this.backGroundJourney=this.scene.make.image({key:Vc,frame:Yc.POPUP_DASHBOARD}),this.backGroundJourney.setVisible(!0),this.backGroundJourney.setWorldSize(303,136),this.add(this.backGroundJourney),Phaser.Display.Align.In.Center(this.backGroundJourney,this,-1,-10)},n.createProgressJourneyBar=function(){this.progressJourneyBar=new Zc(this.scene),this.add(this.progressJourneyBar),this.progressJourneyBar.setVisible(!1),Phaser.Display.Align.In.Center(this.progressJourneyBar,this.backGroundJourney,0,-20)},n.createTexts=function(){this.createTextAdventure(),this.createTextClassicMode()},n.createTextAdventure=function(){var e=this.scene.make.image({key:Vc,frame:Yc.TEXT_ADVENTURE_LEVEL});e.setWorldSize(75,15),this.add(e),Phaser.Display.Align.In.Center(e,this.backGroundJourney,0,-50)},n.createTextClassicMode=function(){var e=this.scene.make.image({key:Vc,frame:Yc.TEXT_CLASSIC_MODE});e.setWorldSize(97,16),this.add(e),Phaser.Display.Align.In.Center(e,this,0,80)},n.createButtons=function(){this.createButtonPlayJourney(),this.createButtonPlaySolo()},n.createButtonPlayJourney=function(){this.buttonPlayJourney=new gc(this.scene),this.add(this.buttonPlayJourney),this.buttonPlayJourney.setVisible(!1),Phaser.Display.Align.In.Center(this.buttonPlayJourney,this.backGroundJourney,1,23)},n.createButtonPlaySolo=function(){this.buttonPlaySolo=new bc(this.scene),this.add(this.buttonPlaySolo),Phaser.Display.Align.In.Center(this.buttonPlaySolo,this,0,121)},n.createIconLoading=function(){this.iconLoading=new uc.Z(this.scene),this.add(this.iconLoading),Phaser.Display.Align.In.Center(this.iconLoading,this.backGroundJourney)},n.showLoading=function(){this.iconLoading.setVisible(!0),this.progressJourneyBar.setVisible(!1),this.buttonPlayJourney.setVisible(!1)},n.showContent=function(){this.progressJourneyBar.setVisible(!0),this.buttonPlayJourney.setVisible(!0),this.runAnimShow()},n.runAnimShow=function(){var e=this;this.tweenShowProgress=this.scene.tweens.add({targets:[this.progressJourneyBar,this.buttonPlayJourney],duration:300,ease:Phaser.Math.Easing.Quartic.In,props:{scale:{from:0,to:1,start:0}},paused:!0,onComplete:function(){e.iconLoading.setVisible(!1),e.progressJourneyBar.updateTextLevel(),e.progressJourneyBar.setLevelActive(),e.progressJourneyBar.runAnimProgress()}}),this.progressJourneyBar.setScale(0),this.buttonPlayJourney.setScale(0),this.tweenShowProgress.play()},t}(Phaser.GameObjects.Container),Wc=Hc,Kc=Ko.Z.DEFAULT,zc=Kc.KEY,Xc=Kc.FRAME,jc=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).popupTop=void 0,o.popupMiddle=void 0,o.popupBottom=void 0,o.payload=void 0,o.payload=r,o.setSize(a,s),o.createBackground(),o.setSizePopup(),o.alignPopup(),o.scene.add.existing((0,Wo.Z)(o)),o}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e,t,n;this.popupTop=this.scene.make.image({key:zc,frame:(null==(e=this.payload)?void 0:e.frameTop)||Xc.POPUP_TOP}),this.add(this.popupTop),this.popupBottom=this.scene.make.image({key:zc,frame:(null==(t=this.payload)?void 0:t.frameBottom)||Xc.POPUP_BOTTOM}),this.add(this.popupBottom),this.popupMiddle=this.scene.make.image({key:zc,frame:(null==(n=this.payload)?void 0:n.frameMiddle)||Xc.POPUP_MIDDLE}),this.add(this.popupMiddle)},n.setSizePopup=function(){var e=this.width*this.popupTop.height/this.popupTop.width,t=this.width*this.popupBottom.height/this.popupBottom.width,n=this.height-e-t;this.popupTop.setWorldSize(this.width,e),this.popupBottom.setWorldSize(this.width,t),this.popupMiddle.setWorldSize(this.width,n)},n.alignPopup=function(){var e=-this.popupMiddle.displayHeight/2-this.popupTop.displayHeight/2,t=this.popupMiddle.displayHeight/2+this.popupBottom.displayHeight/2;Phaser.Display.Align.In.Center(this.popupTop,this,0,e),Phaser.Display.Align.In.Center(this.popupBottom,this,0,t),Phaser.Display.Align.In.Center(this.popupMiddle,this)},t}(Phaser.GameObjects.Container),Jc=jc,qc=n(26108),Qc=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,c.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,c.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return C()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Es()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&w()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,W.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(qc.Z)),$c=Ko.Z.DEFAULT,eh=$c.KEY,th=$c.FRAME,nh=function(e){function t(t){var n;return(n=e.call(this,t,eh,th.BUTTON_LIGHT)||this).button.setWorldSize(227,49),n.setName("PlayJourney"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:eh,frame:th.ICON_PLAY});e.setWorldSize(16,21),this.add(e),Phaser.Display.Align.In.Center(e,this,-31,0)},n.createText=function(){var e=this.scene.make.image({key:eh,frame:th.TEXT_PLAY_DASHBOARD});e.setWorldSize(47,15),this.add(e),Phaser.Display.Align.In.Center(e,this,16,1)},t}(ic.Z),ih=nh;!function(e){e.PASSED="passed",e.READY="ready",e.WAITING="waiting"}(Ga||(Ga={}));var ah=n(4396),sh=Ko.Z.DEFAULT,rh=sh.KEY,oh=sh.FRAME,ch=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.gift=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Wo.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createImageGift(),this.createText(),this.updateSize(),this.alignLevelItem(),this.setInteractive(),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.audio.playSound(ah.Z.BUTTON_CLICK),e.tweenClick&&e.tweenClick.play()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:rh,frame:oh.ICON_CIRCLE}),this.levelBackground.setWorldSize(44,42),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageGift=function(){this.gift=this.scene.make.image({key:rh,frame:oh.ICON_GIFT_LEVEL}),this.gift.setWorldSize(19,22),this.gift.setVisible(!1),this.add(this.gift)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({text:""+this.level,font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(30)}),this.add(this.levelNumber)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case Ga.PASSED:this.levelNumber.setTint(4199946),this.levelBackground.setFrame(oh.ICON_CIRCLE_ACTIVED);break;case Ga.READY:this.setInteractive(),this.createTweenClick(),this.levelNumber.setTint(5708544),this.levelBackground.setFrame(oh.ICON_CIRCLE_ACTIVE);break;case Ga.WAITING:this.levelNumber.setTint(16377033),this.levelBackground.setFrame(oh.ICON_CIRCLE)}},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:t-.1},onComplete:function(){e.scene.handlePlay()}})},n.updateInfo=function(e){this.payload=(0,r.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){this.levelNumber.setText(""+this.payload.level),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,-1,-3)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.gift,this.levelBackground,14,15),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,-1,-3)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e,this.gift.setVisible(!1)},t}(Phaser.GameObjects.Container),hh=Ko.Z.GAMEPLAY,lh=hh.KEY,uh=hh.FRAME,dh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&(i.updateInfo(n),console.log(i.payload)),i.scene.add.existing((0,Wo.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:lh,frame:uh.BG_BLUE_DARK}),this.background.setWorldSize(265,55.5),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,r.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new ch(this.scene,{level:1,status:Ga.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-94,0),this.levelItem2=new ch(this.scene,{level:2,status:Ga.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-32,0),this.levelItem3=new ch(this.scene,{level:3,status:Ga.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,32,0),this.levelItem4=new ch(this.scene,{level:4,status:Ga.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,94,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),ph=Ko.Z.DEFAULT,mh=ph.KEY,fh=ph.FRAME,gh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.textAdventure=void 0,n.background=void 0,n.buttonPlayJourney=void 0,n.scroller=void 0,n.iconLoading=void 0,n.scene=t,n.createText(),n.createBackground(),n.createReuseScroller(),n.createButtonPlay(),n.createIconLoading(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createText=function(){this.textAdventure=this.scene.make.image({key:mh,frame:fh.TEXT_ADVENTURE_LEVEL}),this.textAdventure.setWorldSize(101,20),this.add(this.textAdventure),Phaser.Display.Align.In.Center(this.textAdventure,this,0,-286)},n.createBackground=function(){this.background=new Jc(this.scene,0,-45,265,316,{frameTop:fh.POPUP_TOP_LEVEL,frameMiddle:fh.POPUP_MIDDLE_LEVEL,frameBottom:fh.POPUP_BOTTOM_LEVEL}),this.add(this.background)},n.createReuseScroller=function(){this.scroller=new Qc(this.scene,{classType:dh,listConfigs:[],width:265,height:280,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ko.Z.DEFAULT.KEY,Ko.Z.DEFAULT.FRAME.BLANK,40,1528359),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller),Phaser.Display.Align.In.Center(this.scroller,this.background,0,-44)},n.updateData=function(){for(var e=1,t=this.scene.storage.getState(),n=rr(t)||1,i=[],a=[],s=1;s<Fa.length+1;s++)a[s]=s>n?Ga.WAITING:s<n?Ga.PASSED:Ga.READY;for(;;){var r={levelItem1:{level:0,status:""},levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}};if(r.levelItem1={level:e,status:a[e]},++e==Fa.length){i.push(r);break}if(r.levelItem2={level:e,status:a[e]},++e==Fa.length){i.push(r);break}if(r.levelItem3={level:e,status:a[e]},e==Fa.length){i.push(r);break}if(++e==Fa.length){i.push(r);break}r.levelItem4={level:e,status:a[e]},e++,i.push(r)}this.scroller.updateConfig(i);var o=this.scroller.getChildren()[0].height;if(this.scroller.value=-o*this.showDefaultLevel(n),n>Fa.length)return this.scene.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"UPDATING NEW LEVELS...",duration:3e3});this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.floor((e-1)/4);return t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},n.createButtonPlay=function(){this.buttonPlayJourney=new ih(this.scene),this.add(this.buttonPlayJourney),Phaser.Display.Align.In.Center(this.buttonPlayJourney,this,0,120)},n.createIconLoading=function(){this.iconLoading=new uc.Z(this.scene),this.add(this.iconLoading),Phaser.Display.Align.In.Center(this.iconLoading,this.background)},n.showLoading=function(){this.iconLoading.setVisible(!0),this.scroller.setVisible(!1)},n.showContent=function(){this.iconLoading.setVisible(!1),this.scroller.setVisible(!0),this.updateData()},t}(Phaser.GameObjects.Container),vh=gh,yh=n(20746),Sh=n(77087),Eh=n(62698),bh={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Ah=function(e){function t(t){return e.call(this,bh,t)||this}return(0,c.Z)(t,e),t}(zo.Z),Ch=Ko.Z.DEFAULT,Ih=Ch.KEY,wh=Ch.FRAME,Th=function(e){function t(t,n,i,a,s,r){var o;return(o=e.call(this,t,n,i)||this).top=void 0,o.mid=void 0,o.bottom=void 0,o.payload=void 0,o.buttonClose=void 0,o.title=void 0,o.titleContainer=void 0,o.payload=r,o.setSize(a,s),o.setDepth(Ma.Z.POPUP),o.createPopup(),o.scene.add.existing((0,Wo.Z)(o)),o}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages(),this.createTitle()},n.setOnClickButtonClose=function(e){this.buttonClose.onClick=e},n.createTitle=function(){this.titleContainer=this.scene.add.container(),this.title=this.scene.make.image({key:Ih,frame:wh.BLANK}),this.title.setVisible(!1),this.buttonClose=new ic.Z(this.scene,Ih,wh.BUTTON_CLOSE,37,36),this.buttonClose.setName("Close"),this.titleContainer.add([this.title,this.buttonClose]),Phaser.Display.Align.In.Center(this.title,this.titleContainer,0,0),Phaser.Display.Align.In.Center(this.buttonClose,this.titleContainer,this.top.width/2-30,0),this.add(this.titleContainer),Phaser.Display.Align.In.TopCenter(this.titleContainer,this,0,-15)},n.setTitle=function(e,t,n){this.title.setVisible(!0),this.title.setFrame(e),this.title.setWorldSize(t,n)},n.setBgTop=function(e){var t,n=(null==(t=this.payload)?void 0:t.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setFrame(e),this.top.setWorldSize(this.width,n)},n.createPopupImages=function(){this.top=this.scene.add.image(0,0,Ih,wh.POPUP_TOP),this.mid=this.scene.add.image(0,0,Ih,wh.POPUP_MIDDLE),this.bottom=this.scene.add.image(0,0,Ih,wh.POPUP_BOTTOM),this.add([this.top,this.mid,this.bottom])},n.updatePopupSize=function(){var e,t=(null==(e=this.payload)?void 0:e.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setWorldSize(this.width,t-1),this.bottom.setWorldSize(this.width,this.width*this.bottom.height/this.bottom.width),this.mid.setWorldSize(this.width,this.height-this.top.displayHeight-this.bottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.top,this,0,-this.mid.displayHeight/2-this.top.displayHeight/2),Phaser.Display.Align.In.Center(this.mid,this),Phaser.Display.Align.In.Center(this.bottom,this,0,this.mid.displayHeight/2+this.bottom.displayHeight/2)},n.hideButtonClose=function(){this.buttonClose.setVisible(!1)},n.alignButtonClose=function(e,t){Phaser.Display.Align.In.Center(this.buttonClose,this.title,e,t)},n.setWorldSizeButtonClose=function(e,t){this.buttonClose.button.setWorldSize(e,t)},(0,W.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Ph=Th,xh=Ko.Z.DEFAULT,kh=xh.KEY,Dh=xh.FRAME,Oh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).onClick=void 0,i.options=void 0,i.text=void 0,i.panel=void 0,i.icon=void 0,i.animOn=void 0,i.animOff=void 0,i.setSize(n.width,n.height),i.options=n,i.createPanel(),i.createIcon(),i.createText(),i.createAnimation(),i.updateStatus(i.options.enable),i.createInput(),i}(0,c.Z)(t,e);var n=t.prototype;return n.createInput=function(){var e=this;this.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){e.options.enable?e.animOff.play():e.animOn.play(),e.onClick&&e.onClick(!e.options.enable)}))},n.createPanel=function(){this.panel=this.scene.make.image({key:kh,frame:Dh.PANEL_BROWN}),this.panel.setWorldSize(this.width,this.height),this.add(this.panel),Phaser.Display.Align.In.Center(this.panel,this)},n.createIcon=function(){this.icon=this.scene.make.image({key:kh,frame:Dh.ICON_DOT_WOODEN}),this.icon.setWorldSize(28,28),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.panel,-this.width/2)},n.createText=function(){this.text=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),this.text.setTint(16641208),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.panel,0,-2)},n.createAnimation=function(){var e=this;this.animOn=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:-this.width/2+this.icon.displayWidth/2,to:this.width/2-this.icon.displayWidth/2},onComplete:function(){e.text.setText("On"),e.panel.setFrame(Dh.PANEL_GREEN),e.options.enable=!0,Phaser.Display.Align.In.Center(e.text,e.panel,-7,-2)}}),this.animOff=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:this.width/2-this.icon.displayWidth/2,to:-this.width/2+this.icon.displayWidth/2},onComplete:function(){e.text.setText("Off"),e.panel.setFrame(Dh.PANEL_BROWN),e.options.enable=!1,Phaser.Display.Align.In.Center(e.text,e.panel,18,-2)}})},n.updateStatus=function(e){this.options.enable=e,e?this.animOn.play():this.animOff.play()},t}(Phaser.GameObjects.Container),_h=Oh,Rh=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t},Mh=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),r=(0,_e.qZ)(80),i+=1,e.next=9,se().all([s,r]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bh=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},Nh=function(e){try{if(!Rh())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Bh(e):t.isIOS()&&Mh(e).catch((function(e){return console.log(e)}))}catch(n){}},Lh=Ko.Z.DEFAULT,Gh=Lh.KEY,Fh=Lh.FRAME,Zh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Nh(100),s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createContentBackground(),s.createButtons(),s.addItem(),s.createInput(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;this.settingSound.updateStatus(n),this.settingVibrate.updateStatus(i),this.runOpenAnimation(),this.updateVibrateButton()},n.updateVibrateButton=function(){Rh()?this.settingVibrateContainer.revive():(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-5))},n.createContentBackground=function(){var e=new Jc(this.scene,0,0,260,145,{frameTop:Fh.POPUP_TOP_DARK,frameMiddle:Fh.POPUP_MIDDLE_DARK,frameBottom:Fh.POPUP_BOTTOM_DARK});this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-5)},n.createInput=function(){this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new Ph(this.scene,0,0,286,226),this.add(this.popup),this.popup.setTitle(Fh.TEXT_SETTING,141,23),this.popup.setOnClickButtonClose(this.handleClose),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:Gh,frame:Fh.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new _h(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:Gh,frame:Fh.ICON_SOUND});t.setWorldSize(40,35),this.settingSound=new _h(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Uh=Zh,Vh=GameCore.Configs.Network,Yh=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,S()(t=[this]).call(t,s))||this).main=void 0,n.mainLevelContent=void 0,n.header=void 0,n.footer=void 0,n.isLoadingScreenShowed=void 0,n.run=function(){n.facebook.attemptToAddShortcut(),n.checkReceiveLevelFromFb(),n.ads.showBannerAdAsync().catch(a.tO)},n.handlePlaySingle=function(){n.storage.dispatch(_o())},n.handlePlayWithFriend=function(){n.storage.dispatch(Bo())},n.handleSettingClick=function(){n.screen.open(Ba.o4.SETTINGS_SCREEN)},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createLine(),this.createSettingsScreen(),this.createHeaderBar(),this.createMainContent(),this.createMainLevelContent(),this.createFooterBar()},n.createSettingsScreen=function(){this.screen.add(Ba.o4.SETTINGS_SCREEN,Uh)},n.createHeaderBar=function(){this.header=new lc(this),this.header.setDepth(Ma.Z.BUTTON),this.header.buttonSetting.onClick=this.handleSettingClick,Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMainContent=function(){this.main=new Wc(this),this.main.setDepth(Ma.Z.LOGO),this.main.buttonPlaySolo.onClick=this.handlePlaySingle,this.main.buttonPlayJourney.onClick=this.handlePlay.bind(this),Phaser.Display.Align.In.Center(this.main,this.gameZone)},n.createMainLevelContent=function(){this.mainLevelContent=new vh(this),this.mainLevelContent.setDepth(Ma.Z.LOGO),this.mainLevelContent.buttonPlayJourney.onClick=this.handlePlay.bind(this),this.mainLevelContent.setVisible(!1),Phaser.Display.Align.In.Center(this.mainLevelContent,this.gameZone)},n.createFooterBar=function(){this.footer=new nc(this),this.footer.setDepth(Ma.Z.BUTTON),this.footer.buttonModeDice.onClick=this.clickButtonModeDice.bind(this),this.footer.buttonAdventure.onClick=this.clickButtonAdventure.bind(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,0)},n.clickButtonModeDice=function(){this.footer.clickButtonModeDice(),this.main.setVisible(!0),this.mainLevelContent.setVisible(!1)},n.clickButtonAdventure=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.game.globalScene).screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading level...",duration:2e3}),e.next=4,this.checkReceiveLevelFromFb();case 4:t.screen.close(Ba.o4.NOTIFY_SCREEN),this.footer.clickButtonAdventure(),this.main.setVisible(!1),this.mainLevelContent.setVisible(!0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handlePlay=function(){var e=this,t=this.game.globalScene,n=this.storage.getState();(rr(n)||1)>Fa.length-1?t.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"You reached the level limit!",duration:2e3}):(this.showLoadingScreen(),this.loadLevelConfig((function(){e.storage.dispatch((function(e){try{e(Lo())}catch(t){(0,a.tO)(t)}}))})))},n.checkReceiveLevelFromFb=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!rr(t)){e.next=6;break}return this.handleLoadCurrentMapComplete(),e.abrupt("return");case 6:return this.main.showLoading(),this.mainLevelContent.showLoading(),e.next=10,this.storage.dispatch(Ao());case 10:this.loadLevelConfig(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,a.tO)(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(e){var t=this;try{var n=this.storage.getState(),i=rr(n),s=Fa[i];if(!s)return void this.handleLoadCurrentMapComplete(e);var r=s.key,o=s.mapJson;if(this.cache.tilemap.exists(r))return void this.handleLoadCurrentMapComplete(e);this.load.tilemapTiledJSON(r,o),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){t.handleLoadCurrentMapComplete(e)}))}catch(c){(0,a.tO)(c)}finally{this.isLoadingScreenShowed&&this.closeLoadingScreen()}},n.handleLoadCurrentMapComplete=function(e){this.main.showContent(),this.mainLevelContent.showContent(),e&&e()},n.showLoadingScreen=function(){this.isLoadingScreenShowed=!0,this.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading level...",duration:Vh,loading:!0})},n.closeLoadingScreen=function(){this.isLoadingScreenShowed=!1,this.game.globalScene.screen.close(Ba.o4.NOTIFY_SCREEN)},t}(Ho.Z);var Hh=Yh,Wh=n(29982),Kh=n.n(Wh),zh=Ko.Z.GAMEPLAY,Xh=zh.KEY,jh=zh.FRAME,Jh=function(e){function t(t){var n;return(n=e.call(this,t,Xh,jh.BUTTON_MINOR)||this).button.setWorldSize(41,37),n.setName("Setting"),n.createIcon(),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Xh,frame:jh.ICON_SETTING});e.setWorldSize(25,24),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ic.Z),qh=Jh,Qh=Ko.Z.GAMEPLAY,$h=Qh.KEY,el=Qh.FRAME,tl=function(e){function t(t){var n;return(n=e.call(this,t,$h,el.BUTTON_MINOR)||this).icon=void 0,n.button.setWorldSize(41,37),n.setName("Sound"),n.createIcon(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:$h,frame:el.ICON_SOUND}),this.icon.setWorldSize(25,21),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this)},n.updateIconByStatus=function(e){e?this.icon.setFrame(el.ICON_SOUND):this.icon.setFrame(el.ICON_SOUND_OFF)},t}(ic.Z),nl=tl,il=Ko.Z.GAMEPLAY,al=il.KEY,sl=il.FRAME,rl=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.iconCrown=void 0,n.textScore=void 0,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createIconCrown(),this.createTextScore()},n.createBackground=function(){this.background=this.scene.make.image({key:al,frame:sl.BG_BLUE_DARK}),this.background.setWorldSize(123,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:al,frame:sl.ICON_CROWN}),this.iconCrown.setWorldSize(31,24),this.add(this.iconCrown),Phaser.Display.Align.In.Center(this.iconCrown,this.background,-35,-2)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:_c.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5},text:"0"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,10,3)},n.setTextScore=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),ol=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Wo.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e),this.background.setWorldSize(this.width,this.height)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(sa.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,sa.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n});var i=this.payload,a=i.width,s=i.height,r=Math.min(a,s)-(this.payload.borderWidth||8);this.background.setWorldSize(r,r),this.add(this.background)},n.createLoading=function(){this.loading=new uc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-(this.payload.borderWidth||8);this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),cl=ol,hl=Ko.Z.GAMEPLAY,ll=hl.KEY,ul=hl.FRAME,dl=function(e){function t(t){var n;return(n=e.call(this,t,{key:ll,frame:ul.AVATAR_BORDER,background:ul.AVATAR_BACKGROUND,width:29,height:29})||this).scene=void 0,n.scene=t,n}return(0,c.Z)(t,e),t.prototype.loadAvatar=function(e,t,n){this.loadPhoto(e,t,n)},t}(cl),pl=dl,ml=Ko.Z.GAMEPLAY,fl=ml.KEY,gl=ml.FRAME,vl=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.avatar=void 0,n.backgroundAvatar=void 0,n.score=0,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore(),this.createBgAvatar(),this.createAvatar()},n.createBackground=function(){this.background=this.scene.make.image({key:fl,frame:gl.BG_GREEN_DARK}),this.background.setWorldSize(108,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(31),origin:{x:.5,y:.5},text:"0"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,-17)},n.createAvatar=function(){this.avatar=new pl(this.scene),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundAvatar,.75,-.5)},n.createBgAvatar=function(){this.backgroundAvatar=this.scene.make.image({key:fl,frame:gl.BG_GREEN_SQUARE}),this.add(this.backgroundAvatar),this.backgroundAvatar.flipX=!0,this.backgroundAvatar.setWorldSize(34,33),Phaser.Display.Align.In.RightCenter(this.backgroundAvatar,this.background,-2.75)},n.updateInfo=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;this.avatar.loadAvatar(t,n,5)},n.setTextScore=function(e){this.score=e,this.textScore.setText(String(e))},n.getCurrentScore=function(){return this.score},t}(Phaser.GameObjects.Container),yl=Ko.Z.GAMEPLAY,Sl=yl.KEY,El=yl.FRAME,bl=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.avatar=void 0,n.backgroundAvatar=void 0,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore(),this.createBgAvatar(),this.createAvatar()},n.createBackground=function(){this.background=this.scene.make.image({key:Sl,frame:El.BG_GREEN_DARK}),this.background.setWorldSize(110,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(31),origin:{x:.5,y:.5},text:"2500"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,17)},n.createAvatar=function(){this.avatar=new pl(this.scene),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundAvatar,-.75,-.5)},n.updateInfo=function(){var e=this.scene.storage.getState(),t=or(e),n=$s(e),i=n.playerId,a=n.photo,s=(t[i]||{}).score,r=void 0===s?0:s;this.setTextScore(r),this.avatar.loadAvatar(i,a,5)},n.createBgAvatar=function(){this.backgroundAvatar=this.scene.make.image({key:Sl,frame:El.BG_GREEN_SQUARE}),this.add(this.backgroundAvatar),this.backgroundAvatar.setWorldSize(34,33),Phaser.Display.Align.In.LeftCenter(this.backgroundAvatar,this.background,-2.75)},n.setTextScore=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),Al=n(53270),Cl=Ko.Z.GAMEPLAY,Il=Cl.KEY,wl=Cl.FRAME,Tl=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup()},n.initBg=function(){this.leftBg=this.scene.make.image({key:Il,frame:wl.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:Il,frame:wl.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:Il,frame:wl.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:Il,frame:wl.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:Il,frame:wl.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:Il,frame:wl.PROGRESS_BAR_RIGHT});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.width-(i+o)+3;this.midProgress.setWorldSize(c,this.height),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:Il,frame:wl.ICON_CUP}),this.iconCup.setWorldSize(27,24),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:Il,frame:wl.GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,40,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new Al.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(Il),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:wl.DUST}),this.emitter.setPosition(this.scene.gameZone.width/2-28,-3)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:Il,frame:wl.ICON_MILESTONE});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=C()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth;if(e>=1){if(this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}return this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n?(this.leftProgress.setVisible(!0),void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height)):t>n+i?(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),void this.rightProgress.setCrop(0,0,(t-(n+i))/this.rightProgress.scaleX,2*this.height)):(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),void this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height))},t}(Phaser.GameObjects.Container),Pl=Ko.Z.GAMEPLAY,xl=Pl.KEY,kl=Pl.FRAME,Dl=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.textScore=void 0,n.score=0,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createTextScore()},n.createBackground=function(){this.background=this.scene.make.image({key:xl,frame:kl.BG_GREEN_DARK}),this.background.setWorldSize(123,37),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"2500"}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background,0,-2.5)},n.setTextScore=function(e){this.score=e,this.textScore.setText(String(e))},n.restart=function(){this.setTextScore(0)},n.getCurrentScore=function(){return this.score},t}(Phaser.GameObjects.Container),Ol=Ko.Z.GAMEPLAY,_l=Ol.KEY,Rl=Ol.FRAME,Ml=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.buttonSound=void 0,n.background=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.iconBattle=void 0,n.myScoreBlock=void 0,n.opponentScoreBlock=void 0,n.progressBar=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Wo.Z)(n)),n.createBackground(),n.createButtons(),n.createBestScoreBlock(),n.createScoreBlock(),n.createMyScoreBlock(),n.createIconBattle(),n.createOpponentScoreBlock(),n.createProgressBar(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:_l,frame:Rl.BG_HEADER}),this.background.setWorldSize(this.width,this.height),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createButtons=function(){this.createButtonSound(),this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new qh(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this.background,150,-2)},n.createButtonSound=function(){this.buttonSound=new nl(this.scene),this.add(this.buttonSound),Phaser.Display.Align.In.Center(this.buttonSound,this.background,-150,-2)},n.createIconBattle=function(){this.iconBattle=this.scene.make.image({key:_l,frame:Rl.ICON_BATTLE}),this.iconBattle.setVisible(!1),this.iconBattle.setWorldSize(27,24),this.add(this.iconBattle),Phaser.Display.Align.In.Center(this.iconBattle,this.background,0,-2)},n.createBestScoreBlock=function(){this.bestScoreBlock=new rl(this.scene),this.bestScoreBlock.setVisible(!1),this.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.background,-63,-2)},n.createScoreBlock=function(){this.scoreBlock=new Dl(this.scene),this.scoreBlock.setVisible(!1),this.add(this.scoreBlock),Phaser.Display.Align.In.Center(this.scoreBlock,this.background,63,-2)},n.createMyScoreBlock=function(){this.myScoreBlock=new vl(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this.background,-70,-2)},n.createOpponentScoreBlock=function(){this.opponentScoreBlock=new bl(this.scene),this.opponentScoreBlock.setVisible(!1),this.add(this.opponentScoreBlock),Phaser.Display.Align.In.Center(this.opponentScoreBlock,this.background,70,-2)},n.createProgressBar=function(){this.progressBar=new Tl(this.scene,284,13),this.add(this.progressBar),Phaser.Display.Align.In.BottomCenter(this.progressBar,this.background,-16,25)},n.disableItems=function(){this.setAlpha(.2)},n.enableItems=function(){this.setAlpha(1)},n.showItemBySinglePlayMode=function(){this.bestScoreBlock.setVisible(!0),this.scoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!1),this.iconBattle.setVisible(!1),this.opponentScoreBlock.setVisible(!1)},n.showItemByFriendPlayMode=function(){this.bestScoreBlock.setVisible(!1),this.scoreBlock.setVisible(!1),this.myScoreBlock.setVisible(!0),this.iconBattle.setVisible(!0),this.opponentScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(),this.opponentScoreBlock.updateInfo()},n.setScoreSingle=function(e){this.scoreBlock.setTextScore(e)},n.setScoreMulti=function(e){this.myScoreBlock.setTextScore(e)},n.setBestScore=function(e){this.bestScoreBlock.setTextScore(e)},n.getCurrentScoreByMode=function(){var e,t=this.scene.storage.getState(),n=fs(t);return n&&n!==oa&&_t()(e=[ha,ca,la]).call(e,n)>=0?this.myScoreBlock.getCurrentScore():this.scoreBlock.getCurrentScore()},n.setCurrentScoreByMode=function(e){var t,n=this.scene.storage.getState(),i=fs(n);i&&i!==oa&&_t()(t=[ha,ca,la]).call(t,i)>=0?this.setScoreMulti(e):this.setScoreSingle(e)},n.setTargetScore=function(e){this.progressBar.setTargetScore(e)},n.setPercent=function(e){this.progressBar.setPercent(e)},n.updateButtonSoundByStatus=function(e){this.buttonSound.updateIconByStatus(e)},n.restart=function(){this.progressBar.reset(),this.progressBar.stopAnimGlare()},n.getPositionScoreByMode=function(){var e,t=this.scene.storage.getState(),n=fs(t);return n&&n!==oa&&_t()(e=[ha,ca,la]).call(e,n)>=0?{x:105,y:25}:{x:250,y:25}},t}(Phaser.GameObjects.Container),Bl=Ml,Nl=n(12373),Ll=n.n(Nl),Gl=n(39940),Fl=n.n(Gl),Zl=Ko.Z.GAMEPLAY_32.FRAME,Ul=function(e){return e>10},Vl=n(73431),Yl=n.n(Vl),Hl=Ko.Z.GAMEPLAY,Wl=Hl.KEY,Kl=Hl.FRAME,zl=Ko.Z.GAMEPLAY_32.FRAME,Xl=Yl()(.3,-.6,.85,.07),jl=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x,n.y,n.texture,n.frame||zl.DICE_TRANSPARENT)||this).props=void 0,i.customValue=void 0,i.tweenScaleDown=void 0,i.onComplete=void 0,i.particle=void 0,i.emitterExploreBubble=void 0,i.circleImage=void 0,i.tweenCircleImage=void 0,i.tweenJump=void 0,i.status=void 0,i.rateShaking=1,i.setWorldSize(n.width,n.height),i.props=n,n.inputEnabled&&i.setInteractive(),i.createCircleImage(),i.createTween(),i.createParticle(),i.createEmitterExploreBubble(),i.listenEvents(),i.scene.add.existing((0,Wo.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.setCustomValue=function(e){this.customValue=e;var t=function(e){var t="";switch(e){case 1:t=Zl.DICE_1;break;case 2:t=Zl.DICE_2;break;case 3:t=Zl.DICE_3;break;case 4:t=Zl.DICE_4;break;case 5:t=Zl.DICE_5;break;case 6:t=Zl.DICE_6;break;case 7:t=Zl.DICE_7;break;case 11:t=Zl.DICE_11;break;case 12:t=Zl.DICE_12;break;case 13:t=Zl.DICE_13;break;case 14:t=Zl.DICE_14;break;case 15:t=Zl.DICE_15;break;case 16:t=Zl.DICE_16;break;default:t=Zl.DICE_TRANSPARENT}return t}(e);this.setFrame(t),this.setWorldSize(this.props.width,this.props.height)},n.resetSize=function(){this.setWorldSize(this.props.width,this.props.height)},n.createTween=function(){var e=this;this.tweenScaleDown=this.scene.add.tween({delay:250,paused:!0,targets:this,scale:0,duration:200,onComplete:function(){e.onComplete&&e.onComplete()}}),this.tweenCircleImage=this.scene.add.tween({paused:!0,targets:this.circleImage,scale:{from:0,to:1.5},alpha:{from:1,to:.5},duration:250,onComplete:function(){e.circleImage.setVisible(!1),e.circleImage.setScale(0)}}),this.tweenJump=this.scene.add.tween({paused:!0,targets:this,y:this.y-10,yoyo:!0,duration:300,onComplete:function(){e.onComplete&&e.onComplete()}})},n.createCircleImage=function(){this.circleImage=this.scene.make.image({x:this.x,y:this.y,key:Wl,frame:Kl.WHITE_CIRCLE_SMALL}),this.circleImage.setVisible(!1).setScale(0)},n.createParticle=function(){this.particle=this.scene.add.particles(Wl),this.particle.setDepth(9999999)},n.createEmitterExploreBubble=function(){var e=new Phaser.Geom.Circle(0,0,20);this.emitterExploreBubble=this.particle.createEmitter({name:"EmitterExploreBubble",x:this.x,y:this.y,frame:[Kl.CIRCLE_1,Kl.CIRCLE_2],speed:{min:20,max:55},scale:{start:1,end:.3},gravityY:-20,maxParticles:Phaser.Math.RND.between(5,20),on:!1,lifespan:{min:500,max:2e3},emitZone:{type:"edge",source:e}})},n.listenEvents=function(){this.on(Phaser.Input.Events.POINTER_DOWN,(function(){console.log("DICE clicked")}))},n.moveTo=function(e,t){var n=this,i=e.x,a=e.y,s=this.x,r=this.y,o=this.scale;this.scene.add.tween({x:i,y:a,scale:{from:o,to:o-.2},ease:Xl,targets:this,onUpdate:function(e){var t=e.getValue(2);console.log("AAAA ",o,t)},onComplete:function(){t&&t(),n.x=s,n.y=r,n.scale=o},duration:400})},n.rescue=function(e){var t=this;if(this.customValue){var n=this.scaleX,i=this.scaleY;this.onComplete=function(){t.setCustomValue(0),t.setScale(n,i),e&&e()},this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenScaleDown.play()}},n.animationJump=function(e){this.onComplete=e,this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenJump.play()},n.setStatus=function(e){this.status=e},n.playShaking=function(){this.status="SHAKING"},n.stopShaking=function(){this.status="",this.rotation=0},n.preUpdate=function(){"SHAKING"===this.status&&(this.rotation+=.03*this.rateShaking,this.rotation>.2&&(this.rateShaking=-1),this.rotation<-.2&&(this.rateShaking=1))},t}(Phaser.GameObjects.Image),Jl=jl,ql=GameCore.Configs.Gameplay.StartScoreCool,Ql=Ko.Z.GAMEPLAY,$l=Ql.KEY,eu=Ql.FRAME,tu=Ko.Z.GAMEPLAY_32,nu=tu.KEY,iu=tu.FRAME,au=GameCore.Configs.Board,su=au.cols,ru=au.rows,ou=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.maxValueDice=1,a.initDice=[],a.amountTask=0,a.mainDiceMerged=void 0,a.diceMerged=[],a.lastDiceMerged=void 0,a.pX=void 0,a.pY=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.diceMergedHighlight=[],a.background=void 0,a.scene=t,a.setSize(n,i),a.init(),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.pX=t/2,this.pY=n/2-54,this.createBackground(),this.initDataBoard(),this.listenEvents()},n.createBackground=function(){this.background=this.scene.make.image({key:$l,frame:eu.BG_BOARD}),this.background.setPosition(this.pX,this.pY),this.background.setWorldSize(this.width,this.height)},n.initDataBoard=function(){var e=this;this.initDice=[];var t=this.scene.gameZone.width,n=(t-this.width)/2+8,i=this.pY-this.height/2+8;this.diceSize=(this.width-16-2*(su+1))/su;for(var a=function(t){for(var a=[],s=i+e.diceSize/2+e.diceSize*t+1.8*(t+1),r=function(i){var r,o=n+e.diceSize/2+e.diceSize*i+2*(i+1),c=new Jl(e.scene,{x:o,y:s,width:e.diceSize,height:e.diceSize,texture:nu,frame:iu.DICE_TRANSPARENT});c.setVisible(!1);var h=C()(r=e.initDice).call(r,(function(e){return e.x===i&&e.y===t})),l=(h[0]||{value:0}).value;h&&h.length>0&&(c.setCustomValue(l),c.setVisible(!0)),a.push({x:i,y:t,pX:o,pY:s,value:l,dice:c})},o=0;o<su;o++)r(o);e.dataBoard.push(a)},s=0;s<ru;s++)a(s)},n.listenEvents=function(){this.scene.events.on(Cc,this.handleMove.bind(this)),this.scene.events.on(Ac,this.handleHighlight.bind(this)),this.scene.events.on(Ic,this.handleRemoveHighlight.bind(this)),this.scene.events.on(wc,this.handleRemoveDiceMergedHighlight.bind(this)),this.scene.events.on(Tc,this.handleGameOver.bind(this))},n.handleRemoveDiceMergedHighlight=function(){for(var e=0;e<this.diceMergedHighlight.length;e++){this.diceMergedHighlight[e].setAlpha(1)}this.diceMergedHighlight=[]},n.handleHighlight=function(e){try{this.cellsHighlight=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i];s.dice.setVisible(!0),s.dice.setFrame(iu.DICE_HIGHT_LIGHT),s.dice.resetSize();var r=this.getMergeDice(e[t]);if(r&&r.length>=2)for(var o=0;o<r.length;o++){var c=r[o].dice;this.diceMergedHighlight.push(c),c.setAlpha(.8)}}}catch(h){console.log(h)}},n.handleMove=function(e,t,n){this.cellsHighlight=e;try{for(var i=0;i<e.length;i++){var a=e[i],s=a.x,r=a.y,o=a.value,c=this.dataBoard[r][s];c.value=o,c.dice.setVisible(!0),c.dice.setCustomValue(o)}this.handleMergeDice(e[this.amountTask],t,n)}catch(h){console.log(h)}},n.handleMergeDice=function(e,t,n){var i=this;if(!this.scene.isGameReplay){if(!e){console.log("Doneeeeeeeeeeee");var a=this.calcScore(this.diceMerged,n);return 0===a?t&&t():this.runAnimAfterMerged(this.lastDiceMerged,a,t),this.diceMerged=[],this.cellsHighlight=[],void(this.amountTask=0)}var s=e.x,o=e.y,c=e.value,h=this.dataBoard[o][s],l=h.dice;h.value=c,l.setVisible(!0),l.setCustomValue(c);var u=this.getMergeDice(e);if(!u||u.length<=1)return this.amountTask++,void this.handleMergeDice(this.cellsHighlight[this.amountTask],t,n);this.lastDiceMerged=e;for(var d=function(){var e,t=u[p],n=t.x,a=t.y,s=i.dataBoard[a][n].dice;s.setAlpha(1),i.dataBoard[a][n].value=0;var r,o=Ll()(e=i.cellsHighlight).call(e,(function(e){return e.x===n&&e.y===a}));-1!==o&&Fl()(r=i.cellsHighlight).call(r,o,1);i.scene.animDice.playAnimationMoveTo(s,h,(function(){s.setCustomValue(0),s.setVisible(!1),h.value=c+1,l.setCustomValue(c+1)}))},p=0;p<u.length;p++)d();this.scene.animDice.playAnimationMerge(l,(function(){if(!i.scene.isGameReplay){i.diceMerged.push({value:c,amount:u.length+1}),c+1>i.maxValueDice&&(i.maxValueDice=c+1>6?6:c+1);var a=i.calcScore(i.diceMerged,n);c+1!==8?i.cellsHighlight[i.amountTask]&&i.handleMergeDice((0,r.Z)({},i.cellsHighlight[i.amountTask],{value:c+1}),t,n):i.handleMergeStarDiceToRubyDice(h,e,a,t)}}))}},n.runAnimAfterMerged=function(e,t,n){var i=this;if(this.scene.isTutorialRunning)return this.diceMerged=[],void(n&&n());var a=function(){i.scene.isGameReplay||(i.scene.handleAddScore(t),i.scene.main.praise.handlePraise(e.pX,e.pY,t),i.diceMerged=[],n&&n())};if(t<ql)a();else{var s=this.scene.header.getPositionScoreByMode();this.scene.animDice.playAnimationStarToScore(e,{pX:s.x,pY:s.y},this.diceMerged,a)}this.scene.footer.itemMagnet.playAnimationStarToMagnetItem({pX:e.pX,pY:e.pY},{pX:this.scene.footer.itemMagnet.x,pY:this.scene.footer.itemMagnet.y},t)},n.handleMergeStarDiceToRubyDice=function(e,t,n,i){var a=this;this.scene.time.addEvent({delay:500,callback:function(){a.handleDiceMagic(e,t,n,i)},callbackScope:this})},n.getMergeDice=function(e){if(e.value){var t=this.getRoundDice(e),n=[];return this.getAllRoundDice(t,n,e),n}},n.getAllRoundDice=function(e,t,n){if(e&&0!==e.length){var i=e.pop();t.push(i);for(var a=this.getRoundDice(i)||[],s=0;s<a.length;s++){var r=a[s];this.checkArrayHasItem(e,r)||this.checkArrayHasItem(t,r)||n&&(!n||r.x===n.x&&r.y===n.y)||e.push(r)}this.getAllRoundDice(e,t,n)}},n.getRoundDice=function(e,t){void 0===t&&(t=!1);var n=e.x,i=e.y;if(e.value||t){var a=[],s=null,r=null,o=null,c=null;return i-1>=0&&(s={x:n,y:i-1},this.dataBoard[s.y][s.x].value===e.value&&a.push(this.dataBoard[s.y][s.x])),n-1>=0&&(r={x:n-1,y:i},this.dataBoard[r.y][r.x].value===e.value&&a.push(this.dataBoard[r.y][r.x])),n+1<=4&&(c={x:n+1,y:i},this.dataBoard[c.y][c.x].value===e.value&&a.push(this.dataBoard[c.y][c.x])),i+1<=4&&(o={x:n,y:i+1},this.dataBoard[o.y][o.x].value===e.value&&a.push(this.dataBoard[o.y][o.x])),a}},n.checkArrayHasItem=function(e,t){var n=C()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return n&&n.length>0},n.handleRemoveHighlight=function(){try{for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value&&(this.dataBoard[i][n].dice.setVisible(!0),this.dataBoard[i][n].dice.setFrame(iu.DICE_TRANSPARENT))}}catch(a){console.log(a)}},n.getMaxValueDice=function(){return this.maxValueDice>6?6:this.maxValueDice},n.handleDiceMagic=function(e,t,n,i){for(var a=e.x,s=e.y,r=a-1>=0?a-1:a,o=a+1<5?a+1:a,c=s+1<5?s+1:s,h=s-1>=0?s-1:s;h<=c;h++)for(var l=r;l<=o;l++){var u=this.dataBoard[h][l],d=u.dice;a===l&&s===h||(n+=u.value),u.value=0,d.rescue()}this.diceMerged=[],this.amountTask=0,this.cellsHighlight=[],this.runAnimAfterMerged(t,n,i)},n.restart=function(){this.maxValueDice=1,this.diceMerged=[];for(var e=0;e<this.dataBoard.length;e++)for(var t=this.dataBoard[e],n=0;n<t.length;n++){var i=t[n],a=i.dice;a.setCustomValue(0),a.setVisible(!1),a.setDepth(e*ru+n),i.value=0}},n.handleGameOver=function(e){var t=this;if(this.checkIsGameOver(e)){this.scene.updateStateGameOver(!0),this.scene.clearFen(),this.scene.disableInput(),this.scene.animTintBackground.play(),this.scene.footer.disableItems();this.scene.outOfMoveLabel.playAnimationShow((function(){t.scene.header.disableItems(),t.outOfMove((function(){t.scene.time.addEvent({delay:1500,callback:function(){t.scene.handleRequestFinishGame()}})}))}))}},n.checkIsGameOver=function(e){var t=this.getDiceEmpty();if(0===t.length)return!0;for(var n=!0,i=0;i<t.length;i++){var a=this.getRoundDice(t[i],!0);if(a&&a.length+1>=e)return n=!1,!1}return n},n.getDiceSlot=function(){var e,t,n,i=this.getDiceEmpty();if(0===i.length)return 1;for(var a=0,s=0,r=0;r<i.length;r++){var o=this.getRoundDice(i[r],!0);o&&o.length>0?s++:a++}var c=S()(e=[]).call(e,Es()(t=Array(a)).call(t,1),Es()(n=Array(s)).call(n,2));return c[Math.floor(Math.random()*c.length)]},n.getDiceEmpty=function(){for(var e=[],t=0;t<ru;t++)for(var n=0;n<su;n++)this.dataBoard[t][n].value||e.push(this.dataBoard[t][n]);return e},n.rescue=function(){for(var e=this,t=[],n=1;n<4;n++)for(var i=1;i<4;i++)t.push(this.dataBoard[n][i]);for(var a=t[Math.floor(Math.random()*t.length)],s=a.x,r=a.y,o=[],c=s-1;c<=s+1;c++)for(var h=r-1;h<=r+1;h++){var l=this.dataBoard[c][h],u=Math.floor(1e3*Math.random()+20);o.push({data:l,delay:u})}mi()(o).call(o,(function(e,t){return e.delay-t.delay}));for(var d=function(){var t=o[p],n=t.delay,i=t.data,a=i.dice;e.scene.time.addEvent({delay:n,callback:function(){a.rescue((function(){i.value=0,e.scene.updateMatchData()}))}})},p=0;p<o.length;p++)d()},n.outOfMove=function(e){for(var t=this,n=[200,300,400,500,600,700,800,900,1e3],i=0,a=[],s=this.dataBoard.length-1,r=0;r<=s;r++){for(var o=0;r-o>=0;){var c=this.dataBoard[r-o][4-o].dice;a.push({dice:c,delay:n[i]}),o++}i++}for(var h=1;h<=s;h++){for(var l=0;h+0>l;){var u=this.dataBoard[h][0+l].dice;a.push({dice:u,delay:n[i]}),l++}i++}for(var d=function(){var n=a[p],i=n.delay,s=n.dice,r=null;p===a.length-1&&(r=function(){e&&e()}),t.scene.time.addEvent({delay:i,callback:function(){s.animationJump(r)}})},p=0;p<a.length;p++)d()},n.calcScore=function(e,t){if(!e||0===e.length)return 0;for(var n=t||0,i=void 0===t?0:1,a=e.length,s=0;s<a;s++){var r=e[s];n+=r.value*r.amount}return n*(a+i)},n.exploreFen=function(e){var t=e.split(",");if(t&&!(t.length<this.dataBoard.length)){for(var n=1,i=0;i<t.length;i++)for(var a=t[i].split(""),s=0;s<a.length;s++){var r="x"===a[s]?0:b()(a[s]);this.dataBoard[i][s].value=r,this.dataBoard[i][s].dice.setCustomValue(r),this.dataBoard[i][s].dice.setVisible(!!r),r>n&&(n=r)}this.maxValueDice=n}},t}(Phaser.GameObjects.Container),cu=GameCore.Configs.Gameplay,hu=cu.VibrateValue,lu=cu.StartScoreCool,uu=cu.StartScoreGood,du=cu.StartScoreExcellent,pu=Ko.Z.EFFECTS,mu=pu.KEY,fu=pu.FRAME,gu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceSize=void 0,n.onComplete=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.scene=t,t.add.existing((0,Wo.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createPraiseFrame(),this.createPraiseScoreText(),this.setPosition(100,100)},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:mu}),this.add(this.praiseFrame),Phaser.Display.Align.In.Center(this.praiseFrame,this,0,-20)},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n){var i=this;n<lu?this.praiseFrame.setVisible(!1):this.praiseFrame.setVisible(!0);var a="",s=0,r=0,o=0;this.x=e,lu<=n&&n<uu?(a=fu.TEXT_COOL,s=139,r=49,o=hu[0]):uu<=n&&n<du?(a=fu.TEXT_GOOD,s=144,r=48,o=hu[1]):n>=du&&(a=fu.TEXT_EXCELLENT,s=260,r=48,o=hu[2]),this.scene.player.getPlayerSettings().vibrate&&Nh(o),this.setVisible(!0),this.praiseFrame.setFrame(a),this.praiseFrame.setWorldSize(s,r),this.x-s/2<0&&(this.x=s/2),this.x+s/2>this.scene.gameZone.width&&(this.x=this.scene.gameZone.width-s/2),this.praiseScoreText.setText("+"+n+" POINTS"),this.scene.add.tween({targets:this,y:{from:t+20,to:t},alpha:{from:0,to:1},scale:{from:0,to:1},duration:300,onComplete:function(){i.scene.add.tween({delay:800,targets:i,y:{from:t,to:t-20},alpha:{from:1,to:0},scale:{from:1,to:1.5},duration:300})}})},t}(Phaser.GameObjects.Container),vu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new ou(this.scene,326,323)},n.createPraise=function(){this.praise=new gu(this.scene),this.praise.setDepth(Ma.Z.EFFECT)},t}(Phaser.GameObjects.Container),yu=vu,Su=Ko.Z.GAMEPLAY,Eu=Su.KEY,bu=Su.FRAME,Au=function(){function e(e){this.scene=void 0,this.tail=void 0,this.star=void 0,this.tweenStarToMagnetItem=void 0,this.onComplete=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.amountPoint=10,this.pointsPath=[],this.targetShowStarTail=.1,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createTail(),this.createStar(),this.createPath()},t.createTail=function(){this.tail=this.scene.make.rope({x:0,y:0,key:Eu,frame:bu.TAIL,points:[new Phaser.Math.Vector2(15,0)],horizontal:!1}),this.tail.setDisplaySize(this.tail.width,160),this.tail.setSize(this.tail.width,160),this.tail.setAlpha(0),this.tail.setDepth(Ma.Z.ON_TOP)},t.createStar=function(){this.star=this.scene.make.image({key:Eu,frame:bu.STAR_YELLOW}),this.star.setDepth(Ma.Z.ON_TOP),this.star.setVisible(!1)},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=this.scene.world.getZoomRatio(),n=new Phaser.Math.Vector2(300,300),i=new Phaser.Math.Vector2(200,0),a=new Phaser.Math.Vector2(100,100);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(n,i,a),this.tweenStarToMagnetItem=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(n){var i=n.progress;e.curve.getPoint(e.path.t,e.path.vec);var a=new Phaser.Math.Vector2(e.path.vec.x,e.path.vec.y);e.pointsPath.unshift(a),e.star.setPosition(e.path.vec.x,e.path.vec.y);var s=e.tail.points;if(i>=e.targetShowStarTail&&(e.targetShowStarTail+=.1),!(e.pointsPath.length<s.length)){for(var r=s.length,o=0;o<r;o++){var c,h,l=(null==(c=e.pointsPath[o])?void 0:c.x)||e.pointsPath[e.pointsPath.length-1].x,u=((null==(h=e.pointsPath[o])?void 0:h.y)||e.pointsPath[e.pointsPath.length-1].y)+e.star.displayHeight/4;s[o].x=l/e.tail.scaleX,s[o].y=u/e.tail.scaleY-3*t}e.tail.setAlpha(1),e.tail.setDirty()}},onComplete:function(){e.pointsPath=[],e.star.setVisible(!1),e.tail.setVisible(!1),e.tail.setAlpha(0),e.scene.footer.itemMagnet.playTweenGlare(),e.onComplete&&e.onComplete()}})},t.setOnComplete=function(e){this.onComplete=e},t.playAnimation=function(e,t){this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(e.pX+200,e.pY-200),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY),this.tail.setVisible(!0),this.star.setVisible(!0),this.targetShowStarTail=.1,this.tweenStarToMagnetItem.play()},t.stopAnimation=function(){this.star.setVisible(!1),this.tail.setVisible(!1),this.tail.setAlpha(0),this.tweenStarToMagnetItem.isPlaying()&&this.tweenStarToMagnetItem.stop()},e}(),Cu=Ko.Z.GAMEPLAY,Iu=Cu.KEY,wu=Cu.FRAME,Tu=function(){function e(e,t,n){this.x=void 0,this.y=void 0,this.scene=void 0,this.background=void 0,this.backgroundSmall=void 0,this.graphicProgress=void 0,this.isDisable=void 0,this.percent=void 0,this.x=t,this.y=n,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBg(),this.createGraphicsProgress(),this.createBgSmall(),this.updatePercent(0)},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:Iu,frame:wu.ITEM_BG_CIRCLE}),this.background.setWorldSize(69,69)},t.createBgSmall=function(){this.backgroundSmall=this.scene.make.image({x:this.x,y:this.y,key:Iu,frame:wu.ITEM_BG_CIRCLE_SMALL}),this.backgroundSmall.setWorldSize(53,53)},t.createGraphicsProgress=function(){this.graphicProgress=this.scene.add.graphics(),this.graphicProgress.fillStyle(16776960,1)},t.updatePercent=function(e){var t=this;console.log("Perrrrr ",this.percent,e),this.scene.tweens.addCounter({from:this.percent,to:e,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(e){var n,i=360*e.getValue()/100-90;t.graphicProgress.clear(),et()(n=t.graphicProgress).call(n,t.x,t.y,30,Phaser.Math.DegToRad(i),Phaser.Math.DegToRad(-90),!0),t.graphicProgress.fillPath()},duration:200}),this.percent=e},t.restartProgress=function(){this.graphicProgress.closePath()},t.disableItem=function(){this.isDisable=!0,this.graphicProgress.fillStyle(16776960,.2),this.background.setAlpha(.2)},t.enableItem=function(){this.isDisable=!1,this.graphicProgress.fillStyle(16776960,1),this.background.setAlpha(1)},e}(),Pu=Ko.Z.GAMEPLAY,xu=Pu.KEY,ku=Pu.FRAME,Du=GameCore.Configs.Board,Ou=Du.cols,_u=Du.rows,Ru=GameCore.Configs.MagnetItem,Mu=Ru.maxMagnetPerMatch,Bu=Ru.scoreForOnePercent,Nu=GameCore.Configs.Gameplay.StartScoreCool,Lu=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.icon=void 0,a.magnetMoveIcon=void 0,a.mainItemMagnet=void 0,a.itemHighLight=[],a.targetScore=100*Bu,a.glareSprite=void 0,a.tweenGlareSprite=void 0,a.isDisable=void 0,a.tweenToEnableMaxFps=void 0,a.totalScore=0,a.amountUsed=0,a.itemPercent=void 0,a.textAmount=void 0,a.bgAmount=void 0,a.animationMagnetItem=void 0,a.scene=t,a.init(),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createItemPercent(),this.createIcon(),this.createMagnetMoveIcon(),this.createGlare(),this.createTweenGlare(),this.createAmountBg(),this.createAmountText(),this.createAnimationMagnetItem(),this.updateAmountUsed(this.amountUsed),this.listenEvents()},n.createItemPercent=function(){this.itemPercent=new Tu(this.scene,this.x,this.y)},n.createIcon=function(){this.icon=this.scene.make.image({x:this.x,y:this.y,key:xu,frame:ku.ITEM_MAGNET}),this.icon.setWorldSize(40,42)},n.createMagnetMoveIcon=function(){this.magnetMoveIcon=this.scene.make.image({x:this.x,y:this.y,key:xu,frame:ku.ITEM_MAGNET}),this.magnetMoveIcon.setDepth(Ma.Z.ON_TOP),this.magnetMoveIcon.setWorldSize(40,42),this.magnetMoveIcon.setVisible(!1)},n.createGlare=function(){this.glareSprite=this.scene.make.sprite({x:this.x,y:this.y,key:xu,frame:ku.GLARE_YELLOW_CIRCLE}),this.glareSprite.setVisible(!1).setScale(0)},n.createTweenGlare=function(){var e=this;this.tweenGlareSprite=this.scene.add.tween({targets:this.glareSprite,duration:300,scale:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){e.glareSprite.setVisible(!1).setScale(0)},paused:!0})},n.createAmountBg=function(){this.bgAmount=this.scene.make.image({x:this.x-23,y:this.y-26,key:xu,frame:ku.BG_RED_CIRCLE}),this.bgAmount.setWorldSize(21,23)},n.createAmountText=function(){this.textAmount=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:String(this.amountUsed)}),Phaser.Display.Align.In.Center(this.textAmount,this.bgAmount,-1.25,-2.5)},n.createAnimationMagnetItem=function(){this.animationMagnetItem=new Au(this.scene)},n.updateAmountUsed=function(e){this.amountUsed=e>=Mu?Mu:e,this.textAmount.setText(String(this.amountUsed)),0!==this.amountUsed?(this.icon.setAlpha(1),this.scene.updateMatchData()):this.icon.setAlpha(.5)},n.updateTotalScore=function(e){this.totalScore=e},n.updateTargetScore=function(e){this.targetScore=e},n.updatePercent=function(){var e=100*this.totalScore/this.targetScore;this.itemPercent.updatePercent(e)},n.listenEvents=function(){var e=this;this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,scale:{from:0,to:1},loop:-1,paused:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenToEnableMaxFps.play()})),this.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.tweenToEnableMaxFps.stop(),e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,35);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handleDragStart=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100))},n.handleDrag=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100),this.handleCheckMagnet())},n.onCompleteMagnet=function(e){var t,n,i=this;if(this.mainItemMagnet)if(null==(t=this.mainItemMagnet)||t.dice.setAlpha(1),this.magnetMoveIcon.setVisible(!1),8!==(null==(n=this.mainItemMagnet)?void 0:n.value))if(this.scene.main.board.getMergeDice(this.mainItemMagnet).length>1)this.scene.events.emit(Cc,[this.mainItemMagnet],(function(){i.scene.updateMatchData()}),e);else{var a=this.scene.header.getPositionScoreByMode();this.scene.animDice.playAnimationStarToScore({pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},{pX:a.x,pY:a.y},[],(function(){var t,n;i.scene.handleAddScore(e),i.scene.main.praise.handlePraise((null==(t=i.mainItemMagnet)?void 0:t.pX)||0,(null==(n=i.mainItemMagnet)?void 0:n.pY)||0,e)})),this.scene.updateMatchData()}else this.scene.main.board.handleMergeStarDiceToRubyDice(this.mainItemMagnet,{pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},e,(function(){i.scene.updateMatchData()}))},n.handleDragEnd=function(){var e=this;if(!(this.amountUsed<=0)&&(this.magnetMoveIcon.setVisible(!1),this.updateItemHighLight(),this.mainItemMagnet)){var t=this.getAllItemsMagnet(),n=this.mainItemMagnet,i=n.pX,a=n.pY,s=n.value,r=n.dice;if(!t||t.length<=1)r.setAlpha(1);else{this.updateAmountUsed(this.amountUsed-1);for(var o=function(){var n=t[c];e.scene.animDice.playAnimationMoveTo(n.dice,{pX:i,pY:a},(function(){n.value=0,n.dice.setCustomValue(0),n.dice.setVisible(!1),r.setCustomValue(s+1),e.mainItemMagnet&&(e.mainItemMagnet.value=s+1)}))},c=0;c<t.length;c++)o();this.scene.animDice.playAnimationMerge(r,(function(){var n=(t.length+1)*s;e.onCompleteMagnet(n)}))}}},n.handleCheckMagnet=function(){var e=this.getMainItemMagnet();if(this.mainItemMagnet&&e&&e.x===this.mainItemMagnet.x&&e.y===this.mainItemMagnet.y||this.updateItemHighLight(),this.mainItemMagnet=e,this.mainItemMagnet){this.mainItemMagnet.dice.setAlpha(.8),this.saveItemHighLight(this.mainItemMagnet);var t=this.getAllItemsMagnet();if(t&&!(t.length<=1))for(var n=0;n<t.length;n++){var i=t[n].dice;this.saveItemHighLight(t[n]),i.playShaking()}}},n.saveItemHighLight=function(e){var t=e.x,n=e.y,i=this.itemHighLight.some((function(e){return t===e.x&&n===e.y}));i||this.itemHighLight.push(e)},n.updateItemHighLight=function(){this.itemHighLight.forEach((function(e){e.dice.setAlpha(1),e.dice.stopShaking()})),this.itemHighLight=[]},n.getMainItemMagnet=function(){for(var e=this.scene.main.board.dataBoard,t=0;t<_u;t++)for(var n=0;n<Ou;n++){var i=e[t][n],a=i.dice;if(i.value&&a.getBounds().contains(this.magnetMoveIcon.x,this.magnetMoveIcon.y))return i}return null},n.getAllItemsMagnet=function(){if(!this.mainItemMagnet)return[];for(var e=this.scene.main.board.dataBoard,t=this.mainItemMagnet,n=t.value,i=t.x,a=t.y,s=[],r=0;r<_u;r++)for(var o=0;o<Ou;o++){var c=e[r][o];n!==c.value||o===i&&r===a||s.push(c)}return s},n.playTweenGlare=function(){this.glareSprite.setVisible(!0).setScale(0),this.tweenGlareSprite.play()},n.playAnimationStarToMagnetItem=function(e,t,n){var i=this,a=function(){i.totalScore+=n;var e=100*i.totalScore/i.targetScore;e=e>360?360:e,i.itemPercent.updatePercent(e),i.totalScore>=i.targetScore&&i.scene.time.addEvent({delay:200,callback:function(){i.itemPercent.updatePercent(0);var e=Math.floor(i.totalScore/i.targetScore);i.amountUsed+=e,i.updateAmountUsed(i.amountUsed),i.totalScore-=i.targetScore*e,i.itemPercent.updatePercent(100*i.totalScore/i.targetScore),i.scene.updateMatchData()}}),i.scene.updateMatchData()};n<Nu?a():(this.animationMagnetItem.playAnimation(e,t),this.animationMagnetItem.setOnComplete(a))},n.restartItemMagnet=function(){this.updateAmountUsed(0),this.totalScore=0,this.targetScore=100*Bu,this.itemPercent.updatePercent(0)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.bgAmount.setAlpha(.2),this.textAmount.setAlpha(.2),this.icon.setAlpha(.2),this.itemPercent.disableItem()},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.bgAmount.setAlpha(1),this.textAmount.setAlpha(1),this.icon.setAlpha(1),this.itemPercent.enableItem()},t}(Phaser.GameObjects.Container),Gu=Ko.Z.GAMEPLAY,Fu=Gu.KEY,Zu=Gu.FRAME,Uu=Ko.Z.GAMEPLAY_32,Vu=Uu.KEY,Yu=Uu.FRAME,Hu=function(){function e(e,t,n){this.scene=void 0,this.background=void 0,this.text=void 0,this.x=void 0,this.y=void 0,this.nextDiceItems=[],this.nextDiceValues=[],this.isDisable=void 0,this.scene=e,this.x=t,this.y=n,this.init()}var t=e.prototype;return t.init=function(){this.createText(),this.createBg(),this.createGlass(),this.initDiceFrames()},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:Fu,frame:Zu.BG_NEXT_PANEL}),this.background.setDisplaySize(75,45)},t.createGlass=function(){var e=this.scene.make.image({x:this.x,y:this.y,key:Fu,frame:Zu.GLASS});e.setDepth(2),e.setDisplaySize(75,45)},t.createText=function(){this.text=this.scene.make.image({key:Fu,frame:Zu.TEXT_NEXT_DICE}),this.text.setWorldSize(56,14),this.text.setPosition(this.x,this.y-30)},t.initDiceFrames=function(){for(var e=0;e<2;e++){var t=new Jl(this.scene,{x:0,y:0,width:30,height:30,texture:Vu,frame:Yu.DICE_1});t.setDepth(1),t.setVisible(!1),this.nextDiceItems.push(t)}},t.randomNextDice=function(){var e=this.scene.main.board.getMaxValueDice(),t=this.scene.main.board.getDiceSlot(),n=Phaser.Math.Between(1,t);if(e<=2)switch(n){case 1:this.nextDiceValues.push(Phaser.Math.Between(1,2));break;case 2:this.nextDiceValues.push(1),this.nextDiceValues.push(2)}else for(var i=0;i<n;i++){var a=this.randomValueExcludeNumbers(this.nextDiceValues);a<0||this.nextDiceValues.push(a)}},t.randomValueExcludeNumbers=function(e){var t=this.scene.main.board.getMaxValueDice(),n=Phaser.Math.Between(1,t);return-1!==_t()(e).call(e,n)?this.randomValueExcludeNumbers(e):n},t.drawDiceFrames=function(){for(var e=this.nextDiceValues.length,t=0;t<e;t++){var n=this.nextDiceValues[t],i=this.nextDiceItems[t];i.setCustomValue(n),i.setVisible(!0);var a=this.getPositionByIndex(t);i.setPosition(a.x,a.y)}},t.hideDiceItems=function(){this.nextDiceItems.forEach((function(e){e.setVisible(!1)}))},t.getPositionByIndex=function(e){var t=[];switch(this.nextDiceValues.length){case 1:t=[{x:this.x,y:this.y}];break;case 2:t=[{x:this.x-15,y:this.y},{x:this.x+15,y:this.y}]}return t[e]},t.handleNextDice=function(){this.nextDiceValues=[],this.hideDiceItems(),this.randomNextDice(),this.drawDiceFrames()},t.restart=function(){this.nextDiceValues=[],this.hideDiceItems()},t.disableItem=function(){this.isDisable=!0,this.background.setAlpha(.2),this.text.setAlpha(.2),this.nextDiceItems.forEach((function(e){e.setAlpha(.2)}))},t.enableItem=function(){this.isDisable=!1,this.background.setAlpha(1),this.text.setAlpha(1),this.nextDiceItems.forEach((function(e){e.setAlpha(1)}))},e}(),Wu=n(70932),Ku={START:"tut-start",SETUP_COMPLETED:"tut-setup-completed",GEMS_EAT:"tut-gems-eat",GEMS_DROPPED:"tut-gems-dropped",NEXT_TUTORIAL:"next-tutorial",DRAG_END:"tutorial-drag-end",TAP_END:"tutorial-tap-end"},zu=Ko.Z.GAMEPLAY,Xu=zu.KEY,ju=zu.FRAME,Ju=Ko.Z.GAMEPLAY_32,qu=Ju.KEY,Qu=Ju.FRAME,$u=GameCore.Configs.Board,ed=$u.cols,td=$u.rows,nd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceItems=[],n.direction=void 0,n.diceWidth=50,n.diceHeight=50,n.angleValue=void 0,n.tweenScaleUp=void 0,n.isScaleUp=void 0,n.isDragged=void 0,n.isShowing=void 0,n.dataDice=[],n.isRotating=!1,n.dataDiceRandom=[],n.tweenMoveBack=void 0,n.pointerDownX=0,n.pointerDownY=0,n.countDragTime=void 0,n.isDisable=void 0,n.amountDice=void 0,n.matrixData=[],n.diceContainer=void 0,n.pointerDownPosition=void 0,n.setDepth(Ma.Z.PIECE),t.add.existing((0,Wo.Z)(n)),n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.initDiceItems(),this.createTweenScaleUp(),this.listenEvents()},n.initDiceItems=function(){this.diceContainer=this.scene.make.container({}),this.diceContainer.setDepth(Ma.Z.PIECE);for(var e=0;e<2;e++){var t=new Jl(this.scene,{x:0,y:0,width:this.diceWidth,height:this.diceHeight,texture:qu,frame:Qu.DICE_1});t.setVisible(!1),this.diceContainer.add(t),this.diceItems.push(t)}},n.createBackground=function(){var e=this.scene.make.sprite({x:0,y:0,key:Xu,frame:ju.BG_PIECE});e.setWorldSize(140,138),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.getDataDice=function(){switch(this.amountDice=this.scene.footer.nextDice.nextDiceValues.length,this.amountDice){case 1:return this.getDataOneDice();case 2:return this.getDataTwoDice()}return[[1]]},n.getDataOneDice=function(){return this.direction="",[[this.scene.footer.nextDice.nextDiceValues[0]]]},n.getDataTwoDice=function(){this.randomDirection();var e=[],t=this.scene.footer.nextDice.nextDiceValues[0],n=this.scene.footer.nextDice.nextDiceValues[1];switch(this.direction){case"HORIZONTAL":this.angleValue=90,e.push(this.scene.footer.nextDice.nextDiceValues);break;case"VERTICAL":this.angleValue=0,e.push([t]),e.push([n])}return e},n.randomDirection=function(){var e=["HORIZONTAL","VERTICAL"];this.direction=e[Math.floor(Math.random()*e.length)]},n.getPosition=function(){var e=[{x:0,y:0}];switch(this.direction){case"HORIZONTAL":e=[{x:-this.diceWidth/2-2,y:0},{x:this.diceWidth/2+2,y:0}];break;case"VERTICAL":e=[{x:0,y:-this.diceWidth/2-2},{x:0,y:this.diceHeight/2+2}]}return e},n.hideDice=function(){this.diceContainer.setVisible(!1),this.diceItems.forEach((function(e){e.setVisible(!1)}))},n.showDice=function(e,t){var n=this;this.isShowing=!0,this.diceContainer.setVisible(!0),this.dataDice=[],this.matrixData=[];var i=0;if(e){if(this.dataDiceRandom=e,t)switch(this.amountDice=2,this.direction=t||"",this.direction){case"HORIZONTAL":this.angleValue=90;break;case"VERTICAL":this.angleValue=0}}else this.dataDiceRandom=this.getDataDice();for(var a=this.getPosition(),s=0;s<this.dataDiceRandom.length;s++){this.matrixData[s]=[];for(var r=0;r<this.dataDiceRandom[s].length;r++){var o=this.dataDiceRandom[s][r],c=this.diceItems[i],h=a[i].x,l=a[i].y;c.setPosition(0,0),c.setCustomValue(o),c.setVisible(!0),this.dataDice.push({x:r,y:s,value:o}),this.scene.animDice.playAnimationShow(c,{pX:h,pY:l}),this.matrixData[s][r]={x:r,y:s,value:o},i++}}this.scene.time.delayedCall(100,(function(){n.isShowing=!1}))},n.setContentPosition=function(e,t){this.setPosition(e,t),this.diceContainer.setPosition(e,t)},n.rotateDice=function(){var e=this;if(this.scene.audio.playSound(ah.Z.DICE_SHUFFLE),this.dataDice=[],this.matrixData=[],!this.dataDiceRandom||this.dataDiceRandom.length<=0)this.isRotating=!1;else{for(var t=0;t<this.dataDiceRandom.length;t++){this.matrixData[t]=[];for(var n=function(){var n,a=e.dataDiceRandom[t][i];e.matrixData[t][i]={x:i,y:t,value:a};var s=C()(n=e.diceItems).call(n,(function(e){return e.customValue===a}))[0];e.animationRotateDice(i,t,s),e.dataDice.push({x:i,y:t,value:a})},i=0;i<this.dataDiceRandom[t].length;i++)n()}this.scene.tutorialManager.isRunning()&&this.handleEventTutorialAfterTap()}},n.animationRotateDice=function(e,t,n){var i=this,a=-(this.dataDiceRandom[0].length-1)*this.diceWidth/2,s=-(this.dataDiceRandom.length-1)*this.diceHeight/2,r=a+e*this.diceWidth,o=s+t*this.diceHeight;this.scene.tweens.addCounter({from:0,to:90,ease:Phaser.Math.Easing.Back.Out,onUpdate:function(e){var t=Math.min(r,o)>=0?1:0,a=0;270!==i.angleValue&&0!==i.angleValue||(a=180);var s=i.angleValue-a+e.getValue()+180*t,c=Math.cos(s*Math.PI/180)*i.diceWidth/2,h=Math.sin(s*Math.PI/180)*i.diceHeight/2;n.setPosition(c,h)},duration:400,onComplete:function(){n.setPosition(r,o,i.diceWidth,i.diceHeight),i.isRotating=!1}})},n.createTweenScaleUp=function(){var e=this;this.tweenScaleUp=this.scene.add.tween({paused:!0,scale:1.2,targets:this.diceContainer,duration:300,onComplete:function(){e.diceContainer.setScale(1.2)}})},n.listenEvents=function(){var e=this;this.scene.input.dragTimeThreshold=30,this.on(Phaser.Input.Events.POINTER_DOWN,(function(t){e.handlePointerDown(t)})),this.on(Phaser.Input.Events.POINTER_UP,(function(t){e.handlePointerUp(t)})),this.on(Phaser.Input.Events.DRAG_START,(function(){console.log("DRAG_START")})),this.on(Phaser.Input.Events.DRAG,(function(t){console.log("DRAG"),e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,70);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handlePointerDown=function(e){this.pointerDownPosition={x:e.x,y:e.y}},n.handlePointerUp=function(e){if(console.log("handlePointerUp"),console.log("-------------------------"),(!this.scene.tutorialManager.isRunning()||this.scene.tutorialManager.isAlowTap())&&!this.isRotating&&!this.isShowing)if(this.isRotating=!0,!this.amountDice||this.amountDice<2)this.isRotating=!1;else if(this.isDragged)this.isRotating=!1;else if(this.angleValue+=90,360===this.angleValue&&(this.angleValue=0),!(this.dataDiceRandom.length<=1&&this.dataDiceRandom[0].length<=1)){this.pointerDownPosition=null;var t=[];switch(this.direction){case"HORIZONTAL":(t=[[],[]])[0][0]=this.dataDiceRandom[0][0],t[1][0]=this.dataDiceRandom[0][1],this.direction="VERTICAL";break;case"VERTICAL":(t=[[]])[0][0]=this.dataDiceRandom[1][0],t[0][1]=this.dataDiceRandom[0][0],this.direction="HORIZONTAL"}this.dataDiceRandom=t,this.rotateDice()}},n.handleDrag=function(e){var t;if(!this.scene.isGameScoreReached&&this.diceContainer.visible&&this.pointerDownPosition){var n=this.pointerDownPosition,i=n.x,a=n.y,s=e.x,r=e.y;if(!(Phaser.Math.Distance.Between(i,a,s,r)<10)){if(this.scene.game.updateFps(Wu.Z.max),this.scene.tutorialManager.isRunning()){if(!this.scene.tutorialManager.isAlowDrag())return;this.scene.tutorialManager.handFrame.setVisible(!1)}this.scene.events.emit(Ic,!0),this.isScaleUp||(this.scene.audio.playSound(ah.Z.DICE_PICKUP),this.diceContainer.setScale(1),this.tweenScaleUp.play(),this.isScaleUp=!0),null!=(t=this.tweenMoveBack)&&t.isPlaying()&&this.tweenMoveBack.stop();try{this.isDragged=!0,this.diceContainer.setPosition(e.worldX,e.worldY-100),this.scene.events.emit(wc),this.canMove();for(var o=this.getCellsHighlight(),c=0;c<o.length;c++)o[c].value=this.dataDice[c].value;this.sortCellHighlight(o),this.scene.events.emit(Ac,o)}catch(h){}}}},n.handleDragEnd=function(){var e=this;if(this.scene.events.emit(Ic,!0),this.isScaleUp=!1,this.pointerDownX=0,this.pointerDownY=0,this.isDragged)try{this.canMove(),this.scene.audio.playSound(ah.Z.DICE_DROP);for(var t=this.getCellsHighlight(),n=0,i=0,a=0;a<t.length;a++)t[a].value=this.dataDice[a].value;if(1===t.length&&(n=t[0].pX,i=t[0].pY),2===t.length){var s=Math.min(t[0].pX,t[1].pX),r=Math.min(t[0].pY,t[1].pY);n=s+Math.abs(t[0].pX-t[1].pX)/2,i=r+Math.abs(t[0].pY-t[1].pY)/2}this.sortCellHighlight(t),this.scene.add.tween({targets:this.diceContainer,x:n,y:i,duration:100,onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setVisible(!1),e.scene.events.emit(Cc,t,(function(){e.diceContainer.setPosition(e.x,e.y),e.scene.tutorialManager.isRunning()?e.handleEventTutorialAfterDragEnd():(e.hideDice(),e.showDice(),e.scene.footer.nextDice.handleNextDice(),e.scene.events.emit(Tc,e.amountDice,e.dataDiceRandom)),e.scene.updateMatchData()}))}})}catch(o){o instanceof Error&&"Invalid Move"===o.message&&this.handleInvalidMove()}},n.sortCellHighlight=function(e){mi()(e).call(e,(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))},n.getPositionTopLeftInBoard=function(){for(var e,t=this.diceContainer.x-this.diceWidth/2*((null==(e=this.dataDiceRandom[0])?void 0:e.length)-1),n=this.diceContainer.y-this.diceHeight/2*(this.dataDiceRandom.length-1),i=-1,a=-1,s=this.scene.main.board.dataBoard,r=0;r<td;r++)for(var o=0;o<ed;o++)if(s[r][o].pX-this.diceWidth/2-5<=t&&s[r][o].pX+this.diceWidth/2+5>=t&&s[r][o].pY-this.diceHeight/2-5<=n&&s[r][o].pY+this.diceHeight/2+5>=n){i=o,a=r;break}return i<0||i>ed-1||a<0||a>td-1?null:{x:i,y:a}},n.getCellsHighlight=function(){var e=this.scene.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;for(var i=0;i<this.matrixData.length;i++)for(var a=0;a<this.matrixData[i].length;a++)if(this.matrixData[i][a].value){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].pX:0,c=e[r]&&e[r][s]?e[r][s].pY:0;t.push({x:s,y:r,pX:o,pY:c,value:0})}return t},n.canMove=function(){var e=this.scene.main.board.dataBoard,t=this.getCellsHighlight();if(this.scene.tutorialManager.isRunning()){var n=this.scene.tutorialManager.getTargetPosition();if(0===t.length)throw new Error("Invalid Move");if(0===n.length)throw new Error("Invalid Move");for(var i=0;i<n.length;i++){var a=t[i];if(!t||n[i].x!==a.x||n[i].y!==a.y)throw new Error("Invalid Move")}return!1}for(var s=!0,r=0;r<t.length;r++){var o=t[r],c=o.x,h=o.y;if(!e[h]||!e[h][c]||0!==e[h][c].value){s=!1;break}}if(!s||0===t.length)throw new Error("Invalid Move");return s},n.restart=function(){this.direction="",this.amountDice=0,this.diceContainer.setVisible(!1),this.diceContainer.setPosition(this.x,this.y),this.hideDice()},n.handleInvalidMove=function(){var e=this;this.tweenMoveBack=this.scene.add.tween({targets:this.diceContainer,x:this.x,y:this.y,scale:1,duration:300,ease:Phaser.Math.Easing.Sine.InOut,onStop:function(){e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y)},onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y),e.scene.audio.playSound(ah.Z.DICE_INVALID_MOVE)}})},n.handleEventTutorialAfterDragEnd=function(){this.scene.events.emit(Ku.DRAG_END)},n.handleEventTutorialAfterTap=function(){this.scene.events.emit(Ku.TAP_END)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.diceContainer.setAlpha(.2)},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.diceContainer.setAlpha(1)},t}(Phaser.GameObjects.Container),id=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.itemMagnet=void 0,n.nextDice=void 0,n.pY=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone.height;this.pY=e/2+180,this.createItemMagnet(),this.createNextDice(),this.createPieces()},n.createPieces=function(){this.pieces=new nd(this.scene),this.pieces.setContentPosition(this.scene.gameZone.width/2,this.pY)},n.createItemMagnet=function(){this.itemMagnet=new Lu(this.scene,61,this.pY-20)},n.createNextDice=function(){this.nextDice=new Hu(this.scene,310,this.pY-20)},n.disableItems=function(){this.pieces.disableItem(),this.itemMagnet.disableItem(),this.nextDice.disableItem()},n.enableItems=function(){this.pieces.enableItem(),this.itemMagnet.enableItem(),this.nextDice.enableItem()},t}(Phaser.GameObjects.Container),ad=id,sd=Yl()(.3,-.6,.85,.07),rd=Yl()(0,.7,.5,2),od=Ko.Z.GAMEPLAY,cd=od.KEY,hd=od.FRAME,ld=function(){function e(e){this.scene=void 0,this.imageStar=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.onComplete=void 0,this.glowImage=void 0,this.glowImageTween=void 0,this.glowBorder=void 0,this.glowBorderTween=void 0,this.particle=void 0,this.emitterBubble=void 0,this.emitterStar=void 0,this.starToScoreTween=void 0,this.emitterExploreScore=void 0,this.tweenEmitterExploreScore=void 0,this.glareCircle=void 0,this.glareCross=void 0,this.tweenExploreScore=void 0,this.tweenScaleGlareCross=void 0,this.animationMerge=void 0,this.particles=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createImageMoveToScore(),this.createGlowImage(),this.createGlowBorder(),this.createParticle(),this.createEmitter(),this.createPath(),this.createEmitterStar(),this.createTweenExploreScore(),this.createEmitterExploreScore()},t.createImageMoveToScore=function(){this.imageStar=this.scene.make.image({key:cd,frame:hd.STAR}),this.imageStar.setVisible(!1),this.imageStar.setScale(1.7)},t.createGlowImage=function(){this.glowImage=this.scene.make.image({key:cd,frame:hd.GLOW}),this.glowImage.setVisible(!1)},t.createGlowBorder=function(){this.glowBorder=this.scene.make.image({key:cd,frame:hd.GLOW_BORDER}),this.glowBorder.setVisible(!1)},t.createParticle=function(){this.particle=this.scene.add.particles(cd),this.particle.setDepth(Ma.Z.EFFECT)},t.createEmitter=function(){this.emitterBubble=this.particle.createEmitter({frame:[hd.CIRCLE_4,hd.CIRCLE_2,hd.CIRCLE_3],x:0,y:0,lifespan:2e3,speedY:{min:-50,max:-10},scale:{start:.7,end:0},alpha:{min:.1,max:.3},blendMode:"ADD",maxParticles:15,scaleX:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},emitZone:{type:"edge",source:new Phaser.Geom.Rectangle(-25,-25,50,50),quantity:6,seamless:!0},on:!1})},t.createEmitterStar=function(){this.emitterStar=this.particle.createEmitter({name:"EmitterStar",x:0,y:0,frame:[hd.STAR,hd.CIRCLE_1,hd.CIRCLE_2],speed:{min:50,max:100},scale:{start:.7,end:0},follow:this.imageStar,on:!1,angle:{min:80,max:100},lifespan:{min:500,max:1e3}})},t.playAnimationShow=function(e,t){var n=e.scaleX,i=e.scaleY,a=t.pX,s=t.pY;e.setVisible(!0),e.setAlpha(0),this.scene.tweens.add({targets:e,x:{from:a+50,to:a},y:{from:s+100,to:s},alpha:{from:0,to:1},angle:{from:30,to:0},scaleX:{from:n-.5,to:n},scaleY:{from:i-.5,to:i},duration:600,ease:"Back.easeOut"})},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=new Phaser.Math.Vector2(100,100),n=new Phaser.Math.Vector2(0,0),i=new Phaser.Math.Vector2(0,0);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(t,n,i),this.starToScoreTween=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(){e.curve.getPoint(e.path.t,e.path.vec),e.imageStar.setPosition(e.path.vec.x,e.path.vec.y)},onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null,e.playAnimationExploreScore(),e.emitterStar.stop(),e.imageStar.setVisible(!1)}})},t.createTweenExploreScore=function(){this.glareCircle=this.scene.make.image({key:cd,frame:hd.GLARE_CIRCLE}).setVisible(!1).setScale(0).setAlpha(0),this.glareCross=this.scene.make.image({key:cd,frame:hd.GLARE_CROSS}).setDepth(Ma.Z.EFFECT).setVisible(!1).setScale(0).setAlpha(0),this.tweenExploreScore=this.scene.add.tween({paused:!0,targets:[this.glareCircle],alpha:{from:0,to:1},scale:{from:1.5,to:2},ease:"Sine.easeInOut",duration:400,yoyo:!0}),this.tweenScaleGlareCross=this.scene.add.tween({paused:!0,targets:[this.glareCross],alpha:{from:.1,to:1},scale:{from:0,to:2},ease:"Back.easeInOut",duration:400,yoyo:!0})},t.createEmitterExploreScore=function(){var e=this;this.particles=this.scene.add.particles(cd),this.particles.setDepth(Ma.Z.EFFECT),this.emitterExploreScore=this.particles.createEmitter({frame:[hd.CIRCLE_1,hd.CIRCLE_2,hd.CIRCLE_3],speed:{min:50,max:120},x:0,y:0,on:!1,maxParticles:15,quantity:15,lifespan:2e4,delay:200}),this.tweenEmitterExploreScore=this.scene.tweens.add({targets:this.particles,scale:{from:0,to:1},duration:500,yoyo:!0,paused:!0,onComplete:function(){e.emitterExploreScore.killAll(),e.emitterExploreScore.stop()}})},t.playAnimationExploreScore=function(){this.glareCircle.setVisible(!0),this.glareCross.setVisible(!0),this.tweenExploreScore.play(),this.tweenScaleGlareCross.play(),this.emitterExploreScore.dead=[],this.emitterExploreScore.start(),this.tweenEmitterExploreScore.play()},t.playAnimationMoveTo=function(e,t,n){var i=this,a=t.pX,s=t.pY,r=e.x,o=e.y,c=e.scaleX,h=e.scaleY;this.scene.add.tween({x:a,y:s,scaleX:{from:c,to:c-.2},scaleY:{from:h,to:h-.2},ease:sd,targets:e,onComplete:function(){i.scene.audio.playSound(ah.Z.DICE_MERGE),n&&n(),e.x=r,e.y=o,e.setScale(c,h)},duration:200})},t.playAnimationMerge=function(e,t){var n=this,i=e.scaleX,a=e.scaleY,s=e.depth,r=i,o=a;e.setDepth(Ma.Z.EFFECT),this.glowImage.setVisible(!0),this.glowImage.setDepth(Ma.Z.EFFECT),this.glowImage.setPosition(e.x,e.y),this.glowImage.setDisplaySize(3*e.displayWidth,3*e.displayHeight),this.glowBorder.setPosition(e.x,e.y),this.glowBorder.setDepth(Ma.Z.EFFECT),this.glowBorder.setDisplaySize(e.displayWidth,e.displayHeight),this.animationMerge=this.scene.add.tween({scaleX:{from:i,to:i-.1},scaleY:{from:a,to:a-.1},targets:[e,this.glowImage],onComplete:function(){n.scene.add.tween({scaleX:{from:i,to:i+.3},scaleY:{from:a,to:a+.3},targets:[e,n.glowImage],onUpdate:function(){e.angle-=.1},onComplete:function(){var i=e.angle,a=n.glowBorder,c=a.scaleX,h=a.scaleY;n.scene.add.tween({alpha:.3,targets:n.glowImage,onComplete:function(){n.glowImage.setVisible(!1),n.glowBorder.setVisible(!0),n.scene.add.tween({scaleX:{from:c,to:c+.3},scaleY:{from:h,to:h+.3},alpha:{from:1,to:.7},targets:n.glowBorder,onComplete:function(){n.glowBorder.setVisible(!1),e.setScale(r,o),t&&t()},duration:200}),n.playEmitterBubble(e)},duration:200}),n.scene.add.tween({scaleX:r,scaleY:o,angle:{from:i,to:0},ease:rd,targets:e,duration:300,onComplete:function(){e.setDepth(s)}})},duration:200})},duration:200}),this.scene.add.tween({alpha:{from:0,to:1},targets:this.glowImage,duration:300})},t.playAnimationStarToScore=function(e,t,n,i){this.onComplete=i,this.emitterStar.setVisible(!0),this.emitterStar.start();var a=Math.abs(e.pX-t.pX);a=e.pX<=t.pX?t.pX-a:t.pX+a,this.glareCircle.setPosition(t.pX,t.pY),this.glareCross.setPosition(t.pX,t.pY),this.particles.setPosition(t.pX,t.pY),this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(a,t.pY-250),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY);var s=n&&n.length>1?3121622:16777215;this.imageStar.setVisible(!0),this.imageStar.setPosition(e.pX,e.pY),this.imageStar.setTint(s),this.imageStar.setScale(2),this.starToScoreTween.play(),this.emitterStar.setTint(s)},t.playEmitterBubble=function(e){this.emitterBubble.killAll(),this.emitterBubble.dead=[],this.emitterBubble.setPosition(e.x,e.y),this.emitterBubble.start()},t.stopAnimation=function(){var e,t,n,i;(this.imageStar.setVisible(!1),this.glowImage.setVisible(!1),this.glowBorder.setVisible(!1),null!=(e=this.starToScoreTween)&&e.isPlaying())&&(null==(n=this.starToScoreTween)||n.stop());null!=(t=this.animationMerge)&&t.isPlaying()&&(null==(i=this.animationMerge)||i.stop());this.emitterStar.setVisible(!1)},e}(),ud=Ko.Z.EFFECTS,dd=ud.KEY,pd=ud.FRAME,md=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.onComplete=void 0,n.background=void 0,n.outOfMoveText=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.scene=t,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createOutOfMoveText(),this.createTweenShow(),this.createTweenHide(),this.addItemContainer()},n.createBackground=function(){this.background=this.scene.make.image({key:dd,frame:pd.BG_OUT_OF_MOVE});var e=this.scene.gameZone.width,t=e*this.background.height/this.background.width;this.background.setWorldSize(e,t)},n.createOutOfMoveText=function(){this.outOfMoveText=this.scene.make.image({key:dd,frame:pd.TEXT_OUT_OF_ROOM}),this.outOfMoveText.setWorldSize(182,20)},n.createTweenShow=function(){var e=this,t=this.scene.gameZone.height;this.tweenShow=this.scene.add.tween({targets:this,y:{from:t,to:t/2-45},alpha:{from:0,to:1},duration:500,paused:!0,onComplete:function(){e.tweenHide.play()}})},n.createTweenHide=function(){var e=this;this.tweenHide=this.scene.add.tween({delay:3e3,targets:this,alpha:{from:1,to:0},duration:500,paused:!0,onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null}})},n.addItemContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setPosition(t/2,n/2),this.setVisible(!1).setAlpha(0),this.add([this.background,this.outOfMoveText]),this.setDepth(99),Phaser.Display.Align.In.Center(this.outOfMoveText,this.background,0,-3)},n.playAnimationShow=function(e){this.onComplete=e,this.setVisible(!0),this.tweenShow.play()},t}(Phaser.GameObjects.Container),fd={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},gd={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}}.STATUS,vd=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(gd.READY)},t.start=function(){this.isRunning()||this.setState(gd.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(gd.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===gd.READY},t.isRunning=function(){return this.state===gd.RUNNING},t.isStopped=function(){return this.state===gd.STOPPED},e}(),yd=vd,Sd=Ko.Z.TUTORIAL,Ed=Sd.KEY,bd=Sd.FRAME,Ad=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.bgTop=void 0,a.bgMiddle=void 0,a.bgBottom=void 0,a.scene=t,a.setSize(n,i),a.init(),a.scene.add.existing((0,Wo.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBg(),this.updatePopupSize(),this.alignPopupImages()},n.createBg=function(){this.bgTop=this.scene.add.image(0,0,Ed,bd.BG_TOP),this.bgMiddle=this.scene.add.image(0,0,Ed,bd.BG_MIDDLE),this.bgBottom=this.scene.add.image(0,0,Ed,bd.BG_BOTTOM),this.add([this.bgTop,this.bgMiddle,this.bgBottom])},n.updatePopupSize=function(){var e=this.width*this.bgTop.height/this.bgTop.width;this.bgTop.setWorldSize(this.width,e-1),this.bgBottom.setWorldSize(this.width,this.width*this.bgBottom.height/this.bgBottom.width),this.bgMiddle.setWorldSize(this.width,this.height-this.bgTop.displayHeight-this.bgBottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.bgTop,this,0,-this.bgMiddle.displayHeight/2-this.bgTop.displayHeight/2),Phaser.Display.Align.In.Center(this.bgMiddle,this),Phaser.Display.Align.In.Center(this.bgBottom,this,0,this.bgMiddle.displayHeight/2+this.bgBottom.displayHeight/2)},t}(Phaser.GameObjects.Container),Cd=Ko.Z.TUTORIAL,Id=Cd.KEY,wd=Cd.FRAME,Td=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,Id,wd.M_STEP_1),this.text.setWorldSize(197,52),this.add([this.text])},t}(Ad),Pd=Ko.Z.TUTORIAL,xd=Pd.KEY,kd=Pd.FRAME,Dd=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,xd,kd.M_STEP_2),this.text.setWorldSize(203,115),this.add([this.text])},t}(Ad),Od=Ko.Z.TUTORIAL,_d=(Od.KEY,Od.FRAME,function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenScaleDownMessFrame1=void 0,this.messFrame1=void 0,this.messFrame2=void 0,this.tweenScaleUpMessFrame2=void 0,this.tweenScaleDownMessFrame2=void 0,this.tweenHand=void 0,this.targetPosition=[{x:2,y:3}],this.scene=e.scene,this.manager=e}var t=e.prototype;return t.handleDragEnd=function(){var e=this;this.tweenScaleDownMessFrame1.play(),this.messFrame2.setVisible(!0),this.tweenScaleUpMessFrame2.play();var t=this.scene.gameZone.height;this.manager.createMask([{x:155,y:t/2-25,width:65,height:65,radius:6},{x:120,y:t/2+115,width:135,height:135,radius:70}]),this.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenScaleDownMessFrame2.play(),e.scene.input.off(Phaser.Input.Events.POINTER_DOWN)}))},t.start=function(){this.initBoardData(),this.createMessage1(),this.createMessage2(),this.createMask(),this.createTweenHand(),this.manager.inputType="DRAG",this.scene.footer.pieces.showDice([[1]])},t.initBoardData=function(){for(var e=[{x:2,y:1,value:1},{x:2,y:2,value:1}],t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=n.value,r=this.scene.main.board.dataBoard[a][i],o=r.dice;r.value=s,o.setCustomValue(s),o.setVisible(!0)}this.setDepthTargetDice()},t.setDepthTargetDice=function(){for(var e=0;e<this.targetPosition.length;e++){var t=this.targetPosition[e],n=t.x,i=t.y;this.scene.main.board.dataBoard[i][n].dice.setDepth(Ma.Z.DICE)}},t.createMessage1=function(){var e=this,t=this.scene.gameZone.width;this.messFrame1=new Td(this.scene,244,86),this.messFrame1.setPosition(t/2,70),this.messFrame1.setDepth(9999999),this.scene.add.tween({targets:this.messFrame1,y:{from:-50,to:70},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownMessFrame1=this.scene.add.tween({paused:!0,targets:this.messFrame1,scale:{from:this.messFrame1.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame1.setVisible(!1)}})},t.createMessage2=function(){var e=this,t=this.scene.gameZone.width;this.messFrame2=new Dd(this.scene,244,153),this.messFrame2.setPosition(t/2,230),this.messFrame2.setDepth(9999999);var n=this.messFrame2.scale;this.messFrame2.setAlpha(0).setScale(0).setVisible(!1),this.tweenScaleUpMessFrame2=this.scene.add.tween({delay:200,paused:!0,targets:this.messFrame2,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownMessFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:n,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame2.setVisible(!1),e.manager.handFrame.setVisible(!1),e.tweenHand.stop(),e.scene.tweens.killTweensOf([e.tweenHand]),e.manager.nextTutorial()}})},t.createMask=function(){var e=this.scene.gameZone.height;this.manager.createMask([{x:155,y:e/2-148,width:65,height:188,radius:6},{x:120,y:e/2+115,width:135,height:135,radius:70}])},t.createTweenHand=function(){var e=this.scene.gameZone.height,t=e/2+180+this.manager.handFrame.displayHeight/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(200,t),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:t,to:e/2+20},duration:1500})},e}()),Rd=_d,Md=Ko.Z.TUTORIAL,Bd=Md.KEY,Nd=Md.FRAME,Ld=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,Bd,Nd.M_STEP_3),this.text.setWorldSize(220,117),this.add([this.text])},t}(Ad),Gd=Ko.Z.TUTORIAL,Fd=Gd.KEY,Zd=Gd.FRAME,Ud=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,Fd,Zd.M_STEP_4),this.text.setWorldSize(190,42),this.add([this.text])},t}(Ad),Vd=Ko.Z.TUTORIAL,Yd=Vd.KEY,Hd=Vd.FRAME,Wd=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,Yd,Hd.M_STEP_5),this.text.setWorldSize(206,54),this.add([this.text])},t}(Ad),Kd=Ko.Z.TUTORIAL,zd=Kd.KEY,Xd=Kd.FRAME,jd=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.text=void 0,a.scene=t,a.createTextMessage(),a}return(0,c.Z)(t,e),t.prototype.createTextMessage=function(){this.text=this.scene.add.image(0,0,zd,Xd.M_STEP_6),this.text.setWorldSize(168,126),this.add([this.text])},t}(Ad),Jd=Ko.Z.TUTORIAL,qd=(Jd.KEY,Jd.FRAME,function(){function e(e){var t=this;this.scene=void 0,this.manager=void 0,this.messFrame1=void 0,this.messFrame2=void 0,this.messFrame3=void 0,this.messFrame4=void 0,this.textTap=void 0,this.tweenScaleDownFrame1=void 0,this.tweenScaleUpFrame2=void 0,this.tweenScaleDownFrame2=void 0,this.tweenScaleUpFrame3=void 0,this.tweenScaleDownFrame3=void 0,this.tweenScaleUpFrame4=void 0,this.tweenTapHand=void 0,this.tweenMoveHand=void 0,this.tweenTapText=void 0,this.targetPosition=[{x:2,y:2},{x:2,y:3}],this.handleEndTutorial=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scene.storage.dispatch(Ro());case 2:dr.emit(Va.REPLAY);case 3:case"end":return e.stop()}}),e)}))),this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.createMessage1(),this.createMessage2(),this.createMessage3(),this.createMessage4(),this.createMask(),this.createTweenTap()},t.initBoardData=function(){for(var e=[{x:0,y:2,value:1},{x:1,y:2,value:1},{x:3,y:3,value:2},{x:4,y:3,value:2}],t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=n.value,r=this.scene.main.board.dataBoard[a][i],o=r.dice;r.value=s,o.setCustomValue(s),o.setVisible(!0)}this.setDepthTargetDice()},t.setDepthTargetDice=function(){for(var e=0;e<this.targetPosition.length;e++){var t=this.targetPosition[e],n=t.x,i=t.y;this.scene.main.board.dataBoard[i][n].dice.setDepth(Ma.Z.DICE)}},t.createMessage1=function(){var e=this,t=this.scene.gameZone.width;this.messFrame1=new Ld(this.scene,244,153),this.messFrame1.setPosition(t/2,300),this.messFrame1.setAlpha(0),this.messFrame1.setDepth(9999999),this.scene.add.tween({targets:this.messFrame1,scale:{from:0,to:this.messFrame1.scale},alpha:{from:0,to:1},duration:300,onComplete:function(){e.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenScaleDownFrame1.play(),e.manager.inputType="TAP",e.scene.input.off(Phaser.Input.Events.POINTER_DOWN)}))}}),this.tweenScaleDownFrame1=this.scene.add.tween({paused:!0,targets:this.messFrame1,scale:{from:this.messFrame1.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.textTap.setVisible(!0),e.manager.handFrame.setVisible(!0),e.scene.footer.pieces.showDice([[1,2]],"HORIZONTAL"),e.tweenScaleUpFrame2.play(),e.tweenTapText.play(),e.tweenTapHand.play()}})},t.createMessage2=function(){var e=this,t=this.scene.gameZone.width;this.messFrame2=new Ud(this.scene,244,85),this.messFrame2.setPosition(t/2,70),this.messFrame2.setAlpha(0),this.messFrame2.setDepth(9999999),this.tweenScaleUpFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:0,to:this.messFrame2.scale},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownFrame2=this.scene.add.tween({paused:!0,targets:this.messFrame2,scale:{from:this.messFrame2.scale,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame2.setVisible(!1),e.messFrame3.setVisible(!0),e.tweenScaleUpFrame3.play()}})},t.createMessage3=function(){var e=this,t=this.scene.gameZone.width;this.messFrame3=new Wd(this.scene,244,87),this.messFrame3.setPosition(t/2,80),this.messFrame3.setAlpha(0).setScale(0).setVisible(!1);var n=this.messFrame3.scale;this.messFrame3.setDepth(9999999),this.tweenScaleUpFrame3=this.scene.add.tween({paused:!0,targets:this.messFrame3,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300}),this.tweenScaleDownFrame3=this.scene.add.tween({paused:!0,targets:this.messFrame3,scale:{from:n,to:0},alpha:{from:1,to:0},duration:300,onComplete:function(){e.messFrame3.setVisible(!1),e.messFrame4.setVisible(!0),e.tweenScaleUpFrame4.play()}})},t.createMessage4=function(){var e=this,t=this.scene.gameZone.width;this.messFrame4=new jd(this.scene,244,152);var n=this.messFrame4.scale;this.messFrame4.setPosition(t/2,450),this.messFrame4.setAlpha(0).setScale(0).setVisible(!1),this.messFrame4.setDepth(9999999),this.tweenScaleUpFrame4=this.scene.add.tween({paused:!0,targets:this.messFrame4,scale:{from:0,to:n},alpha:{from:0,to:1},duration:300,onComplete:function(){e.scene.input.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.tutorialManager.stop(),e.messFrame4.setVisible(!1),e.scene.isTutorialRunning=!1,e.scene.input.off(Phaser.Input.Events.POINTER_DOWN),e.scene.analytics.event(Wt._.TUTORIAL_COMPLETE),e.handleEndTutorial()}))}})},t.createMask=function(){var e=this.scene.gameZone.height;this.manager.createMask([{x:32,y:e/2-88,width:136,height:68,radius:6},{x:157,y:e/2-88,width:60,height:128,radius:6},{x:207,y:e/2-28,width:136,height:68,radius:6},{x:120,y:e/2+115,width:135,height:135,radius:70}])},t.createTweenTap=function(){var e=this.scene.gameZone.height;this.textTap=this.scene.make.bitmapText({x:190,y:e/2+180,font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5},text:"TAP"}).setDepth(99999),this.textTap.setVisible(!1),this.manager.handFrame.setVisible(!1),this.manager.handFrame.setPosition(200,e/2+210),this.tweenTapHand=this.scene.add.tween({delay:500,repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:e/2+210,to:e/2+200},duration:500,paused:!0}),this.tweenMoveHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,y:{from:e/2+210,to:e/2},duration:1500,paused:!0}),this.tweenTapText=this.scene.add.tween({delay:500,targets:this.textTap,yoyo:!0,repeat:-1,scale:{from:1,to:1.2},duration:500,paused:!0})},t.handleDragEnd=function(){this.tweenScaleDownFrame3.play();var e=this.scene.gameZone.height;this.manager.createMask([{x:155,y:e/2-90,width:65,height:68,radius:6},{x:120,y:e/2+115,width:135,height:135,radius:70}])},t.handleTabEnd=function(){this.textTap.setVisible(!1),this.tweenTapText.stop(),this.tweenTapHand.stop(),this.tweenMoveHand.play(),this.tweenScaleDownFrame2.play(),this.manager.inputType="DRAG"},e}()),Qd=qd,$d=fd.STATUS,ep=Ko.Z.TUTORIAL,tp=ep.KEY,np=ep.FRAME,ip=GameCore.Configs.Tutorial,ap=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentStep=1,n.tutorialId=void 0,n.inputType=void 0,n.tutorialsDisplayed=[],n.handFrame=void 0,n.background=void 0,n.maskGraphics=void 0,n.stepOne=void 0,n.stepTwo=void 0,n.nextTutorial=function(){n.inputType="",n.scene.main.board.restart(),n.currentStep++,n.scene.events.emit(Ku.START),n.scene.analytics.event(Wt._.TUTORIAL_STEP,{step:n.currentStep})},n.handleEventDragEnd=function(){switch(n.currentStep){case 1:n.stepOne.handleDragEnd();break;case 2:n.stepTwo.handleDragEnd()}},n.handleEventTapEnd=function(){if(2===n.currentStep)n.stepTwo.handleTabEnd()},n.showTutorialWhenStart=function(){switch(n.currentStep){case 1:n.stepOne.start();break;case 2:n.stepTwo.start()}},n.scene=t,n.createBackground(),n.createHand(),n.initTutorialStep(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initTutorialStep=function(){this.stepOne=new Rd(this),this.stepTwo=new Qd(this)},n.start=function(){this.isRunning()||(this.setState($d.RUNNING),this.listenEvents(),this.scene.events.emit(Ku.START))},n.stop=function(){this.isRunning()&&(this.removeEvents(),this.scene.tweens.killTweensOf([this.background]),this.background.setVisible(!1),this.maskGraphics.setVisible(!1),this.setState($d.STOPPED))},n.displayCount=function(e){var t;return C()(t=this.tutorialsDisplayed).call(t,(function(t){return t===e})).length},n.hasDisplayedEnough=function(e){if(!GameCore.Utils.Object.hasOwn(ip.NumberOfTutorial,e))return!0;var t=ip.NumberOfTutorial[e];return!GameCore.Utils.Valid.isNumber(t)||this.displayCount(e)>=t},n.isNothingToDisplay=function(){var e,t=this;return C()(e=ie()(ip.NumberOfTutorial)).call(e,(function(e){return!t.hasDisplayedEnough(e)})).length<1},n.listenEvents=function(){this.scene.events.on(Ku.START,this.showTutorialWhenStart),this.scene.events.on(Ku.DRAG_END,this.handleEventDragEnd),this.scene.events.on(Ku.TAP_END,this.handleEventTapEnd)},n.removeEvents=function(){this.scene.events.off(Ku.START,this.showTutorialWhenStart),this.scene.events.off(Ku.DRAG_END,this.handleEventDragEnd),this.scene.events.off(Ku.TAP_END,this.handleEventTapEnd)},n.createHand=function(){this.handFrame=this.scene.make.image({key:tp,frame:np.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Ma.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.createBackground=function(){this.background=this.scene.make.image({key:tp,frame:np.BLANK}),this.background.setInteractive({}),this.scene.input.setTopOnly(!1),this.background.setTint(0),this.background.setAlpha(0),this.background.setDepth(Ma.Z.BACKGROUND);var e=this.scene.gameZone,t=e.displayWidth+100,n=e.displayHeight+100;this.background.setDisplaySize(t,n),Phaser.Display.Align.In.Center(this.background,this.scene.gameZone)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayerIsNew()},n.createMask=function(e){var t;if(e&&0!==e.length){null==(t=this.maskGraphics)||t.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:16711680,alpha:1}}),this.maskGraphics.setName("MaskGraphics");for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.width,o=i.height,c=i.radius;this.maskGraphics.fillRoundedRect(a,s,r,o,c)}this.background.revive(),this.background.clearMask(!0),this.background.setMask(this.maskGraphics.createGeometryMask()),this.background.mask.invertAlpha=!0,this.runShowMaskAnimation()}},n.isAlowDrag=function(){return"DRAG"===this.inputType},n.isAlowTap=function(){return"TAP"===this.inputType},n.getTargetPosition=function(){var e=[];switch(this.currentStep){case 1:e=this.stepOne.targetPosition;break;case 2:e=this.stepTwo.targetPosition}return e},n.runShowMaskAnimation=function(){var e=[this.background];this.background.setAlpha(0),this.scene.tweens.killTweensOf(e),this.scene.tweens.add({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{from:0,to:.8}}})},t}(yd),sp=ap,rp=GameCore.Configs,op=rp.Gameplay,cp=rp.Match.Levels,hp=function(){function e(){this.levelIndex=0,this.levels=cp,this.recentLevel=void 0}var t=e.prototype;return t.increaseLevel=function(){this.levelIndex++},t.getCurrentTargetScore=function(){return this.levels[this.levelIndex]},t.getNextTargetScoreLevel=function(){return this.levels[this.levelIndex+1]},t.getCurrentIndex=function(){return this.levelIndex},t.updateCurrentLevelByScore=function(e){var t,n=Ll()(t=this.levels).call(t,(function(t){return t>e}));if(-1===n)return this.handleAutoGrantNewLevel(e);this.levelIndex=n;var i=this.levels[n-1];return this.recentLevel=i||e,this.levels[n]},t.restart=function(){this.levelIndex=0,this.recentLevel=0},t.handleAutoGrantNewLevel=function(e){var t=op.Progress.BonusScore,n=this.levels[this.levels.length-1]+t;return this.levels.push(n),n<e?this.handleAutoGrantNewLevel(e):(this.levelIndex=this.levels.length-1,this.recentLevel=this.levels[this.levelIndex],n)},e}(),lp=Ko.Z.DEFAULT,up=lp.KEY,dp=lp.FRAME,pp=function(e){function t(t){var n;return(n=e.call(this,t,up,dp.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("Home"),n.createIcon(),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:up,frame:dp.ICON_FLAT_HOME});e.setWorldSize(36,33),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ic.Z),mp=Ko.Z.DEFAULT,fp=mp.KEY,gp=mp.FRAME,vp=function(e){function t(t){var n;return(n=e.call(this,t,fp,gp.BUTTON_BLUE)||this).button.setWorldSize(252,55),n.setName("Replay"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:fp,frame:gp.ICON_RESUME});e.setWorldSize(26,27),this.add(e),Phaser.Display.Align.In.Center(e,this,-50,1)},n.createText=function(){var e=this.scene.make.image({key:fp,frame:gp.TEXT_REPLAY});e.setWorldSize(80,15),this.add(e),Phaser.Display.Align.In.Center(e,this,21)},t}(ic.Z),yp=Ko.Z.DEFAULT,Sp=yp.KEY,Ep=yp.FRAME,bp=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.bgPopup=void 0,s.settingSoundContainer=void 0,s.settingVibrateContainer=void 0,s.settingSoundIcon=void 0,s.settingVibrateIcon=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.buttonReplay=void 0,s.buttonHome=void 0,s.contents=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.open=function(){e.prototype.open.call((0,Wo.Z)(s));var t=s.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;s.settingSound.updateStatus(n),s.settingVibrate.updateStatus(i),s.runOpenAnimation(),s.updateVibrateButton()},s.handleClosePopup=function(){s.scene.audio.playSound(ah.Z.POPUP_OFF,{volume:.6}),s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleReplayGame=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene.screen.close(s.name),e.next=3,s.scene.storage.dispatch(Ro());case 3:dr.emit(Va.REPLAY);case 4:case"end":return e.stop()}}),e)}))))},s.handlePlayWithFriend=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.scene.screen.close(s.name),e.next=3,s.scene.storage.dispatch(Bo());case 3:dr.emit(Va.REPLAY);case 4:case"end":return e.stop()}}),e)}))),s.handleClickHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){setTimeout((function(){s.scene.screen.close(s.name),s.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}),100)}))},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e),dr.emit(Pc)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createBgPopup(),s.createPopupContent(),s.createInput(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.6),s}(0,c.Z)(t,e);var n=t.prototype;return n.updateVibrateButton=function(){Rh()?this.settingVibrateContainer.revive():(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup))},n.createInput=function(){this.buttonReplay.onClick=this.handleReplayGame,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting,this.buttonHome.onClick=this.handleClickHome},n.createPopup=function(){this.popup=new Ph(this.scene,0,21,308,400,{forceHeightTop:50}),this.popup.setTitle(Ep.TEXT_SETTING,134,22),this.popup.setOnClickButtonClose(this.handleClosePopup),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createBgPopup=function(){this.bgPopup=new Jc(this.scene,0,0,257,145,{frameTop:Ep.POPUP_TOP_DARK,frameMiddle:Ep.POPUP_MIDDLE_DARK,frameBottom:Ep.POPUP_BOTTOM_DARK}),this.popup.add(this.bgPopup),Phaser.Display.Align.In.Center(this.bgPopup,this.popup,0,-42)},n.createPopupContent=function(){this.createSwitchButtons(),this.createMenuButtons(),this.createMinorButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonReplay,this.buttonHome])},n.createMenuButtons=function(){this.createButtonReplay()},n.createButtonReplay=function(){this.buttonReplay=new vp(this.scene),this.buttonReplay.button.setWorldSize(252,53),this.popup.add(this.buttonReplay),Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,80)},n.createMinorButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new pp(this.scene),this.buttonHome.button.setWorldSize(61,49),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,0,150)},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({}),this.settingSoundContainer.setSize(180,30),this.settingSoundIcon=this.scene.make.image({key:Sp,frame:Ep.ICON_SOUND}),this.settingSoundIcon.setWorldSize(40,34),this.settingSound=new _h(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingSoundIcon,this.settingSoundContainer,-53,3),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35,0),this.settingSoundContainer.add([this.settingSoundIcon,this.settingSound]),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({}),this.settingVibrateContainer.setSize(180,30),this.settingVibrateIcon=this.scene.make.image({key:Sp,frame:Ep.ICON_VIBRATE}),this.settingVibrateIcon.setWorldSize(43,46),this.settingVibrate=new _h(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingVibrateIcon,this.settingVibrateContainer,-56,-3),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35,3),this.settingVibrateContainer.add([this.settingVibrateIcon,this.settingVibrate]),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)},n.runOpenAnimation=function(){this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Ap=n(97308),Cp=Ko.Z.DEFAULT,Ip=Cp.KEY,wp=Cp.FRAME,Tp=GameCore.Configs,Pp=Tp.Match,xp=Tp.Network,kp=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).isUseRescue=void 0,s.countdownCount=void 0,s.popup=void 0,s.skipText=void 0,s.continueButton=void 0,s.tweenContinueButton=void 0,s.continueButtonAnimation=void 0,s.textRescueTime=void 0,s.tweenTextRescueTime=void 0,s.progressCircle=void 0,s.skipTextTween=void 0,s.countdownTimer=void 0,s.bgProgress=void 0,s.popupShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.adsTimer=void 0,s.open=function(){e.prototype.open.call((0,Wo.Z)(s)),s.scene.audio.playSound(ah.Z.RESCUE_TIME),s.runOpenAnimation()},s.close=function(){e.prototype.close.call((0,Wo.Z)(s)),s.bgProgress.setVisible(!1),s.progressCircle.setVisible(!1),s.continueButton.setVisible(!1),s.skipText.setVisible(!1),s.textRescueTime.setScale(0).setAlpha(0)},s.handleShowRewardedVideoAd=(0,o.Z)(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.game,n=t.globalScene,i=t.audio,s.countdownTimer.remove(),e.prev=2,!s.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:return s.scene.storage.dispatch(Yo()),s.isUseRescue=!0,n.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=12,new(se())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(xp.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 12:return e.next=14,s.scene.ads.showRewardedVideoAsync();case 14:s.scene.analytics.showRewardedVideoAd(s.scene.getSceneName()),s.scene.screen.close(s.name),dr.emit(Va.RESCUE),i.playSound(ah.Z.DAILY_REWARD),n.screen.close(Ba.o4.NOTIFY_SCREEN),e.next=29;break;case 21:if(e.prev=21,e.t0=e.catch(2),console.log("errrrrrrrrrrrrrrrrrrrr ",e.t0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=28;break}if("USER_INPUT"!==e.t0.code){e.next=28;break}return s.showNotifySkipAds(),e.abrupt("return");case 28:s.showNotifyNoAds();case 29:return e.prev=29,null==(a=s.adsTimer)||a.destroy(),i.unmuteAll(),i.playMusic(),s.scene.ads.preloadRewardedVideoAsync().catch(),e.finish(29);case 35:case"end":return e.stop()}}),e,null,[[2,21,29,35]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===Ba.o4.NOTIFY_SCREEN){var t=s.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),e.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==Ba.o4.NOTIFY_SCREEN||(s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.screen.open(Ba.o4.GAME_OVER_SCREEN))},s.handleSkip=function(){s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.storage.dispatch(Go())},s.handleRunCountdown=function(){s.countdownCount-=1,s.countdownCount<=0?s.rescueTimeout():s.setTime(s.countdownCount)},s.countdownCount=Pp.MaxRescueCount,s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s.createPopup(),s.createContent(),s}(0,c.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.tweenTextRescueTime.play(),this.skipText.setVisible(!0),this.skipTextTween.play(),this.tweenContinueButton.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=cr(e);this.textRescueTime.setText(String(t.score||0))},n.setTime=function(e){this.textRescueTime.setText(""+e),Phaser.Display.Align.In.Center(this.textRescueTime,this.popup,0,-68)},n.createPopup=function(){this.popup=new Ph(this.scene,0,-27,305,295,{forceHeightTop:48}),this.popup.setTitle(wp.TEXT_SECOND_CHANCE,261,20),this.popup.hideButtonClose(),this.add(this.popup)},n.createContent=function(){this.createTextRescueTime(),this.createBgProgressCircle(),this.createProgressCircle(),this.createContinueButton(),this.createSkipText()},n.createTextRescueTime=function(){this.textRescueTime=this.scene.make.bitmapText({font:_c.Z.NUMBER_DARK.KEY,size:this.scene.fontSize(70),origin:{x:.5,y:.5}}),this.textRescueTime.setOrigin(.5).setScale(0).setAlpha(0),this.add(this.textRescueTime),this.tweenTextRescueTime=this.scene.tweens.add({delay:100,targets:this.textRescueTime,paused:!0,duration:200,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Power1"})},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.setProgressCircle=function(e){var t=Phaser.Math.DegToRad(-90),n=Phaser.Math.DegToRad(e-360-90);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(7,16762368),this.progressCircle.arc(0,-57.5,53.5,t,n,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.runCountdown=function(){this.startProgressCircle();var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e)},n.startProgressCircle=function(){var e=this;this.scene.tweens.addCounter({from:360,to:0,duration:1e3*Pp.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)},onComplete:function(){e.setProgressCircle(360),e.progressCircle.setAlpha(1)}})},n.createBgProgressCircle=function(){this.bgProgress=this.scene.make.image({key:Ip,frame:wp.BG_PROGRESS_CIRCLE}),this.bgProgress.setWorldSize(115,115),this.popup.add(this.bgProgress),Phaser.Display.Align.In.Center(this.bgProgress,this.popup,0,-30)},n.rescueTimeout=function(){this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.storage.dispatch(Go())},n.createContinueButton=function(){this.continueButton=new ic.Z(this.scene,Ip,wp.BUTTON_GREEN,252,52),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Ip,wp.ICON_ADS);e.setWorldSize(30,28),Phaser.Display.Align.In.Center(e,this.continueButton,-58,2),this.continueButton.add(e);var t=this.scene.make.image({key:Ip,frame:wp.TEXT_CONTINUE});t.setWorldSize(105,16),this.continueButton.add(t),Phaser.Display.Align.In.Center(t,this.continueButton,19,2),Phaser.Display.Align.In.Center(this.continueButton,this.popup,0,75),this.continueButton.setScale(0).setAlpha(0),this.tweenContinueButton=this.scene.tweens.add({paused:!0,targets:this.continueButton,ease:Ap.Z,props:{alpha:{from:0,to:1},scale:{from:1.2,to:1}},delay:300,duration:300})},n.createSkipText=function(){this.skipText=new ic.Z(this.scene,Ip,wp.NO_THANK_TEXT,98,17),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,57),this.skipText.setVisible(!1).setAlpha(0),this.skipTextTween=this.scene.tweens.add({targets:this.skipText,delay:1e3,paused:!0,alpha:{from:0,to:1},ease:"Power1",duration:500})},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.popup.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}},onComplete:function(){n.bgProgress.setVisible(!0),n.progressCircle.setVisible(!0),n.continueButton.setVisible(!0),n.skipText.setVisible(!0),n.runAnim(),n.updateInfo(),n.isUseRescue=!1,n.countdownCount=Pp.RescueGamePopupTimeout,n.setTime(n.countdownCount),n.runCountdown()}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Dp=kp,Op=n(62157),_p=Ko.Z.DEFAULT,Rp=_p.KEY,Mp=_p.FRAME,Bp=function(e){function t(t){var n;return(n=e.call(this,t,Rp,Mp.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("Share"),n.createIcon(),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Rp,frame:Mp.ICON_FLAT_SHARE});e.setWorldSize(33,33),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ic.Z),Np=Ko.Z.DEFAULT,Lp=Np.KEY,Gp=Np.FRAME,Fp=function(e){function t(t){var n;return(n=e.call(this,t,Lp,Gp.BUTTON_BLUE_MEDIUM)||this).button.setWorldSize(121,55),n.setName("Restart"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Lp,frame:Gp.ICON_RESTART});e.setWorldSize(26,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-37)},n.createText=function(){var e=this.scene.make.image({key:Lp,frame:Gp.TEXT_RESTART});e.setWorldSize(72,13),this.add(e),Phaser.Display.Align.In.Center(e,this,16,2)},t}(ic.Z),Zp=Ko.Z.DEFAULT,Up=Zp.KEY,Vp=Zp.FRAME,Yp=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.bgContent=void 0,n.avatarMe=void 0,n.textScoreMe=void 0,n.avatarOpponent=void 0,n.textScoreOpponent=void 0,n.titleFrame=void 0,n.contents=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.myInfoBlock=void 0,n.tweenMyInfoBlock=void 0,n.opponentInfoBlock=void 0,n.tweenOpponentInfoBlock=void 0,n.icon=void 0,n.tweenIcon=void 0,n.buttonRestart=void 0,n.buttonHome=void 0,n.buttonShare=void 0,n.leaders=void 0,n.clickRestart=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(_o());case 2:dr.emit(Va.REPLAY),dr.emit(Dc);case 4:case"end":return e.stop()}}),e)}))))},n.clickShare=function(){n.scene.storage.dispatch(br())},n.handleClosePopup=function(){n.runCloseAnimation()},n.handleShareBestScore=function(){n.scene.storage.dispatch(gr())},n.createPopup(),n.createBgContent(),n.createPopupContent(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Ph(this.scene,0,-99,310,333,{forceHeightTop:52}),this.popup.setOnClickButtonClose(this.clickClose.bind(this)),this.add(this.popup)},n.createBgContent=function(){this.bgContent=new Jc(this.scene,0,0,256,166,{frameTop:Vp.POPUP_TOP_DARK,frameMiddle:Vp.POPUP_MIDDLE_DARK,frameBottom:Vp.POPUP_BOTTOM_DARK}),this.popup.add(this.bgContent),Phaser.Display.Align.In.Center(this.bgContent,this.popup,0,-27)},n.createPopupContent=function(){this.createMyInfoBlock(),this.createOpponentInfoBlock(),this.createIcon(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonHome,this.buttonRestart,this.buttonShare])},n.setLeaders=function(e){this.leaders=e},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonShare()},n.createButtonHome=function(){this.buttonHome=new pp(this.scene),this.buttonHome.onClick=this.clickHome.bind(this),this.buttonHome.button.setWorldSize(60,55),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,-95,98)},n.clickClose=function(){var e=this;this.handleClosePopup(),this.popupFadeOutAnimation.next((0,o.Z)(l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scene.storage.dispatch,t.next=3,n(_o());case 3:dr.emit(Va.REPLAY),dr.emit(Oc);case 5:case"end":return t.stop()}}),t)}))))},n.clickHome=function(){var e=this;this.handleClosePopup(),this.popupFadeOutAnimation.next((0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Sa.C.DASHBOARD_SCENE),dr.emit(Dc);case 2:case"end":return t.stop()}}),t)}))))},n.createButtonPlayWithFriend=function(){this.buttonRestart=new Fp(this.scene),this.buttonRestart.onClick=this.clickRestart,this.popup.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.popup,0,98)},n.createButtonShare=function(){this.buttonShare=new Bp(this.scene),this.buttonShare.onClick=this.clickShare,this.buttonShare.button.setWorldSize(60,55),this.popup.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.popup,95,98)},n.createMyInfoBlock=function(){this.myInfoBlock=this.scene.add.container(),this.avatarMe=new cl(this.scene,{key:Up,frame:Vp.AVATAR_BORDER,background:Vp.AVATAR_BACKGROUND,width:65,height:69,borderWidth:8}),this.myInfoBlock.add(this.avatarMe),Phaser.Display.Align.In.Center(this.avatarMe,this.myInfoBlock,5,-8);var e=this.scene.make.image({key:Up,frame:Vp.BG_SCORE_BROWN_DARK});e.setWorldSize(103,36),this.myInfoBlock.add(e),Phaser.Display.Align.In.Center(e,this.avatarMe,3,58),this.textScoreMe=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(34),text:"0",origin:{x:.5,y:.5}}),this.myInfoBlock.add(this.textScoreMe),Phaser.Display.Align.In.Center(this.textScoreMe,e,0,-2),this.popup.add(this.myInfoBlock),Phaser.Display.Align.In.Center(this.myInfoBlock,this.popup,-72,-38),this.myInfoBlock.setAlpha(0),this.tweenMyInfoBlock=this.scene.tweens.add({targets:this.myInfoBlock,paused:!0,duration:200,delay:400,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createOpponentInfoBlock=function(){this.opponentInfoBlock=this.scene.add.container(),this.avatarOpponent=new cl(this.scene,{key:Up,frame:Vp.AVATAR_BORDER,background:Vp.AVATAR_BACKGROUND,width:65,height:69,borderWidth:8}),this.opponentInfoBlock.add(this.avatarOpponent),Phaser.Display.Align.In.Center(this.avatarOpponent,this.opponentInfoBlock,-7,-8);var e=this.scene.make.image({key:Up,frame:Vp.BG_SCORE_BROWN_DARK});e.setWorldSize(103,36),this.opponentInfoBlock.add(e),Phaser.Display.Align.In.Center(e,this.avatarMe,-13,58),this.textScoreOpponent=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(34),text:"0",origin:{x:.5,y:.5}}),this.opponentInfoBlock.add(this.textScoreOpponent),Phaser.Display.Align.In.Center(this.textScoreOpponent,e,0,-2),this.popup.add(this.opponentInfoBlock),Phaser.Display.Align.In.Center(this.opponentInfoBlock,this.popup,72,-38),this.opponentInfoBlock.setAlpha(0),this.tweenOpponentInfoBlock=this.scene.tweens.add({targets:this.opponentInfoBlock,paused:!0,duration:200,delay:500,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createIcon=function(){this.icon=this.scene.make.image({key:Up,frame:Vp.ICON_BATTLE}),this.icon.setWorldSize(32,32);var e=this.icon.scale;this.popup.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.popup,0,-45),this.icon.setAlpha(0),this.tweenIcon=this.scene.tweens.add({targets:this.icon,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=or(e),n=this.scene.player.getPlayer().playerId,i=$s(e).playerId,a=tr(e,{playerId:n}),s=nr(e,{opponentId:i}),r=(t[n]||{}).score,o=void 0===r?0:r,c=(t[i]||{}).score,h=void 0===c?0:c;return this.textScoreMe.setText(String(o)),this.textScoreOpponent.setText(String(h)),a&&s?o===h?(this.popup.setTitle(Vp.TEXT_WAITING_FOR_OPPONENT,218,14),void this.popup.setBgTop(Vp.POPUP_TOP)):o>h?(this.popup.setTitle(Vp.TEXT_YOU_WIN,135,26),void this.popup.setBgTop(Vp.POPUP_TOP_WIN)):o<h?(this.popup.setTitle(Vp.TEXT_YOU_LOSE,159,26),void this.popup.setBgTop(Vp.POPUP_TOP_LOSE)):void 0:(this.popup.setTitle(Vp.TEXT_WAITING_FOR_OPPONENT,218,14),void this.popup.setBgTop(Vp.POPUP_TOP))},n.loadAvatars=function(){var e=this.scene.storage.getState(),t=this.scene.player.getPlayer(),n=t.photo,i=t.playerId,a=$s(e),s=a.playerId,r=a.photo;this.avatarMe.loadPhoto(i,n,5),this.avatarOpponent.loadPhoto(s,r,5)},n.runAnim=function(){this.icon.setVisible(!0),this.myInfoBlock.setVisible(!0),this.opponentInfoBlock.setVisible(!0),this.tweenIcon.play(),this.tweenMyInfoBlock.play(),this.tweenOpponentInfoBlock.play()},t}(Phaser.GameObjects.Container),Hp=Yp,Wp=Ko.Z.DEFAULT,Kp=Wp.KEY,zp=Wp.FRAME,Xp=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.bgContent=void 0,n.contents=void 0,n.scoreText=void 0,n.bestScoreText=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.buttonRestart=void 0,n.buttonHome=void 0,n.payload=void 0,n.bestScore=void 0,n.currentScore=void 0,n.counterAnimation=void 0,n.scoreAnimation=void 0,n.leaders=void 0,n.clickHome=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((function(){n.scene.scene.switch(Sa.C.DASHBOARD_SCENE),dr.emit(Oc)}))},n.clickRestart=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Ro());case 2:dr.emit(Va.REPLAY),dr.emit(Oc);case 4:case"end":return e.stop()}}),e)}))))},n.initScore(),n.scene=t,n.createPopup(),n.createBgContent(),n.createPopupContent(),n.createScoreAnimation(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Ph(this.scene,0,-88,306,304,{forceHeightTop:52}),this.popup.setTitle(zp.TEXT_YOUR_SCORE,182,22),this.setClickButtonClose(this.clickRestart),this.add(this.popup)},n.createBgContent=function(){this.bgContent=new Jc(this.scene,0,0,254,120,{frameTop:zp.POPUP_TOP_DARK,frameMiddle:zp.POPUP_MIDDLE_DARK,frameBottom:zp.POPUP_BOTTOM_DARK}),this.popup.add(this.bgContent),Phaser.Display.Align.In.Center(this.bgContent,this.popup,0,-34)},n.createPopupContent=function(){this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonHome,this.buttonRestart])},n.setLeaders=function(e){this.leaders=e},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:Kp,frame:zp.BG_BROWN_DARK});e.setWorldSize(176,41),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(46),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.scoreBlock,0,-3),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.Center(this.scoreBlock,this.bgContent,0,-24)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:Kp,frame:zp.BG_PURPLE_DARK});e.setWorldSize(176,41),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:_c.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(45),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,3);var t=this.scene.make.image({key:Kp,frame:zp.ICON_CROWN});t.setWorldSize(30,23),this.bestScoreBlock.add(t),Phaser.Display.Align.In.Center(t,this.bestScoreBlock,-54,-1),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.bgContent,0,27)},n.createButtons=function(){this.createButtonHome(),this.createButtonRestart()},n.createButtonHome=function(){this.buttonHome=new pp(this.scene),this.buttonHome.onClick=this.clickHome,this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.bestScoreBlock,-75,79)},n.createButtonRestart=function(){this.buttonRestart=new Fp(this.scene),this.buttonRestart.onClick=this.clickRestart,this.popup.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.bestScoreBlock,45,79)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=cr(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=or(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(0),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter()},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new jo({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},n.setClickButtonClose=function(e){this.popup.setOnClickButtonClose(e)},t}(Phaser.GameObjects.Container),jp=Xp,Jp=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.bestScore=void 0,s.confettiLeftEffect=void 0,s.confettiRightEffect=void 0,s.queueScreens=[],s.popupYourScore=void 0,s.popupResult=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.open=function(){var t;e.prototype.open.call((0,Wo.Z)(s)),s.popupYourScore.setVisible(!1),s.runFadeInMaskAnimation(100,300),s.initScore(),s.updateScore();var n=s.scene.storage.getState(),i=fs(n);s.showPopupBestScore(),i&&i!==oa&&_t()(t=[ha,ca,la]).call(t,i)>=0?s.showPopupResult():s.showPopupYourScore(),s.scene.audio.playSound(ah.Z.GAME_OVER_SCENE)},s.onYourScoreClose=function(){s.popupYourScore.runCloseAnimation(),s.runFadeOutMaskAnimation(0,200),s.scene.time.delayedCall(300,(function(){s.close(),s.scene.storage.dispatch(_o())}))},s.scene=t,s.createConfettiSmallAnimation(),s.createPopups(),s.listenEvents(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.showPopupBestScore=function(){var e=this.scene.storage.getState(),t=cr(e).score;t&&(t<=this.bestScore||this.scene.screen.open(Ba.o4.BEST_SCORE_SCREEN,{bestScore:t}))},n.showPopupYourScore=function(){var e=this.scene.storage.getState();cr(e).score>this.bestScore||(this.popupYourScore.setVisible(!0),this.popupYourScore.runOpenAnimation(),this.popupYourScore.updateScore())},n.showPopupResult=function(){this.popupResult.setVisible(!0),this.popupResult.runOpenAnimation(),this.popupResult.updateInfo(),this.popupResult.loadAvatars(),this.popupResult.runAnim()},n.createPopups=function(){this.createPopupYourScore(),this.createPopupResult()},n.listenEvents=function(){dr.on("result_screen_close",this.handleCloseResultScreen.bind(this)),dr.on(Dc,this.handleCloseScreen.bind(this)),dr.on(Oc,this.handleCloseScreen.bind(this)),dr.on(kc,this.handleCloseBestScoreScreen.bind(this))},n.handleCloseResultScreen=function(){this.showPopupYourScore(),this.showPopupBestScore()},n.handleCloseScreen=function(){this.scene.screen.close(this.name)},n.handleCloseBestScoreScreen=function(){var e=this.scene.storage.getState(),t=cr(e).score;this.bestScore=t,this.showPopupYourScore()},n.createPopupYourScore=function(){this.popupYourScore=new jp(this.scene),this.popupYourScore.setVisible(!1),this.popupYourScore.setClickButtonClose(this.onYourScoreClose),this.add(this.popupYourScore),Phaser.Display.Align.In.Center(this.popupYourScore,this)},n.createPopupResult=function(){this.popupResult=new Hp(this.scene),this.popupResult.setVisible(!1),this.add(this.popupResult),Phaser.Display.Align.In.Center(this.popupResult,this)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new Op.Z(this.scene,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Op.Z(this.scene,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Ma.Z.ON_TOP),this.confettiRightEffect.setDepth(Ma.Z.ON_TOP)},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e},n.updateScore=function(){var e=this.scene.storage.getState(),t=cr(e),n=t.score,i=t.bestScore;if(this.bestScore=i,void 0===n||void 0===i){var a=or(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),qp=Jp,Qp=n(45353),$p=n(16470),em=Ko.Z.DEFAULT,tm=em.KEY,nm=em.FRAME,im=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).bestScoreText=void 0,s.scorePanel=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.paperFireworksCelebration=void 0,s.starTwinkle=void 0,s.scene=void 0,s.open=function(t){e.prototype.open.call((0,Wo.Z)(s),t),s.setVisible(!0),s.runOpenAnimation(),s.paperFireworksCelebration.run(0,s.scene.gameZone.height,375,200),s.scene.audio.playSound(ah.Z.CONGRATULATION),s.setBestScoreText(t.bestScore)},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)})),dr.emit(kc)},s.setVisible(!1),s.scene=t,s.setDepth(Ba.Ks.POPUP),s.createContent(),s.createConfetti(),s.createStarTwinkle(),s.background.setVisible(!1),s}(0,c.Z)(t,e);var n=t.prototype;return n.createConfetti=function(){this.paperFireworksCelebration=new Qp.Z(this.scene),this.paperFireworksCelebration.setDepth(Ma.Z.ON_TOP)},n.createStarTwinkle=function(){this.starTwinkle=new $p.Z(this.scene),this.add(this.starTwinkle)},n.createContent=function(){this.createCup(),this.createScorePanel(),this.createButtons()},n.createCup=function(){var e=this.scene.make.image({key:tm,frame:nm.ICON_CUP_BEST_SCORE});e.setWorldSize(315,218),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-107)},n.createScorePanel=function(){this.scorePanel=this.scene.add.container();var e=this.scene.make.image({key:tm,frame:nm.POPUP_SCORE_PANEL});e.setWorldSize(200,56),this.scorePanel.add(e),this.bestScoreText=this.scene.make.bitmapText({font:_c.Z.NUMBER_YELLOW.KEY,size:this.scene.fontSize(85),origin:{x:.5,y:.5}}),this.bestScoreText.setText("0"),this.scorePanel.add(this.bestScoreText),this.add(this.scorePanel),Phaser.Display.Align.In.Center(e,this.scorePanel,0,0),Phaser.Display.Align.In.Center(this.bestScoreText,this.scorePanel,0,6.5),Phaser.Display.Align.In.Center(this.scorePanel,this,0,46.5)},n.createButtons=function(){this.createCloseButton()},n.createCloseButton=function(){var e=new ic.Z(this.scene,tm,nm.BUTTON_CLOSE,0,0);e.button.setWorldSize(38,38),e.setName("Close"),this.add(e),e.onClick=this.handleClosePopup,Phaser.Display.Align.In.Center(e,this,137,-218)},n.shareBestScore=function(){this.scene.storage.dispatch(gr())},n.setBestScoreText=function(e){this.bestScoreText.setText(""+e)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300)},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.y,a=this.scale;this.popupShowUpAnimation=new Ah({targets:[this],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}},onComplete:function(){n.starTwinkle.run(1,0,-108,290,216)}})}this.popupShowUpAnimation.play()},t}(GameCore.Screen),am=im,sm=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.createAnim(),i.scene.add.existing((0,Wo.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.font,n=e.size,i=e.text;this.textMain=this.scene.make.bitmapText({font:t,size:n,origin:{x:.5,y:.5},text:i}).setVisible(!1),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.font,i=e.size;if(t){this.chars=t.split("");for(var a=0,s=0;s<this.chars.length;s++){var r=this.chars[s],o=this.scene.make.bitmapText({font:n,size:i,origin:{x:.5,y:.5},text:r});this.listText.push(o),a+=o.width}for(var c=-a/2-this.listText.length/2,h=0;h<this.chars.length;h++){var l=this.listText[h],u=l.width/2;l.setX(c+u),l.setAlpha(0),c+=l.width+1}this.add(this.listText)}},n.createAnim=function(){this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(100,{})})},n.runAnim=function(){this.resetListText(),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),rm=n(63482),om=n.n(rm),cm=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+om()(e)*n*e*e},hm=function(e){function t(n){var i;return(i=e.call(this,n)||this).windX=1,i.airFrictionX=.05,i.airFrictionY=.01,i._lastRotaion=0,i.rotationRate=Math.random()+t.bonusRotationRate<.5?-1:1,i.scaleXNumber=i.getRandomFloat(.1,.2),i.scaleYNumber=i.scaleXNumber,i.scaleRate=-1,i.maxScale=i.getRandomFloat(.5,1),i.deltaAlpha=0,i.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007),i.airFrictionY=.004*Math.random()+(t.bonusAirFrictionY||.006),i.maxScale=Math.max(i.scaleXNumber,i.maxScale),i.alpha=0,(0,Wo.Z)(i)||(0,Wo.Z)(i)}(0,c.Z)(t,e);var n=t.prototype;return n.getRandomNumberBetween=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},n.getRandomFloat=function(e,t){return Math.random()*(t-e)+e},n.setValueAirFrictionX=function(e){t.bonusAirFrictionX=e,this.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007)},n.setValueAirFrictionY=function(e){t.bonusAirFrictionY=e},n.setValueRotationRate=function(e){t.bonusRotationRate=e},n.reset=function(){this.scaleXNumber=this.getRandomFloat(.3,.8),this.scaleYNumber=this.scaleXNumber,this.scaleRate=-1,this.alpha=0,this.deltaAlpha=0},n.update=function(t,n,i){for(var a=e.prototype.update.call(this,t,n,i),s=.5,r=t;r>16.67;)this.velocityX-=cm(this.velocityX,s,this.airFrictionX)/60,this.velocityY-=cm(this.velocityY,s,this.airFrictionY)/60,r-=16.67;if(this.velocityX-=cm(this.velocityX,s,this.airFrictionX)*r/1e3,this.velocityY-=cm(this.velocityY,s,this.airFrictionY)*r/1e3,this._lastRotaion=this.rotation,this.lifeCurrent>3*this.life/4)this.scaleX=this.maxScale,this.scaleY=this.maxScale,this.deltaAlpha+=t/(this.life/4),this.alpha=this.deltaAlpha;else if(this.lifeCurrent>0){var o=this.scaleRate>0?this.maxScale:1;this.scaleXNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleYNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleX=this.scaleXNumber,this.scaleY=this.scaleYNumber,this.alpha=this.deltaAlpha,this.scaleX<=0&&(this.scaleRate=1),this.scaleX>=this.maxScale&&(this.scaleRate=-1)}else this.reset();return a},t}(Phaser.GameObjects.Particles.Particle);hm.bonusAirFrictionX=0,hm.bonusAirFrictionY=0,hm.bonusRotationRate=0,hm.scaleXNumber=void 0,hm.scaleYNumber=void 0,hm.bonusAirFrictionX=0,hm.bonusAirFrictionY=0,hm.bonusRotationRate=0,hm.scaleXNumber=Math.random(),hm.scaleYNumber=Math.random();var lm=hm,um=Ko.Z.EFFECTS,dm=um.KEY,pm=um.FRAME,mm=function(e){function t(t){var n;return(n=e.call(this,t,dm)||this).position1={x:-70,y:-180},n.emitterStar1=void 0,n.circleImage1=void 0,n.tweenShowCircle1=void 0,n.tweenHideCircle1=void 0,n.position2={x:-20,y:190},n.emitterStar2=void 0,n.circleImage2=void 0,n.tweenShowCircle2=void 0,n.tweenHideCircle2=void 0,n.position3={x:90,y:0},n.emitterStar3=void 0,n.circleImage3=void 0,n.tweenShowCircle3=void 0,n.tweenHideCircle3=void 0,n.setDepth(Ma.Z.ON_TOP+1),n.createEmitterStars(),n.createTweenCircle(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createEmitterStars=function(){var e=[pm.GLARE_CROSS,pm.DUST],t=[16636263,5289969,15880535];this.emitterStar1=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position1.x,y:this.position1.y,speed:{min:50,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:lm,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar2=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position2.x,y:this.position2.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:lm,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar3=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position3.x,y:this.position3.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:lm,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}})},n.createTweenCircle=function(){var e=this;this.circleImage1=this.scene.make.image({x:this.position1.x,y:this.position1.y,key:dm,frame:pm.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle1.play()}}),this.tweenHideCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage1.setVisible(!1),e.emitterStar1.stop()}}),this.circleImage2=this.scene.make.image({x:this.position2.x,y:this.position2.y,key:dm,frame:pm.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle2.play()}}),this.tweenHideCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage2.setVisible(!1),e.emitterStar2.stop()}}),this.circleImage3=this.scene.make.image({x:this.position3.x,y:this.position3.y,key:dm,frame:pm.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle3.play()}}),this.tweenHideCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage3.setVisible(!1),e.emitterStar3.stop()}})},n.getImages=function(){return[this.circleImage1,this.circleImage2,this.circleImage3]},n.playConfettiAnimation=function(){var e=this;this.scene.time.addEvent({delay:300,callback:function(){e.emitterStar1.flow(1e4,30),e.circleImage1.setVisible(!0),e.tweenShowCircle1.play()},callbackScope:this}),this.scene.time.addEvent({delay:800,callback:function(){e.emitterStar2.flow(1e4,25),e.circleImage2.setVisible(!0),e.tweenShowCircle2.play()},callbackScope:this}),this.scene.time.addEvent({delay:1300,callback:function(){e.emitterStar3.flow(1e4,30),e.circleImage3.setVisible(!0),e.tweenShowCircle3.play()},callbackScope:this})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),fm=mm,gm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textScoreReached=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.starSuperTwinkle=void 0,s.open=function(t){e.prototype.open.call((0,Wo.Z)(s),t),s.scene.enableInput(),s.runPopupEntrancesAnimation(300,300),s.textScoreReached.restart(),s.scene.audio.playSound(ah.Z.SCORE_REACHED)},s.close=function(){e.prototype.close.call((0,Wo.Z)(s))},s.scene=t,s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,c.Z)(t,e);var n=t.prototype;return n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textScoreReached.start(),n.starSuperTwinkle.playConfettiAnimation(),n.handleDelegate(),n.runAnim()}})),this.tweenBackground.play()},n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText(),this.createAnim()},n.createText=function(){this.textScoreReached=new sm(this.scene,{text:"SCORE REACHED!",font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.add(this.textScoreReached),Phaser.Display.Align.In.Center(this.textScoreReached,this)},n.createAnim=function(){this.starSuperTwinkle=new fm(this.scene),this.add(this.starSuperTwinkle),this.add(this.starSuperTwinkle.getImages())},t}(GameCore.Screen),vm=Ko.Z.DEFAULT.FRAME,ym=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.contents=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.levelManager.getCurrentTargetScore(),a=this.scene.levelManager.getCurrentIndex();this.textScore.setText(""+i),0===a?this.popup.setTitle(vm.TEXT_FIRST_MILESTONE,216,20):this.popup.setTitle(vm.TEXT_NEXT_MILESTONE,213,20);var s=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(s,(function(){n.handleClose()}))},n.createTextTargetScore=function(){this.textTargetScore=this.scene.make.bitmapText({font:_c.Z.DARK.KEY,size:this.scene.fontSize(48),text:"TARGET SCORE",origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.popup,0,-17)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:_c.Z.DARK.KEY,size:this.scene.fontSize(100),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.popup,0,45)},n.createPopup=function(){this.popup=new Ph(this.scene,0,0,310,196,{forceHeightTop:49}),this.add(this.popup),this.popup.setTitle(vm.TEXT_FIRST_MILESTONE,216,28),this.popup.hideButtonClose(),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name);var e=n.getData(["onClose"])[0];console.log("onClose === ",e),e&&e()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Sm=ym,Em=GameCore.Configs,bm=Em.Match,Am=Em.Gameplay,Cm=Em.Ads,Im=Em.Tutorial,wm=Em.Network,Tm=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,S()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.header=void 0,n.main=void 0,n.footer=void 0,n.animDice=void 0,n.outOfMoveLabel=void 0,n.isGameOver=void 0,n.isGameReplay=void 0,n.isGameScoreReached=void 0,n.tutorialManager=void 0,n.animTintBackground=void 0,n.scoreTween=void 0,n.levelManager=void 0,n.isTutorialRunning=!1,n.run=function(){n.ads.showBannerAdAsync().catch(a.tO),n.checkAndAddShortcut(),n.updateSoundIcon();var e=n.storage.getState(),t=n.player.getPlayerId(),i=$s(e).playerId,s=tr(e,{playerId:t}),r=nr(e,{opponentId:i});s&&r?n.screen.open(Ba.o4.GAME_OVER_SCREEN):(n.restartGame(),n.startGame())},n.create=function(){e.prototype.create.call((0,Wo.Z)(n)),n.createLine(),n.createTutorialManager(),n.createLevelManager(),n.createHeader(),n.createMain(),n.createFooter(),n.createAnimDice(),n.createOutOfMove(),n.createScreens(),n.listenEvents(),n.preLoadAds(),n.input.setTopOnly(!0)},n.handleUpdateStatusSound=function(){var e=n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e)},n.handleClickSound=function(){var e=!n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e),n.player.setSetting("sound",e)},n.rescued=function(){var e=n.getLevelLogInfo(),t=e.level,i=e.score,a=e.levelName;n.analytics.levelRescue(t,i,a),n.isGameOver=!1,n.audio.playMusic(),n.main.board.rescue(),n.header.enableItems(),n.footer.enableItems()},n.replay=function(){n.isGameReplay=!0,n.restartGame(),n.startGame(),n.input.once(Phaser.Input.Events.POINTER_DOWN,(function(){n.isGameReplay=!1,n.input.off(Phaser.Input.Events.POINTER_DOWN)}))},n.handleShowMidRollAd=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.game.globalScene,e.prev=1,n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=5;break}return e.abrupt("return");case 5:return t.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:wm.Timeout,loading:!0}),e.next=8,n.ads.showMidRollAdAsync();case 8:n.analytics.showInterstitialAd(n.getSceneName()),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return");case 14:return e.prev=14,t.screen.close(Ba.o4.NOTIFY_SCREEN),n.audio.playMusic(),n.ads.preloadMidRollAdAsync().catch(a.tO),e.finish(14);case 19:case"end":return e.stop()}}),e,null,[[1,11,14,19]])}))),n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadMidRollAdAsync().catch((function(e){return console.log(e)})),this.ads.preloadRewardedVideoAsync().catch((function(e){return console.log(e)}))},n.createLevelManager=function(){this.levelManager=new hp},n.createHeader=function(){this.header=new Bl(this),this.header.buttonSound.onClick=this.handleClickSound.bind(this),this.header.buttonSetting.onClick=this.openSettingScreen.bind(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMain=function(){this.main=new yu(this),Phaser.Display.Align.In.Center(this.main,this.gameZone)},n.createFooter=function(){this.footer=new ad(this)},n.createAnimDice=function(){this.animDice=new ld(this)},n.createTutorialManager=function(){this.tutorialManager=new sp(this)},n.openSettingScreen=function(){this.screen.open(Ba.o4.SETTINGS_SCREEN)},n.createScreens=function(){this.createSettingScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createBestScoreScreen(),this.createReachedScoreScreen(),this.createTargetScoreScreen()},n.createSettingScreen=function(){this.screen.add(Ba.o4.SETTINGS_SCREEN,bp)},n.createOutOfMove=function(){this.outOfMoveLabel=new md(this)},n.updateSoundIcon=function(){var e=this.player.getPlayerSettings().sound;this.header.updateButtonSoundByStatus(e)},n.startGame=function(){var e,t=this;this.audio.playSound(ah.Z.START_GAME),this.enableInput(),this.header.enableItems(),this.footer.enableItems();var n=this.storage.getState(),i=fs(n);if(this.tutorialManager.isValidForTutorial()||Im.ForceUseTutorial)return this.isTutorialRunning=!0,this.handleStartTutorial(),void this.player.incUserGuideDisplays();i===oa?this.handleStartGameSingleMode():_t()(e=[ha,ca,la]).call(e,i)>=0&&(i===la&&FBInstant.getTournamentAsync().then((function(e){var n=e.getID();t.analytics.event("tournament_start",{tournament_id:n})})).catch((function(){})),this.handleStartGameFriendMode()),this.header.setVisible(!0),this.updateLevelManager(),this.updateProgressBar(),this.openTargetScoreScreen()},n.openTargetScoreScreen=function(){this.screen.open(Ba.o4.TARGET_SCORE_SCREEN,{duration:1500,onClose:this.handleStartGame.bind(this)})},n.handleStartTutorial=function(){this.analytics.event(Wt._.TUTORIAL_BEGIN),this.header.setVisible(!1),this.tutorialManager.start()},n.handleStartGame=function(){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelStart(t,n,i),this.footer.nextDice.handleNextDice(),this.footer.pieces.showDice(),this.footer.nextDice.handleNextDice()},n.getLevelName=function(){var e,t=this.levelManager.getCurrentIndex()+1;return"target_"+Kh()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.handleStartGameSingleMode=function(){var e,t=this.storage.getState(),n=cr(t),i=n.score,a=n.bestScore,s=void 0===a?0:a,r=(null==(e=zs(t))?void 0:e.data)||{};if(r){var o=r.fen,c=r.magnetAmount,h=void 0===c?0:c,l=r.magnetPercent,u=void 0===l?0:l,d=r.magnetScore,p=void 0===d?0:d;o&&this.main.board.exploreFen(o),this.header.showItemBySinglePlayMode(),this.header.setScoreSingle(i),this.header.setBestScore(s),this.header.setTargetScore(this.levelManager.getCurrentTargetScore()),this.footer.itemMagnet.updateAmountUsed(h),this.footer.itemMagnet.updateTotalScore(p),this.footer.itemMagnet.itemPercent.updatePercent(u)}},n.handleStartGameFriendMode=function(){this.header.setScoreMulti(0),this.updateLevelManager(),this.updateProgressBar(),this.header.showItemByFriendPlayMode()},n.updateLevelManager=function(){var e=this.header.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e)},n.updateProgressBar=function(){var e=this.header.getCurrentScoreByMode(),t=this.levelManager.getCurrentTargetScore();this.header.setTargetScore(t),this.header.setPercent(e/t)},n.listenEvents=function(){dr.on(Va.RESCUE,this.rescued),dr.on(Va.REPLAY,this.replay),dr.on(Va.GAME_OVER,this.handleGameOver.bind(this)),dr.on(Pc,this.handleUpdateStatusSound),dr.on("board_update_fen",this.updateMatchData.bind(this)),dr.on("handle_state_change",this.handleStateChange.bind(this))},n.getFen=function(){for(var e="",t=this.main.board.dataBoard,n=0;n<t.length;n++){for(var i=t[n],a="",s=0;s<i.length;s++){var r=i[s].value;a+=r||"x"}e+=(e?",":"")+a}return e},n.createRescueScreen=function(){this.screen.add(Ba.o4.RESCUE_SCREEN,Dp)},n.createGameOverScreen=function(){this.screen.add(Ba.o4.GAME_OVER_SCREEN,qp)},n.createBestScoreScreen=function(){this.screen.add(Ba.o4.BEST_SCORE_SCREEN,am)},n.createReachedScoreScreen=function(){this.screen.add(Ba.o4.REACHED_SCORE_SCREEN,gm)},n.createTargetScoreScreen=function(){this.screen.add(Ba.o4.TARGET_SCORE_SCREEN,Sm)},n.handleGameOver=function(){this.screen.open(Ba.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this,t=this.storage.getState(),n=gs(t);this.time.addEvent({delay:Am.DelayFinishGame,callback:function(){e.enableInput(),n<bm.MaxRescueCount&&Cm.Enabled?e.screen.open(Ba.o4.RESCUE_SCREEN):e.endGame()}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){this.input.enabled=!1},n.enableInput=function(){this.input.enabled=!0},n.restartGame=function(){this.updateStateGameOver(!1),this.isGameOver=!1,this.isGameReplay=!1,this.isGameScoreReached=!1,this.animDice.stopAnimation(),this.footer.itemMagnet.animationMagnetItem.stopAnimation(),this.main.board.restart(),this.footer.nextDice.restart(),this.footer.pieces.restart(),this.footer.itemMagnet.restartItemMagnet(),this.header.restart()},n.endGame=function(){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelFail(t,n,i),this.restartGame(),this.storage.dispatch(Go()),this.handleShowMidRollAd(),this.resetRescued()},n.handleAddScore=function(e){var t=this,n=this.header.getCurrentScoreByMode()+e;this.addScoreAnimation(e),this.storage.dispatch(wo({score:n})),n>=this.levelManager.getCurrentTargetScore()&&(this.isGameScoreReached=!0,this.time.delayedCall(500,(function(){t.handleNextLevel()})))},n.handleNextLevel=function(){if(!this.isGameOver){var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelComplete(t,n,i);var a=this.header.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(a),this.screen.open(Ba.o4.REACHED_SCORE_SCREEN,{duration:3e3,onClose:this.onCloseReachedScoreScreen.bind(this)})}},n.onCloseReachedScoreScreen=function(){var e=this;this.isGameScoreReached=!1,this.header.restart(),this.updateProgressBar(),this.screen.open(Ba.o4.TARGET_SCORE_SCREEN,{duration:1500,onClose:function(){e.handleShowMidRollAd()}})},n.addScoreAnimation=function(e){var t=this,n=this.header.getCurrentScoreByMode();this.scoreTween=this.tweens.addCounter({from:0,to:e,duration:300,onUpdate:function(e){var i=Math.floor(e.getValue());t.header.setCurrentScoreByMode(i+n),t.updateProgressBar()}})},n.updateMatchData=function(){if(!this.isGameOver){var e=this.getFen(),t=this.storage.getState(),n=zs(t).data||{};if(fs(t)===oa){var i=Xs(t),a=cr(t).score,s=void 0===a?0:a,o=this.footer.itemMagnet.itemPercent.percent,c=this.footer.itemMagnet.amountUsed,h=this.footer.itemMagnet.totalScore,l=gs(t);this.storage.dispatch(ho(i,{score:s,rescued:l,data:(0,r.Z)({},n,{fen:e,magnetPercent:o,magnetAmount:c,magnetScore:h}),updateAt:Date.now()}))}}},n.clearFen=function(){var e=this.storage.getState(),t=zs(e).data||{};if(fs(e)===oa){var n=Xs(e);this.storage.dispatch(ho(n,{score:0,data:(0,r.Z)({},t,{fen:"",magnetPercent:0,magnetAmount:0,magnetScore:0}),updateAt:Date.now()}))}},n.updateStateGameOver=function(e){this.isGameOver=e},n.update=function(e){this.input.enabled||console.log("this.input.enabled === False"),this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.input.enabled=!0,this.lastTimeInputEnabled=e)},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();pa(e)!=la&&this.facebook.attemptToAddShortcut()}},n.getLevelLogInfo=function(){return{level:this.levelManager.getCurrentIndex()+1,score:this.header.getCurrentScoreByMode(),levelName:this.getLevelName()}},n.resetRescued=function(){this.storage.dispatch((function(e){e({type:_n,payload:{}}),(0,ga.vk)(To.SingleMatchStore,{rescued:0})}))},t}(Ho.Z);var Pm=Tm,xm=n(56629),km=GameCore.Configs.Notification.ApiUrl,Dm=function(){var e=(0,o.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,Ue("players/"+n,t,{},km,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Om=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),_m=[{id:"pass-levels",title:"Pass 10 score goals",require:{level:10},reward:{diamond:100},logo:"dailyMission/logo-cup"},{id:"collect-diamonds",title:"Collect 300 coins",require:{diamond:300},reward:{diamond:100},logo:"dailyMission/logo-coin"},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200},logo:"dailyMission/logo-invite"},{id:"reach-score",title:"Reach total scores",require:{score:1e5},reward:{diamond:1e3},logo:"dailyMission/logo-note"}],Rm=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_m);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mm=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.tasks}],(function(e){return e})),Bm=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.process}],(function(e){return e})),Nm=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isRequesting}],(function(e){return e})),Lm=((0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),Gm=function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!Nm(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:wi,payload:{}}),e.next=7,Rm();case 7:a=e.sent,t(Fm(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Fm=function(e){return function(t){t({type:Ti,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>Lm.Duration?Zm(e):Um(r))}},Zm=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},ie()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Um(n)),dr.emit(Ws.EVENTS.TASKS_RESET)}},Um=function(e){return{type:Pi,payload:{process:e}}},Vm=n(51679),Ym=n.n(Vm),Hm=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Wm=function(e,t,n){return function(i){var a=Hm();if(GameCore.Utils.Valid.isObject(a)){var s=a;if(GameCore.Utils.Object.hasOwn(s,e))if(!s[e].rewarded)s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:xi,payload:{id:e,type:t,value:n}})}}},Km=function(e){return function(t){t({type:ki,payload:{id:e}}),dr.emit(Ws.EVENTS.NOTICE_UPDATE)}},zm=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==_t()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var s=n.getCorrectValue(i,a);n.game.storage.dispatch(Wm(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(Km(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=Mm(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:Ym()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=ie()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=Bm(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),Xm=zm,jm=Ws.COLLECT_DIAMONDS,Jm=jm.ID,qm=jm.EVENTS,Qm=function(e){function t(t){return e.call(this,t,Jm)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(qm.COLLECT_DIAMONDS,this.process),dr.on(qm.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(Xm),$m=Qm,ef=Ws.INVITE_FRIENDS,tf=ef.ID,nf=ef.EVENTS,af=function(e){function t(t){var n;return(n=e.call(this,t,tf)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;dr.off(nf.INVITED_FRIEND,this.process),dr.on(nf.INVITED_FRIEND,this.process),dr.on(Ws.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===_t()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(Xm),sf=af,rf=Ws.PASS_LEVELS,of=rf.ID,cf=rf.EVENTS,hf=function(e){function t(t){return e.call(this,t,of)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(cf.PASS_LEVEL,this.process),dr.on(cf.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(Xm),lf=hf,uf=Ws.REACH_SCORE,df=uf.ID,pf=uf.EVENTS,mf=function(e){function t(t){var n;return(n=e.call(this,t,df)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(pf.ADD_SCORE,this.process),dr.on(pf.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(Xm),ff=mf,gf=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(Gm());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[Ws.PASS_LEVELS.ID]=new lf(this.game),this.eventsListener[Ws.REACH_SCORE.ID]=new ff(this.game),this.eventsListener[Ws.INVITE_FRIENDS.ID]=new sf(this.game),this.eventsListener[Ws.COLLECT_DIAMONDS.ID]=new $m(this.game)},e}(),vf=gf,yf=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],Sf=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yf);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ef=(0,j.P1)([function(e){var t;return null==(t=e[vi])?void 0:t.missions}],(function(e){return e})),bf=(0,j.P1)([function(e){var t;return null==(t=e[vi])?void 0:t.isRequesting}],(function(e){return e})),Af=((0,j.P1)([Ef,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(){return function(){var e=(0,o.Z)(l().mark((function e(t,n){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!bf(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:yi,payload:{}}),e.next=7,Sf();case 7:a=e.sent,t(Cf(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),Cf=function(e){return{type:Si,payload:{missions:e}}},If={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"}},wf=function(e,t,n){return{type:Ei,payload:{name:e,type:t,value:n}}},Tf=function(e){return{type:bi,payload:{name:e}}},Pf=(0,j.P1)([function(e){var t;return null==(t=e[vi])?void 0:t.mission}],(function(e){return e})),xf=((0,j.P1)([Pf],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(wf(i.name,n,a)),i.isMissionComplete()&&(dr.emit(If.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(Tf(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=Pf(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=Pf(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return ie()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),kf=xf,Df=If.EVENTS,Of=If.TYPES,_f=function(e){function t(t,n){return e.call(this,t,Of.COLLECT_GEMS,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(Df.MISSION_UPDATE,this.process),dr.on(Df.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(kf),Rf=_f,Mf=If.EVENTS,Bf=If.TYPES,Nf=function(e){function t(t,n){return e.call(this,t,Bf.COMBO,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(Mf.MISSION_UPDATE,this.process),dr.on(Mf.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(kf),Lf=Nf,Gf=If.EVENTS,Ff=If.TYPES,Zf=function(e){function t(t,n){return e.call(this,t,Ff.USE_ITEM,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){dr.off(Gf.MISSION_UPDATE,this.process),dr.on(Gf.MISSION_UPDATE,this.process)},n.processMore=function(e){return console.log("UseItem",{payload:e}),!0},t}(kf),Uf=Zf,Vf=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(Af());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Ef(t);n&&ie()(n).forEach((function(t){switch(n[t].id){case If.TYPES.COLLECT_GEMS:e.listener[t]=new Rf(e.game,t);break;case If.TYPES.COMBO:e.listener[t]=new Lf(e.game,t);break;case If.TYPES.USE_ITEM:e.listener[t]=new Uf(e.game,t)}}))},t.initEvents=function(){dr.off(If.EVENTS.MISSION_START,this.startListener),dr.on(If.EVENTS.MISSION_START,this.startListener)},e}(),Yf=Vf,Hf=function(){return function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=da(r),c=pa(r),h=i.getPlayer(),l=(o.entryPointData||{}).type;if(h.isUserNew&&a.event(Wt._.NEW_USER),c===la)return void e(Kf());if(c===ca){if(l===ta)return void e(zf());if(l===ia)return void e(Xf())}if(c===ha)return void e(jf());if(h.isUserNew)return void e(Jf());s.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE)}catch(u){s.events.emit(Sa.K.SWITCH,Sa.C.DASHBOARD_SCENE),console.warn(u)}}},Wf=function(e){try{var t=da(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?ra:new qe.Z(a,s,r).toObject()}catch(o){return console.warn(o),ra}},Kf=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(xs(n))})).catch((function(e){console.warn(e)})),e(Oo())}catch(t){console.warn(t)}}},zf=function(){return function(e,t){try{var n=t(),i=da(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,h=Wf(n);c||a.updateConnectedPlayers([h]);var l=h.playerId;e(Bo(r,l,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},Xf=function(){return function(e,t){try{var n=t(),i=da(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,h=a.playerId===c;e(No(r,h?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},jf=function(){return function(e,t){try{var n=t(),i=da(n).entryPointData||{},s=i.playerId,c=i.playerScore;e(Io(s,{score:c,level:0}));var h=Wf(n);e(function(e){return function(){var t=(0,o.Z)(l().mark((function t(n){var i,s,r,o,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.facebook,r=i.globalScene,o=i.analytics,r.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=s.getContextID(),Po({contextId:c}),o.event(Wt._.JOIN_GROUP,{group_id:c}),t.next=8,n(Zo(ha,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Ua)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,a.tO)(t.t0);case 17:return t.prev=17,ko(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,r.Z)({},h,{score:c})))}catch(u){throw new Error("processMatchingGroupMode: "+u)}}},Jf=function(){return function(e){try{e(_o())}catch(t){throw new Error("processNewUserMode: "+t)}}},qf=n(55481),Qf={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json"}},$f=GameCore.Configs,eg=$f.AppId,tg=$f.Notification,ng=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers(),setTimeout(n.subscribebot,500)},n.processAfterUpdatePlayerProfile=function(){tg.Enable&&(n.updatePlayerProfileToNotificationService(),tg.DisableSendNotification||n.sendNotificationForNewUser())},n.startGame=function(){n.analytics.event(Wt._.APP_READY),n.storage.dispatch((0,qf.I)(Sa.C.LOAD_SCENE)),n.storage.dispatch(Hf())},n.subscribebot=function(){n.facebook.attemptToSubscribeBot()},n.handleLoadSoundCompleted=function(){n.audio.initSound(Qf.EFFECTS.KEY)},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Wt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new Om("Load resources at LoadScene failed.");(0,a.R0)(t,{file:null==e?void 0:e.url})})),this.load.bitmapFont(_c.Z.PRIMARY.KEY,_c.Z.PRIMARY.TEXTURE,_c.Z.PRIMARY.DATA),this.load.bitmapFont(_c.Z.DARK.KEY,_c.Z.DARK.TEXTURE,_c.Z.DARK.DATA),this.load.bitmapFont(_c.Z.NUMBER_DARK.KEY,_c.Z.NUMBER_DARK.TEXTURE,_c.Z.NUMBER_DARK.DATA),this.load.bitmapFont(_c.Z.NUMBER_YELLOW.KEY,_c.Z.NUMBER_YELLOW.TEXTURE,_c.Z.NUMBER_YELLOW.DATA),this.load.image(sa.Z.AVATAR.KEY,sa.Z.AVATAR.FILE),this.load.multiatlas(Ko.Z.DEFAULT.KEY,Ko.Z.DEFAULT.JSON,Ko.Z.DEFAULT.URL),this.load.atlas({key:Ko.Z.GAMEPLAY.KEY,textureURL:Ko.Z.GAMEPLAY.TEXTURE,atlasURL:Ko.Z.GAMEPLAY.JSON}),this.load.atlas({key:Ko.Z.GAMEPLAY_32.KEY,textureURL:Ko.Z.GAMEPLAY_32.TEXTURE,atlasURL:Ko.Z.GAMEPLAY_32.JSON}),this.load.atlas({key:Ko.Z.EFFECTS.KEY,textureURL:Ko.Z.EFFECTS.PATH,atlasURL:Ko.Z.EFFECTS.JSON}),this.load.atlas({key:Ko.Z.TUTORIAL.KEY,textureURL:Ko.Z.TUTORIAL.TEXTURE,atlasURL:Ko.Z.TUTORIAL.JSON});var t=document.getElementById("app");if(t){t.style.backgroundImage="url('./resource/v1/assets/images/background.jpg')"}this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(a.tO)},n.create=function(){this.analytics.event(Wt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID,r={appId:eg,playerId:t,name:n,photo:i,locale:a,ASID:s};console.info("\ud83d\ude80 > profileData",r),Dm(r)},n.sendNotificationForNewUser=function(){var e=(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.getPlayerIsNew()){e.next=4;break}return e.abrupt("return");case 4:if(t=this.player.getPlayerASID()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(n=e.t0,!0!==n.isNotificationFirstSent){e.next=16;break}return e.abrupt("return");case 16:this.facebook.sendNotificationAsync({message:"Hi @["+t+"] your friends are waiting to play with you, play now!",delayTime:3600}),FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.warn("\ud83d\ude80 > sendNotificationForNewUser",e.t1);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),n.setupGlobalScene=function(){var e=this.scene.get(Sa.C.GLOBAL_SCENE);e instanceof xm.Z&&e.setup()},n.initModules=function(){new Yf(this.game),new vf(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.loadWideframesResource(),e.lazyLoadLevel(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.lazyLoadLevel=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),0===rr(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.storage.dispatch(Ao());case 7:this.loadLevelConfig(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,a.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(){var e=this.storage.getState(),t=rr(e),n=Fa[t];if(n){var i=n.key,a=n.mapJson;this.cache.tilemap.exists(i)||(this.load.tilemapTiledJSON(i,a),this.load.start())}},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+Qf.EFFECTS.KEY,this.handleLoadSoundCompleted),this.load.audio(Qf.BACKGROUND.KEY,Qf.BACKGROUND.FILE),this.load.audioSprite(Qf.EFFECTS.KEY,Qf.EFFECTS.JSON,Qf.EFFECTS.FILE),this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.png","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.png"})},t}(Phaser.Scene),ig=ng,ag=function(){function e(e){this.scene=void 0,this.currentLevel=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){var e=this.scene.storage.getState(),t=rr(e)||1;console.log("correctLevel === ",t),this.currentLevel=t},t.setLevel=function(e){this.currentLevel=e},t.getLevel=function(){return this.currentLevel},t.getLevelConfig=function(){return Fa[this.currentLevel]},t.getNextLevel=function(){return this.currentLevel+1},t.getNextLevelConfig=function(){return Fa[this.currentLevel+1]},t.increaseLevel=function(){this.currentLevel++},e}(),sg=function(){function e(e){this.scene=void 0,this.map=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.initMap()},t.initMap=function(){var e=this.scene.levelManager.getLevelConfig();this.map=this.scene.make.tilemap({key:e.key})},t.getTileMap=function(){return w()(this)},t.reloadMap=function(){var e,t=this.scene.levelManager.getLevelConfig();null==(e=w()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:t.key})},e}(),rg=n(96486),og=n(78490),cg=n.n(og),hg=Ko.Z.GAMEPLAY_32.FRAME,lg=function(e){var t="";switch(e){case 1:t=hg.BIG_DICE_1;break;case 2:t=hg.BIG_DICE_2;break;case 3:t=hg.BIG_DICE_3;break;case 4:t=hg.BIG_DICE_4;break;case 5:t=hg.BIG_DICE_5;break;case 6:t=hg.BIG_DICE_6;break;case 7:t=hg.DICE_7;break;case 11:t=hg.DICE_11;break;case 12:t=hg.DICE_12;break;case 13:t=hg.DICE_13;break;case 14:t=hg.DICE_14;break;case 15:t=hg.DICE_15;break;case 16:t=hg.DICE_16;break;case 21:t=hg.DICE_21;break;case 22:t=hg.DICE_22;break;case 23:t=hg.DICE_23;break;case 24:t=hg.DICE_24;break;case 25:t=hg.DICE_25;break;case 26:t=hg.DICE_26;break;case 31:t=hg.DICE_31;break;case 32:t=hg.DICE_32;break;case 33:t=hg.DICE_33;break;case 34:t=hg.DICE_34;break;case 35:t=hg.DICE_35;break;case 36:t=hg.DICE_36;break;default:t=hg.DICE_TRANSPARENT}return t},ug=function(e){var t=0;return 10<e&&e<20?t=e-10:20<e&&e<30?t=e-20:30<e&&e<40&&(t=e-30),t},dg=Ko.Z.GAMEPLAY,pg=dg.KEY,mg=dg.FRAME,fg=Ko.Z.GAMEPLAY_32.KEY,gg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.imageCheck=void 0,n.text=void 0,n.particle=void 0,n.emitter=void 0,n.currentPosition=void 0,n.imageGlow=void 0,n.tweenGlow=void 0,n.imageGlowCrop=void 0,n.tweenCropMaskTopDown=void 0,n.tweenCropMaskDownBottom=void 0,n.imageStar=void 0,n.tweenShowStar=void 0,n.tweenHideStar=void 0,n.tweenShowMe=void 0,n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createImageCheck(),this.createText(),this.createParticle(),this.createEmitter(),this.createGlow(),this.createTweenGlow(),this.createGlowCrop(),this.createStar(),this.createTweenStar(),this.createTweenShowMe()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:fg}),this.imageGem.setWorldSize(22,22),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-6.5)},n.createImageCheck=function(){this.imageCheck=this.scene.make.image({key:pg,frame:mg.ICON_CHECK}),this.imageCheck.setWorldSize(22,17),this.imageCheck.setVisible(!1),this.add(this.imageCheck),Phaser.Display.Align.In.Center(this.imageCheck,this.imageGem)},n.createText=function(){this.text=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.imageGem,0,17)},n.createParticle=function(){this.particle=this.scene.add.particles(pg).setDepth(Ma.Z.ON_TOP)},n.createEmitter=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.particle.createEmitter({on:!1,angle:{start:0,end:360,steps:8},frame:[mg.ICON_STAR],lifespan:1e3,quantity:1,scale:{start:e,end:0,ease:"Quart.easeIn"},speed:50})},n.createGlow=function(){this.imageGlow=this.scene.make.image({key:pg,frame:mg.VIOLET_GLOW}),this.imageGlow.setVisible(!1).setScale(0).setAlpha(0),this.add(this.imageGlow),Phaser.Display.Align.In.Center(this.imageGlow,this.imageGem)},n.createTweenGlow=function(){var e=this;this.tweenGlow=this.scene.tweens.add({targets:[this.imageGlow],paused:!0,scale:{from:0,to:.6},alpha:{from:0,to:1},delay:100,duration:600,onComplete:function(){e.imageGlow.setVisible(!1).setScale(0).setAlpha(0),e.playAnimMaskCrop(),e.playAnimStar()}})},n.createGlowCrop=function(){this.imageGlowCrop=this.scene.make.image({key:pg,frame:mg.MASK_SMALL}),this.imageGlowCrop.setVisible(!1),this.imageGlowCrop.setWorldSize(this.imageGem.displayWidth,this.imageGem.displayHeight),this.add(this.imageGlowCrop),Phaser.Display.Align.In.Center(this.imageGlowCrop,this.imageGem)},n.createStar=function(){this.imageStar=this.scene.make.image({key:pg,frame:mg.ICON_STAR_1}),this.imageStar.setVisible(!1).setScale(0).setAlpha(0),this.imageStar.setWorldSize(27,26),this.add(this.imageStar),Phaser.Display.Align.In.Center(this.imageStar,this.imageGem,-10,-10)},n.createTweenStar=function(){var e=this;this.tweenHideStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:1,to:0},alpha:{from:1,to:0},delay:100,duration:500,onComplete:function(){e.imageStar.setVisible(!1).setScale(0).setAlpha(0)}}),this.tweenShowStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:0,to:1},alpha:{from:0,to:1},delay:100,duration:500,onComplete:function(){e.tweenHideStar.play()}})},n.createTweenShowMe=function(){this.tweenShowMe=this.scene.add.tween({paused:!0,targets:[this],alpha:{from:0,to:1},duration:200})},n.cropTopDownImageGlow=function(){var e=this;if(!this.tweenCropMaskTopDown){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskTopDown=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,0,n/i,r/a)},onComplete:function(){e.cropDownBottomImageGlow()}})}this.tweenCropMaskTopDown.play()},n.cropDownBottomImageGlow=function(){var e=this;if(!this.tweenCropMaskDownBottom){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskDownBottom=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,r/a,n/i,t/a)}})}this.tweenCropMaskDownBottom.play()},n.playAnimStar=function(){this.imageStar.setVisible(!0),this.tweenShowStar.play()},n.playAnimMaskCrop=function(){this.imageGlowCrop.setVisible(!0).setCrop(0,0,0,0),this.cropTopDownImageGlow()},n.setFrame=function(e){this.imageGem.setFrame(e),this.imageGem.setWorldSize(22,22)},n.getFrame=function(){return this.imageGem.frame.name},n.setText=function(e,t){this.text.setText(e+" / "+t)},n.completeMission=function(){this.imageGem.setAlpha(.3),this.text.setAlpha(.3),this.imageCheck.setVisible(!0)},n.reset=function(){this.imageGem.setAlpha(1),this.text.setAlpha(1),this.imageCheck.setVisible(!1)},n.updateCurrentPosition=function(e){this.currentPosition=e},n.runAnimCollectionItem=function(){var e=this.scene.gameZone.width/2;this.imageGlow.setVisible(!0),this.tweenGlow.play(),this.emitter.explode(8,e+this.currentPosition.x,this.currentPosition.y-45)},n.playAnimShowMe=function(){this.setVisible(!0).setAlpha(0),this.tweenShowMe.play()},n.checkCollectionItem=function(){var e=this.text.text.split("/"),t=e[0],n=e[1];b()(t)>=b()(n)&&this.completeMission()},t}(Phaser.GameObjects.Container),vg=Ko.Z.GAMEPLAY,yg=vg.KEY,Sg=vg.FRAME,Eg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.target=void 0,n.targetKeys=[],n.jsonPosition={},n.jsonAmount={},n.jsonTarget={},n.jsonCollectItem={},n.background=void 0,n.listCollectItems=[],n.scene=t,n.createBackground(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:yg,frame:Sg.BG_GREEN_DARK}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.calcPosition=function(e){for(var t=[],n=200/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.parseTargetToJson=function(){if(!(0,rg.isObject)(this.target)){for(var e=JSON.parse(this.target),t=ie()(e),n=this.calcPosition(t.length),i=0;i<t.length;i++){var a=t[i],s=lg(b()(a));this.targetKeys.push(s),this.jsonAmount[s]=0,this.jsonTarget[s]=e[a],this.jsonPosition[s]={x:n[i],y:68};var r=this.listCollectItems[i];r||(r=new gg(this.scene),this.add(r),this.listCollectItems.push(r)),r.updateCurrentPosition(this.jsonPosition[s]),r.setVisible(!0),r.setX(n[i]),r.setFrame(s),r.setText(0,e[a]),this.jsonCollectItem[s]=r}console.log("this.targetKeys === ",this.targetKeys,this.jsonTarget,this.jsonAmount,this.jsonPosition)}},n.hideListCollectItems=function(){this.listCollectItems.forEach((function(e){e.setVisible(!1),e.reset()}))},n.showListCollectItems=function(){this.listCollectItems.forEach((function(e){e.reset(),e.playAnimShowMe()}))},n.showCollectItemByKey=function(e){var t,n=C()(t=this.listCollectItems).call(t,(function(t){return t.getFrame()===e}));n&&0!==n.length&&(n[0].reset(),n[0].playAnimShowMe(),n[0].checkCollectionItem())},n.start=function(){this.parseTargetToJson()},n.setTargets=function(e){var t,n;this.target=cg()(t=cg()(n=cg()(e).call(e,"{",'{"')).call(n,", ",', "')).call(t,":",'":')},n.collectItem=function(e){if(e in this.jsonAmount){this.jsonAmount[e]++;var t=this.jsonAmount[e],n=this.jsonTarget[e];t===n&&this.jsonCollectItem[e].completeMission(),this.jsonCollectItem[e].setText(t,n)}},n.checkCompleteMission=function(){for(var e=ie()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t];if(this.jsonTarget[n]>this.jsonAmount[n])return!1}return!0},n.reset=function(){this.hideListCollectItems(),this.targetKeys=[],this.jsonAmount={},this.jsonTarget={},this.jsonCollectItem={},this.jsonPosition={}},n.getPositionCollectionItem=function(e){return this.jsonPosition[e]},n.getTargetKeys=function(){return this.targetKeys},n.getJsonAmount=function(){return this.jsonAmount},n.getJsonTarget=function(){return this.jsonTarget},n.getCollectItemByKey=function(e){return this.jsonCollectItem[e]},n.updateJsonAmountByFen=function(e){this.jsonAmount=JSON.parse(ke()(e));for(var t=ie()(this.jsonTarget),n=0;n<t.length;n++){var i=t[n],a=this.jsonCollectItem[i];this.jsonTarget[i]>this.jsonAmount[i]?a.reset():a.completeMission(),a.setText(this.jsonAmount[i],this.jsonTarget[i])}},t}(Phaser.GameObjects.Container),bg=Ko.Z.GAMEPLAY,Ag=bg.KEY,Cg=bg.FRAME,Ig=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.buttonSound=void 0,n.collectItems=void 0,n.background=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Wo.Z)(n)),n.createBackground(),n.createButtons(),n.createCollectItems(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Ag,frame:Cg.BG_HEADER}),this.background.setWorldSize(this.width,this.height),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createCollectItems=function(){this.collectItems=new Eg(this.scene),this.add(this.collectItems),Phaser.Display.Align.In.Center(this.collectItems,this,0,0)},n.createButtons=function(){this.createButtonSound(),this.createButtonSetting()},n.createButtonSetting=function(){this.buttonSetting=new qh(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this.background,150,-2)},n.createButtonSound=function(){this.buttonSound=new nl(this.scene),this.add(this.buttonSound),Phaser.Display.Align.In.Center(this.buttonSound,this.background,-150,-2)},n.updateButtonSoundByStatus=function(e){this.buttonSound.updateIconByStatus(e)},n.disableItems=function(){this.setAlpha(.2)},n.enableItems=function(){this.setAlpha(1)},n.start=function(){switch(this.scene.targetMissionManager.getTargetType()){case"score":this.targetScore();break;case"collect":this.targetCollect()}},n.targetScore=function(){var e=b()(this.scene.targetMissionManager.getTargetValue());(0,rg.isArray)(e)||this.collectItems.setVisible(!1)},n.targetCollect=function(){this.collectItems.reset();var e=this.scene.targetMissionManager.getTargetValue();this.collectItems.setTargets(e),this.collectItems.setVisible(!0),this.collectItems.start()},n.restart=function(){this.collectItems.reset()},t}(Phaser.GameObjects.Container),wg=Ig,Tg=Ko.Z.GAMEPLAY,Pg=Tg.KEY,xg=Tg.FRAME,kg=Ko.Z.GAMEPLAY_32,Dg=kg.KEY,Og=kg.FRAME,_g=Yl()(.3,-.6,.85,.07),Rg=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x,n.y,n.texture,n.frame||Og.DICE_TRANSPARENT)||this).props=void 0,i.customValue=void 0,i.tweenScaleDown=void 0,i.onComplete=void 0,i.particle=void 0,i.emitterExploreBubble=void 0,i.circleImage=void 0,i.tweenCircleImage=void 0,i.tweenJump=void 0,i.status=void 0,i.rateShaking=1,i.numberOfSpots=[],i.imageEffect=void 0,i.setWorldSize(n.width,n.height),i.props=n,n.inputEnabled&&i.setInteractive(),i.createCircleImage(),i.createImageEffect(),i.createTween(),i.createParticle(),i.createEmitterExploreBubble(),i.scene.add.existing((0,Wo.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.setCustomValue=function(e){this.customValue=e;var t=lg(e);this.setFrame(t),this.setWorldSize(this.props.width,this.props.height)},n.drawSpots=function(e){for(var t=ug(e),n=function(e){var t="";return 10<e&&e<20?t=hg.DOT_BLUE:20<e&&e<30?t=hg.DOT_RED:30<e&&e<40&&(t=hg.DOT_YELLOW),t}(e),i=0;i<t;i++){var a=this.numberOfSpots[i];a||(a=this.spawnSpots(n),this.numberOfSpots.push(a)),a.setVisible(!0),a.setDepth(this.depth+1)}},n.alignSpot=function(e){for(var t=function(e){var t=[{x:0,y:-1}];switch(e){case 1:t=[{x:0,y:-1}];break;case 2:t=[{x:12,y:-13},{x:-12,y:11}];break;case 3:t=[{x:12,y:-14},{x:0,y:-1},{x:-12,y:12}];break;case 4:t=[{x:-12,y:-14},{x:12,y:-14},{x:-12,y:12},{x:12,y:12}];break;case 5:t=[{x:-12,y:-14},{x:12,y:-14},{x:0,y:-1},{x:-12,y:12},{x:12,y:12}];break;case 6:t=[{x:-12,y:-14},{x:12,y:-14},{x:-12,y:-1},{x:12,y:-1},{x:-12,y:12},{x:12,y:12}]}return t}(ug(e)),n=0;n<t.length;n++){var i=t[n],a=this.numberOfSpots[n];Phaser.Display.Align.In.Center(a,this,i.x,i.y)}},n.spawnSpots=function(e){var t=this.scene.make.image({key:Dg,frame:e});return t.setWorldSize(13,12),t},n.resetSize=function(){this.setWorldSize(this.props.width,this.props.height)},n.createTween=function(){var e=this;this.tweenScaleDown=this.scene.add.tween({delay:250,paused:!0,targets:this,scale:0,duration:200,onComplete:function(){e.onComplete&&e.onComplete()}}),this.tweenCircleImage=this.scene.add.tween({paused:!0,targets:this.circleImage,scale:{from:0,to:1.5},alpha:{from:1,to:.5},duration:250,onComplete:function(){e.circleImage.setVisible(!1),e.circleImage.setScale(0)}}),this.tweenJump=this.scene.add.tween({paused:!0,targets:this,y:this.y-10,yoyo:!0,duration:300,onComplete:function(){e.onComplete&&e.onComplete()}})},n.createCircleImage=function(){this.circleImage=this.scene.make.image({x:this.x,y:this.y,key:Pg,frame:xg.WHITE_CIRCLE_SMALL}),this.circleImage.setVisible(!1).setScale(0)},n.createImageEffect=function(){this.imageEffect=this.scene.make.image({x:this.x,y:this.y,key:Dg}),this.imageEffect.setVisible(!1)},n.createParticle=function(){this.particle=this.scene.add.particles(Pg),this.particle.setDepth(9999999)},n.createEmitterExploreBubble=function(){var e=new Phaser.Geom.Circle(0,0,20);this.emitterExploreBubble=this.particle.createEmitter({name:"EmitterExploreBubble",x:this.x,y:this.y,frame:[xg.CIRCLE_1,xg.CIRCLE_2],speed:{min:20,max:55},scale:{start:1,end:.3},gravityY:-20,maxParticles:Phaser.Math.RND.between(5,20),on:!1,lifespan:{min:500,max:2e3},emitZone:{type:"edge",source:e}})},n.resetImageEffect=function(){this.imageEffect.setVisible(!1),this.imageEffect.setAlpha(1),this.imageEffect.setFrame(this.frame.name),this.imageEffect.setWorldSize(this.props.width,this.props.height),this.imageEffect.setPosition(this.x,this.y),this.imageEffect.setDepth(this.depth+1)},n.moveTo=function(e,t){var n=this,i=e.x,a=e.y,s=this.x,r=this.y,o=this.scale;this.scene.add.tween({x:i,y:a,scale:{from:o,to:o-.2},ease:_g,targets:this,onUpdate:function(e){var t=e.getValue(2);console.log("AAAA ",o,t)},onComplete:function(){t&&t(),n.x=s,n.y=r,n.scale=o},duration:400})},n.rescue=function(e){var t=this;if(this.customValue){var n=this.scaleX,i=this.scaleY;this.onComplete=function(){t.setCustomValue(0),t.setScale(n,i),e&&e()},this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenScaleDown.play()}},n.animationJump=function(e){this.onComplete=e,this.circleImage.setVisible(!0),this.tweenCircleImage.play(),this.emitterExploreBubble.dead=[],this.emitterExploreBubble.start(),this.tweenJump.play()},n.setStatus=function(e){this.status=e},n.playShaking=function(){this.status="SHAKING"},n.stopShaking=function(){this.status="",this.rotation=0},n.preUpdate=function(){"SHAKING"===this.status&&(this.rotation+=.03*this.rateShaking,this.rotation>.2&&(this.rateShaking=-1),this.rotation<-.2&&(this.rateShaking=1))},t}(Phaser.GameObjects.Image),Mg=Rg,Bg=n(87922),Ng=n(66573),Lg=function(){function e(e){this.scene=void 0,this.tweenScaleUp=void 0,this.tweenScaleDown=void 0,this.tweenMoveTo=void 0,this.target=void 0,this.handleOnComplete=void 0,this.playing=void 0,this.path=void 0,this.scene=e,this.path=new Phaser.Curves.Path}var t=e.prototype;return t.runScaleUpAnimation=function(e,t){var n;null==(n=this.tweenScaleUp)||n.remove(),this.tweenScaleUp||(this.tweenScaleUp=new Bg.Z({targets:[this.target],delay:e,duration:t,props:{scale:"+=0.05"}})),this.tweenScaleUp.play()},t.runScaleDownAnimation=function(e,t){var n;null==(n=this.tweenScaleDown)||n.remove(),this.tweenScaleDown||(this.tweenScaleDown=new Ng.Z({targets:[this.target],delay:e,duration:t,props:{scale:"-=0.15"}})),this.tweenScaleDown.play()},t.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=Math.abs(n-s)/2,c=Math.abs(i-r),h=Phaser.Math.Between(1,2),l=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=(o-d*Phaser.Math.Between(o/4,o/3))*h,m=r-u*(c/4);l.push(new Phaser.Math.Vector2(p,m))}l.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(l),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(l);this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=f.getPoint(t);a.target.setPosition(n.x,n.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},t.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.width/2,c=Math.abs(n-s)+o-50,h=Math.abs(i-r),l=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=1.5*(c-d*Phaser.Math.Between(c/8,c/7)),m=r-u*(h/4);l.push(new Phaser.Math.Vector2(p,m))}l.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(l),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(l);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t.setTarget=function(e){this.target=e},(0,W.Z)(e,[{key:"onComplete",set:function(e){this.handleOnComplete=e}},{key:"isPlaying",get:function(){return this.playing}}]),e}(),Gg=function(){function e(e){this.scene=void 0,this.listAnimCollectionItem=[],this.scene=e}var t=e.prototype;return t.handleShowEffect=function(e){for(var t=this,n=this.scene.header.collectItems.getTargetKeys(),i=this.scene.header.collectItems.getJsonAmount(),a=this.scene.header.collectItems.getJsonTarget(),s=0,r=function(){var r=n[o],c=C()(e).call(e,(function(e){return lg(e.value)===r}));i[r]+c.length>=a[r]&&s++,t.showEffect(c)},o=0;o<n.length;o++)r();s===ie()(a).length&&(console.log("Completeeeeeee"),this.scene.setLevelCompleted(!0)),this.scene.time.delayedCall(2e3,(function(){t.scene.handleCollectionItemsComplete()}))},t.showEffect=function(e){for(var t=this,n=e.length,i=this.scene.main.board.dataBoard,a=function(){var a=e[s],r=a.x,o=a.y,c=a.value,h=lg(c),l=i[o][r].dice,u=l.imageEffect,d=t.scene.gameZone.width/2,p=t.scene.header.collectItems.getPositionCollectionItem(h),m=d+p.x,f=p.y-24,g=t.getFreeAnim();l.resetImageEffect(),u.setVisible(!0),g.setTarget(u),g.onComplete=function(){(n--,u.setVisible(!1),t.scene.header.collectItems.collectItem(h),n<=0)&&(t.scene.header.collectItems.getCollectItemByKey(h).runAnimCollectionItem(),t.scene.updateMatchData())},g.runScaleUpAnimation(0,300),g.runScaleDownAnimation(450,400),g.runAnimMoveToPosition(700,Phaser.Math.Between(500,1e3),m,f)},s=0;s<n;s++)a()},t.getFreeAnim=function(){var e=new Lg(this.scene);return this.listAnimCollectionItem.push(e),e},e}(),Fg=Gg,Zg=Ko.Z.GAMEPLAY,Ug=Zg.KEY,Vg=Zg.FRAME,Yg=Ko.Z.GAMEPLAY_32,Hg=Yg.KEY,Wg=Yg.FRAME,Kg=GameCore.Configs.Board,zg=Kg.cols,Xg=Kg.rows,jg=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.maxValueDice=1,a.initDice=[],a.amountTask=0,a.mainDiceMerged=void 0,a.diceMerged=[],a.lastDiceMerged=void 0,a.collectionEffect=void 0,a.pX=void 0,a.pY=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.diceMergedHighlight=[],a.background=void 0,a.scene=t,a.setSize(n,i),a.collectionEffect=new Fg(a.scene),a.init(),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.pX=t/2,this.pY=n/2-54,this.createBackground(),this.initDataBoard(),this.listenEvents()},n.createBackground=function(){this.background=this.scene.make.image({key:Ug,frame:Vg.BG_BOARD}),this.background.setPosition(this.pX,this.pY),this.background.setWorldSize(this.width,this.height)},n.initDataBoard=function(){var e=this;this.initDice=[];var t=this.scene.gameZone.width,n=(t-this.width)/2+8,i=this.pY-this.height/2+8;this.diceSize=(this.width-16-2*(zg+1))/zg;for(var a=function(t){for(var a=[],s=i+e.diceSize/2+e.diceSize*t+1.8*(t+1),r=function(i){var r,o=n+e.diceSize/2+e.diceSize*i+2*(i+1),c=new Mg(e.scene,{x:o,y:s,width:e.diceSize,height:e.diceSize,texture:Hg,frame:Wg.DICE_TRANSPARENT});c.setVisible(!1);var h=C()(r=e.initDice).call(r,(function(e){return e.x===i&&e.y===t})),l=(h[0]||{value:0}).value;h&&h.length>0&&(c.setCustomValue(l),c.setVisible(!0)),a.push({x:i,y:t,pX:o,pY:s,value:l,dice:c})},o=0;o<zg;o++)r(o);e.dataBoard.push(a)},s=0;s<Xg;s++)a(s)},n.listenEvents=function(){this.scene.events.on(Cc,this.handleMove.bind(this)),this.scene.events.on(Ac,this.handleHighlight.bind(this)),this.scene.events.on(Ic,this.handleRemoveHighlight.bind(this)),this.scene.events.on(wc,this.handleRemoveDiceMergedHighlight.bind(this)),this.scene.events.on(Tc,this.handleGameOver.bind(this))},n.handleRemoveDiceMergedHighlight=function(){for(var e=0;e<this.diceMergedHighlight.length;e++){this.diceMergedHighlight[e].setAlpha(1)}this.diceMergedHighlight=[]},n.handleHighlight=function(e){try{this.cellsHighlight=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i];s.dice.setVisible(!0),s.dice.setFrame(Wg.DICE_HIGHT_LIGHT),s.dice.resetSize();var r=this.getMergeDice(e[t]);if(r&&r.length>=2)for(var o=0;o<r.length;o++){var c=r[o].dice;this.diceMergedHighlight.push(c),c.setAlpha(.8)}}}catch(h){console.log(h)}},n.handleMove=function(e,t,n){this.cellsHighlight=e;try{for(var i=0;i<e.length;i++){var a=e[i],s=a.x,r=a.y,o=a.value,c=this.dataBoard[r][s];c.value=o,c.dice.setVisible(!0),c.dice.setCustomValue(o)}this.handleMergeDice(e[this.amountTask],t,n)}catch(h){console.log(h)}},n.handleMergeDice=function(e,t,n){var i=this;if(!this.scene.isGameReplay){if(!e){console.log("Doneeeeeeeeeeee");var a=this.calcScore(this.diceMerged,n);return 0===a?t&&t():this.runAnimAfterMerged(this.lastDiceMerged,a,t),this.diceMerged=[],this.cellsHighlight=[],void(this.amountTask=0)}var s=e.x,o=e.y,c=e.value,h=this.dataBoard[o][s],l=h.dice,u=c%10===7?7:c;console.log("valueDice ==== ",u),h.value=u,l.setVisible(!0),l.setCustomValue(u);var d=this.getMergeDice(e);if(!d||d.length<=1)return this.amountTask++,void this.handleMergeDice(this.cellsHighlight[this.amountTask],t,n);this.lastDiceMerged=e;var p=[];Ul(c)&&p.push((0,r.Z)({},h));for(var m=function(){var e,t=d[f],n=t.x,a=t.y,s=t.value,o=i.dataBoard[a][n].dice;Ul(s)&&p.push((0,r.Z)({},d[f])),o.setAlpha(1),i.dataBoard[a][n].value=0;var u,m=Ll()(e=i.cellsHighlight).call(e,(function(e){return e.x===n&&e.y===a}));-1!==m&&Fl()(u=i.cellsHighlight).call(u,m,1);i.scene.animDice.playAnimationMoveTo(o,h,(function(){o.setCustomValue(0),o.setVisible(!1),h.value=c+1,l.setCustomValue(c+1)}))},f=0;f<d.length;f++)m();this.handleAnimSpecialDice(p),this.scene.animDice.playAnimationMerge(l,(function(){if(!i.scene.isGameReplay){i.diceMerged.push({value:u%10,amount:d.length+1-p.length}),c+1>i.maxValueDice&&(i.maxValueDice=c+1>6?6:c+1);var a=i.calcScore(i.diceMerged,n);c+1!==8?i.cellsHighlight[i.amountTask]&&i.handleMergeDice((0,r.Z)({},i.cellsHighlight[i.amountTask],{value:c+1}),t,n):i.handleMergeStarDiceToRubyDice(h,e,a,t)}}))}},n.runAnimAfterMerged=function(e,t,n){var i=this;i.scene.isGameReplay||(i.scene.main.praise.handlePraise(e.pX,e.pY,t),i.diceMerged=[],n&&n()),this.scene.footer.itemMagnet.playAnimationStarToMagnetItem({pX:e.pX,pY:e.pY},{pX:this.scene.footer.itemMagnet.x,pY:this.scene.footer.itemMagnet.y},t)},n.handleAnimSpecialDice=function(e){console.log("specialDice === ",e),e&&0!==e.length&&this.collectionEffect.handleShowEffect(e)},n.handleMergeStarDiceToRubyDice=function(e,t,n,i){var a=this;this.scene.time.addEvent({delay:500,callback:function(){a.handleDiceMagic(e,t,n,i)},callbackScope:this})},n.getMergeDice=function(e){if(e.value){var t=this.getRoundDice(e),n=[];return this.getAllRoundDice(t,n,e),n}},n.getAllRoundDice=function(e,t,n){if(e&&0!==e.length){var i=e.pop();t.push(i);for(var a=this.getRoundDice(i)||[],s=0;s<a.length;s++){var r=a[s];this.checkArrayHasItem(e,r)||this.checkArrayHasItem(t,r)||n&&(!n||r.x===n.x&&r.y===n.y)||e.push(r)}this.getAllRoundDice(e,t,n)}},n.getRoundDice=function(e,t){void 0===t&&(t=!1);var n=e.x,i=e.y;if(e.value||t){var a=[],s=null,r=null,o=null,c=null;return i-1>=0&&(s={x:n,y:i-1},this.isAroundDice(this.dataBoard[s.y][s.x].value,e.value)&&a.push(this.dataBoard[s.y][s.x])),n-1>=0&&(r={x:n-1,y:i},this.isAroundDice(this.dataBoard[r.y][r.x].value,e.value)&&a.push(this.dataBoard[r.y][r.x])),n+1<=4&&(c={x:n+1,y:i},this.isAroundDice(this.dataBoard[c.y][c.x].value,e.value)&&a.push(this.dataBoard[c.y][c.x])),i+1<=4&&(o={x:n,y:i+1},this.isAroundDice(this.dataBoard[o.y][o.x].value,e.value)&&a.push(this.dataBoard[o.y][o.x])),a}},n.isAroundDice=function(e,t){if(e===t)return!0;var n=0;10<=e&&e<=19?n=10:20<=e&&e<=29?n=20:30<=e&&e<=39&&(n=30);var i=0;return 10<=t&&t<=19?i=10:20<=t&&t<=29?i=20:30<=t&&t<=39&&(i=30),e-n===t-i},n.checkArrayHasItem=function(e,t){var n=C()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return n&&n.length>0},n.handleRemoveHighlight=function(){try{for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value&&(this.dataBoard[i][n].dice.setVisible(!0),this.dataBoard[i][n].dice.setFrame(Wg.DICE_TRANSPARENT))}}catch(a){console.log(a)}},n.getMaxValueDice=function(){return this.maxValueDice>6?6:this.maxValueDice},n.handleDiceMagic=function(e,t,n,i){for(var a=this,s=e.x,o=e.y,c=s-1>=0?s-1:s,h=s+1<5?s+1:s,l=o+1<5?o+1:o,u=[],d=o-1>=0?o-1:o;d<=l;d++)for(var p=c;p<=h;p++){var m=this.dataBoard[d][p],f=m.dice,g=m.value;Ul(g)&&u.push((0,r.Z)({},m)),s===p&&o===d||(n+=m.value),m.value=0,f.rescue()}this.handleAnimSpecialDice(u),this.diceMerged=[],this.amountTask=0,this.cellsHighlight=[],this.scene.time.delayedCall(200,(function(){a.runAnimAfterMerged(t,n,i)}))},n.restart=function(){this.maxValueDice=1,this.diceMerged=[];for(var e=0;e<this.dataBoard.length;e++)for(var t=this.dataBoard[e],n=0;n<t.length;n++){var i=t[n],a=i.dice;a.setCustomValue(0),a.setVisible(!1),a.setDepth(e*Xg+n),i.value=0}},n.handleGameOver=function(e){var t=this;if(this.checkIsGameOver(e)){this.scene.updateStateGameOver(!0),this.scene.clearFen(),this.scene.disableInput(),this.scene.footer.disableItems();this.scene.outOfMoveLabel.playAnimationShow((function(){t.scene.header.disableItems(),t.outOfMove((function(){t.scene.time.addEvent({delay:1500,callback:function(){t.scene.handleRequestFinishGame()}})}))}))}},n.checkIsGameOver=function(e){var t=this.getDiceEmpty();if(0===t.length)return!0;for(var n=!0,i=0;i<t.length;i++){var a=this.getRoundDice(t[i],!0);if(a&&a.length+1>=e)return n=!1,!1}return n},n.getDiceSlot=function(){var e,t,n,i=this.getDiceEmpty();if(0===i.length)return 1;for(var a=0,s=0,r=0;r<i.length;r++){var o=this.getRoundDice(i[r],!0);o&&o.length>0?s++:a++}var c=S()(e=[]).call(e,Es()(t=Array(a)).call(t,1),Es()(n=Array(s)).call(n,2));return c[Math.floor(Math.random()*c.length)]},n.getDiceEmpty=function(){for(var e=[],t=0;t<Xg;t++)for(var n=0;n<zg;n++)this.dataBoard[t][n].value||e.push(this.dataBoard[t][n]);return e},n.rescue=function(){for(var e=this,t=[],n=1;n<4;n++)for(var i=1;i<4;i++)t.push(this.dataBoard[n][i]);for(var a=t[Math.floor(Math.random()*t.length)],s=a.x,r=a.y,o=[],c=s-1;c<=s+1;c++)for(var h=r-1;h<=r+1;h++){var l=this.dataBoard[c][h],u=Math.floor(1e3*Math.random()+20);o.push({data:l,delay:u})}mi()(o).call(o,(function(e,t){return e.delay-t.delay}));for(var d=function(){var t=o[p],n=t.delay,i=t.data,a=i.dice;e.scene.time.addEvent({delay:n,callback:function(){a.rescue((function(){i.value=0}))}})},p=0;p<o.length;p++)d()},n.outOfMove=function(e){for(var t=this,n=[200,300,400,500,600,700,800,900,1e3],i=0,a=[],s=this.dataBoard.length-1,r=0;r<=s;r++){for(var o=0;r-o>=0;){var c=this.dataBoard[r-o][4-o].dice;a.push({dice:c,delay:n[i]}),o++}i++}for(var h=1;h<=s;h++){for(var l=0;h+0>l;){var u=this.dataBoard[h][0+l].dice;a.push({dice:u,delay:n[i]}),l++}i++}for(var d=function(){var n=a[p],i=n.delay,s=n.dice,r=null;p===a.length-1&&(r=function(){e&&e()}),t.scene.time.addEvent({delay:i,callback:function(){s.animationJump(r)}})},p=0;p<a.length;p++)d()},n.calcScore=function(e,t){if(!e||0===e.length)return 0;console.log("calcScore"),console.log(e);for(var n=t||0,i=void 0===t?0:1,a=e.length,s=0;s<a;s++){var r=e[s];n+=r.value*r.amount}return n*(a+i)},n.exploreFen=function(e){var t=e.split(",");if(t&&!(t.length<this.dataBoard.length)){for(var n=1,i=0;i<t.length;i++)for(var a=t[i].split("-"),s=0;s<a.length;s++){var r="x"===a[s]?0:b()(a[s]);this.dataBoard[i][s].value=r,this.dataBoard[i][s].dice.setCustomValue(r),this.dataBoard[i][s].dice.setVisible(!!r),r>n&&(n=r)}this.maxValueDice=n}},t}(Phaser.GameObjects.Container),Jg=GameCore.Configs.Gameplay,qg=Jg.VibrateValue,Qg=Jg.StartScoreCool,$g=Jg.StartScoreGood,ev=Jg.StartScoreExcellent,tv=Ko.Z.EFFECTS,nv=tv.KEY,iv=tv.FRAME,av=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceSize=void 0,n.onComplete=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.scene=t,t.add.existing((0,Wo.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createPraiseFrame(),this.createPraiseScoreText(),this.setPosition(100,100)},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:nv}),this.add(this.praiseFrame),Phaser.Display.Align.In.Center(this.praiseFrame,this,0,-20)},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n){var i=this;n<Qg?this.praiseFrame.setVisible(!1):this.praiseFrame.setVisible(!0);var a="",s=0,r=0,o=0;this.x=e,Qg<=n&&n<$g?(a=iv.TEXT_COOL,s=139,r=49,o=qg[0]):$g<=n&&n<ev?(a=iv.TEXT_GOOD,s=144,r=48,o=qg[1]):n>=ev&&(a=iv.TEXT_EXCELLENT,s=260,r=48,o=qg[2]),this.scene.player.getPlayerSettings().vibrate&&Nh(o),this.setVisible(!0),this.praiseFrame.setFrame(a),this.praiseFrame.setWorldSize(s,r),this.x-s/2<0&&(this.x=s/2),this.x+s/2>this.scene.gameZone.width&&(this.x=this.scene.gameZone.width-s/2),this.praiseScoreText.setText("+"+n+" POINTS"),this.scene.add.tween({targets:this,y:{from:t+20,to:t},alpha:{from:0,to:1},scale:{from:0,to:1},duration:300,onComplete:function(){i.scene.add.tween({delay:800,targets:i,y:{from:t,to:t-20},alpha:{from:1,to:0},scale:{from:1,to:1.5},duration:300})}})},t}(Phaser.GameObjects.Container),sv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new jg(this.scene,326,323)},n.createPraise=function(){this.praise=new av(this.scene),this.praise.setDepth(Ma.Z.EFFECT)},t}(Phaser.GameObjects.Container),rv=sv,ov=function(){function e(){this.targetType=void 0,this.targetValue=void 0,this.init()}var t=e.prototype;return t.init=function(){},t.setTargetType=function(e){this.targetType=e},t.setTargetValue=function(e){this.targetValue=e},t.getTargetType=function(){return this.targetType},t.getTargetValue=function(){return this.targetValue},e}(),cv=Ko.Z.GAMEPLAY,hv=cv.KEY,lv=cv.FRAME,uv=function(){function e(e){this.scene=void 0,this.tail=void 0,this.star=void 0,this.tweenStarToMagnetItem=void 0,this.onComplete=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.amountPoint=10,this.pointsPath=[],this.targetShowStarTail=.1,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createTail(),this.createStar(),this.createPath()},t.createTail=function(){this.tail=this.scene.add.rope(0,0,hv,lv.TAIL,15,!1),this.tail.setDisplaySize(this.tail.width,160),this.tail.setSize(this.tail.width,160),this.tail.setAlpha(0),this.tail.setDepth(Ma.Z.ON_TOP)},t.createStar=function(){this.star=this.scene.make.image({key:hv,frame:lv.STAR_YELLOW}),this.star.setDepth(Ma.Z.EFFECT),this.star.setVisible(!1)},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=this.scene.world.getZoomRatio(),n=new Phaser.Math.Vector2(300,300),i=new Phaser.Math.Vector2(200,0),a=new Phaser.Math.Vector2(100,100);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(n,i,a),this.tweenStarToMagnetItem=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(n){var i=n.progress;e.curve.getPoint(e.path.t,e.path.vec);var a=new Phaser.Math.Vector2(e.path.vec.x,e.path.vec.y);e.pointsPath.unshift(a),e.star.setPosition(e.path.vec.x,e.path.vec.y),e.star.setVisible(!0);var s=e.tail.points;if(i>=e.targetShowStarTail&&(e.targetShowStarTail+=.1),!(e.pointsPath.length<s.length)){for(var r=s.length,o=0;o<r;o++){var c,h,l=(null==(c=e.pointsPath[o])?void 0:c.x)||e.pointsPath[e.pointsPath.length-1].x,u=((null==(h=e.pointsPath[o])?void 0:h.y)||e.pointsPath[e.pointsPath.length-1].y)+e.star.displayHeight/4;s[o].x=l/e.tail.scaleX,s[o].y=u/e.tail.scaleY-3*t}e.tail.setAlpha(1),e.tail.setDirty()}},onComplete:function(){e.pointsPath=[],e.star.setVisible(!1),e.tail.setVisible(!1),e.tail.setAlpha(0),e.scene.footer.itemMagnet.playTweenGlare(),e.onComplete&&e.onComplete()}})},t.setOnComplete=function(e){this.onComplete=e},t.playAnimation=function(e,t){this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(e.pX+200,e.pY-200),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY),this.tail.setVisible(!0),this.targetShowStarTail=.1,this.tweenStarToMagnetItem.play()},t.stopAnimation=function(){this.star.setVisible(!1),this.tail.setVisible(!1),this.tail.setAlpha(0),this.tweenStarToMagnetItem.isPlaying()&&this.tweenStarToMagnetItem.stop()},e}(),dv=Ko.Z.GAMEPLAY,pv=dv.KEY,mv=dv.FRAME,fv=function(){function e(e,t,n){this.x=void 0,this.y=void 0,this.scene=void 0,this.background=void 0,this.backgroundSmall=void 0,this.graphicProgress=void 0,this.isDisable=void 0,this.percent=void 0,this.x=t,this.y=n,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBg(),this.createGraphicsProgress(),this.createBgSmall(),this.updatePercent(0)},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:pv,frame:mv.ITEM_BG_CIRCLE}),this.background.setWorldSize(69,69)},t.createBgSmall=function(){this.backgroundSmall=this.scene.make.image({x:this.x,y:this.y,key:pv,frame:mv.ITEM_BG_CIRCLE_SMALL}),this.backgroundSmall.setWorldSize(53,53)},t.createGraphicsProgress=function(){this.graphicProgress=this.scene.add.graphics(),this.graphicProgress.fillStyle(16776960,1)},t.updatePercent=function(e){var t=this;console.log("Perrrrr ",this.percent,e),this.scene.tweens.addCounter({from:this.percent,to:e,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(e){var n,i=360*e.getValue()/100-90;t.graphicProgress.clear(),et()(n=t.graphicProgress).call(n,t.x,t.y,30,Phaser.Math.DegToRad(i),Phaser.Math.DegToRad(-90),!0),t.graphicProgress.fillPath()},duration:200}),this.percent=e},t.restartProgress=function(){this.graphicProgress.closePath()},t.disableItem=function(){this.isDisable=!0,this.graphicProgress.setAlpha(.2),this.background.setAlpha(.2)},t.enableItem=function(){this.isDisable=!1,this.graphicProgress.setAlpha(1),this.background.setAlpha(1)},e}(),gv=Ko.Z.GAMEPLAY,vv=gv.KEY,yv=gv.FRAME,Sv=GameCore.Configs.Board,Ev=Sv.cols,bv=Sv.rows,Av=GameCore.Configs.MagnetItem,Cv=Av.maxMagnetPerMatch,Iv=Av.scoreForOnePercent,wv=GameCore.Configs.Gameplay.StartScoreCool,Tv=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.icon=void 0,a.magnetMoveIcon=void 0,a.mainItemMagnet=void 0,a.itemHighLight=[],a.targetScore=100*Iv,a.glareSprite=void 0,a.tweenGlareSprite=void 0,a.isDisable=void 0,a.tweenToEnableMaxFps=void 0,a.totalScore=0,a.amountUsed=0,a.itemPercent=void 0,a.textAmount=void 0,a.bgAmount=void 0,a.animationMagnetItem=void 0,a.scene=t,a.init(),a}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createItemPercent(),this.createIcon(),this.createMagnetMoveIcon(),this.createGlare(),this.createTweenGlare(),this.createAmountBg(),this.createAmountText(),this.createAnimationMagnetItem(),this.updateAmountUsed(this.amountUsed),this.listenEvents()},n.createItemPercent=function(){this.itemPercent=new fv(this.scene,this.x,this.y)},n.createIcon=function(){this.icon=this.scene.make.image({x:this.x,y:this.y,key:vv,frame:yv.ITEM_MAGNET}),this.icon.setWorldSize(40,42)},n.createMagnetMoveIcon=function(){this.magnetMoveIcon=this.scene.make.image({x:this.x,y:this.y,key:vv,frame:yv.ITEM_MAGNET}),this.magnetMoveIcon.setDepth(Ma.Z.ON_TOP),this.magnetMoveIcon.setWorldSize(40,42),this.magnetMoveIcon.setVisible(!1)},n.createGlare=function(){this.glareSprite=this.scene.make.image({x:this.x,y:this.y,key:vv,frame:yv.GLARE_YELLOW_CIRCLE}),this.glareSprite.setVisible(!1).setScale(0)},n.createTweenGlare=function(){var e=this;this.tweenGlareSprite=this.scene.add.tween({targets:this.glareSprite,duration:300,scale:{from:0,to:1},ease:Phaser.Math.Easing.Sine.InOut,onComplete:function(){e.glareSprite.setVisible(!1).setScale(0)},paused:!0})},n.createAmountBg=function(){this.bgAmount=this.scene.make.image({x:this.x-23,y:this.y-26,key:vv,frame:yv.BG_RED_CIRCLE}),this.bgAmount.setWorldSize(21,23)},n.createAmountText=function(){this.textAmount=this.scene.make.bitmapText({font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:String(this.amountUsed)}),Phaser.Display.Align.In.Center(this.textAmount,this.bgAmount,-1.25,-2.5)},n.createAnimationMagnetItem=function(){this.animationMagnetItem=new uv(this.scene)},n.updateAmountUsed=function(e){this.amountUsed=e>=Cv?Cv:e,this.textAmount.setText(String(this.amountUsed)),0!==this.amountUsed?(this.icon.setAlpha(1),this.scene.updateMatchData()):this.icon.setAlpha(.5)},n.updateTotalScore=function(e){this.totalScore=e},n.updateTargetScore=function(e){this.targetScore=e},n.updatePercent=function(){var e=100*this.totalScore/this.targetScore;this.itemPercent.updatePercent(e)},n.listenEvents=function(){var e=this;this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,scale:{from:0,to:1},loop:-1,paused:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.tweenToEnableMaxFps.play()})),this.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.tweenToEnableMaxFps.stop(),e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,35);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handleDragStart=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100))},n.handleDrag=function(e){this.amountUsed<=0||(this.magnetMoveIcon.setVisible(!0),this.magnetMoveIcon.setPosition(e.worldX,e.worldY-100),this.handleCheckMagnet())},n.onCompleteMagnet=function(e){var t,n,i=this;this.mainItemMagnet&&(null==(t=this.mainItemMagnet)||t.dice.setAlpha(1),this.magnetMoveIcon.setVisible(!1),8!==(null==(n=this.mainItemMagnet)?void 0:n.value)?this.scene.main.board.getMergeDice(this.mainItemMagnet).length>1?this.scene.events.emit(Cc,[this.mainItemMagnet],(function(){i.scene.updateMatchData()}),e):(this.scene.animDice.playAnimationStarToScore({pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},{pX:this.scene.header.x,pY:this.scene.header.y},[],(function(){var t,n;i.scene.main.praise.handlePraise((null==(t=i.mainItemMagnet)?void 0:t.pX)||0,(null==(n=i.mainItemMagnet)?void 0:n.pY)||0,e)})),this.scene.updateMatchData()):this.scene.main.board.handleMergeStarDiceToRubyDice(this.mainItemMagnet,{pX:this.mainItemMagnet.pX,pY:this.mainItemMagnet.pY},e,(function(){i.scene.updateMatchData()})))},n.handleDragEnd=function(){var e=this;if(!(this.amountUsed<=0)&&(this.magnetMoveIcon.setVisible(!1),this.updateItemHighLight(),this.mainItemMagnet)){var t=this.getAllItemsMagnet(),n=this.mainItemMagnet,i=n.pX,a=n.pY,s=n.value,o=n.dice;if(!t||t.length<=1)o.setAlpha(1);else{this.updateAmountUsed(this.amountUsed-1);for(var c=[],h=function(){var n=t[l],s=n.dice,h=n.value;(function(e){return e>10})(h)&&c.push((0,r.Z)({},n)),e.scene.animDice.playAnimationMoveTo(s,{pX:i,pY:a},(function(){n.value=0,n.dice.setCustomValue(0),n.dice.setVisible(!1),o.setCustomValue(h+1),e.mainItemMagnet&&(e.mainItemMagnet.value=h+1)}))},l=0;l<t.length;l++)h();this.scene.main.board.handleAnimSpecialDice(c),this.scene.animDice.playAnimationMerge(o,(function(){var n=(t.length+1)*s;e.onCompleteMagnet(n)}))}}},n.handleCheckMagnet=function(){var e=this.getMainItemMagnet();if(this.mainItemMagnet&&e&&e.x===this.mainItemMagnet.x&&e.y===this.mainItemMagnet.y||this.updateItemHighLight(),this.mainItemMagnet=e,this.mainItemMagnet){this.mainItemMagnet.dice.setAlpha(.8),this.saveItemHighLight(this.mainItemMagnet);var t=this.getAllItemsMagnet();if(t&&!(t.length<=1))for(var n=0;n<t.length;n++){var i=t[n].dice;this.saveItemHighLight(t[n]),i.playShaking()}}},n.saveItemHighLight=function(e){var t=e.x,n=e.y,i=this.itemHighLight.some((function(e){return t===e.x&&n===e.y}));i||this.itemHighLight.push(e)},n.updateItemHighLight=function(){this.itemHighLight.forEach((function(e){e.dice.setAlpha(1),e.dice.stopShaking()})),this.itemHighLight=[]},n.getMainItemMagnet=function(){for(var e=this.scene.main.board.dataBoard,t=0;t<bv;t++)for(var n=0;n<Ev;n++){var i=e[t][n],a=i.dice;if(i.value&&a.getBounds().contains(this.magnetMoveIcon.x,this.magnetMoveIcon.y))return i}return null},n.getAllItemsMagnet=function(){if(!this.mainItemMagnet)return[];for(var e=this.scene.main.board.dataBoard,t=this.mainItemMagnet,n=t.value,i=t.x,a=t.y,s=[],r=0;r<bv;r++)for(var o=0;o<Ev;o++){var c=e[r][o];n!==c.value||o===i&&r===a||s.push(c)}return s},n.playTweenGlare=function(){this.glareSprite.setVisible(!0).setScale(0),this.tweenGlareSprite.play()},n.playAnimationStarToMagnetItem=function(e,t,n){var i=this,a=function(){i.totalScore+=n;var e=100*i.totalScore/i.targetScore;e=e>360?360:e,i.itemPercent.updatePercent(e),i.totalScore>=i.targetScore&&i.scene.time.addEvent({delay:200,callback:function(){i.itemPercent.updatePercent(0);var e=Math.floor(i.totalScore/i.targetScore);i.amountUsed+=e,i.updateAmountUsed(i.amountUsed),i.totalScore-=i.targetScore*e,i.itemPercent.updatePercent(100*i.totalScore/i.targetScore)}})};n<wv?a():(this.animationMagnetItem.playAnimation(e,t),this.animationMagnetItem.setOnComplete(a))},n.restartItemMagnet=function(){this.updateAmountUsed(0),this.totalScore=0,this.targetScore=100*Iv,this.itemPercent.updatePercent(0)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.bgAmount.setAlpha(.2),this.textAmount.setAlpha(.2),this.icon.setAlpha(.2),this.itemPercent.disableItem()},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.bgAmount.setAlpha(1),this.textAmount.setAlpha(1),this.icon.setAlpha(1),this.itemPercent.enableItem()},t}(Phaser.GameObjects.Container),Pv=n(25110),xv=n.n(Pv),kv=n(33733),Dv=n.n(kv),Ov=n(19389),_v=n.n(Ov);function Rv(e,t){var n="undefined"!==typeof Dv()&&_v()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Mv(e,t);var i=et()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return xv()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Mv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bv,Nv=Ko.Z.GAMEPLAY,Lv=Nv.KEY,Gv=Nv.FRAME,Fv=Ko.Z.GAMEPLAY_32,Zv=Fv.KEY,Uv=Fv.FRAME,Vv=function(){function e(e,t,n){this.scene=void 0,this.background=void 0,this.text=void 0,this.x=void 0,this.y=void 0,this.nextDiceItems=[],this.nextDiceValues=[],this.isDisable=void 0,this.listDataDice=[],this.scene=e,this.x=t,this.y=n,this.init()}var t=e.prototype;return t.init=function(){this.createText(),this.createBg(),this.initDiceFrames()},t.createBg=function(){this.background=this.scene.make.image({x:this.x,y:this.y,key:Lv,frame:Gv.BG_NEXT_PANEL}),this.background.setDisplaySize(75,45)},t.createText=function(){this.text=this.scene.make.image({key:Lv,frame:Gv.TEXT_NEXT_DICE}),this.text.setWorldSize(56,14),this.text.setPosition(this.x,this.y-30)},t.initDiceFrames=function(){for(var e=0;e<2;e++){var t=new Mg(this.scene,{x:0,y:0,width:30,height:30,texture:Zv,frame:Uv.DICE_1});t.setVisible(!1),this.nextDiceItems.push(t)}},t.randomNextDice=function(e){var t,n,i=S()(t=[]).call(t,et()(n=this.listDataDice).call(n,2));if(e)for(var a=null==e?void 0:e.split(","),s=0;s<a.length;s++){var r=b()(a[s]);this.nextDiceValues.push(r)}else if(i&&i.length>0){var o=i[0],c=null==o?void 0:o.split(",");if(c)for(var h=0;h<c.length;h++){var l=b()(c[h]);this.nextDiceValues.push(l)}}else{var u=this.scene.main.board.getMaxValueDice(),d=this.scene.main.board.getDiceSlot(),p=Phaser.Math.Between(1,d);if(u<=2)switch(p){case 1:this.nextDiceValues.push(Phaser.Math.Between(1,2));break;case 2:this.nextDiceValues.push(1),this.nextDiceValues.push(2)}else for(var m=0;m<p;m++){var f=this.randomValueExcludeNumbers(this.nextDiceValues);f<0||this.nextDiceValues.push(f)}}},t.randomValueExcludeNumbers=function(e){var t=this.scene.main.board.getMaxValueDice(),n=Phaser.Math.Between(1,t);if(1===Phaser.Math.Between(0,1)){var i=this.getTargetValues();n=b()(i[Math.floor(Math.random()*i.length)])}return-1!==_t()(e).call(e,n)?this.randomValueExcludeNumbers(e):n},t.getTargetValues=function(){for(var e,t=this.scene.targetMissionManager.getTargetValue(),n=[],i=Rv((t=et()(t).call(t,1,-1)).split(","));!(e=i()).done;){var a=e.value.split(":")[0];n.push(a)}return n},t.drawDiceFrames=function(){for(var e=this.nextDiceValues.length,t=0;t<e;t++){var n=this.nextDiceValues[t],i=this.nextDiceItems[t];i.setCustomValue(n),i.setVisible(!0);var a=this.getPositionByIndex(t);i.setPosition(a.x,a.y)}},t.hideDiceItems=function(){this.nextDiceItems.forEach((function(e){e.setVisible(!1)}))},t.getPositionByIndex=function(e){var t=[];switch(this.nextDiceValues.length){case 1:t=[{x:this.x,y:this.y}];break;case 2:t=[{x:this.x-15,y:this.y},{x:this.x+15,y:this.y}]}return t[e]},t.handleNextDice=function(e){this.nextDiceValues=[],this.hideDiceItems(),this.randomNextDice(e),this.drawDiceFrames()},t.restart=function(){this.nextDiceValues=[],this.hideDiceItems()},t.disableItem=function(){this.isDisable=!0,this.background.setAlpha(.2),this.text.setAlpha(.2),this.nextDiceItems.forEach((function(e){e.setAlpha(.2)}))},t.enableItem=function(){this.isDisable=!1,this.background.setAlpha(1),this.text.setAlpha(1),this.nextDiceItems.forEach((function(e){e.setAlpha(1)}))},e}(),Yv=Ko.Z.GAMEPLAY,Hv=Yv.KEY,Wv=Yv.FRAME,Kv=Ko.Z.GAMEPLAY_32,zv=Kv.KEY,Xv=Kv.FRAME,jv=GameCore.Configs.Board,Jv=jv.cols,qv=jv.rows,Qv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.diceItems=[],n.direction=void 0,n.diceWidth=50,n.diceHeight=50,n.angleValue=void 0,n.tweenScaleUp=void 0,n.isScaleUp=void 0,n.isDragged=void 0,n.isShowing=void 0,n.dataDice=[],n.isRotating=!1,n.dataDiceRandom=[],n.tweenMoveBack=void 0,n.pointerDownX=0,n.pointerDownY=0,n.countDragTime=void 0,n.isDisable=void 0,n.amountDice=void 0,n.matrixData=[],n.diceContainer=void 0,n.pointerDownPosition=void 0,n.setDepth(Ma.Z.PIECE),t.add.existing((0,Wo.Z)(n)),n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.initDiceItems(),this.createTweenScaleUp(),this.listenEvents()},n.initDiceItems=function(){this.diceContainer=this.scene.make.container({}),this.diceContainer.setDepth(Ma.Z.PIECE);for(var e=0;e<2;e++){var t=new Mg(this.scene,{x:0,y:0,width:this.diceWidth,height:this.diceHeight,texture:zv,frame:Xv.DICE_1});t.setVisible(!1),this.diceContainer.add(t),this.diceItems.push(t)}},n.createBackground=function(){var e=this.scene.make.sprite({x:0,y:0,key:Hv,frame:Wv.BG_PIECE});e.setWorldSize(140,138),this.add(e),Phaser.Display.Align.In.Center(e,this)},n.getDataDice=function(){switch(this.amountDice=this.scene.footer.nextDice.nextDiceValues.length,this.amountDice){case 1:return this.getDataOneDice();case 2:return this.getDataTwoDice()}return[[1]]},n.getDataOneDice=function(){return this.direction="",[[this.scene.footer.nextDice.nextDiceValues[0]]]},n.getDataTwoDice=function(){this.randomDirection();var e=[],t=this.scene.footer.nextDice.nextDiceValues[0],n=this.scene.footer.nextDice.nextDiceValues[1];switch(this.direction){case"HORIZONTAL":this.angleValue=90,e.push(this.scene.footer.nextDice.nextDiceValues);break;case"VERTICAL":this.angleValue=0,e.push([t]),e.push([n])}return e},n.randomDirection=function(){var e=["HORIZONTAL","VERTICAL"];this.direction=e[Math.floor(Math.random()*e.length)]},n.getPosition=function(){var e=[{x:0,y:0}];switch(this.direction){case"HORIZONTAL":e=[{x:-this.diceWidth/2-2,y:0},{x:this.diceWidth/2+2,y:0}];break;case"VERTICAL":e=[{x:0,y:-this.diceWidth/2-2},{x:0,y:this.diceHeight/2+2}]}return e},n.hideDice=function(){this.diceContainer.setVisible(!1),this.diceItems.forEach((function(e){e.setVisible(!1)}))},n.showDice=function(e,t){var n=this;this.isShowing=!0,this.diceContainer.setVisible(!0),this.dataDice=[],this.matrixData=[];var i=0;if(e){if(this.dataDiceRandom=e,t)switch(this.amountDice=2,this.direction=t||"",this.direction){case"HORIZONTAL":this.angleValue=90;break;case"VERTICAL":this.angleValue=0}}else this.dataDiceRandom=this.getDataDice();for(var a=this.getPosition(),s=0;s<this.dataDiceRandom.length;s++){this.matrixData[s]=[];for(var r=0;r<this.dataDiceRandom[s].length;r++){var o=this.dataDiceRandom[s][r],c=this.diceItems[i],h=a[i].x,l=a[i].y;c.setPosition(0,0),c.setCustomValue(o),c.setVisible(!0),this.dataDice.push({x:r,y:s,value:o}),this.scene.animDice.playAnimationShow(c,{pX:h,pY:l}),this.matrixData[s][r]={x:r,y:s,value:o},i++}}this.scene.time.delayedCall(100,(function(){n.isShowing=!1}))},n.setContentPosition=function(e,t){this.setPosition(e,t),this.diceContainer.setPosition(e,t)},n.rotateDice=function(){var e=this;if(this.scene.audio.playSound(ah.Z.DICE_SHUFFLE),this.dataDice=[],this.matrixData=[],!this.dataDiceRandom||this.dataDiceRandom.length<=0)this.isRotating=!1;else for(var t=0;t<this.dataDiceRandom.length;t++){this.matrixData[t]=[];for(var n=function(){var n,a=e.dataDiceRandom[t][i];e.matrixData[t][i]={x:i,y:t,value:a};var s=C()(n=e.diceItems).call(n,(function(e){return e.customValue===a}))[0];e.animationRotateDice(i,t,s),e.dataDice.push({x:i,y:t,value:a})},i=0;i<this.dataDiceRandom[t].length;i++)n()}},n.animationRotateDice=function(e,t,n){var i=this,a=-(this.dataDiceRandom[0].length-1)*this.diceWidth/2,s=-(this.dataDiceRandom.length-1)*this.diceHeight/2,r=a+e*this.diceWidth,o=s+t*this.diceHeight;this.scene.tweens.addCounter({from:0,to:90,ease:Phaser.Math.Easing.Back.Out,onUpdate:function(e){var t=Math.min(r,o)>=0?1:0,a=0;270!==i.angleValue&&0!==i.angleValue||(a=180);var s=i.angleValue-a+e.getValue()+180*t,c=Math.cos(s*Math.PI/180)*i.diceWidth/2,h=Math.sin(s*Math.PI/180)*i.diceHeight/2;n.setPosition(c,h)},duration:400,onComplete:function(){n.setPosition(r,o,i.diceWidth,i.diceHeight),i.isRotating=!1}})},n.createTweenScaleUp=function(){var e=this;this.tweenScaleUp=this.scene.add.tween({paused:!0,scale:1.2,targets:this.diceContainer,duration:300,onComplete:function(){e.diceContainer.setScale(1.2)}})},n.listenEvents=function(){var e=this;this.on(Phaser.Input.Events.POINTER_DOWN,(function(t){e.handlePointerDown(t)})),this.on(Phaser.Input.Events.POINTER_UP,(function(t){e.handlePointerUp(t)})),this.on(Phaser.Input.Events.DRAG_START,(function(){e.countDragTime=0})),this.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd()}));var t=new Phaser.Geom.Circle(0,0,70);this.setInteractive(t,Phaser.Geom.Circle.Contains),this.scene.input.setDraggable(this)},n.handlePointerDown=function(e){this.pointerDownPosition={x:e.x,y:e.y}},n.handlePointerUp=function(e){if(!this.isRotating&&!this.isShowing)if(this.isRotating=!0,!this.amountDice||this.amountDice<2)this.isRotating=!1;else if(this.isDragged)this.isRotating=!1;else if(this.angleValue+=90,360===this.angleValue&&(this.angleValue=0),!(this.dataDiceRandom.length<=1&&this.dataDiceRandom[0].length<=1)){this.pointerDownPosition=null;var t=[];switch(this.direction){case"HORIZONTAL":(t=[[],[]])[0][0]=this.dataDiceRandom[0][0],t[1][0]=this.dataDiceRandom[0][1],this.direction="VERTICAL";break;case"VERTICAL":(t=[[]])[0][0]=this.dataDiceRandom[1][0],t[0][1]=this.dataDiceRandom[0][0],this.direction="HORIZONTAL"}this.dataDiceRandom=t,this.rotateDice()}},n.handleDrag=function(e){var t;if(this.diceContainer.visible&&this.pointerDownPosition){var n=this.pointerDownPosition,i=n.x,a=n.y,s=e.x,r=e.y;if(!(Phaser.Math.Distance.Between(i,a,s,r)<10)){this.scene.game.updateFps(Wu.Z.max),this.scene.events.emit(Ic,!0),this.isScaleUp||(this.scene.audio.playSound(ah.Z.DICE_PICKUP),this.diceContainer.setScale(1),this.tweenScaleUp.play(),this.isScaleUp=!0),null!=(t=this.tweenMoveBack)&&t.isPlaying()&&this.tweenMoveBack.stop();try{this.isDragged=!0,this.diceContainer.setPosition(e.worldX,e.worldY-100),this.scene.events.emit(wc),this.canMove();for(var o=this.getCellsHighlight(),c=0;c<o.length;c++)o[c].value=this.dataDice[c].value;this.sortCellHighlight(o),this.scene.events.emit(Ac,o)}catch(h){}}}},n.handleDragEnd=function(){var e=this;if(this.scene.events.emit(Ic,!0),this.isScaleUp=!1,this.pointerDownX=0,this.pointerDownY=0,this.isDragged)try{this.canMove(),this.scene.audio.playSound(ah.Z.DICE_DROP);for(var t=this.getCellsHighlight(),n=0,i=0,a=0;a<t.length;a++)t[a].value=this.dataDice[a].value;if(1===t.length&&(n=t[0].pX,i=t[0].pY),2===t.length){var s=Math.min(t[0].pX,t[1].pX),r=Math.min(t[0].pY,t[1].pY);n=s+Math.abs(t[0].pX-t[1].pX)/2,i=r+Math.abs(t[0].pY-t[1].pY)/2}this.sortCellHighlight(t),this.scene.add.tween({targets:this.diceContainer,x:n,y:i,duration:100,onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setVisible(!1),e.scene.events.emit(Cc,t,(function(){e.diceContainer.setPosition(e.x,e.y),e.hideDice(),e.showDice(),e.scene.footer.nextDice.handleNextDice(),e.scene.events.emit(Tc,e.amountDice,e.dataDiceRandom),e.scene.updateMatchData()}))}})}catch(o){o instanceof Error&&"Invalid Move"===o.message&&this.handleInvalidMove()}},n.sortCellHighlight=function(e){mi()(e).call(e,(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))},n.getPositionTopLeftInBoard=function(){for(var e,t=this.diceContainer.x-this.diceWidth/2*((null==(e=this.dataDiceRandom[0])?void 0:e.length)-1),n=this.diceContainer.y-this.diceHeight/2*(this.dataDiceRandom.length-1),i=-1,a=-1,s=this.scene.main.board.dataBoard,r=0;r<qv;r++)for(var o=0;o<Jv;o++)if(s[r][o].pX-this.diceWidth/2-5<=t&&s[r][o].pX+this.diceWidth/2+5>=t&&s[r][o].pY-this.diceHeight/2-5<=n&&s[r][o].pY+this.diceHeight/2+5>=n){i=o,a=r;break}return i<0||i>Jv-1||a<0||a>qv-1?null:{x:i,y:a}},n.getCellsHighlight=function(){var e=this.scene.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;for(var i=0;i<this.matrixData.length;i++)for(var a=0;a<this.matrixData[i].length;a++)if(this.matrixData[i][a].value){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].pX:0,c=e[r]&&e[r][s]?e[r][s].pY:0;t.push({x:s,y:r,pX:o,pY:c,value:0})}return t},n.canMove=function(){for(var e=this.scene.main.board.dataBoard,t=this.getCellsHighlight(),n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.restart=function(){this.direction="",this.amountDice=0,this.diceContainer.setVisible(!1),this.diceContainer.setPosition(this.x,this.y),this.hideDice()},n.handleInvalidMove=function(){var e=this;this.tweenMoveBack=this.scene.add.tween({targets:this.diceContainer,x:this.x,y:this.y,scale:1,duration:300,ease:Phaser.Math.Easing.Sine.InOut,onStop:function(){e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y)},onComplete:function(){e.isDragged=!1,e.diceContainer.setScale(1),e.diceContainer.setPosition(e.x,e.y),e.scene.audio.playSound(ah.Z.DICE_INVALID_MOVE)}})},n.handleEventTutorialAfterDragEnd=function(){this.scene.events.emit(Ku.DRAG_END)},n.handleEventTutorialAfterTap=function(){this.scene.events.emit(Ku.TAP_END)},n.disableItem=function(){this.isDisable=!0,this.setAlpha(.2),this.diceContainer.setAlpha(.2)},n.enableItem=function(){this.isDisable=!1,this.setAlpha(1),this.diceContainer.setAlpha(1)},t}(Phaser.GameObjects.Container),$v=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.itemMagnet=void 0,n.nextDice=void 0,n.pY=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,60),t.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene.gameZone.height;this.pY=e/2+180,this.createItemMagnet(),this.createNextDice(),this.createPieces()},n.createPieces=function(){this.pieces=new Qv(this.scene),this.pieces.setContentPosition(this.scene.gameZone.width/2,this.pY)},n.createItemMagnet=function(){this.itemMagnet=new Tv(this.scene,61,this.pY-20)},n.createNextDice=function(){this.nextDice=new Vv(this.scene,310,this.pY-20)},n.disableItems=function(){this.pieces.disableItem(),this.itemMagnet.disableItem(),this.nextDice.disableItem()},n.enableItems=function(){this.pieces.enableItem(),this.itemMagnet.enableItem(),this.nextDice.enableItem()},t}(Phaser.GameObjects.Container),ey=$v,ty=Ko.Z.DEFAULT,ny=ty.KEY,iy=ty.FRAME,ay=function(e){function t(t){var n;return(n=e.call(this,t,ny,iy.BUTTON_MINOR_BUTTON)||this).button.setWorldSize(61,54),n.setName("Home"),n.createIcon(),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:ny,frame:iy.ICON_FLAT_HOME});e.setWorldSize(36,33),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ic.Z),sy=Ko.Z.DEFAULT,ry=sy.KEY,oy=sy.FRAME,cy=function(e){function t(t){var n;return(n=e.call(this,t,ry,oy.BUTTON_BLUE)||this).button.setWorldSize(252,55),n.setName("Replay"),n.createIcon(),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:ry,frame:oy.ICON_RESUME});e.setWorldSize(26,27),this.add(e),Phaser.Display.Align.In.Center(e,this,-50,1)},n.createText=function(){var e=this.scene.make.image({key:ry,frame:oy.TEXT_REPLAY});e.setWorldSize(80,15),this.add(e),Phaser.Display.Align.In.Center(e,this,21)},t}(ic.Z),hy=Ko.Z.DEFAULT,ly=hy.KEY,uy=hy.FRAME,dy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.bgPopup=void 0,s.settingSoundContainer=void 0,s.settingVibrateContainer=void 0,s.settingSoundIcon=void 0,s.settingVibrateIcon=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.buttonReplay=void 0,s.buttonHome=void 0,s.contents=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.open=function(){e.prototype.open.call((0,Wo.Z)(s));var t=s.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;s.settingSound.updateStatus(n),s.settingVibrate.updateStatus(i),s.runOpenAnimation(),s.updateVibrateButton()},s.handleClosePopup=function(){s.scene.audio.playSound(ah.Z.POPUP_OFF,{volume:.6}),s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleReplayGame=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.handleRetryLevel();case 2:case"end":return e.stop()}}),e)}))))},s.handleClickHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){setTimeout((function(){s.scene.screen.close(s.name),s.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}),100)}))},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e),dr.emit(Pc)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e)},s.scene=t,s.createPopup(),s.createBgPopup(),s.createPopupContent(),s.createInput(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.6),s}(0,c.Z)(t,e);var n=t.prototype;return n.updateVibrateButton=function(){Rh()?this.settingVibrateContainer.revive():(this.settingVibrateContainer.kill(),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup))},n.createInput=function(){this.buttonReplay.onClick=this.handleReplayGame,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting,this.buttonHome.onClick=this.handleClickHome},n.createPopup=function(){this.popup=new Ph(this.scene,0,21,308,440,{forceHeightTop:50}),this.popup.setTitle(uy.TEXT_SETTING,134,22),this.popup.setOnClickButtonClose(this.handleClosePopup),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createBgPopup=function(){this.bgPopup=new Jc(this.scene,0,0,257,145,{frameTop:uy.POPUP_TOP_DARK,frameMiddle:uy.POPUP_MIDDLE_DARK,frameBottom:uy.POPUP_BOTTOM_DARK}),this.popup.add(this.bgPopup),Phaser.Display.Align.In.Center(this.bgPopup,this.popup,0,-72)},n.createPopupContent=function(){this.createSwitchButtons(),this.createMenuButtons(),this.createMinorButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.buttonReplay,this.buttonHome])},n.createMenuButtons=function(){this.createButtonReplay()},n.createButtonReplay=function(){this.buttonReplay=new cy(this.scene),this.buttonReplay.button.setWorldSize(252,53),this.popup.add(this.buttonReplay),Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,70)},n.createMinorButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new ay(this.scene),this.buttonHome.button.setWorldSize(61,49),this.popup.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this.popup,0,165)},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),this.createVibrateButton(n)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({}),this.settingSoundContainer.setSize(180,30),this.settingSoundIcon=this.scene.make.image({key:ly,frame:uy.ICON_SOUND}),this.settingSoundIcon.setWorldSize(40,34),this.settingSound=new _h(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingSoundIcon,this.settingSoundContainer,-53,3),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35,0),this.settingSoundContainer.add([this.settingSoundIcon,this.settingSound]),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.bgPopup,0,-31)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({}),this.settingVibrateContainer.setSize(180,30),this.settingVibrateIcon=this.scene.make.image({key:ly,frame:uy.ICON_VIBRATE}),this.settingVibrateIcon.setWorldSize(43,46),this.settingVibrate=new _h(this.scene,{enable:e,width:87,height:29}),Phaser.Display.Align.In.Center(this.settingVibrateIcon,this.settingVibrateContainer,-56,-3),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35,3),this.settingVibrateContainer.add([this.settingVibrateIcon,this.settingVibrate]),this.popup.add(this.settingVibrateContainer),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.bgPopup,0,26)},n.runOpenAnimation=function(){this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),py=Yl()(.3,-.6,.85,.07),my=Yl()(0,.7,.5,2),fy=Ko.Z.GAMEPLAY,gy=fy.KEY,vy=fy.FRAME,yy=function(){function e(e){this.scene=void 0,this.imageStar=void 0,this.path=void 0,this.pathMoveToScore=void 0,this.curve=void 0,this.onComplete=void 0,this.glowImage=void 0,this.glowImageTween=void 0,this.glowBorder=void 0,this.glowBorderTween=void 0,this.particle=void 0,this.emitterBubble=void 0,this.emitterStar=void 0,this.starToScoreTween=void 0,this.emitterExploreScore=void 0,this.tweenEmitterExploreScore=void 0,this.glareCircle=void 0,this.glareCross=void 0,this.tweenExploreScore=void 0,this.tweenScaleGlareCross=void 0,this.animationMerge=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createImageMoveToScore(),this.createGlowImage(),this.createGlowBorder(),this.createParticle(),this.createEmitter(),this.createPath(),this.createEmitterStar(),this.createTweenExploreScore(),this.createEmitterExploreScore()},t.createImageMoveToScore=function(){this.imageStar=this.scene.make.image({key:gy,frame:vy.STAR}),this.imageStar.setVisible(!1),this.imageStar.setScale(1.7)},t.createGlowImage=function(){this.glowImage=this.scene.make.image({key:gy,frame:vy.GLOW}),this.glowImage.setVisible(!1)},t.createGlowBorder=function(){this.glowBorder=this.scene.make.image({key:gy,frame:vy.GLOW_BORDER}),this.glowBorder.setVisible(!1)},t.createParticle=function(){this.particle=this.scene.add.particles(gy),this.particle.setDepth(Ma.Z.EFFECT)},t.createEmitter=function(){this.emitterBubble=this.particle.createEmitter({frame:[vy.CIRCLE_4,vy.CIRCLE_2,vy.CIRCLE_3],x:0,y:0,lifespan:2e3,speedY:{min:-50,max:-10},scale:{start:.7,end:0},alpha:{min:.1,max:.3},blendMode:"ADD",maxParticles:15,scaleX:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},emitZone:{type:"edge",source:new Phaser.Geom.Rectangle(-25,-25,50,50),quantity:6,seamless:!0},on:!1})},t.createEmitterStar=function(){this.emitterStar=this.particle.createEmitter({name:"EmitterStar",x:0,y:0,frame:[vy.STAR,vy.CIRCLE_1,vy.CIRCLE_2],speed:{min:50,max:100},scale:{start:.7,end:0},follow:this.imageStar,on:!1,angle:{min:80,max:100},lifespan:{min:500,max:1e3}})},t.playAnimationShow=function(e,t){var n=e.scaleX,i=e.scaleY,a=t.pX,s=t.pY;e.setVisible(!0),e.setAlpha(0),this.scene.tweens.add({targets:e,x:{from:a+50,to:a},y:{from:s+100,to:s},alpha:{from:0,to:1},angle:{from:30,to:0},scaleX:{from:n-.5,to:n},scaleY:{from:i-.5,to:i},duration:600,ease:"Back.easeOut"})},t.createPath=function(){var e=this;this.pathMoveToScore={t:0,vec:new Phaser.Math.Vector2};var t=new Phaser.Math.Vector2(100,100),n=new Phaser.Math.Vector2(0,0),i=new Phaser.Math.Vector2(0,0);this.path={t:0,vec:new Phaser.Math.Vector2},this.curve=new Phaser.Curves.QuadraticBezier(t,n,i),this.starToScoreTween=this.scene.add.tween({paused:!0,targets:this.path,t:1,ease:"Sine.easeInOut",duration:1e3,onUpdate:function(){e.curve.getPoint(e.path.t,e.path.vec),e.imageStar.setPosition(e.path.vec.x,e.path.vec.y)},onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null,e.playAnimationExploreScore(),e.emitterStar.stop(),e.imageStar.setVisible(!1)}})},t.createTweenExploreScore=function(){var e,t,n=this.scene.gameZone.width/2;this.glareCircle=this.scene.make.image({x:n,y:45,key:gy,frame:vy.GLARE_CIRCLE}).setVisible(!1).setScale(0).setAlpha(0),this.glareCross=this.scene.make.image({x:n,y:45,key:gy,frame:vy.GLARE_CROSS}).setDepth(Ma.Z.EFFECT).setVisible(!1).setScale(0).setAlpha(0),null==(e=this.tweenExploreScore)||e.stop(),this.tweenExploreScore=this.scene.add.tween({paused:!0,targets:[this.glareCircle],alpha:{from:0,to:1},scale:{from:1.5,to:2},ease:"Sine.easeInOut",duration:400,yoyo:!0}),null==(t=this.tweenScaleGlareCross)||t.stop(),this.tweenScaleGlareCross=this.scene.add.tween({paused:!0,targets:[this.glareCross],alpha:{from:.1,to:1},scale:{from:0,to:2},ease:"Back.easeInOut",duration:400,yoyo:!0})},t.createEmitterExploreScore=function(){var e=this,t=this.scene.gameZone.width/2,n=this.scene.add.particles(gy);n.setPosition(t,45),n.setDepth(Ma.Z.EFFECT),this.emitterExploreScore=n.createEmitter({frame:[vy.CIRCLE_1,vy.CIRCLE_2,vy.CIRCLE_3],speed:{min:50,max:120},x:0,y:0,on:!1,maxParticles:15,quantity:15,lifespan:2e4,delay:200}),this.tweenEmitterExploreScore=this.scene.tweens.add({targets:n,scale:{from:0,to:1},duration:500,yoyo:!0,paused:!0,onComplete:function(){e.emitterExploreScore.killAll(),e.emitterExploreScore.stop()}})},t.playAnimationExploreScore=function(){this.glareCircle.setVisible(!0),this.glareCross.setVisible(!0),this.tweenExploreScore.play(),this.tweenScaleGlareCross.play(),this.emitterExploreScore.dead=[],this.emitterExploreScore.start(),this.tweenEmitterExploreScore.play()},t.playAnimationMoveTo=function(e,t,n){var i=this,a=t.pX,s=t.pY,r=e.x,o=e.y,c=e.scaleX,h=e.scaleY;this.scene.add.tween({x:a,y:s,scaleX:{from:c,to:c-.2},scaleY:{from:h,to:h-.2},ease:py,targets:e,onComplete:function(){i.scene.audio.playSound(ah.Z.DICE_MERGE),e.x=r,e.y=o,e.setScale(c,h),n&&n()},duration:200})},t.playAnimationMerge=function(e,t){var n=this,i=e.scaleX,a=e.scaleY,s=e.depth,r=i,o=a;e.setDepth(Ma.Z.EFFECT),this.glowImage.setVisible(!0),this.glowImage.setDepth(Ma.Z.EFFECT),this.glowImage.setPosition(e.x,e.y),this.glowImage.setDisplaySize(3*e.displayWidth,3*e.displayHeight),this.glowBorder.setPosition(e.x,e.y),this.glowBorder.setDepth(Ma.Z.EFFECT),this.glowBorder.setDisplaySize(e.displayWidth,e.displayHeight),this.animationMerge=this.scene.add.tween({scaleX:{from:i,to:i-.1},scaleY:{from:a,to:a-.1},targets:[e,this.glowImage],onComplete:function(){n.scene.add.tween({scaleX:{from:i,to:i+.3},scaleY:{from:a,to:a+.3},targets:[e,n.glowImage],onUpdate:function(){e.angle-=.1},onComplete:function(){var i=e.angle,a=n.glowBorder,c=a.scaleX,h=a.scaleY;n.scene.add.tween({alpha:.3,targets:n.glowImage,onComplete:function(){n.glowImage.setVisible(!1),n.glowBorder.setVisible(!0),n.scene.add.tween({scaleX:{from:c,to:c+.3},scaleY:{from:h,to:h+.3},alpha:{from:1,to:.7},targets:n.glowBorder,onComplete:function(){n.glowBorder.setVisible(!1),e.setScale(r,o),t&&t()},duration:200}),n.playEmitterBubble(e)},duration:200}),n.scene.add.tween({scaleX:r,scaleY:o,angle:{from:i,to:0},ease:my,targets:e,duration:300,onComplete:function(){e.setDepth(s)}})},duration:200})},duration:200}),this.scene.add.tween({alpha:{from:0,to:1},targets:this.glowImage,duration:300})},t.playAnimationStarToScore=function(e,t,n,i){this.onComplete=i,this.emitterStar.setVisible(!0),this.emitterStar.start();var a=Math.abs(e.pX-t.pX);a=e.pX<=t.pX?t.pX-a:t.pX+a,this.curve.p0=new Phaser.Math.Vector2(e.pX,e.pY),this.curve.p1=new Phaser.Math.Vector2(a,t.pY-250),this.curve.p2=new Phaser.Math.Vector2(t.pX,t.pY);var s=n&&n.length>1?3121622:16777215;this.imageStar.setVisible(!0),this.imageStar.setPosition(e.pX,e.pY),this.imageStar.setTint(s),this.imageStar.setScale(2),this.starToScoreTween.play(),this.emitterStar.setTint(s)},t.playEmitterBubble=function(e){this.emitterBubble.killAll(),this.emitterBubble.dead=[],this.emitterBubble.setPosition(e.x,e.y),this.emitterBubble.start()},t.stopAnimation=function(){var e,t,n,i;(this.imageStar.setVisible(!1),this.glowImage.setVisible(!1),this.glowBorder.setVisible(!1),null!=(e=this.starToScoreTween)&&e.isPlaying())&&(null==(n=this.starToScoreTween)||n.stop());null!=(t=this.animationMerge)&&t.isPlaying()&&(null==(i=this.animationMerge)||i.stop());this.emitterStar.setVisible(!1)},e}(),Sy=Ko.Z.EFFECTS,Ey=Sy.KEY,by=Sy.FRAME,Ay=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.onComplete=void 0,n.background=void 0,n.outOfMoveText=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.scene=t,n.scene.add.existing((0,Wo.Z)(n)),n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.createOutOfMoveText(),this.createTweenShow(),this.createTweenHide(),this.addItemContainer()},n.createBackground=function(){this.background=this.scene.make.image({key:Ey,frame:by.BG_OUT_OF_MOVE});var e=this.scene.gameZone.width,t=e*this.background.height/this.background.width;this.background.setWorldSize(e,t)},n.createOutOfMoveText=function(){this.outOfMoveText=this.scene.make.image({key:Ey,frame:by.TEXT_OUT_OF_ROOM}),this.outOfMoveText.setWorldSize(182,20)},n.createTweenShow=function(){var e=this,t=this.scene.gameZone.height;this.tweenShow=this.scene.add.tween({targets:this,y:{from:t,to:t/2-45},alpha:{from:0,to:1},duration:500,paused:!0,onComplete:function(){e.tweenHide.play()}})},n.createTweenHide=function(){var e=this;this.tweenHide=this.scene.add.tween({delay:3e3,targets:this,alpha:{from:1,to:0},duration:500,paused:!0,onComplete:function(){e.onComplete&&e.onComplete(),e.onComplete=null}})},n.addItemContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setPosition(t/2,n/2),this.setVisible(!1).setAlpha(0),this.add([this.background,this.outOfMoveText]),this.setDepth(99)},n.playAnimationShow=function(e){this.onComplete=e,this.setVisible(!0),this.tweenShow.play()},t}(Phaser.GameObjects.Container),Cy=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidTileMap",i.message=t||"This tile is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,D.Z)(Error)),Iy=Ko.Z.GAMEPLAY_32.KEY,wy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textWellDone=void 0,s.listTargetFrame=[],s.listAnim=[],s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Wo.Z)(s),t),s.runPopupEntrancesAnimation(0,300)},s.close=function(){e.prototype.close.call((0,Wo.Z)(s))},s.scene=t,s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,c.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText()},n.createText=function(){this.textWellDone=new sm(this.scene,{text:"WELL DONE!",font:_c.Z.PRIMARY.KEY,size:this.scene.fontSize(80)}),this.add(this.textWellDone),Phaser.Display.Align.In.Center(this.textWellDone,this)},n.createTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=0;t<3;t++){var n=this.scene.make.image({key:Iy});n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0),this.listTargetFrame.push(n)}this.add(this.listTargetFrame)}},n.updateTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length)for(var t=0;t<3;t++){var n=this.listTargetFrame[t];n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0)}},n.createAnimTargetItems=function(){for(var e=[100,500,700],t=[-120,0,120],n=[-100,-150,-100],i=[.7,1,.7],a=0;a<3;a++){this.listTargetFrame[a].setAlpha(0).setVisible(!0);var s=this.scene.add.tween({targets:this.listTargetFrame[a],delay:e[a],x:{from:0,to:t[a]},y:{from:300,to:n[a]},alpha:{from:0,to:1},scale:{from:0,to:i[a]},rotation:{from:-180,to:0},duration:500});this.listAnim.push(s)}},n.playAnimTargetItems=function(){for(var e=0;e<3;e++){this.listTargetFrame[e].setAlpha(0).setVisible(!0),this.listAnim[e].play()}},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.listTargetFrame.forEach((function(e){e.setAlpha(0)})),this.textWellDone.restart(),this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textWellDone.start(),0===n.listTargetFrame.length?(n.createTargetItems(),n.createAnimTargetItems()):(n.updateTargetItems(),n.playAnimTargetItems()),n.handleDelegate(),n.runAnim()}})),this.background.setAlpha(0),this.tweenBackground.play()},t}(GameCore.Screen),Ty=Ko.Z.DEFAULT,Py=Ty.KEY,xy=Ty.FRAME,ky=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevelComplete=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createTexts(),s.createButtons(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel()-1;this.textLevel.setText("Level "+e)},n.createPopup=function(){this.popup=new Ph(this.scene,0,0,290,234,{forceHeightTop:49}),this.add(this.popup),this.popup.setTitle(xy.TEXT_CONGRATULATION,212,18),this.popup.hideButtonClose(),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createTexts=function(){this.createTextLevel(),this.createTextLevelComplete()},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:_c.Z.DARK.KEY,size:this.scene.fontSize(45),text:"Level 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-20)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:_c.Z.DARK.KEY,size:this.scene.fontSize(50),text:"Completed",origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,15)},n.createTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Ko.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}))},n.updateTargetItems=function(){var e=this.scene.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Ko.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:Py,frame:xy.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ic.Z(this.scene,Py,xy.BUTTON_MINOR_BUTTON,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,72)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.make.image({key:Py,frame:xy.TEXT_NEXT_LEVEL});e.setWorldSize(113,15),this.buttonContinue=new ic.Z(this.scene,Py,xy.BUTTON_GREEN,178,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(e),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,33,72)},n.clickButtonContinue=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.analytics.levelStart(e.scene.levelManager.getLevel()),e.scene.clearFen(),e.scene.startGame()}))},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Dy=Ko.Z.DEFAULT,Oy=Dy.KEY,_y=Dy.FRAME,Ry=function(e){function t(t){var n;return(n=e.call(this,t,Oy,_y.BUTTON_GREEN)||this).button.setWorldSize(178,54),n.setName("Retry"),n.createIcon(),n.createText(),n.scene.add.existing((0,Wo.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:Oy,frame:_y.ICON_RETRY});e.setWorldSize(33,35),this.add(e),Phaser.Display.Align.In.Center(e,this,-45)},n.createText=function(){var e=this.scene.make.image({key:Oy,frame:_y.TEXT_RETRY});e.setWorldSize(81,19),this.add(e),Phaser.Display.Align.In.Center(e,this,26)},t}(ic.Z),My=Ko.Z.DEFAULT,By=My.KEY,Ny=My.FRAME,Ly=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.buttonBack=void 0,s.buttonRetry=void 0,s.contents=void 0,s.textLevelFail=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createTexts(),s.createButtons(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.scene.enableInput(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new Ph(this.scene,0,0,290,234),this.popup.setOnClickButtonClose(this.clickButtonClose.bind(this)),this.popup.setTitle(Ny.TEXT_YOU_LOSE,121,20),this.popup.hideButtonClose(),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createTexts=function(){this.createTextLevelFail()},n.createTextLevelFail=function(){this.textLevelFail=this.scene.make.image({key:By,frame:Ny.TEXT_LEVEL_FAIL}),this.textLevelFail.setWorldSize(112,16),this.popup.add(this.textLevelFail),Phaser.Display.Align.In.Center(this.textLevelFail,this.popup,0,-10)},n.createButtons=function(){this.createButtonBack(),this.createButtonRetry()},n.createButtonBack=function(){var e=this.scene.make.image({key:By,frame:Ny.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ic.Z(this.scene,By,Ny.BUTTON_MINOR_BUTTON,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,72)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}))},n.createButtonRetry=function(){this.buttonRetry=new Ry(this.scene),this.popup.add(this.buttonRetry),this.buttonRetry.onClick=this.clickButtonRetry.bind(this),Phaser.Display.Align.In.Center(this.buttonRetry,this.popup,33,72)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Sa.C.DASHBOARD_SCENE)}))},n.clickButtonRetry=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.handleRetryLevel()}))},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Eh.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Gy=Ko.Z.GAMEPLAY_32.KEY,Fy=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.text=void 0,n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createText()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:Gy}),this.imageGem.setWorldSize(35,35),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-10.5)},n.createText=function(){this.text=this.scene.make.bitmapText({font:_c.Z.DARK.KEY,size:this.scene.fontSize(48),origin:{x:.5,y:.5},text:"0"}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,38)},n.updateGem=function(e){this.imageGem.setFrame(e),this.imageGem.setWorldSize(35,35)},n.updateText=function(e){this.text.setText("x"+e)},n.getFrame=function(){return this.imageGem.frame.name},t}(Phaser.GameObjects.Container),Zy=Ko.Z.DEFAULT.FRAME,Uy=Ko.Z.GAMEPLAY_32.KEY,Vy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.listItems=[],s.targetImages=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.listAnimCollectionItem=[],s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.getData(["duration"])[0];this.hideAllCollectionItems(),this.createCollectionItems(),this.alginCollectionItems(),this.runOpenAnimation(),this.scene.time.delayedCall(i,(function(){n.handleClose()}))},n.createCollectionItems=function(){for(var e=this.getData(["jsonTarget"])[0],t=ie()(e),n=0;n<t.length;n++){var i=t[n],a=this.getCollectionItemFree(n);console.log("jsonTarget[key] === ",i,e[i]),a.updateGem(i),a.updateText(e[i])}},n.getCollectionItemFree=function(e){var t=this.listItems[e];return t||(t=new Fy(this.scene),this.popup.add(t),this.listItems.push(t)),t.setVisible(!0),t},n.alginCollectionItems=function(){var e;this.targetImages=[];for(var t=C()(e=this.listItems).call(e,(function(e){return e.visible})),n=t.length,i=263/(n+1)+5,a=-i*(n-1)/2,s=0;s<n;s++){var r=t[s];Phaser.Display.Align.In.Center(r,this.popup,a+i*s);var o=r.getFrame(),c=this.scene.make.image({key:Uy,frame:o});c.setDepth(Ma.Z.ON_TOP),c.setWorldSize(22,22),c.setVisible(!1),this.targetImages.push(c),Phaser.Display.Align.In.Center(c,this.popup,a+i*s+this.scene.gameZone.width/2,this.scene.gameZone.height/2)}},n.hideAllCollectionItems=function(){for(var e=0;e<this.listItems.length;e++){this.listItems[e].setVisible(!1)}},n.moveGemsToCollectItems=function(){var e=this;this.resetPositionTargetImages();for(var t=this.scene.header.collectItems,n=t.getTargetKeys(),i=this.scene.gameZone.width/2,a=function(a){var s=n[a],r=t.getPositionCollectionItem(s),o=i+r.x,c=r.y-46;e.targetImages[a].setAlpha(1),e.targetImages[a].setVisible(!0);var h=e.getFreeAnim(),l=Phaser.Math.Between(500,1e3);h.setTarget(e.targetImages[a]),h.runGemMoveToPosition(0,l,o,c).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e.scene.header.collectItems.showCollectItemByKey(s),e.targetImages[a].setVisible(!1)}))},s=0;s<n.length;s++)a(s)},n.resetPositionTargetImages=function(){for(var e,t=C()(e=this.listItems).call(e,(function(e){return e.visible})),n=263/(t.length+1)+5,i=-n*(t.length-1)/2,a=0;a<t.length;a++){var s;this.targetImages[a]&&(null==(s=this.targetImages[a])||s.setVisible(!1),Phaser.Display.Align.In.Center(this.targetImages[a],this.popup,i+n*a+this.scene.gameZone.width/2,this.scene.gameZone.height/2))}},n.getFreeAnim=function(){var e=new Lg(this.scene);return this.listAnimCollectionItem.push(e),e},n.createPopup=function(){this.popup=new Ph(this.scene,0,0,280,166,{forceHeightTop:49}),this.popup.setTitle(Zy.TEXT_MISSION,105,21),this.popup.hideButtonClose(),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(ah.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new Ah({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new Sh.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.moveGemsToCollectItems(),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new yh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new Sh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Yy=Vy,Hy=Ko.Z.DEFAULT,Wy=Hy.KEY,Ky=Hy.FRAME,zy=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.gift=void 0,s.open=function(){e.prototype.open.call((0,Wo.Z)(s))},s.scene=t,s.createBackground(),s.setDepth(Ba.Ks.POPUP),s.background.setAlpha(.6),s}return(0,c.Z)(t,e),t.prototype.createBackground=function(){var e=this;this.gift=this.scene.make.image({key:Wy,frame:Ky.ICON_GIFT}),this.gift.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){dr.emit(xc),e.scene.screen.close(e.name),e.scene.screen.open(Ba.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.isLevelComplete=!1,e.scene.screen.open(Ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})})),this.add(this.gift)},t}(GameCore.Screen),Xy=GameCore.Configs,jy=Xy.Match,Jy=Xy.Network,qy=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,S()(t=[this]).call(t,s))||this).levelManager=void 0,n.mapManager=void 0,n.targetMissionManager=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.isGameOver=void 0,n.isLevelComplete=void 0,n.isGameReplay=void 0,n.animDice=void 0,n.outOfMoveLabel=void 0,n.run=function(){n.restartGame(),n.startGame()},n.create=function(){e.prototype.create.call((0,Wo.Z)(n)),n.createLine(),n.createLevelManager(),n.createMapManager(),n.createTargetMissionManager(),n.createOutOfMove(),n.createHeader(),n.createMain(),n.createFooter(),n.createAnimDice(),n.createScreens(),n.createInput(),n.preLoadAds(),n.listenEvents()},n.handleUpdateStatusSound=function(){var e=n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e)},n.handleClickSound=function(){var e=!n.player.getPlayerSettings().sound;n.header.updateButtonSoundByStatus(e),n.player.setSetting("sound",e)},n.handleShowMidRollAd=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.game.globalScene,e.prev=1,n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=5;break}return e.abrupt("return");case 5:return t.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"Loading ads...",duration:Jy.Timeout,loading:!0}),e.next=8,n.ads.showMidRollAdAsync();case 8:n.analytics.showInterstitialAd(n.getSceneName()),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return");case 14:return e.prev=14,t.screen.close(Ba.o4.NOTIFY_SCREEN),n.audio.playMusic(),n.ads.preloadMidRollAdAsync().catch(a.tO),e.finish(14);case 19:case"end":return e.stop()}}),e,null,[[1,11,14,19]])}))),n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.listenEvents=function(){dr.on(Pc,this.handleUpdateStatusSound)},n.preLoadAds=function(){this.ads.preloadMidRollAdAsync(),this.ads.preloadRewardedVideoAsync()},n.createLevelManager=function(){this.levelManager=new ag(this)},n.createMapManager=function(){this.mapManager=new sg(this)},n.createTargetMissionManager=function(){this.targetMissionManager=new ov},n.createOutOfMove=function(){this.outOfMoveLabel=new Ay(this)},n.createHeader=function(){this.header=new wg(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone)},n.createMain=function(){this.main=new rv(this)},n.createFooter=function(){this.footer=new ey(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone)},n.createAnimDice=function(){this.animDice=new yy(this)},n.createInput=function(){this.header.buttonSound.onClick=this.handleClickSound.bind(this),this.header.buttonSetting.onClick=this.openSettingScreen.bind(this)},n.openSettingScreen=function(){this.screen.open(Ba.o4.SETTINGS_SCREEN)},n.createScreens=function(){this.createSettingScreen(),this.createCollectionCompletedScreen(),this.createMissionCollectionCompleteScreen(),this.createMissionFailScreen(),this.createCollectionItemsScreen(),this.createClaimGiftScreen()},n.createSettingScreen=function(){this.screen.add(Ba.o4.SETTINGS_SCREEN,dy)},n.createCollectionCompletedScreen=function(){this.screen.add(Ba.o4.COLLISION_COMPLETED_SCREEN,wy)},n.createMissionCollectionCompleteScreen=function(){this.screen.add(Ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN,ky)},n.createMissionFailScreen=function(){this.screen.add(Ba.o4.MISSION_FAIL_SCREEN,Ly)},n.createCollectionItemsScreen=function(){this.screen.add(Ba.o4.COLLECTION_ITEMS_SCREEN,Yy)},n.createClaimGiftScreen=function(){this.screen.add(Ba.o4.CLAIM_GIFT_SCREEN,zy)},n.disableInput=function(){this.input.enabled=!1},n.enableInput=function(){this.input.enabled=!0},n.updateStateGameOver=function(e){this.isGameOver=e},n.handleRetryLevel=function(){this.analytics.levelStart(this.levelManager.getLevel(),void 0,this.getLevelName()),this.restartGame(),this.clearFen(),this.startGame()},n.restartGame=function(){this.updateStateGameOver(!1),this.isGameOver=!1,this.isGameReplay=!1,this.animDice.stopAnimation(),this.header.restart(),this.main.board.restart(),this.footer.nextDice.restart(),this.footer.pieces.restart(),this.footer.itemMagnet.restartItemMagnet(),this.footer.itemMagnet.animationMagnetItem.stopAnimation()},n.handleLoadFen=function(){var e,t=this.storage.getState(),n=(null==(e=ar(t))?void 0:e.data)||{},i=n.fen,a=n.magnetAmount,s=void 0===a?0:a,r=n.magnetPercent,o=void 0===r?0:r,c=n.magnetScore,h=void 0===c?0:c,l=n.jsonAmount,u=n.listDataDice;u&&(this.footer.nextDice.listDataDice=u),i?this.main.board.exploreFen(i):(this.loadBoardByMap(),this.loadPiecesByMap()),this.footer.itemMagnet.updateAmountUsed(s),this.footer.itemMagnet.updateTotalScore(h),this.footer.itemMagnet.itemPercent.updatePercent(o),l&&0!==ie()(l).length&&this.header.collectItems.updateJsonAmountByFen(l)},n.handleCheckFenAmountJsonComplete=function(){var e=this;this.header.collectItems.checkCompleteMission()&&this.time.delayedCall(3e3,(function(){e.handleCollectionItemsComplete()}))},n.loadBoardByMap=function(){for(var e=this.mapManager.getTileMap().layers,t=e.length,n="",i=0;i<t;i++)for(var a=e[i].data,s=0;s<a.length;s++){for(var r=a[s],o=0;o<r.length;o++){var c=r[o],h=c.index;c.index<0&&(h="x"),n+=h+"-"}console.log("fen111 ==== ",n),n=et()(n).call(n,0,-1)+","}console.log("fen ==== ",n),this.main.board.exploreFen(et()(n).call(n,0,-1))},n.loadPiecesByMap=function(){var e,t=[],n=this.mapManager.getTileMap().getObjectLayer("spawnOrder");if(n){for(var i=n.objects,a=0;a<i.length;a++){var s=i[a].type;t[a]=s}this.footer.nextDice.listDataDice=S()(e=[]).call(e,t)}},n.startGame=function(){this.audio.playSound(ah.Z.START_GAME),this.enableInput(),this.loadTargetByMap(),this.header.enableItems(),this.header.setVisible(!0),this.header.start(),this.footer.enableItems(),this.handleLoadFen(),this.handleCheckFenAmountJsonComplete(),this.openCollectionItemsScreen()},n.loadTargetByMap=function(){var e=this.mapManager.getTileMap().properties;if(!e||!(0,rg.isArray)(e)||e.length<2)throw new Cy;var t=e[0].value,n=e[1].value;this.targetMissionManager.setTargetValue(t),this.targetMissionManager.setTargetType(n)},n.openCollectionItemsScreen=function(){var e=this,t=this.header.collectItems.getJsonTarget();this.header.collectItems.hideListCollectItems(),this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(Ba.o4.COLLECTION_ITEMS_SCREEN,{jsonTarget:t,duration:1500})}))},n.startGameAfterCollectionItemsScreenClose=function(){if(this.footer.nextDice.listDataDice)return this.footer.nextDice.handleNextDice(this.footer.nextDice.listDataDice[0]),this.footer.pieces.hideDice(),this.footer.pieces.showDice(),void this.footer.nextDice.handleNextDice(this.footer.nextDice.listDataDice[1]);this.footer.nextDice.handleNextDice(),this.footer.pieces.hideDice(),this.footer.pieces.showDice(),this.footer.nextDice.handleNextDice()},n.getFen=function(){for(var e="",t=this.main.board.dataBoard,n=0;n<t.length;n++){for(var i=t[n],a="",s=0;s<i.length;s++){var r=i[s].value;a+=r?r+"-":"x-"}e+=(e?",":"")+et()(a).call(a,0,-1)}return e},n.preloadNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)||(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.clearFen=function(){var e=this.storage.getState(),t=sr(e),n=ar(e).data||{},i=cr(e).score,a=void 0===i?0:i,s=this.levelManager.getLevel();this.storage.dispatch(bo(t,{score:a,data:(0,r.Z)({},n,{fen:"",jsonAmount:{},magnetPercent:0,magnetAmount:0,magnetScore:0}),level:s,updateAt:Date.now()}))},n.updateMatchData=function(){var e,t,n;if(!this.isGameOver){var i=this.getFen();console.log("FENnnnnnnnnnn === ",i);var a=this.storage.getState(),s=ar(a).data||{},o=sr(a);if(fs(a)===ua){var c=cr(a).score,h=void 0===c?0:c,l=this.footer.itemMagnet.itemPercent.percent,u=this.footer.itemMagnet.amountUsed,d=this.footer.itemMagnet.totalScore,p=this.header.collectItems.getJsonAmount();this.footer.nextDice.listDataDice=S()(e=[]).call(e,et()(t=this.footer.nextDice.listDataDice).call(t,1));var m=S()(n=[]).call(n,this.footer.nextDice.listDataDice),f=this.levelManager.getLevel();this.storage.dispatch(bo(o,{score:h,data:(0,r.Z)({},s,{fen:i,magnetPercent:l,magnetAmount:u,magnetScore:d,jsonAmount:(0,r.Z)({},p),listDataDice:m}),level:f,updateAt:Date.now()}))}}},n.setLevelCompleted=function(e){this.isLevelComplete=e},n.getLevelName=function(){var e,t=this.levelManager.getLevel();return"journey_"+Kh()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.handleCollectionItemsComplete=function(){var e=this;if(this.header.collectItems.checkCompleteMission()){var t=this.levelManager.getLevel();this.analytics.levelComplete(t,void 0,this.getLevelName()),this.handleNextLevel(),t>Fa.length-1&&this.time.delayedCall(2e3,(function(){e.game.globalScene.screen.open(Ba.o4.NOTIFY_SCREEN,{message:"You reached the level limit!",duration:2e3}),e.time.delayedCall(1e3,(function(){e.scene.switch(Sa.C.DASHBOARD_SCENE)}))})),this.screen.open(Ba.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowMidRollAd().catch(a.tO);case 3:e.screen.open(Ba.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.handleNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(!e)return this.clearFen(),this.restartGame(),void this.startGame();var t=e.key;this.cache.tilemap.exists(t)?this.handleLoadMapComplete():(this.preloadNextLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))},n.updateLevelLocalStorage=function(){var e=this.levelManager.getLevel()||1,t=this.player.getPlayerId();(0,ga.vk)(jy.JourneyMatchStore+"-"+t,{level:e})},n.handleLoadMapComplete=function(){this.levelManager.increaseLevel();var e=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:e}),e>Fa.length-1||((0,ga.vk)(jy.JourneyMatchStore+"-"+this.player.getPlayerId(),{level:this.levelManager.getLevel()}),this.mapManager.reloadMap(),this.clearFen())},n.endGame=function(){this.restartGame(),this.storage.dispatch(Go())},n.handleRequestFinishGame=function(){this.isGameOver=!0,this.analytics.levelFail(this.levelManager.getLevel(),void 0,this.getLevelName()),this.handleShowMidRollAd().catch(a.tO),this.screen.open(Ba.o4.MISSION_FAIL_SCREEN)},n.getLevelLogInfo=function(){return{level:this.levelManager.getLevel(),levelName:this.getLevelName()}},t}(Ho.Z),Qy=qy;null==(Bv=void 0)||Bv.accept(GameCore.LiveUpdate.Scene(Sa.C.JOURNEY_SCENE));var $y=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,S()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),eS=$y,tS=n(1998),nS=["Enable"],iS=function(e){function t(t){return e.call(this,t)||this}(0,c.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.handleShowInterAdWhenStartGame();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.updateFps=function(e){void 0===e&&(e=60),this.getFps()!==e&&this.setFps(e)},i.getFps=function(){return this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf?this.scene.game.loop.raf.fps:5},i.setFps=function(e){this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf&&"function"===typeof this.scene.game.loop.raf.updateFps&&this.scene.game.loop.raf.updateFps(e)},i.addExtraGameObjectMethods=function(){var e=new v(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new u.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new f(this)},i.addPlugins=function(){this.plugins.install("Storage",Fi,!0,"storage"),this.plugins.install("Rollbar",Vt,!0,"rollbar"),this.plugins.install("AdsManager",L,!0,"ads"),this.plugins.install("AuthManager",te,!0,"auth"),this.plugins.install("AudioManager",H,!0,"audio"),this.plugins.install("WorldManager",zi,!0,"world"),this.plugins.install("PlayerManager",bt,!0,"player"),this.plugins.install("LanguageManager",Ca,!0,"lang"),this.plugins.install("ProfileManager",Dt,!0,"profile"),this.plugins.install("AnalyticsManager",Z,!0,"analytics"),this.plugins.install("AdaptivePerformance",fe,!0,"performance"),this.plugins.install("VisibilityChangeHandler",eS,!0,"visibility"),this.plugins.installScenePlugin("textStyler",Hi,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Jt,"screen"),this.plugins.installScenePlugin("FrameCapture",ce,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,o.Z)(l().mark((function e(){var t,i,a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(716)]).then(n.bind(n,15716));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(868),n.e(227)]).then(n.bind(n,19227));case 7:return i=e.sent.default,e.next=10,n.e(315).then(n.bind(n,79315));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(883)]).then(n.bind(n,59883));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(516)]).then(n.bind(n,76516));case 16:r=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Sa.C.BOOT_SCENE,Ra,!0),this.scene.add(Sa.C.LOAD_SCENE,ig,!1),this.scene.add(Sa.C.GAME_SCENE,Pm,!1),this.scene.add(Sa.C.DASHBOARD_SCENE,Hh,!1),this.scene.add(Sa.C.JOURNEY_SCENE,Qy,!1),this.scene.add(Sa.C.GLOBAL_SCENE,xm.Z,!1)},i.addDevScenes=function(){var e=(0,o.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(817).then(n.bind(n,3817));case 4:return t=e.sent.default,e.next=7,n.e(271).then(n.bind(n,93271));case 7:i=e.sent.default,this.scene.add(Sa.C.TEST_SCENE,t,!1),this.scene.add(Sa.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,o.Z)(l().mark((function e(){var t,i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,tS.Z.setGame(this),i=tS.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(658).then(n.bind(n,17658));case 6:a=e.sent.default,i=a;case 8:(s=(0,r.Z)({},t.InterstitialAdOptions)).showWhenStartGame&&(s.secondsFirstTime=0),this.ads.configure(i,(0,r.Z)({},t,{InterstitialAdOptions:s}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,h=e.DisableLandscape,l=e.FullSizeOnLandscape,u=n,d=i,p=a,m=s,f=r,g=o;console.info("\ud83d\ude80 > portraitRatio",u),console.info("\ud83d\ude80 > landscapeRatio",m),this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:m,landscapeWidth:f,landscapeHeight:g,disableLandscape:h,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new ya(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,s.Z)(e,nS);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.unmuteAll()})),this.visibility.addEventHidden((function(){e.audio.muteAll()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},i.handleShowInterAdWhenStartGame=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.audio.stopMusic(),this.audio.muteAll(),e.next=8,this.ads.preloadPreRollAdAsync();case 8:return e.next=10,this.ads.showPreRollAdAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),(0,a.tO)(e.t0);case 15:return e.prev=15,this.audio.unmuteAll(),this.audio.playMusic(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[3,12,15,19]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Game),aS=iS,sS=GameCore.Configs.Debugger.ShowInspector,rS={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros",baseURL:"./resource/v1/"},audio:{},input:{gamepad:!1,keyboard:sS,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,clearBeforeRender:!1,roundPixels:!1,mipmapFilter:"LINER"},plugins:{global:[]}};(0,a.j6)();var oS=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(oS),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new aS(rS);window.game=e}catch(t){(0,a.tO)(t)}}())}),50)},71944:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},46352:function(e,t,n){"use strict";var i=n(90143),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},55481:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(98297),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},39482:function(e,t,n){"use strict";n.d(t,{Gm:function(){return r},qZ:function(){return s}});var i=n(6226),a=n.n(i),s=(n(24278),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}},93397:function(e,t,n){"use strict";n.d(t,{R0:function(){return c},Tv:function(){return r},j6:function(){return a},sw:function(){return s},tO:function(){return h}});n(70268),n(47273),n(35627),n(11882);var i=!1,a=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:i}))}),100)},s=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){e&&window.Sentry.withScope((function(n){n.setExtras(t),o(e)}))},h=function(e){e&&o(e)}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],s=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(l--,1);var h=a();void 0!==h&&(t=h)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"7010f6db15d9fea4d9d4",8:"a8aeeb86561c850683e1",227:"4ed79508e72930b5ef6b",271:"e16ec39fb92a4d310455",311:"a35dea9d823d4b95a5d4",315:"86b40234656a0e7b2e40",357:"510f74a32d39d7ebd33e",498:"c64ea26e1daf623970a1",516:"26e1b2ac3ec26935ae43",658:"4f49f4750d26c4aa914a",716:"3e50192976cc8b1af625",817:"32450520a4aed5dde2ab",868:"3d1b9dc152f8dd2735c2",883:"dd8c1495b218c9ba31d3"}[e]+".js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var h=document.getElementsByTagName("script"),l=0;l<h.length;l++){var u=h[l];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);h<r.length;h++)s=r[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(57147)})),n.O(void 0,[216,630,542],(function(){return n(63367)})),n.O(void 0,[216,630,542],(function(){return n(16977)})),n.O(void 0,[216,630,542],(function(){return n(10793)})),n.O(void 0,[216,630,542],(function(){return n(6649)})),n.O(void 0,[216,630,542],(function(){return n(64413)})),n.O(void 0,[216,630,542],(function(){return n(13391)}));var i=n.O(void 0,[216,630,542],(function(){return n(14689)}));i=n.O(i)})();