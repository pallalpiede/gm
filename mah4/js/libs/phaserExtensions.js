FormattedBitmapText=function(t,e,i,s,a,h,r){"use strict";this.formats=[],this.italicsFontName=a,Phaser.BitmapText.call(this,t,e,i,s,h,r)},FormattedBitmapText.prototype=Object.create(Phaser.BitmapText.prototype),FormattedBitmapText.prototype.constructor=FormattedBitmapText,FormattedBitmapText.NORMAL=1,FormattedBitmapText.ITALIC=2,FormattedBitmapText.prototype.changeFontFormatAt=function(t,e){"use strict";this.formats[t]=e},FormattedBitmapText.prototype.updateText=function(){"use strict";for(var t,e,i,s=PIXI.BitmapText.fonts[this.fontName],a=PIXI.BitmapText.fonts[this.italicsFontName],h=new PIXI.Point,r=new PIXI.Point,o=null,n=[],l=0,c=[],p=0,x=this.fontSize/s.size,m=this.fontSize/a.size,u=FormattedBitmapText.NORMAL,d=s,v=x,y=0,f=0;f<this.text.length;f++){var g=this.text.charCodeAt(f);switch(g){case 241:g=110;break;case 233:g=101}switch(241===g&&(g=110),void 0!==this.formats[f]&&(u=this.formats[f]),u){case FormattedBitmapText.NORMAL:d=s,v=x,i=this.fontName;break;case FormattedBitmapText.ITALIC:d=a,v=m,i=this.italicsFontName}if(v>y&&(y=v),/(?:\r\n|\r|\n)/.test(this.text.charAt(f)))c.push(r.x),l=Math.max(l,r.x),p++,e=s.lineHeight>a.lineHeight?s.lineHeight:a.lineHeight,h.x=0,h.y+=e,r.x=0,r.y+=Math.max(s.lineHeight*x,a.lineHeight*m),y=0,o=null,t=null;else{var T=d.chars[g];T&&(o&&t.kerning[o]&&(h.x+=t.kerning[o],r.x+=t.kerning[o]*v),n.push({texture:T.texture,line:p,charCode:g,position:new PIXI.Point(h.x+T.xOffset,h.y+T.yOffset),adjustedPos:new PIXI.Point(r.x+T.xOffset*v,r.y+T.yOffset*v),scale:v,fontName:i}),h.x+=T.xAdvance,r.x+=T.xAdvance*v,o=g,t=T)}}c.push(r.x),l=Math.max(l,r.x);var C=[];for(f=0;p>=f;f++){var P=0;"right"===this.style.align?P=l-c[f]:"center"===this.style.align&&(P=(l-c[f])/2),C.push(P)}var b=this.children.length,R=n.length,B=this.tint||16777215;for(f=0;R>f;f++){var w=b>f?this.children[f]:this._pool.pop();w?w.setTexture(n[f].texture):w=new PIXI.Sprite(n[f].texture),w.position.x=n[f].adjustedPos.x+C[n[f].line],w.position.y=n[f].adjustedPos.y,w.scale.x=w.scale.y=n[f].scale,w.tint=B,w.parent||this.addChild(w),w.fontName=n[f].fontName}for(;this.children.length>R;){var F=this.getChildAt(this.children.length-1);this._pool.push(F),this.removeChild(F)}this.textWidth=l,this.textHeight=r.y+e*y},FormattedBitmapText.prototype.resetFormatting=function(){"use strict";this.formats=[]};var RevealingText=function(t,e,i,s,a,h,r){"use strict";FormattedBitmapText.call(this,t,e,i,s,a,h,r),this.RevealComplete=new Phaser.Signal,this.previousTime=0,this.numCharsRevealed=-1,this.timeUntilRevealNextChar=-1,this.timeBetweenRevealCharsFast=0,this.timeBetweenRevealCharsRegular=26};RevealingText.prototype=Object.create(FormattedBitmapText.prototype),RevealingText.prototype.constructor=RevealingText,RevealingText.prototype.updateText=function(){"use strict";FormattedBitmapText.prototype.updateText.call(this),this.realWidth=this.realWidth||this.width,this.realHeight=this.realHeight||this.height},RevealingText.prototype.update=function(){"use strict";var t=!1;if(this.timeUntilRevealNextChar>=0){var e=this.game.time.now-this.previousTime;this.timeUntilRevealNextChar-=e,this.timeUntilRevealNextChar<=0&&(this.numCharsRevealed++,this.numCharsRevealed<this.text.length?this.timeUntilRevealNextChar=t?this.timeBetweenRevealCharsFast:this.timeBetweenRevealCharsRegular:(this.timeUntilRevealNextChar=-1,this.RevealComplete.dispatch())),this.previousTime=this.game.time.now}for(var i=0;i<this.numCharsRevealed&&!(i>=this.children.length);i++){this.children[i].visible||(this.children[i].visible=!0,this.children[i].alpha=0);{var s=PIXI.BitmapText.fonts[this.children[i].fontName];this.fontSize/s.size}this.children[i].alpha+=(this.alpha-this.children[i].alpha)/6}},RevealingText.prototype.hideAndReveal=function(){"use strict";this.numCharsRevealed=0,this.timeUntilRevealNextChar=this.timeBetweenRevealCharsRegular,this.previousTime=this.game.time.now,this.realWidth=this.width,this.realHeight=this.height;for(var t=this.children.length,e=0;t>e;e++)this.children[e].visible=!1},RevealingText.prototype.revealAllTextImmediately=function(){"use strict";this.numCharsRevealed=this.text.length};var LabelButton=function(t,e,i,s,a,h,r,o,n,l,c){"use strict";Phaser.Button.call(this,t,e,i,s,a,h,r,o,n,l),this.textOffset=void 0===c||null===c?new Phaser.Point(0,0):c,this.style={font:"10px Arial",fill:"black"},this.anchor.setTo(.5,.5),this.label=new Phaser.Text(t,0,0,"",this.style),this.label.x=this.textOffset.x,this.label.y=this.textOffset.y,this.label.anchor.setTo(.5,.5),this.addChild(this.label),this.setLabel("",this.style)};LabelButton.prototype=Object.create(Phaser.Button.prototype),LabelButton.prototype.constructor=LabelButton,LabelButton.prototype.setStyle=function(t){"use strict";this.label.setStyle(t)},LabelButton.prototype.setLabel=function(t){"use strict";this.label.setText(t)},Phaser.Color.getColorFromHex=function(t){"use strict";var e=Phaser.Color.getRGB(t);return Phaser.Color.RGBtoHSV(e.r,e.g,e.b)},Phaser.Color.HSVColorToHex=function(t){"use strict";return t=Phaser.Color.HSVtoRGB(t.h,t.s,t.v),t=Phaser.Color.getColor(t.r,t.g,t.b)},Phaser.Point.distanceSquared=function(t,e){"use strict";var i=t.x-e.x,s=t.y-e.y,a=t.z-e.z;return i*i+s*s+a*a},Phaser.Point.prototype.multiplyByScalar=function(t){"use strict";return this.x*t+this.y*t},SkewSprite=function(t,e,i,s,a){"use strict";Phaser.Sprite.call(this,t,e,i,s,a),this.skew=new Phaser.Point(0,0)},SkewSprite.prototype=Object.create(Phaser.Sprite.prototype),SkewSprite.prototype.constructor=SkewSprite,SkewSprite.prototype.updateTransform=function(){var t,e,i,s,a,h,r=this.parent.worldTransform,o=this.worldTransform,n=Math.tan(this.skew.x),l=Math.tan(this.skew.y);this.rotation%PIXI.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x*(1+n*l)-this._sr*this.scale.x*n,e=this._sr*this.scale.x*(1+n*l)+this._cr*this.scale.x*n,i=-this._sr*this.scale.y+this._cr*this.scale.y*l,s=this._cr*this.scale.y+this._sr*this.scale.y*l,a=this.position.x,h=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*t+this.pivot.y*i,h-=this.pivot.x*e+this.pivot.y*s),o.a=t*r.a+e*r.c,o.b=t*r.b+e*r.d,o.c=i*r.a+s*r.c,o.d=i*r.b+s*r.d,o.tx=a*r.a+h*r.c+r.tx,o.ty=a*r.b+h*r.d+r.ty):(t=this.scale.x*(1+n*l),e=this.scale.x*n,i=this.scale.y*l,s=this.scale.y,a=this.position.x-this.pivot.x*t,h=this.position.y-this.pivot.y*s,o.a=t*r.a+e*r.c,o.b=t*r.b+e*r.d,o.c=i*r.a+s*r.c,o.d=i*r.b+s*r.d,o.tx=a*r.a+h*r.c+r.tx,o.ty=a*r.b+h*r.d+r.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,o,r)};