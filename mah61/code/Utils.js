CTweens=function(){this.tweensVault=[],this.tweensRun=[],this.tweensRunNum=0},CTweens.prototype.create=function(){this.tweensRunNum=0},CTweens.prototype.clear=function(){this.tweensRunNum=0},CTweens.prototype._getFreeTween=function(){for(var t=0;t<this.tweensVault.length;t++)if(!this.tweensVault[t].ActiveFlag)return this.tweensVault[t];var e=new CTween;return this.tweensVault.push(e),e},CTweens.prototype.addTween=function(t,e,n){var i=null;if(null!=t)for(var a=0;a<this.tweensRunNum;a++)if(this.tweensRun[a].tween==t)return this.tweensRun[a].ActiveFlag=!0,this.tweensRun[a].funcUpd=e,this.tweensRun[a].funcUpdContex=n,this.tweensRun[a].tween;for(a=0;a<this.tweensRunNum;a++)if(!this.tweensRun[a].tween.ActiveFlag){i=this.tweensRun[a];break}return null==i&&(null==this.tweensRun[this.tweensRunNum]&&(this.tweensRun[this.tweensRunNum]={tween:null},this.tweensRun[this.tweensRunNum].tween=new CTween),i=this.tweensRun[this.tweensRunNum],this.tweensRunNum++),i.funcUpd=e,i.funcUpdContex=n,i.ActiveFlag=!0,i.tween},CTweens.prototype.update=function(){for(var t=0,e=0;e<this.tweensRunNum;e++)this.tweensRun[e].tween.ActiveFlag&&(t=e+1,this.tweensRun[e].tween.update(),null!=this.tweensRun[e].funcUpd&&this.tweensRun[e].funcUpd.call(this.tweensRun[e].funcUpdContex));this.tweensRunNum=t},CTween=function(){this._valuesStart={},this._valuesEnd=null,this.CompleteCallback=null,this.CompleteCallbackContex=null,this.RunFlag=!1,this.ActiveFlag=!1},CTween.prototype.clear=function(){this.DelayFlag=!1,this.RunFlag=!1,this.PauseFlag=!1,this.UpdateCallback=null,this.CompleteCallback=null,this.CompleteParams=null},CTween.prototype.createLinear=function(t){this.clear(),this._object=t,this._easingFunction=this.Linear,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createQuadraticOut=function(t){this.clear(),this._object=t,this._easingFunction=this.QuadraticOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createQuanticOut=function(t){this.clear(),this._object=t,this._easingFunction=this.P2QuanticOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createEasingOut=function(t){this.clear(),this._object=t,this._easingFunction=this.P2EasingOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createP3EasingIn=function(t){this.clear(),this._object=t,this._easingFunction=this.P3EasingIn,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createP3EasingOut=function(t){this.clear(),this._object=t,this._easingFunction=this.P3EasingOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createEasingIn=function(t){this.clear(),this._object=t,this._easingFunction=this.P2EasingIn,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createEasingInOut=function(t){this.clear(),this._object=t,this._easingFunction=this.P2EasingInOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.createP3EasingInOut=function(t){this.clear(),this._object=t,this._easingFunction=this.P3EasingInOut,this._interpolationFunction=this.InterpolateLinearArray,this.ActiveFlag=!0},CTween.prototype.to=function(t,e,n,i,a){this.clear(),this._valuesEnd=t,this.CompleteCallback=i,this.CompleteCallbackContex=a,this.Duration=e,n&&this.start()},CTween.prototype.setOnUpdate=function(t,e){this.UpdateCallback=t,this.UpdateCallbackContex=e},CTween.prototype.start=function(t){if(null!=t&&t>0)return this.DelayFlag=!0,this.DelayCntr=t,!1;for(var e in this.TimeCntr=0,this._valuesEnd)void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e]);return this.RunFlag=!0,!0},CTween.prototype.setP2EasingIn=function(t){this._easingFunction=this.P2EasingIn},CTween.prototype.setP2EasingOut=function(t){this._easingFunction=this.P2EasingOut},CTween.prototype.P2EasingIn=function(t){return t*t},CTween.prototype.P2EasingOut=function(t){return t*(2-t)},CTween.prototype.P2EasingInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CTween.prototype.P2QuanticOut=function(t){return--t*t*t*t*t+1},CTween.prototype.QuadraticIn=function(t){return t*t},CTween.prototype.Linear=function(t){return t},CTween.prototype.P2EasingIn=function(t){return t*t},CTween.prototype.P3EasingIn=function(t){return t*t*t},CTween.prototype.P3EasingOut=function(t){return--t*t*t+1},CTween.prototype.P3EasingInOut=function(t){return(t*=2)<1?.5*t*t*t*t:.5*((t-=2)*t*t*t+2)},CTween.prototype.P4EasingInOut=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},CTween.prototype.InterpolateLinear=function(t,e,n){return(e-t)*n+t},CTween.prototype.InterpolateLinearArray=function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),s=this.InterpolateLinear;return e<0?s(t[0],t[1],i):e>1?s(t[n],t[n-1],n-i):s(t[a],t[a+1>n?n:a+1],i-a)},CTween.prototype.Kill=function(){this.RunFlag=!1,this.DelayFlag=!1,this.ActiveFlag=!1},CTween.prototype.update=function(){if(this.RunFlag){this.TimeCntr+=Base.RealTimeInt,this.TimeCntr>=this.Duration&&(this.TimeCntr=this.Duration,this.RunFlag=!1);var t=this.TimeCntr/this.Duration;t=t>1?1:t;var e=this._easingFunction(t);for(var n in this._valuesEnd){var i=this._valuesStart[n]||0,a=this._valuesEnd[n];a instanceof Array?this._object[n]=this._interpolationFunction(a,e):"number"==typeof a&&(this._object[n]=i+(a-i)*e)}if(!this.RunFlag)return this.Kill(),void(null!=this.CompleteCallback&&this.CompleteCallback.call(this.CompleteCallbackContex,this.CompleteParams))}else this.DelayFlag&&(this.DelayCntr-=Base.RealTimeInt,this.DelayCntr<0&&(this.DelayFlag=!1,this.start(0)))},CThreadManager=function(t){this.Papa=t,this.Cache=[],this.Threads=[],this.ThreadsNum=0,this.LastThread=0},CThreadManager.prototype.create=function(){for(var t=0;t<this.Threads.length;t++)this.Threads[t].Thread=null;this.ThreadsNum=0},CThreadManager.prototype.getFreeCachedThread=function(t){for(var e=0;e<this.Cache.length;e++)if(this.Cache[e]instanceof t&&this.IsThreadFree(this.Cache[e]))return this.Cache[e];return null},CThreadManager.prototype.kill=function(){for(var t=0;t<this.Threads.length;t++)this.Threads[t].Thread=null;this.ThreadsNum=0},CThreadManager.prototype.IsThreadFree=function(t,e){for(var n=0;n<this.ThreadsNum;n++)if(this.Threads[n].Thread===t)return!1;return!0},CThreadManager.prototype.getCachedThread=function(t){for(var e=0;e<this.Cache.length;e++)if(this.Cache[e]instanceof t)return this.Cache[e];return null},CThreadManager.prototype.saveThread=function(t){for(var e=0;e<this.Cache.length;e++)if(this.Cache[e]===t)return;this.Cache.push(t)},CThreadManager.prototype.addThread=function(t,e){for(var n=0;n<this.ThreadsNum;n++)if(this.Threads[n].Thread===t&&this.Threads[n].Func===e)return n;for(n=0;n<this.ThreadsNum;n++)if(null==this.Threads[n].Thread)return this.Threads[n].Thread=t,this.Threads[n].Func=e,n;for(n=0;n<this.Threads.length;n++)if(null==this.Threads[n].Thread)return this.Threads[n].Thread=t,this.Threads[n].Func=e,this.ThreadsNum=n+1,n;var i={};return i.Thread=t,i.Func=e,this.Threads.push(i),this.ThreadsNum=this.Threads.length,this.ThreadsNum-1},CThreadManager.prototype.removeThreadsByType=function(t){for(var e=0;e<this.Threads.length;e++)this.Threads[e].Thread instanceof t&&(this.Threads[e].Thread=null)},CThreadManager.prototype.removeThread=function(t,e){for(var n=0;n<this.Threads.length;n++)if(this.Threads[n].Thread===t)if(e){if(this.Threads[n].Func===e)return this.Threads[n].Thread=null,!0}else this.Threads[n].Thread=null;return!1},CThreadManager.prototype.update=function(){this.LastThread=0;for(var t=0;t<this.ThreadsNum;t++)null!=this.Threads[t].Thread&&(this.Threads[t].Func.call(this.Threads[t].Thread),this.LastThread=t+1);this.ThreadsNum=this.LastThread},CDelayCall=function(t){this.Papa=t,this.dT=1/Base.UPS,this.DelayCntr=0,this.DealyCall=null,this.Arguments=null,this.RunFlag=!1,this.PapaCall=null,this.KillFlag=!1,this.ActiveFlag=!1},CDelayCall.prototype.Create=function(t,e,n,i,a,s,r){this.DelayCntr=t,this.DealyCall=e,this.Arguments=n,this.Threads=r,this.PapaCall=s||this.Papa,this.KillFlag=a,this.RunFlag=i,this.Threads.addThread(this,this.update),this.ActiveFlag=!0},CDelayCall.prototype.kill=function(){this.ActiveFlag&&(this.Threads.removeThread(this),this.ActiveFlag=!1)},CDelayCall.prototype.update=function(){this.RunFlag&&(this.DelayCntr-=Base.RealTimeInt,this.DelayCntr<0&&(this.RunFlag=!1,this.KillFlag&&this.kill(),null!=this.DealyCall&&this.DealyCall.apply(this.PapaCall,this.Arguments)))};