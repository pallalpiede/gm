CPanel=function(t,s,e){this.Papa=t,this.Threads=s,this.Group=e,this.ActiveFlag=!1,this.Buttons=[],this.Imgs=[],this.Texts=[],this.TextVecs=[],this.Xc=0,this.Yc=0,this.ImgsNum=0,this.TextsNum=0,this.TextVecsNum=0,this.ButtonsNum=0,this.ShiftX=0,this.ShiftY=0,this.Alpha=1,this.Scale=1},CPanel.prototype.OnResize=function(){},CPanel.prototype.updateImg=function(t){t.img.x=this.Xc+t.x+this.ShiftX,t.img.y=this.Yc+t.y+this.ShiftY,t.img.alpha=this.Alpha*t.alphaCoeff,t.img.scale.set(this.Scale*t.scaleCoeff)},CPanel.prototype.updateButton=function(t){t.butt.x=this.Xc+t.x+this.ShiftX,t.butt.y=this.Yc+t.y+this.ShiftY,t.butt.alpha=this.Alpha,t.butt.scale.set(this.Scale*t.scaleCoeff)},CPanel.prototype.updateText=function(t){t.text.x=this.Xc+t.x+this.ShiftX,t.text.y=this.Yc+t.y+this.ShiftY,t.text.alpha=this.Alpha,t.text.scale.set(this.Scale*t.scaleCoeff)},CPanel.prototype.updateTextVec=function(t){t.text.x=this.Xc+t.x+this.ShiftX,t.text.y=this.Yc+t.y+this.ShiftY,t.text.alpha=this.Alpha,t.text.scale.set(this.Scale*t.scaleCoeff)},CPanel.prototype.updateElements=function(){for(var t=0;t<this.ImgsNum;t++)null!=this.Imgs[t].img&&this.updateImg(this.Imgs[t]);for(t=0;t<this.ButtonsNum;t++)null!=this.Buttons[t].butt&&this.updateButton(this.Buttons[t]);for(t=0;t<this.TextsNum;t++)null!=this.Texts[t].text&&this.updateText(this.Texts[t]);for(t=0;t<this.TextVecsNum;t++)null!=this.TextVecs[t].text&&this.updateText(this.TextVecs[t])},CPanel.prototype.addImg=function(t,s,e,i,a){null==this.Imgs[this.ImgsNum]&&(this.Imgs[this.ImgsNum]={x:0,y:0,img:null});var h=this.Imgs[this.ImgsNum];return this.ImgsNum++,h.img=this.Papa.getZeroImg(this.Xc+t+this.ShiftX,this.Yc+s+this.ShiftY,e,i,this.Group,a),h.x=t,h.y=s,h.scaleCoeff=1,h.scalingFlag=!1,h.alphaCoeff=1,h.img.anchor.set(.5),h.img.Order=a,h},CPanel.prototype.addBitmapText=function(t,s,e,i,a,h){null==this.Texts[this.TextsNum]&&(this.Texts[this.TextsNum]={x:0,y:0,text:null});var o=this.Texts[this.TextsNum];return this.TextsNum++,o.text=this.Papa.getBitmapText(this.Xc+t+this.ShiftX,this.Yc+s+this.ShiftY,e,i,a,this.Group),o.x=t,o.y=s,o.scaleCoeff=1,o.text.Order=h,o},CPanel.prototype.addText=function(t,s,e,i,a){null==this.TextVecs[this.TextVecsNum]&&(this.TextVecs[this.TextVecsNum]={x:0,y:0,obj:null});var h=this.TextVecs[this.TextVecsNum];return this.TextVecsNum++,i.add(e),h.text=e,h.x=t,h.y=s,h.scaleCoeff=1,h.text.Order=a,h},CPanel.prototype.addButton=function(t,s,e,i,a,h,o){null==this.Buttons[this.ButtonsNum]&&(this.Buttons[this.ButtonsNum]={x:0,y:0,butt:null});var n=this.Buttons[this.ButtonsNum];return this.ButtonsNum++,n.butt=this.Papa.getButton(this.Xc+t+this.ShiftX,this.Yc+s+this.ShiftY,e,i,a,h,this.Group),n.butt.anchor.set(.5),n.x=t,n.y=s,n.scaleCoeff=1,n.butt.Order=o,n},CDownPanel=function(t,s,e){CPanel.call(this,t,s,e),this.Pads=[],this.MaxTextSpan=190,this.ShiftMax=-102,this.MoveTween=null,this.BoosterTween=null,this.MovingFlag=!1},CDownPanel.prototype=Object.create(CPanel.prototype),CDownPanel.prototype.constructor=CDownPanel,CDownPanel.prototype.create=function(){this.Xc=Base.Width/2,this.Yc=Base.Yc+Base.HeightGame/2-this.ShiftMax,this.Y_top=Base.Yc+Base.HeightGame/2,this.BgImg=this.addImg(0,0,"atlas","mainBottomPanel.png",0),this.BgImg.img.anchor.set(.5,1),this.Height=this.BgImg.img.height,this.BoosterScale=1,this.BoosterRx=37.5,this.BoosterRy=45,this.BoosterImg=this.addImg(265,-140,"atlas","boosterIcon.png",0),this.BoosterImg.img.anchor.set(.5,.95),this.BoosterImg.img.visible=!0,this.BoosterFlag=!0,this.BoosterScalingFlag=!1,this.SelPadIndex=-1;var t=this.BgImg.img.width/3;this.Pads[0]={x:0,y:0,rx:0,ry:0,sx:-t,sy:-65,w:210,h:130,label:null,top:null,waitTime:2},this.Pads[1]={x:0,y:0,rx:0,ry:0,sx:0,sy:-65,w:210,h:130,label:null,top:null,waitTime:2},this.Pads[2]={x:0,y:0,rx:0,ry:0,sx:t,sy:-65,w:210,h:130,label:null,top:null,waitTime:4},this.addImg(-t,-70,"atlas","changeIcon.png",0),this.addImg(-t-25,-112,"atlas","coinIcon.png",0);var s=this.Papa.game.add.text(0,0,sgLang.change[Base.Lang],{font:"20px FontVector",fill:"#FFFFFF",align:"center"});this.Pads[0].label=this.addText(-t,-5,s,this.Group,1),this.Pads[0].label.text.anchor.set(.5,1),s=this.Papa.game.add.text(0,0,"x20",{font:"22px FontVector",fill:"#FFFFFF",align:"center"}),this.Pads[0].top=this.addText(-t-10,-112,s,this.Group,1),this.Pads[0].top.text.anchor.set(0,.5),this.addImg(0,-73,"atlas","bombIcon.png",0),this.addImg(-25,-112,"atlas","coinIcon.png",0),s=this.Papa.game.add.text(0,0,sgLang.clear[Base.Lang],{font:"20px FontVector",fill:"#FFFFFF",align:"center"}),this.Pads[1].label=this.addText(0,-5,s,this.Group,1),this.Pads[1].label.text.anchor.set(.5,1),s=this.Papa.game.add.text(0,0,"x25",{font:"22px FontVector",fill:"#FFFFFF",align:"center"}),this.Pads[1].top=this.addText(-10,-112,s,this.Group,1),this.Pads[1].top.text.anchor.set(0,.5),this.addImg(t,-64,"atlas","freezeIcon.png",0),this.addImg(t-25,-112,"atlas","coinIcon.png",0),s=this.Papa.game.add.text(0,0,sgLang.freeze[Base.Lang],{font:"20px FontVector",fill:"#FFFFFF",align:"center"}),this.Pads[2].label=this.addText(t,-5,s,this.Group,1),this.Pads[2].label.text.anchor.set(.5,1),s=this.Papa.game.add.text(0,0,"x30",{font:"22px FontVector",fill:"#FFFFFF",align:"center"}),this.Pads[2].top=this.addText(t-10,-112,s,this.Group,1),this.Pads[2].top.text.anchor.set(0,.5),this.Reds=[null,null,null];for(var e=0;e<this.Pads.length;e++)this.Pads[e].x=this.Xc+this.Pads[e].sx,this.Pads[e].y=this.Yc+this.Pads[e].sy,this.Pads[e].rx=this.Pads[e].w/2,this.Pads[e].ry=this.Pads[e].h/2,this.Pads[e].label.text.width>this.MaxTextSpan&&(this.Pads[e].label.scaleCoeff=this.MaxTextSpan/this.Pads[e].label.text.width,this.updateText(this.Pads[e].label));this.updateReds(),this.BoosterScalingFlag=!1,this.SelPadIndex=-1,this.ClickAllowFlag=!0,this.WaitFlag=!1,this.MovingFlag=!1,this.State=0,this.ActiveFlag=!0},CDownPanel.prototype.Revive=function(){this.Xc=Base.Width/2,this.Yc=Base.Yc+Base.HeightGame/2-this.ShiftMax,this.Y_top=Base.Yc+Base.HeightGame/2,this.ShiftX=0,this.ShiftY=0,this.updateElements(),this.BoosterScalingFlag=!1,this.BoosterScale=1,this.BoosterImg.scaleCoeff=this.BoosterScale,this.BoosterImg.img.scale.set(this.Scale*this.BoosterImg.scaleCoeff),this.BoosterImg.img.alpha=1,this.updateReds(),this.ClickAllowFlag=!0,this.WaitFlag=!1,this.MovingFlag=!1,this.State=0,this.ActiveFlag=!0},CDownPanel.prototype.OnClick=function(t,s){if(!this.MovingFlag&&this.ClickAllowFlag&&!(s<this.Y_top-this.Height))if(0==this.State){var e=this.Xc+this.BoosterImg.x+this.ShiftX,i=this.Yc+this.BoosterImg.y+this.ShiftY-this.BoosterRy;if(t>e-this.BoosterRx&&t<e+this.BoosterRx&&s>i-this.BoosterRy&&s<i+this.BoosterRy){if(Base.Coins<Base.BoostersPrice[0])return void this.Papa.makeNoCoinsText(Base.Width/2,450);this.setMove(0,this.ShiftMax,.5,null),this.scaleBooster(this.BoosterScale,0,.5),this.setWait(4),this.State=1}}else{for(var a=-1,h=0;h<this.Pads.length;h++)if(t>this.Pads[h].x-this.Pads[h].rx&&t<this.Pads[h].x+this.Pads[h].rx){if(Base.BoostersPrice[h]<=Base.Coins){a=h;break}return void(Base.VideoFlag?this.Papa.setCoinsWnd():this.Papa.makeNoCoinsText(this.Pads[h].x,200))}if(a<0)return;this.Papa.MakeBooster(a)&&(this.setWait(.1),this.ClickAllowFlag=!1)}},CDownPanel.prototype.scaleBooster=function(t,s,e){this.BoosterScale=t,this.BoosterImg.scaleCoeff=this.BoosterScale,this.BoosterImg.img.scale.set(this.Scale*this.BoosterImg.scaleCoeff),this.BoosterImg.img.alpha=1,null==this.BoosterTween&&(this.BoosterTween=new CTween),this.BoosterTween.createEasingInOut(this),this.BoosterTween.to({BoosterScale:s},e,!0,this.OnBoosterScaleEnd,this),this.BoosterTween.start(),this.BoosterImg.img.alpha=1,this.BoosterScalingFlag||this.Threads.addThread(this,this.updateBooster),this.BoosterScalingFlag=!0},CDownPanel.prototype.OnBoosterScaleEnd=function(){this.Threads.removeThread(this,this.updateBooster),this.BoosterScale<.1&&(this.BoosterImg.img.alpha=0),this.BoosterScalingFlag=!1},CDownPanel.prototype.updateBooster=function(){this.BoosterTween.update(),this.BoosterImg.scaleCoeff=this.BoosterScale,this.BoosterImg.img.scale.set(this.Scale*this.BoosterImg.scaleCoeff)},CDownPanel.prototype.OnCoinsChange=function(t){this.updateReds()},CDownPanel.prototype.updateReds=function(){for(var t=0;t<3;t++)Base.Coins<Base.BoostersPrice[t]&&(null===this.Reds[t]&&(this.Reds[t]=this.addImg(this.Pads[t].sx,this.Pads[t].sy,"atlas","redOverlay.png",0),this.updateImg(this.Reds[t])),this.Reds[t].img.visible=!0),Base.Coins>=Base.BoostersPrice[t]&&null!==this.Reds[t]&&(this.Reds[t].img.visible=!1)},CDownPanel.prototype.setDown=function(){this.setMove(0,0,.5,this.OnDownComplete),this.State=0,this.offWait()},CDownPanel.prototype.OnDownComplete=function(){this.scaleBooster(this.BoosterScale,1,.5)},CDownPanel.prototype.setWait=function(t){this.WaitFlag?this.WaitTimeCntr+=t:(this.WaitTimeCntr=t,this.Threads.addThread(this,this.updateWait),this.WaitFlag=!0)},CDownPanel.prototype.offWait=function(){this.WaitFlag&&this.Threads.removeThread(this,this.updateWait),this.WaitFlag=!1},CDownPanel.prototype.updateWait=function(){this.WaitTimeCntr-=Base.RealTimeInt,this.WaitTimeCntr<0&&this.setDown()},CDownPanel.prototype.OnActionOver=function(t){this.SelPadIndex=-1,this.ClickAllowFlag=!0},CDownPanel.prototype.OnResize=function(){this.Yc=Base.Yc+Base.HeightGame/2-this.ShiftMax,this.Y_top=Base.Yc+Base.HeightGame/2,this.updateElements()},CDownPanel.prototype.setMove=function(t,s,e,i){this.MoveNormX=t-this.ShiftX,this.MoveNormY=s-this.ShiftY;var a=Math.sqrt(this.MoveNormX*this.MoveNormX+this.MoveNormY*this.MoveNormY);a>0?(this.MoveNormX=this.MoveNormX/a,this.MoveNormY=this.MoveNormY/a):(this.MoveNormX=0,this.MoveNormY=0),this.ShiftXdest=t,this.ShiftYdest=s,this.ShiftX0=this.ShiftX,this.ShiftY0=this.ShiftY,this.MoveDist=0,null==this.MoveTween&&(this.MoveTween=new CTween),this.MovingFlag||this.MoveTween.createEasingInOut(this),this.MoveTween.to({MoveDist:a},e,!0,this.OnMovingEnd,this),this.MoveFunc=i,this.MovingFlag||this.Threads.addThread(this,this.updateMove),this.MovingFlag=!0},CDownPanel.prototype.updateMove=function(){this.ShiftX=this.ShiftX0+this.MoveDist*this.MoveNormX,this.ShiftY=this.ShiftY0+this.MoveDist*this.MoveNormY,this.updateElements(),this.MoveTween.update()},CDownPanel.prototype.OnMovingEnd=function(){this.MovingFlag=!1,this.ShiftX=this.ShiftXdest,this.ShiftY=this.ShiftYdest,this.updateElements(),this.Threads.removeThread(this,this.updateMove),null!=this.MoveFunc&&this.MoveFunc.call(this)},CMainPanel=function(t,s,e){CPanel.call(this,t,s,e),this.ButtPauseFrames=["pauseB.png","pauseB.png","pauseB.png","pauseB.png"],this.ButtCoinsFrames=["plusButton.png","plusButton.png","plusButton.png","plusButton.png"]},CMainPanel.prototype=Object.create(CPanel.prototype),CMainPanel.prototype.constructor=CMainPanel,CMainPanel.prototype.create=function(){this.Xc=Base.Width/2,this.Yc=Base.Yc-Base.HeightGame/2,this.BgImg=this.addImg(0,0,"atlas","mainTopPanel.png",0),this.BgImg.img.anchor.set(.5,0),this.PauseButton=this.addButton(-270,52,"atlas",this.ButtPauseFrames,this.OnPauseButton,this,1),this.addImg(-120,54,"atlas","scoreIcon.png",0),this.addImg(225,54,"atlas","coinPanel.png",0),this.addImg(0,54,"atlas","behindScore.png",0),this.CoinsButtonFlag=!1,Base.VideoFlag&&0!=Base.RewardAdFlag&&(this.CoinsButton=this.addButton(295,52,"atlas",this.ButtCoinsFrames,this.OnCoinsButton,this,1),this.CoinsButtonFlag=!0),this.ScoreText=this.addBitmapText(0,28,"GoldFont",""+Base.Score,85,0),this.CoinsText=this.addBitmapText(240,32,"GoldFont",""+Base.Coins,70,0)},CMainPanel.prototype.setScore=function(t){this.ScoreText.text.setText(""+t)},CMainPanel.prototype.setCoins=function(t){var s=1;t>=2e4&&(s=.75),t>=2e5&&(s=.7),t>=2e6&&(s=.65),this.CoinsText.scaleCoeff=s,this.updateText(this.CoinsText),this.CoinsText.text.setText(""+t)},CMainPanel.prototype.PauseOn=function(){this.PauseButton.butt.input.enabled=!1,this.CoinsButtonFlag&&(this.CoinsButton.butt.input.enabled=!1)},CMainPanel.prototype.PauseOff=function(){this.PauseButton.butt.input.enabled=!0,this.CoinsButtonFlag&&(this.CoinsButton.butt.input.enabled=!0)},CMainPanel.prototype.OnCoinsButton=function(){this.Papa.setCoinsWnd()},CMainPanel.prototype.OnPauseButton=function(){this.Papa.setPause()},CMainPanel.prototype.OnResize=function(){};