(function(){var e={371:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,l=0;c<s;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var h=3&a;h--;)r[l]=i.charCodeAt(l++);e(new Blob([r],{type:t||"image/png"}))}})},442:function(e,t,n){"use strict";n.d(t,{J:function(){return m}});var i=n(2),a=n(40),s=n.n(a),r=n(52),o=n.n(r),c=n(3),l=n.n(c),h=n(443),u=n(444),d=n(521),p=GameCore.Configs.Notification,f=p.GameTitle,g=p.GameImage,m=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.tournament.shareAsync(t);case 3:window.game.analytics.event(h._.TOURNAMENT_SHARE,{success:!0}),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),window.game.analytics.event(h._.TOURNAMENT_SHARE,{success:!1}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:window.game.analytics.event(h._.TOURNAMENT_POST_SCORE,{score:!0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),v=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.createTournamentAsync=function(){var e=(0,i.Z)(l().mark((function e(n,i){var a,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game.analytics,s=FBInstant.player.getName()||"Player",r=s+"'s Tournament",e.prev=3,e.next=6,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:r},data:i});case 6:a.event(h._.TOURNAMENT_CREATE,{success:!0}),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),a.event(h._.TOURNAMENT_CREATE,{success:!1}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new u.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,a,s,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,a,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,"ANDROID"!==GameSDK.getPlatform()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut)||!(0,d.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(a=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:a}),s()(t=GameSDK.getSupportedAPIs()).call(t,"canCreateShortcutAsync")){e.next=20;break}return e.abrupt("return",!1);case 20:return e.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!e.sent){e.next=40;break}return r=h._.SHORTCUT_CREATE,o=h._.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=27,e.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return e.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 36:return e.prev=36,e.t1=e.catch(27),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 40:return e.abrupt("return",!1);case 43:return e.prev=43,e.t2=e.catch(2),e.abrupt("return",!1);case 46:case"end":return e.stop()}}),e,this,[[2,43],[27,36]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,a,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,s()(t=GameSDK.getSupportedAPIs()).call(t,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(n=e.t0,!(i=n.lastCallSubscribeBot)||!(0,d.Gm)(+i)){e.next=19;break}return e.abrupt("return",!1);case 19:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=h._.BOT_SUBSCRIBE,o=h._.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,i.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s()(a=GameSDK.getSupportedAPIs()).call(a,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,n.e(543).then(n.bind(n,436));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new m;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.createTournamentAsync=this.createTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,e.next=5,FBInstant.graphApi.requestAsync("/me/notifications","POST",{message:o()({title:f,body:n,media_url:g}),schedule_interval:i});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}();t.Z=v},447:function(e,t,n){"use strict";var i=n(30),a=n.n(i),s=n(15),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(24),l=n.n(c),h=n(40),u=n.n(h),d=function(e,t){return l()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},f=n(28),g=n.n(f),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return l()(e).call(e,m)},y={chunk:o,difference:d,shuffle:p,unique:v},S=n(31),E=n.n(S),b=n(222),A=n.n(b),w=A()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),T=A()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),P=A()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),l=a[o-1],h=E()(s=new Array(+c)).call(s,l);n.push.apply(n,h)}else n.push(a)}return n})),C=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return T(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),P(e).forEach((function(e){s++,a[r][s]=w(e,i)}))})),a},I=A()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),x=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var h=I(l,n);h===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+h,s=h}}return a=a.replace(/1([A-Z])/g,"$1")},B=function(e){try{return atob(e)}catch(t){return""}},k={decodeMap:C,encodeMap:x,hashToString:B,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},R=function(e){try{return JSON.parse(e)}catch(t){return null}},O=n(52),_=n.n(O),D=function(e){try{return _()(e,null,0)}catch(t){return""}},L=function(e){return R(D(e))},N={clone:L,decode:R,encode:D},M=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!M(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];M(i)&&(t[n]=e(i))}return t},Z=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},U=n(23),Y=n.n(U),z=function(e){var t={};return Y()(e).forEach((function(n){if(Z(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},W=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(Z(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},H={clear:F,hasOwn:Z,invert:z,keyBy:W},K=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},V=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(90),X=n.n(j),q=function(e){var t;return X()(t=Y()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},Q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},J=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(Math.random()*n.length);i+=n.charAt(r)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(5),te=n.n(ee),ne=n(379),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(229),re=n.n(se),oe={capitalize:K,hashCode:V,params:q,random:J,randomColor:Q,removeDiacritics:$,getShortName:ae,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},le=function(){return false},he=function(e){return"function"===typeof e},ue=function(e){return"number"===typeof e},de=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},fe=n(26),ge=n.n(fe),me=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(ge())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ve=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ye=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,h=void 0===l?-1:l,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,f=void 0===p?["","k","m","b","t","q"]:p,g=-1===h?99999999:h;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),S=g-f[v].length,E=y.substring(0,S);return(d?ve(E):E)+f[v]}var b=e.toFixed(a),A=g-f[0].length,w=b.substring(0,A);return d?ve(w):w+f[0]},Se=function(e,t){var n=window.game.world.getWorldSize(),i=n.width,a=n.height,s=246.09375,r=2*a,o=0*a/667,c=(a-o-t)/.7,l=s*a*c/(375*a-375*c+s*c);return{x:(e-i/2)/(r-c)/(2.45/4448890*667/a*667/a*l*l-2/3335*667/a*l+1.39-(i-375)/7880)*r+i/2,y:a-o-l}},Ee=function(e,t){void 0===t&&(t=0);var n=t;if((e=Math.floor(e))<n)return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var i=e.toString();if(1e3<=e&&e<1e6)i=Math.floor(e/Math.pow(10,3)).toString()+"K";else if(1e6<=e&&e<1e8){var a=Math.floor(e/Math.pow(10,5)).toString(),s=a.length-1;i=r()(a).call(a,0,s)+"."+r()(a).call(a,s)+"M"}else if(1e8<=e){i=Math.floor(e/Math.pow(10,6)).toString()+"M"}return i.replace(/\B(?=(\d{3})+(?!\d))/g,",")},be={Array:y,Hash:k,Json:N,Object:H,String:oe,Valid:{isBoolean:ce,isDebugger:le,isFunction:he,isNumber:ue,isObject:M,isPropertyKey:de,isString:pe,isValueChangeAsync:me},Image:{drawCircle:function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},drawBorder:function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),l=c.context,h=Math.min(s,r)/100*a/2;return l.beginPath(),l.moveTo(0+h,0),l.lineTo(0+s-h,0),l.quadraticCurveTo(0+s,0,0+s,0+h),l.lineTo(0+s,0+r-h),l.quadraticCurveTo(0+s,0+r,0+s-h,0+r),l.lineTo(0+h,0+r),l.quadraticCurveTo(0,0+r,0,0+r-h),l.lineTo(0,0+h),l.quadraticCurveTo(0,0,0+h,0),l.closePath(),l.clip(),c.draw(0,0,o),!0}},Number:{toAbbreviatedString:ye,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i},toPerspectivePoint:n(439).Z,to2DPoint:Se,formatScore:Ee},Device:{isDesktop:function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)&&!/like Mac OS/.test(e)},isMobile:function(){var e=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(e)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},Ae=n(10),we=n(519),Te={AppId:"3075854722736745",LeadersBoard:{Name:"GlobalLeaderboard",LeaderboardId:null,UseMock:!1,Limit:20},PlayerDataStoreUsingApi:!1,Ads:{Enabled:!0,Mockup:{Enable:!1},InterstitialAdOptions:{pID:"123",secondsFirstTime:0,secondsBetweenAds:45,showWhenStartGame:!0}},LazyTexture32Bit:!0},Pe={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Tournament:{RequestTournamentBeforeInterstitialAd:!1}},Ce={ENV:"development",AppId:"",PlayerDataStoreUsingApi:!1,ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",Notification:{Enable:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{AwardCoins:3e3,MockScoreDifficult:1,MaxRescueCount:1,RescueGamePopupTimeout:15,ForceNewUser:!1,AlwayShowBestScore:!1,ItemConfig:{giftTime:60},Grid:{Speed:{SuperFast:30,Fast:12,Medium:7,Slow:3.5,Stand:0}}},GameOver:{ShowClock:!1},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/550,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:375/550,LandscapeWidth:769,LandscapeHeight:667,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!1},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},Match:{ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},LuckySpin:{MockTime:0},Tournament:{UseMock:!1,UseGlobalTournament:!1,RequestTournamentBeforeInterstitialAd:!1,GlobalTournaments:[],ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},Tutorial:{ForceUseTutorial:!1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!1,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"123",showWhenStartGame:!0,secondsFirstTime:0,secondsBetweenAds:0},RewardAdOptions:{pID:"123",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"gd_banner_desktop",position:"left",bannerWidth:120,bannerHeight:600,platform:"DESKTOP",secondsReload:70}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE","TOURNAMENT_NOT_FOUND","INVALID_OPERATION","CLIENT_UNSUPPORTED_OPERATION"]},errorMessages:{accepted:[],ignored:["Load image failed","Invalid context ID","Failed to fetch"]}},LazyTexture32Bit:!1,Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Ce=(0,we.TS)((0,Ae.Z)({},Ce),Pe);var Ie=Ce=(0,we.TS)((0,Ae.Z)({},Ce),Te),xe=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},Be=n(382),ke=n.n(Be),Re=n(383),Oe=n.n(Re),_e=n(384),De=n.n(_e),Le=n(520),Ne=!1,Me=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return}var o=ke()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],h=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Oe()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Oe()(a,e))))}));h.length<1||h.forEach((function(e){if(a){var t=Oe()(n,e);Oe()(a,e),De()(a,e,t)}}))}}}))},Ge={Configs:Ie,Utils:be,LiveUpdate:{Scene:xe,SceneObjects:function(e,t){return void 0===t&&(t=Ne),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Ne=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,Le.D)((function(){var e=c.children.getAll();Me(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(l){}}}}};window.GameCore=Ge},565:function(e,t,n){"use strict";var i=n(2),a=n(0),s=n(3),r=n.n(s),o=n(533),c=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.PRE_ROLL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.MID_ROLL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=22;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 22:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.MID_ROLL||e.t0===GameCore.Ads.Types.PRE_ROLL?4:e.t0===GameCore.Ads.Types.REWARDED?7:10;break;case 4:return e.next=6,n.getInterstitialAdAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getRewardedVideoAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},525:function(e,t,n){"use strict";n.d(t,{kL:function(){return i},fJ:function(){return a},EH:function(){return s},qj:function(){return r},rh:function(){return o},DW:function(){return c},x2:function(){return l}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE",l="CHALLENGE_RANDOM_FRIEND"},538:function(e,t,n){"use strict";var i=n(519),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},551:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(538),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},537:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},547:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:400,ease:n(162).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},555:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:400,ease:n(162).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},162:function(e,t,n){"use strict";var i=n(167),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},541:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},562:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},542:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},539:function(e,t,n){"use strict";var i=n(0),a=n(538),s={targets:[],duration:300,ease:n(162).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},550:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(538),r={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},o=function(e){function t(t){var n,a;(a=e.call(this,r,t)||this).spline=void 0,a.createCounter=function(e,t){var n=a.config.onCurveUpdate,i="function"===typeof n?n:null;t.forEach((function(t,n){if(a.scene){var s=e.data[n],r=s.duration,o=s.delay,c=new Phaser.Math.Vector2;a.scene.tweens.addCounter({delay:o,duration:r,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){a.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,i&&i(t)}})}}))};var s=a.config.curve;return s?(a.spline=new Phaser.Curves.Spline(s),null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,a.createCounter),a):(0,i.Z)(a)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},545:function(e,t,n){"use strict";var i=n(38),a=n(536),s=n(0),r=n(443),o=n(547),c=n(540),l=n(546),h=n(441),u=function(e){function t(t,n,i,s,r,h){var u;return void 0===h&&(h=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e,t;u.isClicked||null!=(e=u.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n,i,a;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(i=u.upAnimation)||null==(a=i.tween)||a.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e,t;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=h,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,h.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},549:function(e,t,n){"use strict";var i=n(0),a=function(e){function t(t,n){var i,a=n.key,s=n.frame,r=n.width,o=n.height,c=n.usePixelPerfect;(i=e.call(this,t,a,s,r,o,c)||this).paddingZone=void 0,i.showDebugZone=void 0,i.debugZone=void 0;var l=n.paddingZone,h=void 0===l?0:l,u=n.showDebugZone,d=void 0!==u&&u;return i.paddingZone=h,i.showDebugZone=d,i}return(0,i.Z)(t,e),t.prototype.updateSize=function(){e.prototype.updateSize.call(this);var t,n=this.width,i=this.height,a=n+this.paddingZone,s=i+this.paddingZone;(this.setSize(a,s),this.hitZone.setSize(a,s),this.showDebugZone)&&(null==(t=this.debugZone)||t.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))},t}(n(545).Z);t.Z=a},535:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531),r=n(537),o=s.Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,l.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(50,50),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=h},559:function(e,t,n){"use strict";var i=n(10),a=n(38),s=n(536),r=n(0),o=n(11),c=n.n(o),l=n(90),h=n.n(l),u=n(31),d=n.n(u),p=n(24),f=n.n(p),g=n(15),m=n.n(g),v=n(30),y=n.n(v),S=n(37),E=n.n(S),b=n(41),A=n.n(b),w=n(540),T=n(520);function P(e,t){var n="undefined"!==typeof E()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return C(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var I=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.updateObjectVisible=(0,T.D)((function(){for(var e=r.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-r.height||n.y-n.height>r.height?n.setVisible(!1):n.active&&n.setVisible(!0)}}),100,{maxWait:100}),r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,T.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var l=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,l)}var h=a*o,u=r.maxScrollOver*r.height;r.value+h>r.marginTop+u?r.value=r.marginTop+u:r.value+h<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=h,r.callOnScrollEvents(r.value,h)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.input.enabled&&(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling)){var n=h()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var o=n.width,l=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return f()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(w.Z.PRIORITY),this.boundBottom.setDepth(w.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setWorldSize(a,s),this.boundBottom.setWorldSize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.boundTop.kill(),this.boundBottom.kill(),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=P(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=I},557:function(e,t,n){"use strict";var i=n(531).Z.EFFECTS,a=i.KEY,s=i.FRAME,r={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:a,PREFIX:s.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:a,PREFIX:s.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:a,PREFIX:s.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:a,PREFIX:s.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}};t.Z=r},540:function(e,t){"use strict";t.Z={BACKGROUND:1,SPRITES:2,BALL_AND_TAIL:3,TAIL:4,SHOOTER:4,BULLET:6,FIREWORKS:5,GRID_LAYER:6,FLYING_SHADOW_LAYER:7,FLYING_LAYER:8,BULLET_LAYER:9,STAMP:6,BG_HOLE:7,SHADOW:4,HOLE_SCORE:8,FLYING_EGG:9,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,UI:35,LEADERBOARD:36,POPUP:40,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},532:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"gamefont",TEXTURE:"./assets/fonts/gamefont.png",DATA:"./assets/fonts/gamefont.xml"},STROKE:{KEY:"linotte-stroke",TEXTURE:"./assets/fonts/linotte-stroke.png",DATA:"./assets/fonts/linotte-stroke.xml"},FONT_FAMILY:"vag",BLUE_STROKE:{KEY:"linotte-blue-stroke",TEXTURE:"./assets/fonts/linotte-blue-stroke.png",DATA:"./assets/fonts/linotte-blue-stroke.xml"},GREEN_STROKE:{KEY:"linotte-green-stroke",TEXTURE:"./assets/fonts/linotte-green-stroke.png",DATA:"./assets/fonts/linotte-green-stroke.xml"},RED_STROKE:{KEY:"linotte-red-stroke",TEXTURE:"./assets/fonts/linotte-red-stroke.png",DATA:"./assets/fonts/linotte-red-stroke.xml"},PURPLE_STROKE:{KEY:"linotte-purple-stroke",TEXTURE:"./assets/fonts/linotte-purple-stroke.png",DATA:"./assets/fonts/linotte-purple-stroke.xml"}}},445:function(e,t,n){"use strict";var i=(0,n(446).t)(),a={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.jpg",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},LANDSCAPE:{KEY:"landscape",FILE:"./assets/images/"+i+"x/landscape.png",CONFIG:{}},PORTRAIT:{KEY:"portrait",FILE:"./assets/images/"+i+"x/portrait.jpg",CONFIG:{}}};t.Z=a},531:function(e,t,n){"use strict";var i=n(10),a=(0,n(446).t)(),s={DEFAULT_32BIT:{KEY:"default-resources-32bit",TEXTURE:"./assets/textures/"+a+"x/default-resources-32bit.png",JSON:"./assets/textures/"+a+"x/default-resources-32bit.json"},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{ARC_ARROW:"lucky-bar/arc-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",AVATAR_BG:"avatar/bg",AVATAR_BG_BIG:"avatar/bg-big",AVATAR_BG_CIRCLE:"avatar/bg-circle",AVATAR_DASHBOARD:"avatar/avatar-dashboard",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_FRAME_PURPLE:"avatar/purple-frame",AVATAR_FRAME_PURPLE_BIG:"avatar/purple-frame-big",BG_SCORE:"other/bg-score",BG_VALUE_BAR:"other/bg-value-bar",BLANK:"blank",BUTTON_BACK:"buttons/back",BUTTON_BLUE_100X50:"buttons/blue-100x50",BUTTON_BLUE_134X50:"buttons/blue-134x50",BUTTON_BLUE_214X56:"buttons/blue-214x56",BUTTON_BLUE_84X36:"buttons/blue-84x36",BUTTON_CLOSE:"buttons/close",BUTTON_DAILY_MISSION:"buttons/daily-mission",BUTTON_GREEN_134X50:"buttons/green-134x50",BUTTON_GREEN_162X40:"buttons/green-162x40",BUTTON_GREEN_214X56:"buttons/green-214x56",BUTTON_GREEN_172X56:"buttons/green-172x56",BUTTON_GREEN_57X25:"buttons/green-57x25",BUTTON_GREEN_62X32:"buttons/green-62x32",BUTTON_GREEN_84X36:"buttons/green-84x36",BUTTON_GREY_57X25:"buttons/grey-57x25",BUTTON_LUCKY_SPIN:"buttons/lucky-spin",BUTTON_HOME:"buttons/home",BUTTON_PLUS:"buttons/plus",BUTTON_PLUS_SMALL:"buttons/plus-small",BUTTON_PURPLE_84X36:"buttons/purple-84x36",BUTTON_RANK:"buttons/rank",BUTTON_RED_162X40:"buttons/red-162x40",BUTTON_SETTINGS:"buttons/settings",BUTTON_SHARE:"buttons/share",BUTTON_YELLOW:"buttons/yellow",DAILY_BG_VALUE:"daily-rewards/bg-value",DAILY_DAY_BG:"daily-rewards/bg",DAILY_DAY_COIN_DAY_1:"daily-rewards/coin-day1",DAILY_DAY_COIN_DAY_2:"daily-rewards/coin-day2",DAILY_DAY_COIN_DAY_3:"daily-rewards/coin-day3",DAILY_DAY_COIN_DAY_4:"daily-rewards/coin-day4",DAILY_DAY_COIN_DAY_5:"daily-rewards/coin-day5",DAILY_DAY_COIN_DAY_6:"daily-rewards/coin-day6",DASHBOARD_FOOTER_BLOCK:"dashboard/footer-block",HIGHLIGHT_LEADER_BLOCK:"other/highlight-leader-block",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",ICON_ADS_VIDEO:"icons/ads-video",ICON_ARROW_BIG:"icons/arrow-big",ICON_BEST_SCORE_CUP:"icons/bestscore-cup",ICON_BRONZE:"icons/bronze",ICON_CANCEL:"icons/cancel",ICON_CLOCK:"icons/clock",ICON_COIN:"icons/coin",ICON_COIN_SMALL:"icons/coin-small",ICON_CROWN:"icons/crown",ICON_CROWN_1:"icons/crown-1",ICON_CROWN_2:"icons/crown-2",ICON_CROWN_3:"icons/crown-3",ICON_CROWN_WINNER:"icons/crown-winner",ICON_DIAMOND:"icons/diamond",ICON_DOT:"icons/dot",ICON_GOLD:"icons/gold",ICON_HAND:"icons/hand",ICON_HOME:"icons/home",ICON_MISSION:"icons/mission",ICON_PLAY_WITH_2:"icons/play-with-2",ICON_QUESTION:"icons/question",ICON_RANK:"icons/ribbon-rank",ICON_RANKING:"icons/ranking",ICON_SHARE:"icons/share",ICON_SILVER:"icons/silver",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",LEADERBOARD_BAR:"leaderboards/bar",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADER_BLOCK:"other/leader-block",LINE_HOR:"other/line-hor",LINE_VER:"other/line-ver",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_GLOW:"logo/gift-glow",MISSION_10K:"daily-mission/10k",MISSION_2ND:"daily-mission/2nd",MISSION_BLOCK_BG:"daily-mission/bg-block",MISSION_BOMB:"daily-mission/bomb",MISSION_BUBBLE:"daily-mission/bubble",MISSION_CROWN:"daily-mission/crown",MISSION_GOLD_COIN:"daily-mission/gold-coin",MISSION_GREY_COIN:"daily-mission/grey-coin",MISSION_INVITE:"daily-mission/invite",MISSION_RAINBOW_BUBBLE:"daily-mission/rainbow-bubble",MISSION_SCORING_RING:"daily-mission/scoring-ring",POPUP_BOARD_BOTTOM:"popup/board-bottom",POPUP_DAILY_REWARDS:"popup/bg-dailyrewards",POPUP_GAMEPLAY:"popup/gameplay",POPUP_LEADERBOARD:"popup/leaderboard",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_CENTER:"popup/top-center",POPUP_TOP_RIGHT:"popup/top-right",POPUP_LEFT_CENTER:"popup/left-center",POPUP_CENTER:"popup/center",POPUP_RIGHT_CENTER:"popup/right-center",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_CENTER:"popup/bottom-center",POPUP_BOTTOM_RIGHT:"popup/bottom-right",POPUP_SETTING:"popup/popup-setting",POPUP_SETTING_DASHBOARD:"popup/popup-setting-dashboard",PRELOADER:"preloader/dual-ring",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",RIBBON_CONGRATULATION:"ribbon/congratulation",SWITCH_OFF:"switch/off",SWITCH_ON:"switch/on",SWITCH_PANEL_OFF:"switch/panel-off",SWITCH_PANEL_ON:"switch/panel-on",TEXT_CONGRATULATION:"texts/congratulation",TEXT_HIGH_SCORE:"texts/high-score",TEXT_LEADERBOARD:"texts/leaderboard",TEXT_SKIP:"texts/skip",TEXT_LUCKY_SPIN:"texts/lucky-spin",TEXT_YOUR_SCORE:"texts/your-score",TOURNAMENT_GREEN_BUTTON:"tournament/green-button",TOURNAMENT_TITLE_LOGO:"tournament/title-logo",LUCKY_SPIN_BACKGROUND:"lucky-spin/background",LUCKY_SPIN_FOREGROUND:"lucky-spin/foreground",LUCKY_SPIN_WHEEL:"lucky-spin/wheel",LUCKY_SPIN_SPIN:"lucky-spin/spin"}},EFFECTS:{KEY:"effects-resources",TEXTURE:"./assets/textures/"+a+"x/effects-resources.png",JSON:"./assets/textures/"+a+"x/effects-resources.json",FRAME:{BLANK:"blank",COIN:"coin",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_GLOW_LIGHT:"glow-light",FX_GLOW_GOLD:"glow-gold",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",FX_CIRCLE_LIGHT:"circle-light",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{TEXTURES:{KEY:"gameplay-texture",TEXTURE:"./assets/textures/"+a+"x/gameplay-textures.png",JSON:"./assets/textures/"+a+"x/gameplay-textures.json",FRAME:{BLANK:"blank",BOMB_EXPLOSIVE:"animations/bomb-explosive/explosive_",BOMB_FLYING:"animations/boom-flying/00",BOX_EXPLOSIVE:"animations/box-explosive/fx_box_",BOX:"animations/box-explosive/fx_box_00",EGG_EXPLOSIVE:"animations/grey-explosive/explosive_grey_",EGG_SHELL:"particles/egg/egg-shell-",GREY_LIGHT:"animations/grey-light/grey_light_",HAND:"others/hand",SHOWING_BOMB:"animations/bomb/showing-bomb-",ROCKET_FLYING:"animations/rocket-flying/00",LOGO:"logo",DEPTH_EFFECT:"depth-effect"}},TEXTURES_32BIT:{KEY:"gameplay-main-objects",TEXTURE:"./assets/textures/"+a+"x/gameplay-textures-32bit.png",JSON:"./assets/textures/"+a+"x/gameplay-textures-32bit.json",FRAME:{AVATAR_BG:"avatar/bg",AVATAR_FRAME:"avatar/frame",AVATAR_BLUE:"avatar/avatar-blue",AVATAR_YELLOW:"avatar/avatar-yellow",BLANK:"blank",CIRCLE:"shooter/circle",ARROWS:"shooter/arrows",ARROWS_SHADOW:"shooter/arrows-shadow",SHOOTER_GLOW:"shooter/circle-glow",SHOOTER_SHADOW:"shooter/circle-shadow",SHADOW:"bubbles/shadow",SHOT_GUIDE_LIGHT:"shot-guide/line-light-vertical",SHOT_GUIDE_ENDPOINT:"shot-guide/end-point",COIN_BUBBLE:"icons/star-bubble-big",BOX_BUBBLE:"icons/box-bubble",BOMB_BUBBLE:"icons/bomb-bubble",ROCKET_ICON:"icons/rocket-bubble",BALL_BLUE:"bubbles/bubble-blue-shadow",BALL_BLUE_MIN:"bubbles/bubble-blue",BALL_GREEN:"bubbles/bubble-green-shadow",BALL_GREEN_MIN:"bubbles/bubble-green",BALL_RED:"bubbles/bubble-red-shadow",BALL_RED_MIN:"bubbles/bubble-red",BALL_VIOLET:"bubbles/bubble-violet-shadow",BALL_VIOLET_MIN:"bubbles/bubble-violet",BALL_YELLOW:"bubbles/bubble-yellow-shadow",BALL_YELLOW_MIN:"bubbles/bubble-yellow",FIRE_BALL:"bubbles/bubble-rainbow",ROCKET:"bubbles/rocket",ROCKET_SHADOW:"bubbles/rocket-shadow",COLORFUL_BOMB:"bombs/colorful",BOMB:"bubbles/bomb",BONUS_STAMP_UP:"stamps/stamp-up",BONUS_STAMP_GIFT:"stamps/stamp-gift",BUTTON_PAUSE:"buttons/pause",GLOW:"others/glow",HOLE_BG:"holes/bg-hole",HOLE_GREEN_DOWN:"holes/green-hole-down",HOLE_ORANGE_DOWN:"holes/orange-hole-down",HOLE_PURPLE_DOWN:"holes/purple-hole-down",HOLE_BG_HIDE:"holes/bg-hide",ITEM_GIFT_BOMB:"items/gift-bomb",ITEM_GIFT_SHADOW:"items/gift-shadow",ITEM_GIF_CLOSE:"items/gift-close",ITEM_GLOW_EFFECT:"items/glow",ICON_BRONZE:"icons/bronze",ICON_GOLD:"icons/gold",ICON_SILVER:"icons/silver",LIGHT_EFFECT:"others/light-effect",TEXT_CLOSE:"others/text-close",PROGRESS_BAR_BG:"progress-bar/bg-progress-bar",PROGRESS_BAR_LEFT:"progress-bar/progress-bar-left",PROGRESS_BAR_MIDDLE:"progress-bar/progress-bar-middle",PROGRESS_BAR_RIGHT:"progress-bar/progress-bar-right",PROGRESS_BG:"progress/progress-bg",PROGRESS_TOP:"progress/progress-top",PROGRESS_BOTTOM:"progress/progress-bottom",PROGRESS_MIDDLE:"progress/progress-middle",RANK_VIOLET:"rank/rank-violet",RANK_YELLOW:"rank/rank-yellow",ROPE:"others/rope",ROPE_SHADOW:"others/rope-shadow",TAIL:"others/tail",TAB_SCORE:"others/tab-score",SWITCH:"animations/switch/switch_",PARTICLE_LIGHT:"effects/light",PARTICLE_CIRCLE_1:"effects/circle-1",PARTICLE_CIRCLE_2:"effects/circle-2",PARTICLE_STAR:"effects/star",PARTICLE_SHOT_GUIDE:"effects/bg_point",PARTICLE_DUST_01:"effects/dust-01",PARTICLE_DUST_02:"effects/dust-02",PARTICLE_FLARE:"effects/flare",PARTICLE_GLOW_CIRCLE:"effects/glow_circle",PARTICLE_MULTI_STAR:"effects/particle_star",PARTICLE_CIRCLE:"effects/particle"}}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"},SHOOTER_SPINE:{KEY:"shooter",jsonPATH:"./assets/spines/shooter/arrow-circle.json",atlasPATH:"./assets/spines/shooter/arrow-circle.atlas"},LIGHT_HOLE:{KEY:"light",jsonPATH:"./assets/spines/light-hole/bubbles_fall.json",atlasPATH:"./assets/spines/light-hole/bubbles_fall.atlas"},TEXTS:{KEY:"texts",TEXTURE:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},528:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return s}});var i=n(37),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",TOURNAMENT_SCENE:"TOURNAMENT_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",RESULT_ONLINE_SCENE:"RESULT_ONLINE_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},s={SWITCH:n.n(i)()("SWITCH")}},530:function(e,t,n){"use strict";n.d(t,{o4:function(){return i},Ks:function(){return a}});var i={DASHBOARD_SCREEN:"DASHBOARD_SCREEN",READY_SCREEN:"READY_SCREEN",GUIDE_SCREEN:"GUIDE_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",NOT_ENOUGH_COINS_SCREEN:"NOT_ENOUGH_COINS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",LUCKY_SPIN_SCREEN:"LUCKY_SPIN_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},546:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",DIAMONDS_EAT:"diamonds_eat",GAME_OVER_SCENE:"game_over_scene",GIFT_CHARGE:"gift_charge",GIFT_EXPLODE:"gift_explode",GIFT_REVEAL:"gift_reveal",START_LEVEL:"start_level",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",SCORE_COUNTER:"score_counter",BUBBLE_HIT:"Bead Hit Sound 0",SHOOT_BUBBLE:"PopupOpen",SWITCH_BUBBLE:"change_bubble",BUBBLE_POP:"Tab 3",BOMB_EXPLODE:"bubble_bomb",BOMB_BOOST:"booster_bomb_pop",ROCKET_BOOST:"booster_rocket_pop",START_GAME:"start_game",GAMEOVER:"gameover",TICKTOCK:"ticktock",ROLLING:"rolling",STAR_NOTE:"Star_note_",POISON_DRINK:"SFX_Potion_Drink",ENDANGER_TIME:"endanger_time",RECEIVE_STAMP:"receive-stamp"}},563:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:r,frame:o.FX_STAR_YELLOW,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:r,frame:o.FX_CIRCLE,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var e=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*e,to:0},scaleY:{start:10*e,to:0}},onComplete:function(){}})},n.runHaloAnimation=function(){this.scene.tweens.killTweensOf(this.halo);var e=1/this.scene.world.getPixelRatio();this.halo.setScale(e),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:e,to:5*e},alpha:{from:1,to:0}},onComplete:function(){}})},t}(Phaser.GameObjects.Container);t.Z=c},560:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531),r=n(558),o=n(540),c=n(548),l=n(546),h=s.Z.EFFECTS,u=h.KEY,d=h.FRAME,p=function(e){function t(t){var n;return(n=e.call(this,t)||this).coinGroup=void 0,n.containerGroup=void 0,n.startsExplosive=void 0,n.startsExplosiveSmall=void 0,n.startsExplosiveSmallTimer=void 0,n.gravity=300,n.setVisible(!0),n.coinGroup=n.scene.add.group({defaultKey:u,defaultFrame:d.COIN}),n.containerGroup=n.scene.add.group({classType:Phaser.GameObjects.Container}),n.startsExplosive=new r.Z(t),n.startsExplosive.setDepth(o.Z.ON_TOP+1),n.startsExplosiveSmall=new c.Z(t),n.startsExplosiveSmall.setDepth(o.Z.ON_TOP+1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createConfigOne=function(e,t,n){var i=this,a=e/300,s=new Phaser.Math.Vector2(0,0),r=new Phaser.Math.Vector2(0,-e),o=n?-1:1,c=Phaser.Math.RND.between(-90,90),h=(c+90)/180*180*(c<0?1:(300-Math.abs(c))/300)*a,u=Phaser.Math.RND.between(20,h+20),d=new Phaser.Math.Vector2(1,0);d.setAngle(c*Math.PI/180);var p=Phaser.Math.RND.between(-Math.abs(c)-15,15-Math.abs(c)),f=u*(100-Math.abs(c))/100*a,g=Phaser.Math.RND.between(.2*f,f),m=new Phaser.Math.Vector2(1,0);m.setAngle(p*Math.PI/180);var v=o*d.x*u,y=d.y*u,S=o*m.x*g,E=m.y*g-e,b=new Phaser.Math.Vector2(v,y),A=new Phaser.Math.Vector2(S,E),w=new Phaser.Curves.CubicBezier(s,b,A,r),T=Phaser.Math.RND.between(1500+3*u,2e3+3*u),P=this.coinGroup.get(0,0);return P.revive(),P.setRotation(-t.rotation),P.setWorldSize(18,18),t.add(P),{from:0,to:1,duration:T,ease:"Sine.In",onUpdate:function(e){var t=w.getPointAt(e.getValue());P.setPosition(t.x,t.y)},onComplete:function(e){if(P.kill(),!(e.totalProgress<1)&&(i.scene.audio.playSound(l.Z.DIAMONDS_EAT),!i.startsExplosiveSmallTimer||i.startsExplosiveSmallTimer.hasDispatched)){i.startsExplosiveSmallTimer=i.scene.time.delayedCall(100,(function(){return null}));var t=P.getWorldPosition();i.startsExplosiveSmall.explode(10,t.x,t.y)}},onStop:function(){P.kill()}}},n.explode=function(e,t,n,i,a){var s,r=this;if(e<=0)return[];this.startsExplosive.explode(30,t,n);var o=new Phaser.Math.Vector2(i-t,a-n),c=o.length(),l=this.containerGroup.get(t,n);l.setRotation(o.angle()+Math.PI/2),l.revive(),this.add(l);for(var h=void 0,u=0,d=[],p=0;p<e;p++){var f=this.createConfigOne(c,l,p%2===0),g=this.scene.tweens.addCounter(f);d.push(g),f.duration>u&&(u=f.duration,h=g)}var m=function(){var e,t;d.forEach((function(e){e.complete()})),null==(e=r.startsExplosive.emitters.getAt(0))||e.killAll(),null==(t=r.startsExplosiveSmall.emitters.getAt(0))||t.killAll(),l.kill()};return null==(s=h)||s.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){l.kill(),r.scene.events.off("sleep",m)})),this.scene.events.once("sleep",m),d},t}(Phaser.GameObjects.Container);t.Z=p},552:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_STAR_YELLOW)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},561:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531),r=n(519),o=s.Z.EFFECTS,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/this.scene.world.getPixelRatio(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=h},564:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531),r=n(519),o=s.Z.EFFECTS,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/this.scene.world.getPixelRatio(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,alpha:{start:1,end:.8},scale:{min:.6*a,max:1*a},lifespan:{min:2e3,max:3e3},speedX:{min:-100,max:100},speedY:{min:-20,max:-40},gravityY:50,rotate:{start:-1080,end:0},angle:{min:110,max:145}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=h},556:function(e,t,n){"use strict";n.d(t,{Z:function(){return be}});var i=n(10),a=n(536),s=n(0),r=n(531),o=n(557),c=o.Z.RIBBON_A,l=c.KEY,h=c.TEXTURE,u=c.FRAME_RATE,d=c.END,p=c.PREFIX,f=c.ZERO_PAD,g=function(e){function t(t){var n={repeat:-1,frameRate:u,frames:t.generateFrameNames(h,{prefix:p,end:d,zeroPad:f,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,l,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),m=o.Z.RIBBON_B,v=m.KEY,y=m.TEXTURE,S=m.FRAME_RATE,E=m.END,b=m.PREFIX,A=m.ZERO_PAD,w=function(e){function t(t){var n={repeat:-1,frameRate:S,frames:t.generateFrameNames(y,{prefix:b,end:E,zeroPad:A,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,v,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),T=o.Z.RIBBON_C,P=T.KEY,C=T.TEXTURE,I=T.FRAME_RATE,x=T.END,B=T.PREFIX,k=T.ZERO_PAD,R=function(e){function t(t){var n={repeat:-1,frameRate:I,frames:t.generateFrameNames(C,{prefix:B,end:x,zeroPad:k,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,P,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),O=o.Z.RIBBON_D,_=O.KEY,D=O.TEXTURE,L=O.FRAME_RATE,N=O.END,M=O.PREFIX,G=O.ZERO_PAD,F=function(e){function t(t){var n={repeat:-1,frameRate:L,frames:t.generateFrameNames(D,{prefix:M,end:N,zeroPad:G,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,_,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),Z=o.Z.CONFETTI_STAR_X,U=Z.KEY,Y=Z.TEXTURE,z=Z.FRAME_RATE,W=Z.END,H=Z.PREFIX,K=Z.ZERO_PAD,V=function(e){function t(t){var n={repeat:-1,frameRate:z,frames:t.generateFrameNames(Y,{prefix:H,end:W,zeroPad:K,start:1}),yoyo:!0,showOnStart:!0};return e.call(this,t,U,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),j=o.Z.CONFETTI_STAR_Y,X=j.KEY,q=j.TEXTURE,Q=j.FRAME_RATE,J=j.END,$=j.PREFIX,ee=j.ZERO_PAD,te=function(e){function t(t){var n={repeat:-1,frameRate:Q,frames:t.generateFrameNames(q,{prefix:$,end:J,zeroPad:ee,start:1}),showOnStart:!0};return e.call(this,t,X,n)||this}return(0,s.Z)(t,e),t}(Phaser.Animations.Animation),ne=n(11),ie=n.n(ne),ae=n(31),se=n.n(ae),re=n(15),oe=n.n(re),ce=n(30),le=n.n(ce),he=n(37),ue=n.n(he),de=n(41),pe=n.n(de);function fe(e,t){var n="undefined"!==typeof ue()&&pe()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ge(e,t);var i=oe()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return le()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var me=function(e){function t(t){var n,i,a;return(a=e.call(this,t)||this).scene=void 0,a.ribbon=void 0,a.graphics=void 0,a.colorUse=void 0,a.lastChange=void 0,a.currentFrame=void 0,a.isYoyo=void 0,a.isGravityChanged=void 0,a.dtCount=void 0,a.points=void 0,a.scene=t.manager.scene,a.points=ie()(n=se()(i=new Array(10)).call(i,null)).call(n,(function(){return{x:0,y:0}})),a.isYoyo=!1,a.isGravityChanged=!1,a.lastChange=0,a.currentFrame=-1,a.dtCount=0,a.createGraphics(),a.randomRibbonUsedWhenFall(),a}(0,s.Z)(t,e);var n=t.prototype;return n.randomRibbonUsedWhenFall=function(){switch(Phaser.Math.Between(0,3)){default:this.ribbon=this.scene.anims.get(o.Z.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(o.Z.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(o.Z.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(o.Z.RIBBON_D.KEY)}},n.setRibbonPosition=function(e,t){var n;ie()(n=this.points).call(n,(function(n){n.x=e,n.y=t}))},n.createGraphics=function(){var e=[8443204,2928867,12013036,16376097,15285798];this.colorUse=e[Phaser.Math.Between(0,e.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});var t=this.emitter.manager,n=t.x,i=t.y,a=t.depth;this.graphics.setDepth(a),this.graphics.setPosition(n,i)},n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateColor(),this.updateFrames(t),this.dtCount+=t,this.dtCount<25||(this.dtCount-=25,this.graphics.setAlpha(this.lifeCurrent/this.life),this.alpha=this.lifeCurrent/this.life,this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity()),a},n.updateFrames=function(e){this.lastChange+=e,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)},n.updatePoints=function(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))},n.updateGraphics=function(){if(this.graphics.visible){for(var e,t=fe(this.points);!(e=t()).done;){if(0===e.value.y)return}this.graphics.clear(),this.graphics.strokePoints(this.points)}},n.updateGravity=function(){this.lifeCurrent>this.life-2100||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))},n.updateVelocity=function(){this.graphics.visible&&(this.velocityX>this.maxVelocityX&&(this.velocityX=this.maxVelocityX),this.velocityX<-this.maxVelocityX&&(this.velocityX=-this.maxVelocityX),this.lifeCurrent>this.life-1800?this.velocityX+=Phaser.Math.Between(-10,10):this.velocityX>0?this.velocityX+=Phaser.Math.Between(-8,6):this.velocityX+=Phaser.Math.Between(-6,8))},n.updateColor=function(){this.graphics.visible||(this.tint=this.colorUse)},n.kill=function(){this.graphics.destroy()},t}(Phaser.GameObjects.Particles.Particle),ve=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.isYoyo=void 0,n.isGravityChanged=void 0,n.lastChange=void 0,n.currentFrame=void 0,n.star=void 0,n.starX=void 0,n.starY=void 0,n.dtCount=void 0,n.isYoyo=!1,n.isGravityChanged=!1,n.lastChange=0,n.currentFrame=-1,n.scene=t.manager.scene,n.starX=n.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY),n.starY=n.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY),n.star=n.starX,n.dtCount=0,n}(0,s.Z)(t,e);var n=t.prototype;return n.update=function(t,n,i){var a=e.prototype.update.call(this,t,n,i);return this.updateFrames(t),this.dtCount+=t,this.dtCount<1e3/60||(this.dtCount-=1e3/60,this.updateFrameRate(),this.updateGravity(),this.updateVelocity()),a},n.updateGravity=function(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))},n.updateVelocity=function(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))},n.updateFrames=function(e){if(this.lastChange+=e,this.lastChange>=this.star.msPerFrame){var t=Phaser.Math.RND.between(0,1);this.star=t>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}},n.updateFrameRate=function(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)},t}(Phaser.GameObjects.Particles.Particle),ye=r.Z.EFFECTS,Se=ye.KEY,Ee=ye.FRAME,be=function(e){function t(t){var n;return(n=e.call(this,t,Se,Ee.BLANK)||this).emitterConfetti=void 0,n.emitterRibbons=void 0,n.ribbonConfig=void 0,n.confettiConfig=void 0,n.width=void 0,n.height=void 0,n.emitterRibbons=[],n.emitterConfetti=[],n.createConfigs(),n.createAnimations(),n.scene.add.existing((0,a.Z)(n)),n}(0,s.Z)(t,e);var n=t.prototype;return n.createConfigs=function(){var e=1/this.scene.world.getPixelRatio();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:Ee.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4500,max:5500},rotate:{start:0,end:1800,random:!0},scale:{min:.6*e,max:e},particleClass:me,maxVelocityX:120},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:[8443204,2928867,12013036,16376097,15285798],particleBringToTop:!0,frame:Ee.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:6e3},rotate:{start:0,end:1080},scale:{min:.6*e,max:e},particleClass:ve}},n.createAnimations=function(){if(!this.scene.anims.get(o.Z.CONFETTI_STAR_X.KEY)){var e=new V(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_X.KEY,e)}if(!this.scene.anims.get(o.Z.CONFETTI_STAR_Y.KEY)){var t=new te(this.scene.anims);this.scene.anims.add(o.Z.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(o.Z.RIBBON_A.KEY)){var n=new g(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_A.KEY,n)}if(!this.scene.anims.get(o.Z.RIBBON_B.KEY)){var i=new w(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_B.KEY,i)}if(!this.scene.anims.get(o.Z.RIBBON_C.KEY)){var a=new R(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_C.KEY,a)}if(!this.scene.anims.get(o.Z.RIBBON_D.KEY)){var s=new F(this.scene.anims);this.scene.anims.add(o.Z.RIBBON_D.KEY,s)}},n.run=function(e,t,n,i){this.setPosition(e,t),this.width=n,this.height=i,this.createEmitters(),this.emitterConfetti.forEach((function(e){e.emitParticle(25)})),this.emitterRibbons.forEach((function(e){e.emitParticle(20)}))},n.stop=function(){var e=this;this.emitterConfetti.forEach((function(e){e.killAll()})),this.emitterRibbons.forEach((function(t){t.killAll(),t.forEachDead((function(e){e instanceof me&&e.kill()}),e)})),this.kill()},n.createEmitters=function(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()},n.createConfettiLeftEmitter=function(){var e=(0,i.Z)({},this.confettiConfig,{speedX:{min:5,max:90}}),t=this.createEmitter(e);this.emitterConfetti.push(t)},n.createConfettiRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.confettiConfig,{x:e,speedX:{min:-5,max:-90}}),n=this.createEmitter(t);this.emitterConfetti.push(n)},n.createRibbonLeftEmitter=function(){var e=(0,i.Z)({},this.ribbonConfig,{speedX:{min:20,max:80},emitCallback:function(e){e.setRibbonPosition(0,0)}}),t=this.createEmitter(e);this.emitterRibbons.push(t)},n.createRibbonRightEmitter=function(){var e=this.width,t=(0,i.Z)({},this.ribbonConfig,{x:e,speedX:{min:-20,max:-80},emitCallback:function(t){t.setRibbonPosition(e,0)}}),n=this.createEmitter(t);this.emitterRibbons.push(n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager)},554:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_SPARK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_SPARK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},553:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_COMET)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(t-i/2,n-a/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},558:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_COMET)||this).emitter=void 0,n.scene=t,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,alpha:{start:.8,end:.5},speed:{min:60,max:120},scale:{start:.4*e,end:e},lifespan:{min:700,max:1200}})},n.explode=function(e,t,n){this.revive(),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},548:function(e,t,n){"use strict";var i=n(536),a=n(0),s=n(531).Z.EFFECTS,r=s.KEY,o=s.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,r,o.FX_COMET)||this).emitter=void 0,n.scene=t,n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.FX_COMET,alpha:{start:1,end:.8},speed:{min:40,max:80},scale:{start:.4*e,end:.7*e},lifespan:{min:400,max:600}})},n.explode=function(e,t,n){this.revive(),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=c},544:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(0),a=n(443),s=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),r=n(527),o=n(445),c=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.bgMask=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()})),t.unsubscribeList=[]},t.unsubscribeList=[],t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone(),this.world.resize()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height,s=Math.min(this.world.getScreenWidth()-this.game.canvas.offsetWidth,0)*this.world.getWorldSize().width/this.game.canvas.offsetWidth;e.setZoom(t),e.centerOn(i/2-s/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new s(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/this.getModSizeByLang()},n.getModSizeByLang=function(){switch(this.lang.getCurrentLanguage()){case"en":return 1;default:return 1.15;case"pt":case"es":case"it":return 1.25;case"id":return 1.2}},n.createBackground=function(e,t,n,i){e||(e=this.world.isLandscape()?o.Z.LANDSCAPE.KEY:o.Z.PORTRAIT.KEY),this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.createMaskBackground=function(e){var t="screen-background";if(!this.textures.exists(t)){var n=this.gameZone.width+2,i=this.gameZone.height+2,a=this.add.graphics();a.fillStyle(0,1),a.fillRect(0,0,n,i),a.generateTexture(t,n,i),a.destroy()}var s=this.add.image(0,0,t);s.setOrigin(0,0),this.add.existing(s),s.setAlpha(e),r.Z.registerObject(s),this.bgMask=s},n.handleStateChange=function(e){var t=this;e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},527:function(e,t,n){"use strict";var i=n(40),a=n.n(i),s=n(15),r=n.n(s),o=n(30),c=n.n(o),l=n(37),h=n.n(l),u=n(41),d=n.n(u);function p(e,t){var n="undefined"!==typeof h()&&d()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return f(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return c()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=function(){function e(){}return e.registerObject=function(t){var n;a()(n=e.objects).call(n,t)||e.objects.push(t)},e}();g.objects=[],g.currentAlpha=0,g.updateBgMask=function(){for(var e,t=1,n=p(g.objects);!(e=n()).done;){var i=e.value,a=i.scene;a.scene.isActive(a.scene.key)&&(i.parentContainer?i.parentContainer.visible&&i.visible&&(t*=1-i.alpha*i.parentContainer.alpha):i.visible&&(t*=1-i.alpha))}var s=1-t;g.currentAlpha!=s&&(g.currentAlpha=s,document.getElementById("app-mask")&&function(e){var t=document.getElementById("app-mask");t&&(t.style.background="rgb(0 0 0 / "+e+")")}(s))},t.Z=g},533:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var i=n(38),a=n(0),s=n(5),r=n.n(s),o=n(541),c=n(542),l=n(531),h=n(528),u=n(530),d=n(529),p=n(543),f=n(441),g=n(544),m=n(527),v=n(536),y=n(532),S=n(540),E=l.Z.DEFAULT,b=E.KEY,A=E.FRAME,w=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(S.Z.DEBUG),n.scene.add.existing((0,v.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:b,frame:A.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:y.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),T=w,P=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(S.Z.DEBUG),n.scene.add.existing((0,v.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,v.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:y.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=P,I=n(534),x=l.Z.DEFAULT,B=x.KEY,k=x.FRAME,R=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,f.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==h.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==h.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(u.o4.NOTIFY_SCREEN,I.Z);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:B,frame:k.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new T(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(h.K.SWITCH,this.switchScene),this.events.on(Phaser.Scenes.Events.RENDER,m.Z.updateBgMask)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==h.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=(0,p.$)(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),O=R},534:function(e,t,n){"use strict";var i=n(0),a=n(539),s=n(535),r=n(532),o=n(530),c=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(o.Ks.PRIORITY),s.background.setAlpha(.85),s}(0,i.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),s=a[0],r=void 0===s?"":s,o=a[1],c=void 0===o?0:o,l=a[2],h=void 0!==l&&l;this.setMessage(r),this.showLoading(h),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}}))},n.addLoadingIcon=function(){this.loadingIcon=new s.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(20),font:r.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){e?this.loadingIcon.revive():this.loadingIcon.kill();var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,-5,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new a.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen);t.Z=c},473:function(e,t,n){"use strict";var i,a=n(441),s=n(119),r=n(10),o=n(2),c=n(0),l=n(3),h=n.n(l),u=n(442),d=0,p=0,f=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;p=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!p||p<30)&&(p=60),d=p;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(p)),p+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-p,n=Math.round(e*t+p);n>d&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),g=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.customCheckWorldBounds=function(){Phaser.Physics.Arcade.Body.prototype.checkWorldBounds=this.checkWorldBounds},t.customQueueDepthSortLayer=function(){Phaser.GameObjects.Layer.prototype.queueDepthSort=this.queueDepthSort},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,s,e,t);l.setName("Debug Box"),l.setDepth(r);var h=GameCore.Utils.Valid.isNumber;return h(o)&&h(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t.checkWorldBounds=function(){var e=this.position,t=this.customBoundsRectangle,n=this.world.checkCollision,i=this.worldBounce?-this.worldBounce.x:-this.bounce.x,a=this.worldBounce?-this.worldBounce.y:-this.bounce.y,s=!1;if(e.x<t.x&&n.left){var r=t.x-e.x;e.x=t.x+r,this.velocity.x*=i,this.blocked.left=!0,s=!0}else if(this.right>t.right&&n.right){var o=e.x-(t.right-this.width);e.x=t.right-this.width-o,this.velocity.x*=i,this.blocked.right=!0,s=!0}return e.y<t.y&&n.up?(e.y=t.y,this.velocity.y*=a,this.blocked.up=!0,s=!0):this.bottom>t.bottom&&n.down&&(e.y=t.bottom-this.height,this.velocity.y*=a,this.blocked.down=!0,s=!0),s&&(this.blocked.none=!1,this.updateCenter()),s},t.queueDepthSort=function(){},e}(),m=g,v=n(5),y=n.n(v),S=n(294),E=n.n(S),b=GameCore.Configs.Ads.Mockup.GiphyApiKey,A=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(n=document.getElementById("mock-banner-ads"))){e.next=11;break}if((i=n.getElementsByTagName("img"))&&!(i.length<=0)){e.next=8;break}return e.abrupt("return");case 8:i[0].src=t,e.next=36;break;case 11:(a=document.createElement("div")).id="mock-banner-ads",a.style.width="100%",a.style.height="50px",a.style.bottom="var(--sab)",a.style.position="fixed",a.style.background="#fff url("+t+") center center/auto no-repeat",a.style.outline="2px solid #ffffff40",a.style.outlineOffset="-2px",a.style.bottom="0px",a.style.right="0px",a.style.top="0px",a.style.margin="auto",a.style.height="100%",a.style.width="160px",a.style.position="fixed",a.style.zIndex="1000000",a.style.overflow="hidden",s=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(s),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",s.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),a.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(a);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+b+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(i=e.sent,GameCore.Utils.Valid.isObject(i)){e.next=9;break}return e.abrupt("return","");case 9:return a=i.data,s=Math.floor(Math.random()*a.length),e.abrupt("return",a[s].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),w={LOADED:"loaded",DISPLAYED:"displayed"};!function(e){e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing"}(i||(i={}));var T,P=i;!function(e){e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.MID_ROLL="mid-roll"}(T||(T={}));var C=T,I=n(22),x=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),B=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=P.IDLE};GameCore.Ads={Types:C,Status:P,Events:w,AdError:x,AdInstance:B};var k=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastRewardAdShownTime=void 0,n.preRollAd=void 0,n.midRollAd=void 0,n.rewardedVideo=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.CalculateSafeAreaBottom)return;this.safeAreaBottom=E()(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.Enabled,this.config=t,0===this.config.BannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.canShowBannerAd(),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){this.preRollAd=new e(C.PRE_ROLL,"pre-roll"),this.midRollAd=new e(C.MID_ROLL,"mid-roll"),this.rewardedVideo=new e(C.REWARDED,"rewarded")},n.preloadPreRollAdAsync=function(){return this.preloadAdAsync(C.PRE_ROLL)},n.showPreRollAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new x("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(C.PRE_ROLL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadMidRollAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.MID_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showMidRollAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new x("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(C.MID_ROLL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(C.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new x("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(C.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.RewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new x("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new x("AD_INSTANCE_NOT_INITIALLED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(w.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new x("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new x("AD_INSTANCE_NOT_INITIALLED","The instance ads not yet initiated");case 5:return t!==C.PRE_ROLL&&t!==C.MID_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===C.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.EnableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(w.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case C.PRE_ROLL:return this.preRollAd;case C.MID_ROLL:return this.midRollAd;case C.REWARDED:return this.rewardedVideo;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.InterstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.RewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.BannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.showBannerAdAsync=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t&&(this.bannerAdConfig=(0,r.Z)({},this.bannerAdConfig,t)),n=this.bannerAdConfig,i=n.placementId,a=n.secondsReload,i&&""!=i){e.next=10;break}return e.abrupt("return");case 10:if(!(a>0)){e.next=16;break}if(!this.reloadBannerAdIntervals[i]){e.next=13;break}return e.abrupt("return");case 13:return this.loadBannerAdAsync(i),this.reloadBannerAdIntervals[i]=setInterval((function(){s.loadBannerAdAsync(i)}),1e3*a),e.abrupt("return");case 16:return this.loadBannerAdAsync(i),e.abrupt("return");case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.enabled){e.next=5;break}return e.abrupt("return");case 5:if(!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,A.loadBannerAdAsync();case 9:e.next=13;break;case 11:return e.next=13,GameSDK.loadBannerAdAsync(t,this.bannerAdConfig);case 13:this.showingBannerAd[t]=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,this.enabled){e.next=7;break}return e.abrupt("return");case 7:if(!GameCore.Configs.Ads.Mockup.Enable){e.next=13;break}return e.next=11,A.hideBannerAdAsync();case 11:e.next=17;break;case 13:return this.config.BannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=17,GameSDK.hideBannerAdAsync();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4);case 22:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;var e=this.bannerAdConfig||{},t=e.position,n=e.bannerHeight;if("bottom"!==t)return 0;var i=(void 0===n?0:n)+this.safeAreaBottom;if(this.game.world){var a=this.game.world,s=a.getPixelRatio(),r=a.getZoomRatio();return this.game.world.getPhysicPixels(i,s/r)}return i},t}(Phaser.Plugins.BasePlugin),R=k,O=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:O};var _=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),D=_,L=function(){function e(e,t,n){var i=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!i.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!i.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=n,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,s=(0,r.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),N=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new L(n.game,e,!1),n.setMusicVolume(n.isMuteAll?0:1)},n.initSound=function(e){n.soundManager=new L(n.game,e,!0),n.setSoundVolume(n.isMuteAll?0:1)},n}(0,c.Z)(t,e);var n=t.prototype;return n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,r.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.setMusicVolume(0),this.setSoundVolume(0)},n.unmuteAll=function(e){void 0===e&&(e=1),this.isMuteAll=!1,this.setMusicVolume(e),this.setSoundVolume(e)},t}(Phaser.Plugins.BasePlugin),M=N,G=n(38),F="AUTH_TOKEN_REQUEST",Z="AUTH_TOKEN_RECEIVED",U=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),Y=n(526),z=(0,Y.P1)([function(e){return e.auth.token}],(function(e){return e})),W=(0,Y.P1)([function(e){return e.auth.isRequesting}],(function(e){return e})),H=function(e){return{type:Z,payload:{token:e}}},K=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,s=n(),r=z(s),!W(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:F,payload:{}}),e.next=10,i.getPlayerToken();case 10:o=e.sent,t(H(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(H("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,a.tO)(new Error(e.t0.message||"Request token fail")),e.abrupt("return");case 24:(0,a.tO)(new U);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return z(this.state)},(0,G.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),V=K,j=n(23),X=n.n(j),q=n(26),Q=n.n(q),J=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},$=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=X()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(Q())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],s=a.name,r=a.image;if(r)e.scene.textures.get(s).key!==s&&e.scene.load.image(s,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign,l=e.strokeStyle;t.font=a+' 18VAG Rounded M Bold,nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),l&&(t.strokeStyle=l,t.strokeText(s,n,i)),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(a),h=l.getSourceImage(s);"__MISSING"===l.key&&c&&(h=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(h,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&J(e),e},t}(Phaser.Plugins.ScenePlugin),ee=$,te=n(40),ne=n.n(te),ie=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,c.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),ae=ie,se=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],re=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(ne()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,a=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,s.Z)(e,se);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=a,this.trackingSceneKeys=r,this.fpsTracker=new ae(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),oe=re,ce={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},le=n(24),he=n.n(le),ue=n(11),de=n.n(ue),pe=n(440),fe=n(28),ge=n.n(fe),me=n(52),ve=n.n(me),ye=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),Se=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),Ee=n(521),be=GameCore.Configs,Ae=be.AppId,we=be.Network,Te=function(e){if(!e.ok)throw new ye(null,{response:e})},Pe=function(){var e=window.game.auth.getToken();return{token:e,timeout:we.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},Ce=function(e,t,n,i){return(0,o.Z)(h().mark((function a(){var s,r,o,c,l;return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+Ae+"/"+t,r=new AbortController,n.signal=r.signal,o=setTimeout((function(){r.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=ve()(i)),a.next=8,fetch(s,n);case 8:return c=a.sent,clearTimeout(o),Te(c),a.next=13,c.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return l=a.t0,a.abrupt("return",l);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof ye)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new Se(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},Ie=function(){var e=(0,o.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof Se&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,Ee.qZ)(600);case 10:return e.next=12,Ie(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof Se)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=(0,o.Z)(h().mark((function e(t,n,i,a){var s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=we.Retries),e.prev=2,s=(0,r.Z)({},Pe(),n,{method:"GET"}),o=Ce(i,t,s),e.next=7,Ie(o,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Be=function(){var e=(0,o.Z)(h().mark((function e(t,n,i,a,s){var o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===s&&(s=we.Retries),e.prev=2,o=(0,r.Z)({},Pe(),i,{method:"POST"}),c=Ce(a,t,o,n),e.next=7,Ie(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}(),ke={score:0,settings:(0,r.Z)({},ce),userGuideDisplays:0,customFields:{diamond:300,lastReceiveGift:0}},Re=GameCore.Configs,Oe=Re.ApiHost,_e=Re.PlayerDataStoreUsingApi,De=function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_e){e.next=2;break}return e.abrupt("return",Le(t));case 2:return e.abrupt("return",Ne(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,xe("players?"+n,{},Oe);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.setDataAsync(t);case 2:return i=y()(n=X()(ke)).call(n,X()(t)),a=he()(i).call(i,(function(e,t){return ge()(i).call(i,e)===t})),e.next=6,GameSDK.player.getDataAsync(a);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=(function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_e){e.next=2;break}return e.abrupt("return",Me(t));case 2:return e.abrupt("return",Ge());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be("players/"+t+"/user-guide-displays/inc",{},{},Oe);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ge=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.incrementStatsAsync({userGuideDisplays:1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe="PLAYER_RECEIVED",Ze="PLAYER_DATA_UPDATE",Ue="PLAYER_SCORE_UPDATE",Ye="PLAYER_PROFILE_UPDATE",ze="PLAYER_SETTING_UPDATE",We="PLAYER_CONNECTED_PLAYERS_UPDATE",He=n(444),Ke=ce.sound,Ve=ce.music,je=ce.vibrate,Xe=ce.language,qe=ce.theme,Qe=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Ke,this.music=GameCore.Utils.Valid.isBoolean(i)?i:Ve,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:je,this.language=GameCore.Utils.Valid.isString(s)?s:Xe,this.theme=GameCore.Utils.Valid.isString(r)?r:qe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),Je=Qe,$e=ke.userGuideDisplays,et=ke.customFields,tt=ke.settings,nt=function(){function e(e){this.data=void 0;var t=e.settings,n=e.score,i=e.customFields,a=e.userGuideDisplays,s=GameCore.Utils.Valid.isNumber(n)&&n>0?n:0,r=GameCore.Utils.Valid.isNumber(a)?a:$e,o=GameCore.Utils.Valid.isObject(i)?i:et,c=tt;GameCore.Utils.Valid.isObject(t)&&(c=new Je(t).toObject()),this.data={score:s,userGuideDisplays:r,settings:c,customFields:o}}return e.prototype.toObject=function(){return this.data},e}(),it=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),at=n(15),st=n.n(at),rt=(0,Y.P1)([function(e){return e.player}],(function(e){return e})),ot=(0,Y.P1)([rt],(function(e){return e.playerId})),ct=(0,Y.P1)([rt],(function(e){return e.ASID})),lt=(0,Y.P1)([function(e){return e.player.data}],(function(e){return e})),ht=(0,Y.P1)([lt],(function(e){return e.settings})),ut=(0,Y.P1)([function(e){return e.player.connectedPlayers}],(function(e){return e})),dt=(0,Y.P1)([function(e){return e.player.isConnectedPlayersLoaded}],(function(e){return e})),pt=(0,Y.P1)([ut,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=X()(e);return st()(i).call(i,n,t+n)||[]})),ft=(0,Y.P1)([lt],(function(e){return e.score})),gt=(0,Y.P1)([lt],(function(e){return e.customFields})),mt=GameCore.Configs,vt=mt.AppId,yt=mt.Tutorial,St=mt.LanguageSupport,Et=mt.ThemeSupport,bt=mt.PlayerDataStore,At=function(e){return{type:We,payload:{connectedPlayers:e}}},wt=function(e,t){return function(n,i){try{var s,o=i(),c=ht(o);n({type:ze,payload:{name:e,value:t}});var l={settings:(0,r.Z)({},c,(s={},s[e]=t,s))};(0,pe.vk)(bt,l),De(l)}catch(h){(0,a.tO)(h)}}},Tt=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,o,c,l;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,i(Ct(o));case 4:c=s(),l=lt(c),De(l),n.next=14;break;case 9:if(n.prev=9,n.t0=n.catch(0),!(n.t0 instanceof it)){n.next=13;break}return n.abrupt("return");case 13:(0,a.tO)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Pt=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n,i){var s,r,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(Ct(s));case 4:r=i(),o=lt(r),De(o),t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(0),!(t.t0 instanceof it)){t.next=13;break}return t.abrupt("return");case 13:(0,a.tO)(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},Ct=function(e){return function(t){try{t({type:Ze,payload:{data:e}}),(0,pe.vk)(bt,e)}catch(n){(0,a.tO)(n)}}},It=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n,i){var s,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Ue,payload:{score:e}});case 3:De({score:e}),s=i(),r=lt(s),(0,pe.vk)(bt,r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,a.tO)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},xt=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!yt.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:i=window.game.facebook,s=n(),ot(s),i.data.set("userGuideDisplays",1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,a.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(e,t){this.game.storage.dispatch(function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:Fe,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}}(e,t))},n.updateData=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f,g,m,v,y,S,E,b,A,w,T,P,C,I;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n(),s=rt(i),r=s.playerId,o=s.name,c=s.photo,l=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,t({type:Ye,payload:{profile:{appId:vt,playerId:r,name:o,photo:c,locale:l,ASID:u}}}),e.next=11,De({appId:vt,playerId:r,name:o,photo:c,locale:l});case 11:if(d=e.sent,GameCore.Utils.Valid.isObject(d)){e.next=14;break}return e.abrupt("return");case 14:if(d.playerId===r){e.next=16;break}return e.abrupt("return");case 16:p=ht(i),f=p.theme,g=p.sound,m=p.music,v=p.vibrate,y=p.language,S=new nt(d).toObject(),E=S.settings,b=E.theme,A=E.music,w=E.sound,T=E.vibrate,P=E.language,C=y in St,I=f in Et,y===P&&C||(S.settings.language=P),!0===A&&m!==A&&(S.settings.music=A),!0===w&&g!==w&&(S.settings.sound=w),!0===T&&v!==T&&(S.settings.vibrate=T),f===b&&I||(S.settings.theme=b),t(Ct(S)),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),(0,a.tO)(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setScore=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(It(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(wt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Tt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateCustomFields=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Pt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.facebook,e.next=4,new(Q())((function(e,t){i.once("players",(function(t){e(t)})),i.once("playersfail",(function(){return t([])})),i.getPlayers()}));case 4:if(s=e.sent,r=function(e){return!!e},o=he()(n=de()(s).call(s,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new He.Z(t,n,i).toObject():null}))).call(n,r),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(At(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,a.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(At(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return rt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return ct(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ce,e)?ce[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getCoins=function(){var e=this.getCustomData("coin");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return ft(this.state)},n.getCustomData=function(e){var t=gt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return ut(this.state)},n.isConnectedPlayersLoaded=function(){return dt(this.state)},n.getConnectedPlayerIds=function(e,t){return pt(this.state,{limit:e,offset:t})},(0,G.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Bt=xt,kt=GameCore.Configs.ApiHost,Rt=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,xe("players?"+n,{},kt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ot="PROFILES_DATA_UPDATE",_t=(0,Y.P1)([function(e){return e.profile.data}],(function(e){return e})),Dt=(0,Y.P1)([function(e){return e.profile.profileIds}],(function(e){return e})),Lt=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n,i){var s,r,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=i(),r=Dt(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Rt({playerIds:o});case 8:c=t.sent,n({type:Ot,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,a.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Nt=function(e){function t(){return e.apply(this,arguments)||this}(0,c.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Lt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return _t(this.state)},(0,G.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Mt=Nt,Gt=n(165),Ft=n.n(Gt),Zt=["player","match"],Ut="null",Yt=GameCore.Configs.Rollbar,zt=Yt.UseMockup,Wt=Yt.FilterError,Ht=Yt.ListPlayerDevIds,Kt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){zt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s,r,o=null==e||null==(t=e.body)||null==(i=t.trace)?void 0:i.exception;o&&n.events.push(o);var c=(null==e||null==(a=e.body)||null==(s=a.trace)?void 0:s.frames)||[];(r=n.events).push.apply(r,c);var l=document.getElementById("popup-error");l||((l=document.createElement("div")).id="popup-error",document.body.appendChild(l)),l.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+ve()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',l.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var h=document.getElementById("close");h&&(h.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=Wt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(ge()(i).call(i,t)>=0)return!1;if(ge()(a).call(a,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var s=e.name,r=Wt.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(ge()(o).call(o,s)>=0)return!1;if(ge()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=Wt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(ge()(i).call(i,t)>=0)return!1;if(ge()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,a=(0,s.Z)(e,Zt);n.rollbar.configure({payload:{player:t,match:i,other:a}})}catch(r){}},n}(0,c.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Ft())({accessToken:Ut,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"4"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();ne()(Ht).call(Ht,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Vt=Kt,jt=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Xt=jt,qt=n(443),Qt=n(527),Jt=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),Qt.Z.registerObject(s.background),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(qt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),$t=Jt,en={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=$t,GameCore.Screens={Events:en};var tn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).events=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Xt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),nn=tn,an=n(332),sn=n.n(an),rn=n(522),on=n(523),cn=n(525),ln=n(524),hn={currentSceneKey:"",prevSceneKey:""};(0,ln.pV)();var un,dn,pn,fn,gn,mn,vn,yn,Sn,En,bn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},An=bn,wn={data:{}},Tn={friendListChallenged:[]},Pn={token:"",isRequesting:!1},Cn=((un={}).auth=function(e,t){return void 0===e&&(e=Pn),(0,ln.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case F:e.isRequesting=!0;break;case Z:e.token=i,e.isRequesting=!1}}}))},un),In=n(519),xn={ASID:"",playerId:"",name:"",photo:"",locale:"",data:{score:0,settings:ce,userGuideDisplays:0,customFields:{}},connectedPlayers:{},isConnectedPlayersLoaded:!1,isUserNew:!0},Bn=((dn={}).player=function(e,t){return void 0===e&&(e=xn),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,l=i.connectedPlayers,h=void 0===l?[]:l,u=i.profile;switch(t.type){case Fe:var d=i.playerId,p=i.name,f=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=f,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,In.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ye:var y=u.playerId,S=u.name,E=u.photo,b=u.locale,A=u.ASID;n.ASID=A,n.playerId=y,n.name=S,n.photo=E,n.locale=b;break;case Ue:n.data.score=c;break;case ze:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Ze:n.data=(0,In.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case We:if(n.isConnectedPlayersLoaded=!0,h.length<=0)break;var w=GameCore.Utils.Object.keyBy(h,"playerId");n.connectedPlayers=(0,In.TS)(e.connectedPlayers,w)}}}))},dn),kn=n(476),Rn=n.n(kn),On={data:{},profileIds:[]},_n=((pn={}).profile=function(e,t){return void 0===e&&(e=On),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,s=void 0===a?[]:a;if(t.type===Ot){var o,c,l=GameCore.Utils.Object.keyBy(s,"playerId"),h=X()(l);n.data=(0,In.TS)((0,r.Z)({},e.data),l),n.profileIds=y()(o=[]).call(o,new(Rn())(y()(c=[]).call(c,e.profileIds,h)))}}}))},pn),Dn="MATCH_GAMEPLAY_INITIALIZE",Ln="MATCH_GAMEPLAY_START",Nn="MATCH_GAMEPLAY_FINISH",Mn="MATCH_GAMEPLAY_UPDATE",Gn="MATCH_GAMEPLAY_RESCUE",Fn="MATCH_STATS_DATA_CLEAR",Zn="MATCH_STATS_DATA_UPDATE",Un="MATCH_STATS_CURRENT_UPDATE",Yn="MATCH_SINGLE_CREATE_REQUEST",zn="MATCH_SINGLE_DETAIL_REQUEST",Wn="MATCH_SINGLE_DATA_RECEIVED",Hn="MATCH_SINGLE_DATA_CLEAR",Kn="MATCH_CHALLENGE_JOIN_REQUEST",Vn="MATCH_CHALLENGE_CREATE_REQUEST",jn="MATCH_CHALLENGE_FINISH_REQUEST",Xn="MATCH_CHALLENGE_CONTINUE_REQUEST",qn="MATCH_CHALLENGE_DATA_RECEIVED",Qn="MATCH_CHALLENGE_DATA_CLEAR",Jn="MATCH_GROUP_CREATE_REQUEST",$n="MATCH_GROUP_FINISH_REQUEST",ei="MATCH_ONLINE_CREATE_REQUEST",ti="MATCH_ONLINE_DATA_RECEIVED",ni="MATCH_ONLINE_STATS_UPDATE",ii="MATCH_ONLINE_FINISH_REQUEST",ai="MATCH_ONLINE_DATA_CLEAR",si="MATCH_AUTO_PLAY_SINGLE",ri="open",oi="active",ci="finished",li={mode:"",status:ri,rescued:0,startAt:0,finishAt:0},hi={single:{_id:"",data:{fen:""},playerId:"",status:ri},group:{status:ri,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:ri,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:ri,players:{}},updateAt:0,isRequesting:!1,isAutoStartSingleMode:!1},ui={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},di=((fn={}).match=(0,rn.UY)({gameplay:function(e,t){return void 0===e&&(e=li),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status;switch(t.type){case Dn:n.status=ri,n.mode=li.mode,n.rescued=li.rescued,n.startAt=li.startAt,n.finishAt=li.finishAt,n.opponentInfo=li.opponentInfo;break;case Ln:n.mode=a,n.status=oi,n.rescued=li.rescued,n.startAt=Date.now();break;case Mn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status,n.startAt=Date.now();break;case Nn:n.status=ci,n.finishAt=Date.now();break;case Gn:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=hi),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,s=i.opponentInfo,o=i.players,c=i.enable;switch(t.type){case Yn:case zn:case Kn:case jn:case ei:n.isRequesting=!0;break;case"MATCH_SINGLE_MOVE_UPDATED":n.single=(0,r.Z)({},e.single,a),n.updateAt=Date.now();break;case Wn:n.isRequesting=!1,n.single=a||hi.single;break;case Hn:n.isRequesting=!1,n.single=hi.single;break;case Vn:case Xn:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case qn:n.isRequesting=!1,n.challenge=(0,r.Z)({},a||hi.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Qn:n.isRequesting=!1,n.challenge=hi.challenge;break;case Jn:n.group.status=oi,s&&(n.group.opponentInfo=s);break;case $n:n.group.status=ci;break;case ai:n.online.status=hi.online.status,n.online.players=hi.online.players;break;case ti:n.online.status=oi,n.online.players=o;break;case ii:n.online.status=ci;break;case si:n.isAutoStartSingleMode=c}}}))},stats:function(e,t){return void 0===e&&(e=ui),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,s=i.stats,o=i.match,c=i.current,l=i.players,h=i.leaders;switch(t.type){case Fn:delete n.data[a],n.current=ui.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=ui.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=s,n.isRequesting=!1;break;case Zn:n.data[a]=s;break;case Un:n.current=(0,In.TS)((0,r.Z)({},e.current),s);break;case ti:X()(l).forEach((function(e){n.data[e]={score:0}}));break;case ni:h.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case qn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,f=u.whitePlayerId,g=u.whitePlayerScore,m=u.whitePlayerLevel,v=u.blackPlayerLevel;if(!d||!f)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[f]={score:g,level:m}}}}))}}),fn),pi="TOURNAMENT_ACTIVE",fi="TOURNAMENT_REQUEST",gi="TOURNAMENT_RECEIVED",mi={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},vi=((gn={}).tournament=function(e,t){return void 0===e&&(e=mi),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case pi:n.active=!0,n.tournamentId=r;break;case fi:n.isRequesting=!0;break;case gi:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},gn),yi=n(66),Si=n.n(yi),Ei=n(53),bi=n.n(Ei),Ai="LEADERBOARD_DATA_REQUEST",wi="LEADERBOARD_DATA_UPDATE",Ti="LEADERBOARD_DATA_CLEAR",Pi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Ci=((mn={}).leaderboards=function(e,t){return void 0===e&&(e=Pi),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case Ai:e.type!==s&&0===c&&(n.leaders=Pi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=s,n.limit=o,n.offset=c;break;case wi:if(n.isRequesting=!1,e.type!==s)break;var h=GameCore.Utils.Json.clone((0,r.Z)({},e.leaders,l)),u=Si()(h),d=he()(u).call(u,(function(e){return!!e.name&&!!e.photo}));bi()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Ti:n.isRequesting=!1,n.type=Pi.type,n.limit=Pi.limit,n.offset=Pi.offset,n.leaders=Pi.leaders,n.leaderboardId=Pi.leaderboardId}}}))},mn),Ii="MISSIONS_DATA_REQUEST",xi="MISSIONS_DATA_RECEIVE",Bi="MISSION_UPDATE",ki="MISSION_COMPLETED",Ri={mission:null,missions:null,isRequesting:!1},Oi=((vn={}).missions=function(e,t){return void 0===e&&(e=Ri),(0,ln.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,l=s.missions;switch(t.type){case Ii:n.isRequesting=!0;break;case xi:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var h=e.missions[r];n.mission={name:r,process:{},require:h.require,reward:h.reward},X()(h.require).forEach((function(e){n.mission.process[e]=0}));break;case Bi:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case ki:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},vn),_i="DAILY_TASKS_DATA_REQUEST",Di="DAILY_TASKS_DATA_RECEIVE",Li="DAILY_TASKS_PROCESS_UPDATE",Ni="DAILY_TASK_VALUE_ADD",Mi="DAILY_TASK_REWARDED",Gi="DAILY_TASKS_SEEN",Fi="DAILY_TASK_FINISHED",Zi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Ui=((yn={}).dailyTasks=function(e,t){return void 0===e&&(e=Zi),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case _i:n.isRequesting=!0;break;case Di:n.isRequesting=!1,n.tasks=o;break;case Li:n.process=c;break;case Ni:if(!e.process[a])break;n.process[a][s]+=r;break;case Mi:if(!e.process[a])break;n.process[a].rewarded=!0;break;case Gi:n.isNotice=!1;break;case Fi:n.isNotice=!0}}}))},yn),Yi="DAILY_REWARDS_REQUEST",zi="DAILY_REWARDS_RECEIVE",Wi={rewards:[],isRequesting:!1},Hi=((Sn={}).dailyRewards=function(e,t){return void 0===e&&(e=Wi),(0,ln.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case Yi:e.isRequesting=!0;break;case zi:e.isRequesting=!1,e.rewards=i}}}))},Sn),Ki="RECEIVE_SPIN",Vi="UPDATE_SPIN",ji={spin:0,lastRewarded:0},Xi=((En={}).luckySpin=function(e,t){return void 0===e&&(e=ji),(0,ln.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.spin,a=n.lastRewarded;switch(t.type){case Ki:e.spin=i,e.lastRewarded=a;break;case Vi:e.spin=i}}}))},En),qi=(0,rn.UY)((0,r.Z)({scene:function(e,t){return void 0===e&&(e=hn),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===cn.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=bn),(0,ln.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case cn.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case cn.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case cn.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=wn),(0,ln.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case cn.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case cn.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))},friendChallenge:function(e,t){return void 0===e&&(e=Tn),(0,ln.ZP)(e,(function(e){var n,i=t.payload;if(i){var a=i.opponentId,s=void 0===a?"":a;switch(t.type){case cn.x2:if(!s||ge()(n=e.friendListChallenged).call(n,s)>=0)break;e.friendListChallenged.push(s)}}}))}},Cn,Bn,_n,di,vi,Ci,Oi,Ui,Hi,Xi)),Qi=qi,Ji=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,rn.qC),$i=function(e){var t=Ji((0,rn.md)(on.Z));return(0,rn.MT)(Qi,e,t)},ea=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=sn()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=$i({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){this.initiator.initContext(),this.initiator.initPlayer()},t}(Phaser.Plugins.BasePlugin),ta=ea,na=n(432),ia=n.n(na),aa=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,c.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}ia().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r="";switch(i){case"opentype":r=".otf";break;case"truetype":r=".ttf";break;case"woff":r=".woff"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+r+'") format("'+i+'"); }';s.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),sa=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.addFont=function(e){var t=new aa(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ra=sa,oa=n(520),ca=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,oa.D)((function(){n.resize()}),300),n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize(),this.initDesktopBg()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a);var s=Math.min(this.getScreenWidth()-this.game.canvas.offsetWidth,0)*this.getWorldSize().width/this.game.canvas.offsetWidth;this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,o=a.height;n.setZoom(i),n.centerOn(r/2-s/2,o/2)}}))},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio();else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.game.world.isLandscape()?Math.max(1.5,GameCore.Utils.Device.pixelRatio()):this.getPixelRatio(),n=this.getScreenWidth(),i=this.getScreenHeight();return n=this.isScreenSmallerRatio(e)?e*i:i*e,{width:n*=t,height:i*=t}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},n.initDesktopBg=function(){if(this.isLandscape()){var e=document.getElementById("app"),t=this.game.canvas;t&&(t.style.backgroundImage="url('./assets/images/bg.jpg')"),e&&(e.style.backgroundImage="url('./assets/images/bg.jpg')")}},t}(Phaser.Plugins.BasePlugin),la=ca,ha=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||An.contextId,this.contextType=t||An.contextType,this.entryPointData=n||An.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ua=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),da="share_invite",pa="tournament",fa="challenge_friend_match",ga="matching_group_match",ma=n(445),va=new He.Z("10","Your Friend",ma.Z.AVATAR.FILE).toObject(),ya="single",Sa="challenge-friends",Ea="matching-group",ba="tournaments",Aa="online",wa=(0,Y.P1)([function(e){return e.context}],(function(e){return e})),Ta=(0,Y.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Pa=function(e,t){return{type:cn.fJ,payload:{contextId:e,contextType:t}}},Ca=function(e){return function(t){t({type:cn.EH,payload:{gameMode:e}}),(0,a.sw)("game-mode",e)}},Ia=GameCore.Configs.PlayerDataStore,xa=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ha(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:cn.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=function(){var e=t.getPlayerInfo(),n=t.getPlayerDataLocal();t.game.player.receiveData(e,n)},this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new ua(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new He.Z(e,t,n,i).toObject()}catch(a){return new He.Z("123","You").toObject()}},this.getPlayerDataLocal=function(){try{var e=(0,pe.Th)(Ia);return GameCore.Utils.Valid.isObject(e)?new nt(e).toObject():null}catch(t){return null}},this.game=e},Ba=n(528),ka=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return ge()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,r.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,s=void 0!==a&&a;this.data=t,this.supportedLanguages=X()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Ra={en:JSON.parse('{"Text":{"on":"On","off":"Off","touchContinue":"Touch anywhere\\nto continue","secondChance":"Second\\nChance?","loadingAds":"Loading ads\u2026","loading":"Loading\u2026","noAds":"No ads to display","noRewarded":"Sorry, No Rewards!\\nYou have cancelled the ad!","guide":"How to play Bubble Fall","leaderBoardEmpty":"Leaderboard is empty!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),ru:JSON.parse('{"Text":{"on":"\u0412\u043a\u043b","off":"\u0412\u044b\u043a\u043b","touchContinue":"\u041a\u041e\u0421\u041d\u0418\u0422\u0415\u0421\u042c \u042d\u041a\u0420\u0410\u041d\u0410,\\n\u0427\u0422\u041e\u0411\u042b \u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","secondChance":"\u0412\u0442\u043e\u0440\u043e\u0439\\n\u0428\u0430\u043d\u0441?","loadingAds":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","loading":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","noAds":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b\\n\u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","noRewarded":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!\\n\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","guide":"\u041a\u0410\u041a \u0418\u0413\u0420\u0410\u0422\u042c \u0412 BUBBLE FALL","leaderBoardEmpty":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412 \u041f\u0423\u0421\u0422\u0410!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),pt:JSON.parse('{"Text":{"on":"Ligado","off":"Desligado","touchContinue":"Toca em qualquer lugar \\npara continuar","secondChance":"Segunda \\noportunidade?","loadingAds":"A carregar an\xfancios...","loading":"A carregar...","noAds":"Sem an\xfancios a exibir","noRewarded":"Desculpa, n\xe3o h\xe1 recompensas! \\nCancelaste o an\xfancio!","guide":"Como jogar Bubble Fall","leaderBoardEmpty":"Placar est\xe1 vazio!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),es:JSON.parse('{"Text":{"on":"Encendido","off":"Apagado","touchContinue":"Toca en cualquier \\nlugar para continuar","secondChance":"\xbfSegunda \\noportunidad?","loadingAds":"Cargando anuncios...","loading":"Cargando...","noAds":"No hay anuncios para mostrar","noRewarded":"Lo sentimos, no hay recompensas. \\n\xa1Has cancelado el anuncio!","guide":"C\xf3mo jugar a Bubble Fall","leaderBoardEmpty":"\xa1Tabla de l\xedderes est\xe1 vac\xeda!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),hi:JSON.parse('{"Text":{"on":"\u091a\u093e\u0932\u0942","off":"\u092c\u0902\u0926","touchContinue":"\u091c\u093e\u0930\u0940 \u0930\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0938\u094d\u0915\u094d\u0930\u0940\u0928 \\n\u092a\u0930 \u0915\u0939\u0940\u0902 \u092d\u0940 \u091f\u091a \u0915\u0930\u0947\u0902","secondChance":"\u0926\u0942\u0938\u0930\u093e \u092e\u094c\u0915\u093e?","loadingAds":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","loading":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","noAds":"\u0921\u093f\u0938\u094d\u092a\u094d\u0932\u0947 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \\n\u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902","noRewarded":"\u092e\u093e\u095e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902! \u0906\u092a\u0928\u0947 \\n\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u094b \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","guide":"Bubble Fall \u0916\u0947\u0932\u0928\u0947 \u0915\u093e \u0924\u0930\u0940\u0915\u093e","leaderBoardEmpty":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),tr:JSON.parse('{"Text":{"on":"A\xc7IK","off":"KAPALI","touchContinue":"Devam etmek i\xe7in herhangi \\nbir yere dokunun","secondChance":"\u0130kinci \\n\u015eans m\u0131?","loadingAds":"REKLAM Y\xdcKLEN\u0130YOR...","loading":"Y\xdcKLEN\u0130YOR\u2026","noAds":"G\xd6R\xdcNT\xdcLENECEK \\nREKLAM YOK","noRewarded":"\xdczg\xfcn\xfcm, \xd6d\xfcl Yok! \\nReklam\u0131 iptal ettin!","guide":"Bubble Fall nas\u0131l oynan\u0131r","leaderBoardEmpty":"Lider tablosu bo\u015f!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),ja:JSON.parse('{"Text":{"on":"\u30aa\u30f3","off":"\u30aa\u30d5","touchContinue":"\u3069\u3053\u304b\u3092\u30bf\u30c3\u30c1\u3057\\n\u3066\u7d9a\u3051\u307e\u3059","secondChance":"\u30bb\u30ab\u30f3\u30c9\\n\u30c1\u30e3\u30f3\u30b9?","loadingAds":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","loading":"\u8aad\u307f\u8fbc\u307f\u4e2d...","noAds":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\\n\u308a\u307e\u305b\u3093","noRewarded":"\u3054\u3081\u3093\u306a\u3055\u3044\u3001\u5831\u916c\u306f\u3042\u308a\u307e\u305b\u3093\uff01\\n\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3057\u305f\uff01","guide":"\u3069\u306e\u3088\u3046\u306b\u30d7\u30ec\u30a4\u3059\u308b\u304b","leaderBoardEmpty":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3067\u3059\uff01"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),fr:JSON.parse('{"Text":{"on":"On","off":"Off","touchContinue":"Appuyez n\u2019importe o\xf9 pour continuer","secondChance":"Deuxi\xe8me \\nchance ?","loadingAds":"Chargement des publicit\xe9s...","loading":"Chargement...","noAds":"Aucune publicit\xe9 \xe0 afficher","noRewarded":"D\xe9sol\xe9, aucune r\xe9compense ! \\nVous avez annul\xe9 la publicit\xe9 !","guide":"Comment jouer \xe0 Bubble Fall","leaderBoardEmpty":"Le tableau des leaders est vide !"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),id:JSON.parse('{"Text":{"on":"Aktif","off":"Nonaktif","touchContinue":"Sentuh di mana saja \\nuntuk melanjutkan","secondChance":"Kesempatan \\nKedua?","loadingAds":"Memuat iklan\u2026","loading":"Memuat\u2026","noAds":"Tidak ada iklan untuk ditampilkan","noRewarded":"Maaf, Hadiah Habis! Kamu telah \\nmembatalkan iklan!","guide":"Cara bermain Bubble Fall","leaderBoardEmpty":"Papan peringkat kosong!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),de:JSON.parse('{"Text":{"on":"An","off":"Aus","touchContinue":"Zum Fortfahren irgendwo tippen","secondChance":"Zweite \\nChance?","loadingAds":"Lade Werbung ...","loading":"Laden \u2026","noAds":"Keine Werbung verf\xfcgbar","noRewarded":"Tut uns leid, keine Belohnungen! Du hast \\ndie Werbung abgebrochen!","guide":"Wie man Bubble Fall spielt","leaderBoardEmpty":"Die Bestenliste ist leer!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),it:JSON.parse('{"Text":{"on":"Attivato","off":"Disattivato","touchContinue":"Tocca un punto qualsiasi \\nper continuare","secondChance":"Seconda \\npossibilit\xe0?","loadingAds":"Caricamento annunci\u2026","loading":"Caricamento...","noAds":"Nessun annuncio da visualizzare","noRewarded":"Spiacente, nessuna ricompensa! Hai \\ncancellato l\'annuncio!","guide":"Come si gioca a Bubble Fall","leaderBoardEmpty":"La classifica \xe8 vuota!"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}'),zh:JSON.parse('{"Text":{"on":"\u5f00\u542f","off":"\u5173\u95ed","touchContinue":"\u70b9\u51fb\u4efb\u4f55\u5730\u65b9\u6765\u7ee7\u7eed","secondChance":"\u83b7\u5f97\u7b2c\\n\u4e8c\u6b21\u673a\u4f1a\uff1f","loadingAds":"\u52a0\u8f7d\u5e7f\u544a\u4e2d\u2026\u2026","loading":"\u6b63\u5728\u52a0\u8f7d\u2026\u2026","noAds":"\u65e0\u53ef\u64ad\u653e\u7684\u5e7f\u544a","noRewarded":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1\u4f60\u53d6\\n\u6d88\u4e86\u5e7f\u544a\uff01","guide":"\u5982\u4f55\u6e38\u73a9\u300a\u6ce1\u6ce1\u5927\u5e08\u300b","leaderBoardEmpty":"\u6392\u884c\u699c\u4e3a\u7a7a\uff01"},"Texture":{"play":"play","settings":"settings","continue":"continue","replay":"replay","replayGreen":"replay-green","leaderboard":"leaderboard","yourScore":"your-score","highScore":"high-score","skip":"skip","congratulation":"congratulation","close":"close","ok":"ok"}}')},Oa=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,r.Z)({data:Ra,locale:"en",upperCaseText:!1},t))},t}(ka),_a=Oa,Da=[qt._.SCREEN_OPEN],La=function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,r.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=a,i}(0,c.Z)(t,e);var n=t.prototype;return n.processEvent=function(e,t,n){if(!(ge()(Da).call(Da,e)>=0)){var i=this.formatEventName(e),a=t?(0,r.Z)({},t):{};a=n?(0,r.Z)({},a,{value:n}):a,a=(0,r.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(qt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(qt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(qt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(qt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowInterstitialAd=function(e){this.processEvent(qt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(qt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(qt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(qt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(qt._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.processPageView=function(e){var t="/"+this.getGameplayMode()+"/"+e;this.currentPath=t,gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Ta(e)},n.formatEventName=function(e){return"string"!==typeof e?"unknown":e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},t}(GameCore.Analytics.BaseAnalytics),Na="G-FZNR00BSHF",Ma="UA-261653005-1",Ga=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,y()(t=[this]).call(t,s))||this).progressFbTimeEvent=void 0,n.percentProgressFb=0,n.startGame=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:n.storage.syncStore(),n.configureSentry(),n.configureRollbar(),n.detectGameMode(),n.initAnalytics(),n.analytics.event(qt._.LOAD_START),n.scene.launch(Ba.C.GLOBAL_SCENE),n.scene.switch(Ba.C.LOAD_SCENE),n.analytics.pageview("load-scene"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,a.tO)(e.t0);case 17:return e.prev=17,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Ba.C.BOOT_SCENE),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[0,14,17,21]])}))),n}(0,c.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame(),this.ads.showBannerAdAsync({position:"right"}).catch((function(e){}))},n.loadingProgressFb=function(){var e=this;try{this.percentProgressFb=30,this.progressFbTimeEvent=this.time.addEvent({delay:50,callback:function(){e.facebook.setLoadingProgress(Math.round(e.percentProgressFb)),e.percentProgressFb+=.3},repeat:100})}catch(t){}},n.finishLoadingProgressFb=function(){try{this.progressFbTimeEvent.remove(),this.registry.set("PercentProgressFb",Math.round(this.percentProgressFb))}catch(e){}},n.configureSentry=function(){var e=this.player.getPlayer();(0,a.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){this.storage.dispatch((function(e,t){var n,i=t(),a=wa(i),s=window.game.player.getPlayerId(),r=a.contextId,o=a.entryPointData||{},c=o.type,l=o.matchId,h=o.playerId,u=o.opponentId,d=void 0===u?va.playerId:u,p=o.tournamentContextId,f=s===h,g=d===va.playerId||ne()(n=[d,h]).call(n,s),m=ya;!r||void 0!==c&&c!==pa||(m=ba),c===pa&&p&&(m=ba),r&&c===da&&!f&&(m=Sa),l&&r&&g&&c===fa&&(m=Sa),r&&c===ga&&(m=Ea),e(Ca(m))}))},n.initAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new La(this.game,{userId:e,trackingId:Ma,measuringId:Na,version:"4"}))},t}(Phaser.Scene),Fa=Ga,Za=n(544),Ua=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(Ba.C.GAME_SCENE)},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Za.Z);var Ya=Ua,za=n(536),Wa=n(83),Ha=n.n(Wa),Ka=n(116),Va=n.n(Ka),ja=n(540),Xa=n(532),qa=n(530),Qa=n(546),Ja=n(561),$a=n(556),es=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),ts=es,ns="global",is="friend",as=GameCore.Configs,ss=as.ApiHost,rs=as.OtherHost,os=as.LeadersBoard,cs=os.Prefix,ls=os.LeaderboardId,hs=os.Name,us=cs+"/"+ls+"/leaders",ds=cs+"/"+ls+"/players",ps=function(e){var t="";return ls?(e===ns?t=us:e===is&&(t=ds),t):t},fs=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=de()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),s=GameCore.Utils.String.params({playerIds:i}),e.next=5,xe("players?"+s,{},ss);case 5:return o=e.sent,c=de()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,r.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gs=function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ls){e.next=3;break}return e.abrupt("return",ms(t));case 3:return e.abrupt("return",vs(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ms=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ps(ns)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,xe(i+"?"+a,{},rs);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",fs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vs=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hs);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ys=function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==ls){e.next=3;break}return e.abrupt("return",Ss(t));case 3:return e.abrupt("return",Es(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ss=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=ps(is)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,xe(i+"?"+a,{},rs);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",fs(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Es=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(hs);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bs=function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==ls){e.next=2;break}return e.abrupt("return",As(t));case 2:return e.abrupt("return",ws());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),As=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=ps(is)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,xe(i+"?"+a,{},rs);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return n=fs(r)[0],e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ws=function(){var e=(0,o.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hs);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ts=function(){var e=(0,o.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==ls){e.next=2;break}return e.abrupt("return",Ps(t,n));case 2:return e.abrupt("return",Cs(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ps=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be("leaderboards/"+ls+"/players/"+t,{score:n},{},rs);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Cs=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(hs);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),xs=Is,Bs=function(e){return e.match},ks=(0,Y.P1)([function(e){return Bs(e).gameplay.mode}],(function(e){return e})),Rs=((0,Y.P1)([function(e){return Bs(e).gameplay.status}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).gameplay.rescued}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).gameplay.startAt}],(function(e){return e}))),Os=(0,Y.P1)([function(e){return Bs(e).gameplay.finishAt}],(function(e){return e})),_s=n(31),Ds=n.n(_s),Ls=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),Ns=Ls,Ms=GameCore.Configs,Gs=Ms.AppId,Fs=Ms.OtherHost,Zs=Ms.LeadersBoard,Us=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:Gs,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!Zs.UseMock){e.next=5;break}return e.next=4,(0,Ee.qZ)(1e3);case 4:return e.abrupt("return",(0,r.Z)({},n,t,{_id:Zs.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,Be("leaderboards",(0,r.Z)({},n,t),{},Fs);case 8:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ys=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a,s,r,o,c,l,u,d,p,f,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!Zs.UseMock){e.next=7;break}return e.next=5,(0,Ee.qZ)(1e3);case 5:return o=(r=n).limit,c=void 0===o?10:o,l=r.offset,u=void 0===l?0:l,e.abrupt("return",de()(a=Ds()(s=new Array(c)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(u+1);return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())}})));case 7:return d=GameCore.Utils.String.params(n),p="leaderboards/"+t+"/leaders",e.next=11,xe(p+"?"+d,{},Fs);case 11:if((f=e.sent)&&(null==f||!f.error)){e.next=14;break}throw new Ns;case 14:if(!((g=(null==f?void 0:f.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=g,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zs=function(){var e=(0,o.Z)(h().mark((function e(t,n,i){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be("leaderboards/"+t+"/players/"+n,{score:i},{},Fs);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),Ws=GameCore.Configs.Tournament.UseLeaderboard,Hs=function(e){return{type:pi,payload:{tournamentId:e}}},Ks=function(e){return{type:gi,payload:{score:e}}},Vs=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,s,r,o,c,l,u,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game.facebook,i=t.playerId,s=t.playerName,r=t.score,o=t.autoStartGame,c=s+"'s Tournament",l=GameCore.Utils.String.generateObjectId(),u={playerId:i,playerName:s,leaderboardId:l},e.next=8,n.createTournamentAsync(r,u);case 8:return d=e.sent,p=d.getID(),o&&(window.game.storage.dispatch(Hs(p)),window.game.storage.dispatch(zo())),e.next=13,Us({_id:l,createdBy:i,name:p,description:c,expireTime:6048e5});case 13:if(e.sent._id!==l){e.next=17;break}return e.next=17,zs(l,i,r);case 17:e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(0),"INVALID_OPERATION"!==(null==e.t0?void 0:e.t0.code)){e.next=23;break}throw new Error("Tournament is not available");case 23:(0,a.tO)(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),js=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.facebook,a=n.player,e.next=3,Xs();case 3:return s=e.sent,r=a.getPlayer(),o=r.playerId,c=r.name,s&&zs(s,o,t),e.next=8,i.tournament.shareAsync({score:t,data:{type:pa,playerId:o,playerName:c}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xs=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),qs=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n,i){var a,s,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i(),r=ks(s),ne()(a=[ya,ba]).call(a,r)){t.next=4;break}return t.abrupt("return");case 4:if(n({type:fi,payload:{}}),!Ws){t.next=10;break}return t.next=8,Qs(e);case 8:t.next=12;break;case 10:return t.next=12,ar(e);case 12:n(Ks(e));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Qs=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getPlayer(),r=s.playerId,o=s.name,e.prev=2,e.next=5,a.getTournamentAsync();case 5:return e.next=7,js(t);case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=15;break}return c={playerId:r,playerName:o,score:t,autoStartGame:!1},e.next=15,Vs(c);case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}}),e,null,[[2,9,15,17]])})));return function(t){return e.apply(this,arguments)}}(),Js=0,$s=!1,er=0,tr=!1,nr=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(tr||er>1)&&Math.random()<.33},ir=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!($s||Js>1)&&Math.random()<.33},ar=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!ir(t,s)){e.next=12;break}return Js+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:$s=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=24;break}if(nr(t,s)){e.next=21;break}return e.abrupt("return");case 21:return er+=1,e.next=24,a.createTournamentAsync(t).then((function(){tr=!0})).catch((function(e){}));case 24:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),sr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),rr=sr,or=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),cr=or,lr={COLLECT_BUBBLES:{ID:"collect-bubbles",EVENT:"COLLECT_BUBBLES"},COMPLETE_GAMES:{ID:"complete-games",EVENT:"COMPLETE_GAME"},INVITE_FRIENDS:{ID:"invite-friends",EVENT:"INVITED_FRIENDS"},COLLECT_BOMBS:{ID:"collect-bombs",EVENT:"COLLECT_BOMBS"},REACH_TARGET_POINTS:{ID:"reach-target-points",EVENT:"REACH_TARGET_POINTS"},GET_RAINBOW_BUBBLE:{ID:"get-rainbow-bubble",EVENT:"GET_RAINBOW_BUBBLE"},USE_RESCUE:{ID:"use-rescue",EVENT:"USE_RESCUE"},DROP_BUBBLES:{ID:"drop-bubbles",EVENT:"DROP_BUBBLES"},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},hr=function(e,t){return t.playerId},ur=(0,Y.P1)([function(e){return Bs(e).match.isAutoStartSingleMode}],(function(e){return e})),dr=((0,Y.P1)([function(e){return Bs(e).match.isRequesting}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).match.single}],(function(e){return e}))),pr=(0,Y.P1)([function(e){return Bs(e).match.single._id}],(function(e){return e})),fr=(0,Y.P1)([function(e){return Bs(e).match.single.score}],(function(e){return e||0})),gr=((0,Y.P1)([function(e){return Bs(e).match.single.level}],(function(e){return e||0})),(0,Y.P1)([function(e){var t;return null==(t=Bs(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,Y.P1)([function(e){var t;return null==(t=Bs(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,Y.P1)([function(e){return Bs(e).match.single.status}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).match.single.playerId}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).match.challenge}],(function(e){return e}))),mr=(0,Y.P1)([function(e){return Bs(e).match.challenge._id}],(function(e){return e})),vr=(0,Y.P1)([function(e){return Bs(e).match.challenge.status}],(function(e){return e})),yr=(0,Y.P1)([function(e){return Bs(e).match.challenge.opponentInfo}],(function(e){return e})),Sr=((0,Y.P1)([function(e){return Bs(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,Y.P1)([function(e){return Bs(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,Y.P1)([gr,hr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,Y.P1)([gr,hr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:va.playerId}))),Er=(0,Y.P1)([gr,hr],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),br=(0,Y.P1)([gr,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),Ar=(0,Y.P1)([function(e){return Bs(e).match.group.opponentInfo}],(function(e){return e})),wr=(0,Y.P1)([function(e){return Bs(e).match.online.players}],(function(e){return e})),Tr=(0,Y.P1)([function(e){return Bs(e).stats.data}],(function(e){return e})),Pr=(0,Y.P1)([function(e){return Bs(e).stats.current}],(function(e){return e})),Cr=((0,Y.P1)([function(e){return Bs(e).stats.isRequesting}],(function(e){return e})),(0,Y.P1)([function(e){return e.messages.data}],(function(e){return e}))),Ir=(0,Y.P1)([Cr,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),xr=n(362),Br=new(n.n(xr)()),kr=function(e){if("string"!==typeof e||!e)throw new cr(null,{imageShare:e})},Rr=function(){return(0,o.Z)(h().mark((function e(){var t,n,i,s,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,s=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),e.next=5,Or();case 5:return o=e.sent,kr(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,s.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:da}});case 10:i.event(qt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(qt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,a.tO)(e.t0);case 17:return e.prev=17,r.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Or=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,r,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,l=Dr({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_r=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c,l,u,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Tr(t),r=i.getPlayer(),o=r.playerId,c=r.photo,l=s[o]||{},u=l.score,d=Dr({playerId:o,playerPhoto:c,playerScore:u})){e.next=8;break}return e.abrupt("return");case 8:return p={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(p);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dr=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.jpg",width:952,height:492},avatar:{name:""+n,type:"image",x:101,y:140,image:a,width:207,height:207,fallbackWithImage:ma.Z.AVATAR.KEY},avatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:84,y:127,image:"./assets/wideframes/avatar-frame.png",width:242,height:243},crown:{name:"wide-frame-crown",type:"image",x:58,y:78,image:"./assets/wideframes/crown.png",width:85,height:73},playerScore:{type:"text",x:345,y:350,font:"400 80px",fillStyle:"#ffffff",text:""+r,textAlign:"left",lineWidth:6,strokeStyle:"#855dca"}}},Lr=function(){return(0,o.Z)(h().mark((function e(){var t,n,i,s,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,s=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),e.next=5,Nr();case 5:return o=e.sent,kr(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,s.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:da}});case 10:i.event(qt._.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(qt._.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,a.tO)(e.t0);case 17:return e.prev=17,r.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Nr=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.name,o=a.photo,c=a.data,l=(c||{}).score,u=Mr({playerId:s,playerName:r,playerPhoto:o,playerScore:l})){e.next=7;break}return e.abrupt("return");case 7:return d={name:"share-leaderboard",width:750,height:1e3,renderOptions:u},e.next=10,i.frameCapture.capture(d);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mr=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3},avatar:{name:""+n,type:"image",x:253,y:345,image:a,width:245,height:245,fallbackWithImage:ma.Z.AVATAR.KEY},avatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:233,y:332,image:"./assets/wideframes/avatar-frame.png",width:286,height:288},playerScore:{type:"text",x:374,y:137,font:"400 60px",fillStyle:"#855dca",text:""+r,textAlign:"left"}}},Gr=function(){return function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,s=i.player,r=i.analytics,o=i.facebook,c=i.globalScene,e.prev=1,c.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),l=n(),e.next=6,Fr(l);case 6:return u=e.sent,kr(u),d=s.getPlayer(),p=d.playerId,f=d.name,g=d.photo,e.next=11,o.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:u||"",data:{playerId:p,playerName:f,playerPhoto:g,type:da}});case 11:r.event(qt._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),r.event(qt._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,a.tO)(e.t0);case 18:return e.prev=18,c.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},Fr=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c,l,u,d,p,f,g,m,v,y,S,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Tr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=yr(t),u=l.playerId,d=l.photo,p=Er(t,{playerId:c}),f=br(t,{opponentId:u}),g=s[c]||{},m=g.score,v=s[u]||{},y=v.score,S=Yr({playerId:c,playerPhoto:o,playerScore:m,opponentId:u,opponentPhoto:d,opponentScore:y,isPlayerFinished:p,isOpponentFinished:f})){e.next=12;break}return e.abrupt("return");case 12:return E={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(E);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zr=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c,l,u,d,p,f,g,m,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Tr(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=Ar(t),u=l.playerId,d=l.photo,p=l.score,f=s[c]||{},g=f.score,m=Ur({playerId:c,playerPhoto:o,playerScore:g,opponentId:u,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ur=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,h=void 0===l?"":l,u=e.opponentScore;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r||"string"!==typeof c||"string"!==typeof h||"number"!==typeof(void 0===u?0:u)?null:{wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492},leftPhoto:{name:""+n,type:"image",x:130,y:188,image:a,width:180,height:180,fallbackWithImage:ma.Z.AVATAR.KEY},leftAvatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:112,y:176,image:"./assets/wideframes/avatar-frame.png",width:214,height:214},rightPhoto:{name:""+c,type:"image",x:636,y:188,image:h,width:180,height:180,fallbackWithImage:ma.Z.AVATAR.KEY},rightAvatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:619,y:176,image:"./assets/wideframes/avatar-frame.png",width:214,height:214}}},Yr=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,h=void 0===l?"":l,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,f=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof h)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof f)return null;var g=r>=d,m=p||f,v=p&&f,y={wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492},leftPhoto:{name:""+n,type:"image",x:130,y:188,image:a,width:180,height:180,fallbackWithImage:ma.Z.AVATAR.KEY},leftAvatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:112,y:176,image:"./assets/wideframes/avatar-frame.png",width:214,height:214},rightPhoto:{name:""+c,type:"image",x:636,y:188,image:h,width:180,height:180,fallbackWithImage:ma.Z.AVATAR.KEY},rightAvatarFrame:{name:"wide-frame-avatar-frame",type:"image",x:619,y:176,image:"./assets/wideframes/avatar-frame.png",width:214,height:214}};return m&&(y.leftScore={type:"text",x:215,y:450,font:"400 60px",fillStyle:"#ffffff",text:p?""+r:"???",textAlign:"center",lineWidth:6,strokeStyle:"#855dca"},y.rightScore={type:"text",x:725,y:450,font:"400 60px",fillStyle:"#ffffff",text:f?""+d:"???",textAlign:"center",lineWidth:6,strokeStyle:"#855dca"}),v&&(g?y.leftCrown={name:"wide-frame-crown",type:"image",x:86,y:129,image:"./assets/wideframes/crown.png",width:85,height:73}:y.rightCrown={name:"wide-frame-crown",type:"image",x:592,y:129,image:"./assets/wideframes/crown.png",width:85,height:73}),y},zr=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new ts(null,{contextId:t})},Wr=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new rr(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new ts(null,{contextId:n})},Hr=function(e){if(null===e.imageShare)throw new cr},Kr=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=Cr(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Vr(e))}null!=(a=r[e])&&a.sent&&n(jr(e))}},Vr=function(e){return{type:cn.qj,payload:{opponentId:e}}},jr=function(e){return{type:cn.rh,payload:{opponentId:e}}},Xr=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,Wr({opponentId:t,contextId:n}),(s=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,i.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,a.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),qr=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,o,c,l,u,d,p,f,g,m,v,y;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,Xr(e,d);case 5:return p=n.sent,zr({contextId:p}),f=s(),n.next=10,Fr(f);case 10:return g=n.sent,Hr({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,n.next=15,l.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:v+" challenges you",localizations:{en_US:v+" challenges you",vi_VN:v+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:g||"",template:"challenge",data:{type:fa,matchId:u,playerId:y,opponentId:e,status:oi}});case 15:i(Kr(e)),c.event(qt._.MESSAGE,{message_content_type:"Invite",success:!0}),Br.emit(lr.INVITE_FRIENDS.EVENT,{type:"amount",value:1,opponentId:e}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),c.event(qt._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,a.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Qr=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,o,c,l,u,d,p,f,g,m,v,y;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,Xr(e,d);case 5:return p=n.sent,zr({contextId:p}),f=s(),n.next=10,Fr(f);case 10:return g=n.sent,Hr({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,n.next=15,l.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" just finished. Check them now.",localizations:{en_US:v+" just finished. Check them now.",vi_VN:v+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:g||"",template:"finished",data:{type:fa,matchId:u,playerId:y,opponentId:e,status:ci}});case 15:i(Kr(e)),c.event(qt._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),c.event(qt._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,a.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},Jr=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,o,c,l,u,d,p,f,g,m,v,y,S,E,b,A;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,n.next=5,Xr(e,d);case 5:return p=n.sent,zr({contextId:p}),f=s(),n.next=10,Fr(f);case 10:return g=n.sent,Hr({imageShare:g}),m=o.getPlayer(),v=m.name,y=m.playerId,S=Tr(f),E=S[y]||{},b=E.score,A=void 0===b?0:b,n.next=17,l.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:v+" beat your high score. Their score: "+A,localizations:{en_US:v+" beat your high score. Their score: "+A,vi_VN:v+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+A+" \u0111i\u1ec3m!"}},image:g||"",template:"pass_score",data:{type:fa,matchId:u,playerId:y,opponentId:e,status:ci}});case 17:i(Kr(e)),c.event(qt._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(qt._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,a.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},$r=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,o,c,l,u,d,p,f,g,m,v,y,S;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,u=t.matchId,d=t.contextId,p=t.score,n.next=5,Xr(e,d);case 5:return f=n.sent,zr({contextId:f}),g=s(),n.next=10,Fr(g);case 10:return m=n.sent,Hr({imageShare:m}),v=o.getPlayer(),y=v.name,S=v.playerId,n.next=15,l.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:y+" got "+p+" scores. So easy! Can you?",localizations:{en_US:y+" got "+p+" scores. So easy! Can you?",vi_VN:y+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:m||"",template:"play_turn",data:{type:fa,matchId:u,playerId:S,opponentId:e,status:oi}});case 15:i(Kr(e)),c.event(qt._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(1),c.event(qt._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof ts)){n.next=24;break}return n.abrupt("return");case 24:(0,a.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},eo=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,s=i.player,r=i.facebook,o=s.getPlayer(),c=o.playerId,l=o.name,u=o.photo,d=Pr(n),p=d.score,f={type:ga,playerId:c,playerName:l,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:l+" beats your high score. Their score: "+p+".",localizations:{en_US:l+" beats your high score. Their score: "+p+".",vi_VN:l+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,a.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),to=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,s=i.player,r=i.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,l=o.name,u=o.photo,d=Pr(n),p=d.score,f={type:ga,playerId:c,playerName:l,playerPhoto:u,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:l+" got "+p+" scores. So easy! Can you?",localizations:{en_US:l+" got "+p+" scores. So easy! Can you?",vi_VN:l+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:f});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,a.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),no=(0,Y.P1)([function(e){return e.friendChallenge.friendListChallenged}],(function(e){return e})),io=JSON.parse('[{"playerId":"38","gender":"female","name":"Loretta Cooper","difficult":1.5},{"playerId":"10","gender":"female","name":"Alice Wilson","difficult":1.1},{"playerId":"42","gender":"female","name":"Myrtie Mathis","difficult":1.2},{"playerId":"15","gender":"female","name":"Rosa Estrada","difficult":1.3},{"playerId":"9","gender":"male","name":"Dylan Riley","difficult":0.8},{"playerId":"29","gender":"male","name":"Joe Robinson","difficult":1.4},{"playerId":"5","gender":"male","name":"Roger McBride","difficult":0.7},{"playerId":"22","gender":"male","name":"Lester Reeves","difficult":0.3},{"playerId":"21","gender":"female","name":"Eva Guzman","difficult":1.2},{"playerId":"6","gender":"female","name":"Lelia Erickson","difficult":1.3},{"playerId":"47","gender":"male","name":"Dean Holloway","difficult":0.8},{"playerId":"4","gender":"female","name":"Amelia Freeman","difficult":1.1},{"playerId":"11","gender":"female","name":"Viola Ferguson","difficult":1},{"playerId":"72","gender":"male","name":"Todd Garner","difficult":0.7},{"playerId":"28","gender":"female","name":"Matilda Harris","difficult":0.6},{"playerId":"14","gender":"male","name":"Alex Hart","difficult":0.3},{"playerId":"64","gender":"male","name":"Ethan Gilbert","difficult":1.3},{"playerId":"67","gender":"male","name":"Gordon Craig","difficult":1.2},{"playerId":"25","gender":"female","name":"Nora Munoz","difficult":1.1},{"playerId":"36","gender":"female","name":"Dora Herrera","difficult":0.6},{"playerId":"43","gender":"female","name":"Lida Roberts","difficult":0.6},{"playerId":"71","gender":"male","name":"Kenneth Holland","difficult":0.3},{"playerId":"38","gender":"male","name":"Russell McGee","difficult":0.7},{"playerId":"27","gender":"female","name":"Etta Miller","difficult":0.6},{"playerId":"45","gender":"female","name":"Abbie Weber","difficult":1.5},{"playerId":"47","gender":"female","name":"Etta Ryan","difficult":0.9},{"playerId":"69","gender":"male","name":"Christian Tran","difficult":0.5},{"playerId":"20","gender":"female","name":"Victoria Rivera","difficult":0.6},{"playerId":"48","gender":"female","name":"Blanche Bowen","difficult":0.9},{"playerId":"50","gender":"female","name":"Stella Montgomery","difficult":0.5},{"playerId":"46","gender":"male","name":"James Buchanan","difficult":1.3},{"playerId":"26","gender":"female","name":"Lola Massey","difficult":1.4},{"playerId":"28","gender":"male","name":"Fred Sutton","difficult":0.7},{"playerId":"60","gender":"female","name":"Victoria Munoz","difficult":0.7},{"playerId":"13","gender":"female","name":"Lois Powell","difficult":1.6},{"playerId":"10","gender":"male","name":"Oscar Houston","difficult":1.6},{"playerId":"61","gender":"male","name":"Alfred Ramos","difficult":1.3},{"playerId":"55","gender":"female","name":"Jean Johnson","difficult":1.1},{"playerId":"4","gender":"male","name":"Alejandro Hernandez","difficult":0.6},{"playerId":"44","gender":"male","name":"Tony Powers","difficult":1.5},{"playerId":"21","gender":"male","name":"Jesus Norton","difficult":0.7},{"playerId":"70","gender":"male","name":"Clyde Wagner","difficult":1.2},{"playerId":"8","gender":"male","name":"Connor Santiago","difficult":1},{"playerId":"17","gender":"male","name":"Douglas Miller","difficult":1.5},{"playerId":"46","gender":"female","name":"Bernice Pearson","difficult":1.3},{"playerId":"23","gender":"male","name":"Christopher Ortiz","difficult":1.3},{"playerId":"50","gender":"male","name":"Travis Buchanan","difficult":0.5},{"playerId":"20","gender":"male","name":"Fred Cannon","difficult":0.3},{"playerId":"16","gender":"male","name":"Charles Perry","difficult":0.9},{"playerId":"23","gender":"female","name":"Etta Herrera","difficult":1.5},{"playerId":"40","gender":"male","name":"Sean Salazar","difficult":1.3},{"playerId":"57","gender":"female","name":"Lura Hammond","difficult":1.3},{"playerId":"39","gender":"female","name":"Adelaide Douglas","difficult":0.4},{"playerId":"5","gender":"female","name":"Alma Stephens","difficult":1.2},{"playerId":"37","gender":"male","name":"Luke Thornton","difficult":0.7},{"playerId":"6","gender":"male","name":"Isaac Hansen","difficult":1.2},{"playerId":"24","gender":"male","name":"Antonio Massey","difficult":0.5},{"playerId":"29","gender":"female","name":"Caroline McKinney","difficult":1.3},{"playerId":"34","gender":"male","name":"Bobby Stevenson","difficult":0.9},{"playerId":"16","gender":"female","name":"Mildred King","difficult":0.5},{"playerId":"7","gender":"male","name":"Bradley Malone","difficult":0.5},{"playerId":"2","gender":"male","name":"Calvin Patton","difficult":1.5},{"playerId":"45","gender":"male","name":"Edgar Vargas","difficult":1.5},{"playerId":"42","gender":"male","name":"Alfred Wheeler","difficult":1.7},{"playerId":"48","gender":"male","name":"Anthony Watson","difficult":0.4},{"playerId":"27","gender":"male","name":"Harry Reese","difficult":1.6},{"playerId":"33","gender":"female","name":"Rosetta Reyes","difficult":1},{"playerId":"63","gender":"male","name":"Russell Murphy","difficult":0.7},{"playerId":"59","gender":"female","name":"Louisa Hall","difficult":0.8},{"playerId":"56","gender":"female","name":"Christina Hawkins","difficult":1.4},{"playerId":"52","gender":"male","name":"Jeremy Wilkins","difficult":1.3},{"playerId":"41","gender":"male","name":"Tyler Owens","difficult":0.6},{"playerId":"39","gender":"male","name":"Christopher Baldwin","difficult":0.6},{"playerId":"18","gender":"male","name":"Clayton Sanchez","difficult":0.5},{"playerId":"13","gender":"male","name":"Thomas Strickland","difficult":1.2},{"playerId":"68","gender":"male","name":"Herbert Hayes","difficult":0.5},{"playerId":"24","gender":"female","name":"Christine Beck","difficult":1.5},{"playerId":"31","gender":"male","name":"Alan McCarthy","difficult":0.6},{"playerId":"19","gender":"female","name":"Georgie Logan","difficult":0.6},{"playerId":"62","gender":"male","name":"Herbert Bass","difficult":0.9},{"playerId":"56","gender":"male","name":"Danny Drake","difficult":1.4},{"playerId":"12","gender":"male","name":"Mike Burton","difficult":1.5},{"playerId":"60","gender":"male","name":"Lester Thomas","difficult":0.4},{"playerId":"44","gender":"female","name":"Lina Matthews","difficult":1.1},{"playerId":"31","gender":"female","name":"Myrtie Holloway","difficult":1.8},{"playerId":"49","gender":"female","name":"Nell Burns","difficult":1},{"playerId":"33","gender":"male","name":"Trevor Gonzalez","difficult":0.6},{"playerId":"58","gender":"male","name":"Harvey Munoz","difficult":1.7},{"playerId":"37","gender":"female","name":"Eula Griffin","difficult":1.2},{"playerId":"8","gender":"female","name":"Hattie Becker","difficult":1.5},{"playerId":"54","gender":"female","name":"Alma Howard","difficult":1.2},{"playerId":"19","gender":"male","name":"Mitchell Bishop","difficult":1.1},{"playerId":"58","gender":"female","name":"Maude Burgess","difficult":1.4},{"playerId":"34","gender":"female","name":"Eula Copeland","difficult":1.3},{"playerId":"32","gender":"male","name":"Carl Wolfe","difficult":1},{"playerId":"35","gender":"male","name":"Kenneth McKinney","difficult":0.9},{"playerId":"41","gender":"female","name":"Caroline Morris","difficult":1},{"playerId":"1","gender":"male","name":"Bill Silva","difficult":1.3},{"playerId":"57","gender":"male","name":"Lawrence Hanson","difficult":0.4},{"playerId":"17","gender":"female","name":"Sallie Stevens","difficult":0.9},{"playerId":"74","gender":"male","name":"Christopher Bishop","difficult":0.4},{"playerId":"35","gender":"female","name":"Julia Gibbs","difficult":0.5},{"playerId":"2","gender":"female","name":"Frances Boyd","difficult":0.4},{"playerId":"65","gender":"male","name":"Eric Howell","difficult":0.7},{"playerId":"54","gender":"male","name":"Jeremiah Ruiz","difficult":1.6},{"playerId":"1","gender":"female","name":"Essie Tate","difficult":0.3},{"playerId":"53","gender":"female","name":"Jeanette Williamson","difficult":0.5},{"playerId":"55","gender":"male","name":"Thomas Holmes","difficult":0.6},{"playerId":"49","gender":"male","name":"Erik Barber","difficult":0.8},{"playerId":"14","gender":"female","name":"Myrtie Valdez","difficult":1.5},{"playerId":"3","gender":"female","name":"Madge Bates","difficult":1.7},{"playerId":"7","gender":"female","name":"Marion Conner","difficult":1.8},{"playerId":"25","gender":"male","name":"Chester Johnson","difficult":1.2},{"playerId":"59","gender":"male","name":"Jerry Ray","difficult":0.3},{"playerId":"32","gender":"female","name":"Ophelia Hardy","difficult":0.9},{"playerId":"52","gender":"female","name":"Jessie Morris","difficult":1.4},{"playerId":"51","gender":"male","name":"Nathan Hopkins","difficult":1.7},{"playerId":"51","gender":"female","name":"Nell Higgins","difficult":0.9},{"playerId":"66","gender":"male","name":"Lester Strickland","difficult":1.2},{"playerId":"73","gender":"male","name":"Blake Park","difficult":0.7},{"playerId":"75","gender":"male","name":"Wesley Colon","difficult":1.5},{"playerId":"22","gender":"female","name":"Augusta Barker","difficult":1.4},{"playerId":"36","gender":"male","name":"Ivan Lamb","difficult":1.3},{"playerId":"40","gender":"female","name":"Sylvia Neal","difficult":0.9},{"playerId":"11","gender":"male","name":"Ethan Herrera","difficult":0.6},{"playerId":"15","gender":"male","name":"Jeffrey Jackson","difficult":0.3},{"playerId":"26","gender":"male","name":"Cory Tucker","difficult":1.2},{"playerId":"12","gender":"female","name":"Sophia Rios","difficult":0.3},{"playerId":"18","gender":"female","name":"Verna Cooper","difficult":0.9},{"playerId":"9","gender":"female","name":"Lily Copeland","difficult":1.7},{"playerId":"30","gender":"female","name":"Lillian Murray","difficult":0.3},{"playerId":"43","gender":"male","name":"Gordon Manning","difficult":0.9},{"playerId":"53","gender":"male","name":"Julian Simmons","difficult":1.1},{"playerId":"30","gender":"male","name":"Johnny Fernandez","difficult":0.3},{"playerId":"3","gender":"male","name":"Daniel Reed","difficult":0.9}]'),ao=GameCore.Configs.ApiHost,so=(function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,Be("single-matches",t,{},ao);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,xe("single-matches/active",{},ao);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,Be(i,n,{},ao);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,Be(n,{},{},ao);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,Be("matches",{opponentPlayerId:t},{},ao);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ro=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,Be(n,{},{},ao);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oo=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,xe(n,{},ao);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),co=function(){var e=(0,o.Z)(h().mark((function e(t,n,i,a){var s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,Be(s,{matchId:t,score:n,level:i,extraData:a},{},ao);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),lo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),ho=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),uo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),po=uo,fo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),go=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),mo=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),vo=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new lo(null,{matchId:t});if(""===n||"string"!==typeof n)throw new lo(null,{currentMatchId:n});if(t!==n)throw new go(null,{matchId:t,currentMatchId:n})},yo=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new lo(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new ho("This match is finished",{status:s});if(a!==t)throw new ua(null,{playerId:a,currentPlayerId:t})},So=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new po(null,{opponentId:t})},Eo=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new lo(null,{matchId:t})},bo=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new lo(null,{matchId:n});if(""===i||"string"!==typeof i)throw new mo(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new fo(null,{blackPlayerId:a})},Ao=GameCore.Configs.Match,wo=function(e){try{return GameCore.Utils.Hash.stringToHash(ve()(e))}catch(t){return""}},To=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},Po=function(){return function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game.player,t({type:Yn,payload:{}}),i=n.getPlayerId(),s=(0,r.Z)({},Ao.LocalSingleMatchDefault,{status:"active",playerId:i,startedAt:Date.now()}),yo({playerId:i,match:s}),t(Io(s)),(0,pe.vk)(Ao.SingleMatchStore,s),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),t(Io(null)),!(e.t0 instanceof lo)){e.next=15;break}return e.abrupt("return");case 15:if(!(e.t0 instanceof ho)){e.next=17;break}return e.abrupt("return");case 17:(0,a.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},Co=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n,i){var s,o,c,l,u,d,p,f;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=window.game.player,Eo({matchId:e}),o=i(),c=pr(o),l=s.getPlayerId(),vo({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),u=dr(o),yo({playerId:l,match:u}),d=(0,r.Z)({},Ao.LocalSingleMatchDefault,u,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(Io(d)),p=d.data,(f=(0,r.Z)({},d)).data=wo(p),(0,pe.vk)(Ao.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Io(null)),!(t.t0 instanceof lo)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof ho)){t.next=25;break}return t.abrupt("return");case 25:(0,a.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Io=function(e){return{type:Wn,payload:{match:e}}},xo=function(){return{type:Hn,payload:{}}},Bo=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n){var i,s,r,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.profile,i.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),r=e.playerId,So({opponentId:r}),n({type:Vn,payload:{opponentInfo:e}}),t.next=8,so(r);case 8:return o=t.sent,bo({match:o}),t.next=12,s.requestProfiles([r]);case 12:n(_o(o)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(_o(null)),!(t.t0 instanceof lo)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof po)){t.next=22;break}return t.abrupt("return");case 22:(0,a.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},ko=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n){var i,s,r,o,c,l,u,d,p;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.player,r=i.profile,i.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),Eo({matchId:e}),n({type:Kn,payload:{matchId:e}}),t.next=7,ro(e);case 7:if(o=t.sent,bo({match:o}),c=o.status,l=o.whitePlayerId,u=o.blackPlayerId,c!==oi){t.next=16;break}return d=s.getPlayerId(),p=d===l?u:l,t.next=16,r.requestProfiles([p]);case 16:n(_o(o)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(_o(null)),!(t.t0 instanceof lo)){t.next=24;break}return t.abrupt("return");case 24:(0,a.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},Ro=function(e,t,n){return void 0===n&&(n=!0),function(){var i=(0,o.Z)(h().mark((function i(s){var r,o,c,l,u,d,p,f,g,m;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r=window.game,o=r.player,c=r.globalScene,n&&c.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),Eo({matchId:e}),s({type:Xn,payload:{matchId:e,opponentInfo:t}}),i.next=7,oo(e);case 7:l=i.sent,bo({match:l}),u=l.whitePlayerId,d=l.whitePlayerScore,p=l.blackPlayerScore,f=o.getPlayerId(),g=o.getPlayerData(),m=g.score,s(_o(l,{score:f===u?d:p,bestScore:m})),i.next=23;break;case 17:if(i.prev=17,i.t0=i.catch(0),s(_o(null)),!(i.t0 instanceof lo)){i.next=22;break}return i.abrupt("return");case 22:(0,a.tO)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[0,17]])})));return function(e){return i.apply(this,arguments)}}()},Oo=function(e,t,n){return function(){var i=(0,o.Z)(h().mark((function i(s){var r,o;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,window.game.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),Eo({matchId:e}),s({type:jn,payload:{matchId:e,score:t,extraData:n}}),r=n.level,i.next=8,co(e,t,r,n);case 8:return o=i.sent,bo({match:o}),i.next=12,s(_o(o));case 12:i.next=20;break;case 14:if(i.prev=14,i.t0=i.catch(0),s(_o(null)),!(i.t0 instanceof lo)){i.next=19;break}return i.abrupt("return");case 19:(0,a.tO)(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(e){return i.apply(this,arguments)}}()},_o=function(e,t,n){return void 0===n&&(n=null),{type:qn,payload:{match:e,opponentInfo:t,current:n}}},Do=function(e){return{type:Jn,payload:{opponentInfo:e}}},Lo=function(e,t){return{type:ti,payload:{matchId:e,players:t}}},No=function(e){return{type:si,payload:{enable:e}}},Mo=function(e){return{type:Fn,payload:{playerId:e}}},Go=function(e,t){return{type:Zn,payload:{playerId:e,stats:t}}},Fo=function(e){return{type:Un,payload:{stats:e}}},Zo=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new ts(null,{contextId:t})},Uo=null,Yo=function(e){clearTimeout(Uo),Uo=setTimeout((function(){window.game.globalScene.screen.close(qa.o4.NOTIFY_SCREEN)}),e)},zo=function(){return function(e){try{e(xo()),e(Jo(ba))}catch(t){(0,a.tO)(t)}}},Wo=function(){return function(){var e=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,window.game.facebook.getTournamentAsync();case 4:return t(zo()),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(1);case 10:t(xo()),t(Jo(ya)),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),(0,a.tO)(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14],[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Ho=function(e,t,n){return void 0===e&&(e="10"),void 0===t&&(t=!1),void 0===n&&(n=!1),function(i){try{i(Ko("reset",e,t,n))}catch(s){(0,a.tO)(s)}}},Ko=function(e,t,n,i){return void 0===t&&(t="10"),void 0===n&&(n=!1),void 0===i&&(i=!1),function(){var s=(0,o.Z)(h().mark((function s(r,o){var c,l,u,d,p,f,g,m,v,y,S,E,b,A,w,T,P,C,I;return h().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,c=window.game,l=c.player,u=c.facebook,d=c.globalScene,i?d.events.emit(Ba.K.SWITCH,Ba.C.GAME_SCENE):d.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),s.next=5,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 5:if(p=e,f=u.contextType,t||(g=GameCore.Configs.PlayerIdMock,m=GameCore.Configs.PlayerIdMock2,t=l.getPlayerId()===g?m:g),v=o(),y=ur(v),e){s.next=33;break}return s.next=13,u.chooseAsync();case 13:if(!1!==(p=s.sent)){s.next=22;break}if(!n){s.next=18;break}return d.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE),s.abrupt("return");case 18:if(!y){s.next=21;break}return r(Wo()),s.abrupt("return");case 21:return s.abrupt("return");case 22:return s.prev=22,s.next=25,window.game.facebook.getTournamentAsync();case 25:return r(zo()),s.abrupt("return");case 29:s.prev=29,s.t0=s.catch(22);case 31:s.next=46;break;case 33:if(!t||t===va.playerId){s.next=44;break}return s.next=36,u.createAsync(t);case 36:if(!1!==(p=s.sent)){s.next=40;break}return n&&d.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE),s.abrupt("return");case 40:if(!y){s.next=43;break}return r(Wo()),s.abrupt("return");case 43:p||"reset"===e||(p=e);case 44:f=u.contextType,r(Pa(p,f));case 46:return Zo({contextId:p}),S=l.getPlayerId(),E=l.getConnectedPlayers(),s.next=51,u.getContextPlayers(S);case 51:return b=s.sent,t!==(A=va).playerId&&E[t]?A=E[t]:1===b.length&&(A=b[0]),r(Mo()),T=(w=A).playerId,P=w.name,C=w.photo,I={playerId:T,name:P,photo:C},s.next=59,r(Jo(Sa,I));case 59:r(Pa(p,f)),s.next=71;break;case 62:if(s.prev=62,s.t1=s.catch(0),!(s.t1 instanceof ts)){s.next=66;break}return s.abrupt("return");case 66:if("USER_INPUT"!==(null==s.t1?void 0:s.t1.code)){s.next=68;break}return s.abrupt("return");case 68:if("INVALID_OPERATION"!==(null==s.t1?void 0:s.t1.code)){s.next=70;break}return s.abrupt("return");case 70:(0,a.tO)(s.t1);case 71:return s.prev=71,Yo(1e3),s.finish(71);case 74:case"end":return s.stop()}}),s,null,[[0,62,71,74],[22,29]])})));return function(e,t){return s.apply(this,arguments)}}()},Vo=function(){return function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f,g,m,v,y,S,E,b,A;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game,s=i.player,r=i.facebook,i.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),o=s.getPlayerId(),c=s.getConnectedPlayerIds(100,0),l=s.getConnectedPlayers(100,0),u=n(),d=no(u)||[],p=he()(c).call(c,(function(e){return ge()(d).call(d,e)<0&&e!=o})),f="",g="",m=r.contextType,v=null,p.length>0&&(y=Phaser.Math.RND.between(0,p.length-1),f=p[y],l[f]&&(v=l[f],t({type:cn.x2,payload:{opponentId:f}}))),!f||"string"!==typeof f){e.next=18;break}return e.next=17,r.createAsync(f);case 17:g=e.sent;case 18:if(v&&g){e.next=26;break}return e.next=21,t(No(!0));case 21:return e.next=23,t(Ko());case 23:return e.next=25,t(No(!1));case 25:return e.abrupt("return");case 26:return Zo({contextId:g}),t(Mo()),E=(S=v).name,b=S.photo,A={playerId:f,name:E,photo:b},e.next=32,t(Jo(Sa,A));case 32:t(Pa(g,m)),Yo(1e3),e.next=42;break;case 36:if(e.prev=36,e.t0=e.catch(0),Yo(1e3),!(e.t0 instanceof ts)){e.next=41;break}return e.abrupt("return");case 41:(0,a.tO)(e.t0);case 42:return e.prev=42,e.finish(42);case 44:case"end":return e.stop()}}),e,null,[[0,36,42,44]])})));return function(t,n){return e.apply(this,arguments)}}()},jo=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n){var i,s,r,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,s=i.facebook,r=i.globalScene,o=i.analytics,r.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),c=s.getContextID(),Zo({contextId:c}),o.event(qt._.JOIN_GROUP,{group_id:c}),t.next=8,n(Jo(Ea,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof ts)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,a.tO)(t.t0);case 17:return t.prev=17,Yo(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},Xo=function(e,t,n){return void 0===n&&(n=!1),function(){var i=(0,o.Z)(h().mark((function i(s,r){var o,c,l,u,d,p,f,g,m,v,y,S,E,b,A,w,T,P,C,I;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o=window.game,c=o.player,l=o.profile,u=o.facebook,d=o.globalScene,n?d.events.emit(Ba.K.SWITCH,Ba.C.GAME_SCENE):d.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),i.next=5,GameCore.Utils.Valid.isValueChangeAsync((function(){return c.isConnectedPlayersLoaded()}),!0,{timeout:1e3});case 5:if(p=i.sent,f=c.getPlayerId(),g=c.getConnectedPlayers(),m=f===t,v=t===va.playerId,y=p&&g[t],v||y||n){i.next=14;break}return d.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE),i.abrupt("return");case 14:return S=va,i.next=17,u.getContextPlayers(f);case 17:if(E=i.sent,m||v||!y){i.next=22;break}S=g[t],i.next=31;break;case 22:if(1!==E.length){i.next=26;break}S=E[0],i.next=31;break;case 26:if(v){i.next=31;break}return i.next=29,l.requestProfiles([t]);case 29:(b=l.getProfiles())[t]&&(S=b[t]);case 31:return A=!n,i.next=34,s(Ro(e,S,A));case 34:if(w=r(),Sr(w,{playerId:f})!==va.playerId){i.next=39;break}return i.next=39,s(ko(e));case 39:if(w=r(),Sr(w,{playerId:f})===f||!g[t]){i.next=44;break}return s(Ho(t,!0,n)),i.abrupt("return");case 44:if(mr(w)===e){i.next=48;break}return d.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE),i.abrupt("return");case 48:if(T=vr(w),P=Er(w,{playerId:f}),s(ec({mode:Sa,status:T})),C=u.getContextID(),I=u.contextType,s(Pa(C,I)),!P){i.next=59;break}return i.next=57,c.requestConnectedPlayers();case 57:return d.events.emit(Ba.K.SWITCH,Ba.C.RESULT_MATCH_SCENE),i.abrupt("return");case 59:d.events.emit(Ba.K.SWITCH,Ba.C.GAME_SCENE),i.next=65;break;case 62:i.prev=62,i.t0=i.catch(0),(0,a.tO)(i.t0);case 65:return i.prev=65,Yo(1e3),i.finish(65);case 68:case"end":return i.stop()}}),i,null,[[0,62,65,68]])})));return function(e,t){return i.apply(this,arguments)}}()},qo=function(){return function(e){try{e({type:ai,payload:{}}),e(Jo(Aa))}catch(t){(0,a.tO)(t)}}},Qo=function(e){return function(t){try{var n=window.game.player,i=n.getPlayerId();Ts(i,e).catch((function(e){(0,a.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setScore(e);var l={score:e,level:c};t(Go(i,l)),t(Fo(l))}catch(h){if(h instanceof xs)return;(0,a.tO)(h)}}},Jo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,o.Z)(h().mark((function n(i,s){var r,c,l,u,d,p,f,g,m,v,y,S,E,b,A;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game,c=r.analytics,l=r.player,u=r.facebook,d=r.globalScene,n.prev=1,f=u.getContextID(),g=0,m=s(),i({type:Dn,payload:{}}),!ne()(p=[ya,ba]).call(p,e)){n.next=15;break}return n.next=9,i((function(e){try{var t=window.game.player;e({type:zn,payload:{}});var n=t.getPlayerId(),i=(0,pe.Th)(Ao.SingleMatchStore)||{},s=i.data;i.data=To(s),yo({playerId:n,match:i}),e(Io(i))}catch(r){if(e(Io(null)),r instanceof lo)return;if(r instanceof ua)return;if(r instanceof ho)return;(0,a.tO)(r)}}));case 9:if(m=s(),pr(m)){n.next=14;break}return n.next=14,i(Po());case 14:g=fr(m);case 15:if(e===Ea&&i(Do(t)),e!==Sa){n.next=24;break}return n.next=19,i(Bo(t));case 19:m=s(),v=mr(m),y=yr(m),S=y.playerId,E=Ir(m,{opponentId:S}),f&&S&&!E&&(i({type:cn.x2,payload:{opponentId:S}}),i(qr(S,{contextId:f,matchId:v})));case 24:e===Aa&&i(function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:ei,payload:{playerId:r}}),l={},GameCore.Utils.Array.shuffle(io),de()(n=Ds()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n=io[t],i=n.playerId,a=n.name,s=n.gender,r=+i;l[i]={playerId:i,name:a,photo:"./assets/images/people/"+s+"/"+s+"-"+(r<10?"0"+r:r)+".jpg"}})),l[r]={playerId:r,name:o,photo:c},t(Lo("mock",l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=l.getPlayerData(m),A=b.score,i(Fo({score:g,bestScore:void 0===A?0:A})),i({type:Ln,payload:{mode:e,contextId:f}}),i(Ca(e)),d.events.emit(Ba.K.SWITCH,Ba.C.GAME_SCENE),c.event(qt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),n.next=38;break;case 33:n.prev=33,n.t0=n.catch(1),d.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE),(0,a.tO)(n.t0);case 38:case"end":return n.stop()}}),n,null,[[1,33]])})));return function(e,t){return n.apply(this,arguments)}}()},$o=function(e,t){return function(){var n=(0,o.Z)(h().mark((function n(i,a){var s,r,o,c,l,u,d,p,f,g,m,v;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game,o=r.player,c=r.globalScene,l=t.score,u=void 0===l?0:l,d=t.level,p=void 0===d?0:d,f=a(),!ne()(s=[ya,ba]).call(s,e)){n.next=7;break}return g=pr(f),n.next=7,i(Co(g));case 7:if(e===Ea&&(i({type:$n,payload:{}}),m=o.getPlayerId(),i(Go(m,t))),e!==Sa){n.next=12;break}return v=mr(f),n.next=12,i(Oo(v,u,{level:p}));case 12:if(e!==Aa){n.next=16;break}return pr(f),n.next=16,i({type:ii,payload:{}});case 16:i({type:Nn,payload:{mode:e}}),e===Sa?c.events.emit(Ba.K.SWITCH,Ba.C.RESULT_MATCH_SCENE):e===Aa?c.events.emit(Ba.K.SWITCH,Ba.C.RESULT_ONLINE_SCENE):c.events.emit(Ba.K.SWITCH,Ba.C.GAME_OVER_SCENE);case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},ec=function(e){return function(t){var n=e.mode,i=e.status;t({type:Mn,payload:{mode:n,status:i}}),(0,a.sw)("game-mode",n)}},tc=function(e){if("string"!==typeof e||!e)throw new cr(null,{imageShare:e})},nc=function(){return(0,o.Z)(h().mark((function e(){var t,n,i,s,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,s=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),e.next=5,Or();case 5:return o=e.sent,tc(o),c=n.getPlayer(),l=c.playerId,u=c.name,d=c.photo,e.next=10,s.inviteAsync({template:da,text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:o||"",data:{playerId:l,playerName:u,playerPhoto:d,type:da}});case 10:i.event(qt._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(qt._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,a.tO)(e.t0);case 17:return e.prev=17,r.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},ic=function(){return function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p,f,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,s=i.player,r=i.analytics,o=i.facebook,c=i.globalScene,e.prev=1,c.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),l=n(),e.next=6,_r(l);case 6:return u=e.sent,tc(u),d=s.getPlayer(),p=d.playerId,f=d.name,g=d.photo,e.next=11,o.inviteAsync({template:da,cta:{default:"Join",localizations:{en_US:"Join",vi_VN:"Tham gia"}},text:{default:"Easy! I have a new score!",localizations:{en_US:"Easy! I have a new score!",vi_VN:"A ha! M\xecnh v\u1eeba \u0111\u1ea1t m\u1ed9t \u0111i\u1ec3m m\u1edbi!"}},image:u||"",data:{playerId:p,playerName:f,playerPhoto:g,type:pa}});case 11:r.event(qt._.INVITE,{invite_content_type:"Tournament",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),r.event(qt._.INVITE,{invite_content_type:"Tournament",success:!1}),(0,a.tO)(e.t0);case 18:return e.prev=18,c.screen.close(qa.o4.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},ac=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},sc=n(545),rc=n(531),oc=rc.Z.DEFAULT,cc=oc.KEY,lc=oc.FRAME,hc=function(e){function t(t){var n;return(n=e.call(this,t,cc,lc.BUTTON_HOME)||this).scene=t,n.button.setWorldSize(37,37),n}return(0,c.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.add.image(0,0,cc,lc.ICON_HOME);e.setWorldSize(31,26),this.add(e),Phaser.Display.Align.In.Center(e,this.button,0,-2)},t}(sc.Z),uc=hc,dc=n(538),pc=n(167),fc={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(pc)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},gc=function(e){function t(t){return e.call(this,fc,t)||this}return(0,c.Z)(t,e),t}(dc.Z),mc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},vc=function(e){function t(t){return e.call(this,mc,t)||this}return(0,c.Z)(t,e),t}(dc.Z),yc=rc.Z.DEFAULT,Sc=yc.KEY,Ec=yc.FRAME,bc=GameCore.Configs.Gameplay,Ac=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.congratulationContainer=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.bestScoreIcon=void 0,n.scene=t,n.bestScore=0,n.createCongratulationContainer(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore;e.currentScore<t&&(this.setBestScore(t),this.runScoreAnimation()),this.runAnimation()},n.runAnimation=function(){var e=this,t=this.payload.currentScore;this.setCurrentScore(0),t>0?(this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play()}))):(this.setCurrentScore(t),this.entrancesAnimation.play())},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:500,duration:2e3,completeDelay:300,onStart:function(){t.scene.audio.playSound(Qa.Z.SCORE_COUNTER)},onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=i,t.setCurrentScore(a),(a>i||bc.AlwayShowBestScore)&&(t.bestScore=a,t.scene.screen.open(qa.o4.BEST_SCORE_SCREEN,{bestScore:a}),t.scene.runConfettiEffects()),t.setBestScore(t.bestScore),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){var t=this.formatScore(e);this.bestScoreText.setText(t);var n=this.bestScoreText.width;Phaser.Display.Align.In.Center(this.bestScoreText,this.currentScoreText,15-.05*n,50),Phaser.Display.Align.In.LeftCenter(this.bestScoreIcon,this.bestScoreText,30,-2)},n.setCurrentScore=function(e){var t=this.formatScore(e);this.currentScoreText.setText(t)},n.createCongratulationContainer=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.add.image(0,0,Sc,Ec.RIBBON_CONGRATULATION);t.setWorldSize(313.5,100.5);var n=this.scene.add.image(0,-26,rc.Z.TEXTS.KEY,this.scene.lang.Texture.congratulation);n.setScale(e);var i=this.scene.add.container();i.add([t,n]),this.add(i),Phaser.Display.Align.In.TopCenter(i,this,0,20),this.congratulationContainer=i},n.createCurrentScore=function(){this.currentScoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(43),origin:{x:.5,y:.5}}),this.currentScoreText.setTint(15779090),Phaser.Display.Align.In.Center(this.currentScoreText,this,0,20),this.add(this.currentScoreText)},n.createBestScore=function(){this.createBestScoreText(),this.createBestScoreIcon(),this.setBestScore(this.bestScore)},n.createBestScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:1,y:.5}}),this.add(this.bestScoreText)},n.createBestScoreIcon=function(){this.bestScoreIcon=this.scene.make.image({key:Sc,frame:Ec.ICON_BEST_SCORE_CUP,origin:{x:0,y:.5}}),this.bestScoreIcon.setWorldSize(26,24.5),this.add(this.bestScoreIcon)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new gc({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new vc({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e,999999999)},t}(Phaser.GameObjects.Container),wc=Ac,Tc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.logo=void 0,n.scene=t,n.createLogo(),n.createBestScoreBlock(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBestScoreBlock=function(){this.bestScoreBlock=new wc(this.scene),this.add(this.bestScoreBlock)},n.createLogo=function(){var e=rc.Z.GAMEPLAY.TEXTURES,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.LOGO});i.setWorldSize(237,150),i.setY(200),this.add(i),this.logo=i},n.runLogoAnimation=function(){this.logo.setWorldSize(237,150),this.logo.setAngle(1),this.scene.tweens.add({targets:[this.logo],scale:1.01*this.logo.scale,angle:-1,yoyo:!0,repeat:-1})},t}(Phaser.GameObjects.Container),Pc=Tc,Cc={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Ic=function(e){function t(t){return e.call(this,Cc,t)||this}return(0,c.Z)(t,e),t}(dc.Z),xc=n(563),Bc=rc.Z.DEFAULT,kc=Bc.KEY,Rc=Bc.FRAME,Oc=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scoreText=void 0,s.cupImage=void 0,s.bigStarExplosive=void 0,s.open=function(t){e.prototype.open.call((0,za.Z)(s),t);var n=s.getData("bestScore");s.setBestScore(n),s.runOpenAnimation(),s.scene.audio.playSound(Qa.Z.CONGRATULATION)},s.handleClose=function(){s.scene.screen.close(s.name)},s.handleShareBestScore=function(){s.scene.storage.dispatch(Rr())},s.runBigStarExplosive=function(){var e=s.cupImage,t=e.x,n=e.y;s.bigStarExplosive.setPosition(t,n),s.bigStarExplosive.run()},s.setDepth(qa.Ks.POPUP),s.background.setAlpha(.9),s.createObjects(),s}(0,c.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createBestScoreTitle(),this.createGlowEffect(),this.createCupImage(),this.createBestScoreNumber(),this.createBigStarExplosive(),this.createCloseButton()},n.setBestScore=function(e){var t=this.formatScore(e);this.scoreText.setText(t)},n.createCloseButton=function(){var e=1/this.scene.world.getPixelRatio(),t=new sc.Z(this.scene,rc.Z.TEXTS.KEY,this.scene.lang.Texture.close);t.setName("Close"),t.button.setScale(e),this.add(t),t.onClick=this.handleClose,Phaser.Display.Align.In.Center(t,this.zone,0,110)},n.createBestScoreTitle=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.highScore});t.setScale(e),this.add(t),Phaser.Display.Align.In.Center(t,this.zone,0,-230)},n.createBestScoreNumber=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5}}),this.add(this.scoreText),this.scoreText.setTint(16777215),Phaser.Display.Align.In.Center(this.scoreText,this.zone,0,-20)},n.createCupImage=function(){this.cupImage=this.scene.add.image(0,0,kc,Rc.ICON_BEST_SCORE_CUP),this.cupImage.setWorldSize(90,84),this.add(this.cupImage),Phaser.Display.Align.In.Center(this.cupImage,this.zone,0,-130)},n.createGlowEffect=function(){var e=rc.Z.EFFECTS,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.FX_GLOW_GOLD});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this,0,-130),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createBigStarExplosive=function(){this.bigStarExplosive=new xc.Z(this.scene),this.add(this.bigStarExplosive)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Ic({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e,999999999)},t}(GameCore.Screen),_c=Oc,Dc=n(562),Lc=rc.Z.DEFAULT,Nc=Lc.KEY,Mc=Lc.FRAME,Gc=function(e){function t(t){var n;return(n=e.call(this,t,Nc,Mc.BUTTON_GREEN_214X56,214,56)||this).scene=t,n.createText(),n}return(0,c.Z)(t,e),t.prototype.createText=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.replayGreen});t.setScale(e*this.scene.fontSize(1)),Phaser.Display.Align.In.Center(t,this.button),this.add(t)},t}(sc.Z),Fc=Gc,Zc=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.entrancesAnimation=void 0,n.buttonsPulsateAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play(),n.buttonsPulsateAnimation.play()},n.scene=t,n.createButtons(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.createPlayButton(),this.createEntrancesAnimation(),this.createPulsateAnimation()},n.createPlayButton=function(){this.playButton=new Fc(this.scene),this.playButton.setName("PlayWithFriend"),this.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this,0)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Dc.Z({targets:[this],delay:400,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.createPulsateAnimation=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new gc({targets:[this],props:{scale:{from:.9,to:1},duration:500}})},t}(Phaser.GameObjects.Container),Uc=Zc,Yc=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).bestScore=void 0,n.currentScore=void 0,n.footerButton=void 0,n.main=void 0,n.homeButton=void 0,n.countdownText=void 0,n.confettiEffect=void 0,n.confettiLeftEffect=void 0,n.confettiRightEffect=void 0,n.run=function(){n.bgMask.setVisible(!0),n.updateScore(),n.main.runLogoAnimation(),n.main.bestScoreBlock.counterAnimation&&n.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?n.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.handleShowBestScorePopup()})):n.time.delayedCall(800,(function(){n.handleShowBestScorePopup()})),n.footerButton.setAlpha(0),n.footerButton.runAnimation(),n.audio.pauseMusic(),n.audio.playSound(Qa.Z.GAME_OVER_SCENE),n.time.delayedCall(3600,n.audio.playMusic,void 0,n.audio)},n.runConfettiEffects=function(){var e=n.gameZone,t=e.displayWidth,i=e.width,a=e.height,s=t;n.confettiLeftEffect.stop(),n.confettiRightEffect.stop(),n.children.bringToTop(n.confettiLeftEffect),n.children.bringToTop(n.confettiRightEffect),n.children.bringToTop(n.confettiEffect),n.confettiEffect.run(0,a+8,i+5,a+8),n.time.delayedCall(1e3,(function(){n.confettiLeftEffect.run(1,0,-100),n.confettiRightEffect.run(1,0+s,-100),n.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var t,i,a=e.getValue()/100;null==(t=n.confettiLeftEffect.emitter)||t.setAlpha(a),null==(i=n.confettiRightEffect.emitter)||i.setAlpha(a)},onComplete:function(){var e,t;null==(e=n.confettiLeftEffect.emitter)||e.setAlpha(1),null==(t=n.confettiRightEffect.emitter)||t.setAlpha(1),n.confettiLeftEffect.stop(),n.confettiRightEffect.stop()}})}))},n.handlePlayWithFriend=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.storage.dispatch(Vo());case 1:case"end":return e.stop()}}),e)}))),n.handleReplay=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.storage.dispatch(Wo());case 1:case"end":return e.stop()}}),e)}))),n.handleShareYourScore=function(){n.audio.playSound(Qa.Z.BUTTON_CLICK),n.storage.dispatch(Rr())},n.handleHomeClick=function(){n.audio.stopSound(Qa.Z.GAME_OVER_SCENE),n.audio.playMusic(),n.scene.switch(Ba.C.DASHBOARD_SCENE)},n.handleMatchingGroup=(0,o.Z)(h().mark((function e(){var t,i,a,s,r,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,za.Z)(n),i=t.player,a=t.storage,s=t.game,r=t.facebook,e.prev=1,s.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"Matching...",loading:!0}),o=i.getPlayer(),c="global","en"===(l=ac(o.locale))&&(c="en"),"in"===l&&(c="in"),e.next=10,r.matchPlayerAsync(c,!0,!0);case 10:if(u=e.sent,s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),u){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(jo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),n.handleInviteIconClick=function(){var e=n.storage.getState();Ta(e)===ba?n.storage.dispatch(ic()):n.storage.dispatch(nc())},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(xo()),e.bgMask.setVisible(!1)})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(),this.createMaskBackground(.6);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createMain(),this.createHomeButton(),this.createFooter(),this.createBestScoreScreen(),this.createConfettiAnimations(),this.createClock()},n.updateScore=function(){var e=this.storage.getState(),t=Pr(e),n=t.score,i=void 0===n?0:n,a=t.bestScore,s=void 0===a?0:a;this.bestScore=s<this.bestScore?this.bestScore:s,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createConfettiAnimations=function(){this.confettiLeftEffect=new Ja.Z(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Ja.Z(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiEffect=new $a.Z(this),this.confettiEffect.setDepth(ja.Z.ON_TOP),this.confettiLeftEffect.setDepth(ja.Z.ON_TOP),this.confettiRightEffect.setDepth(ja.Z.ON_TOP)},n.createMain=function(){this.bestScore=0,this.main=new Pc(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-130)},n.createHomeButton=function(){this.homeButton=new uc(this),this.homeButton.setName("Home"),this.homeButton.onClick=this.handleHomeClick,this.world.isLandscape()?Phaser.Display.Align.In.TopCenter(this.homeButton,this.gameZone,-167,-26):Phaser.Display.Align.In.TopLeft(this.homeButton,this.gameZone,-15,-15)},n.processLeader=function(e,t){var n=Ha()(e).call(e,(function(e){return e.playerId===t}));return n=Ha()(e).call(e,(function(e){return e.playerId===t})),e[0].playerId===t?Va()(e).call(e,0,3):t===e[e.length-1].playerId?Va()(e).call(e,-3):Va()(e).call(e,n-1,3)},n.createFooter=function(){this.createFooterButton()},n.createFooterButton=function(){this.footerButton=new Uc(this),Phaser.Display.Align.In.BottomCenter(this.footerButton,this.gameZone,0,-130),this.footerButton.playButton.onClick=this.handleReplay},n.createBestScoreScreen=function(){this.screen.add(qa.o4.BEST_SCORE_SCREEN,_c)},n.handleShowBestScorePopup=function(){this.currentScore>this.bestScore&&this.storage.dispatch(Fo({bestScore:this.currentScore}))},n.createClock=function(){var e=this;GameCore.Configs.GameOver.ShowClock&&(this.countdownText=this.add.text(this.gameZone.width-10,10,"0",{fontSize:"13px",fontFamily:Xa.Z.FONT_FAMILY,color:"#b4b9c4"}),this.countdownText.setOrigin(1,0),this.countdownText.setHighQuality(),this.events.on("update",(function(){var t=new Date;e.countdownText.setText(t.toLocaleTimeString())})))},t}(Za.Z);var zc,Wc=Yc,Hc=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i,Xa.Z.PRIMARY.KEY)||this).setText("").setOrigin(.5).setFontSize(a.scene.fontSize(20)).setDepth(ja.Z.EFFECT),a}(0,c.Z)(t,e);var n=t.prototype;return n.setDefault=function(){this.setActive(!0).setVisible(!0).setScale(0).setAlpha(1).setNormalFloating()},n.playAnimation=function(){var e=this,t=this.scene.tweens.timeline();return t.add({targets:this,scale:1,duration:83,delay:0}),t.add({targets:this,alpha:0,scale:.8,y:"-=10",duration:400,onComplete:function(){e.setInactiveAndHide()}}),t.play(),this},n.setBigFloating=function(){return this.setFontSize(this.scene.fontSize(22)),this},n.setNormalFloating=function(){return this.setFontSize(this.scene.fontSize(18)),this},n.setInactiveAndHide=function(){this.kill(),this.setPosition()},t}(Phaser.GameObjects.BitmapText),Kc=Hc,Vc=function(e){function t(t){var n;return(n=e.call(this,t,{classType:Kc,frame:[],maxSize:-1})||this).scene=void 0,n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e,t,n=this,i=de()(e=Ds()(t=Array(50)).call(t,null)).call(e,(function(){return new Kc(n.scene,0,0)}));i.forEach((function(e){e.setVisible(!1),e.setActive(!1)})),this.scene.animsLayer.add(i,!0)},n.spawn=function(e,t,n,i){var a=this.getFirstDead();return a||(a=new Kc(this.scene,0,0),this.add(a),this.scene.animsLayer.add(a,!0)),a.setDefault(),a.setPosition(e,t),a.setText(""+i),a},n.despawn=function(e){this.killAndHide(e)},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),jc=Vc,Xc=function(){function e(e){this.scene=void 0,this.topY=void 0,this.maxGridHeight=void 0,this.ropeY=void 0,this.gamePlayHeight=void 0,this.bannerHeight=void 0,this.scene=e,this.initGlobalData()}return e.prototype.initGlobalData=function(){var e=this.scene.registry,t=this.scene.data,n=this.scene.gameZone.height,i=this.scene.ads.getBannerHeight(),a=n-i,s=a-150;e.set("numberOfLasers",{number:3}),e.set("flyingDinoSpeed",{x:134,y:-84}),e.set("level",0),e.set("levelUpSetting",{levelUpMethodByTime:!0,timeInterval:6e4,shotsCount:40,speed:-.075,levelUpSpeedRate:.4,duration:2e4}),e.set("levelTime",25e3),e.set("bullet",{speed:1500}),e.set("zones",{speed:{fast:9,medium:6,slow:3,stand:0},zones:{zone1:{topY:-.3*s,bottomY:.1*s},zone2:{topY:.1*s,bottomY:.45*s},zone3:{topY:.45*s,bottomY:.75*s},zone4:{topY:.75*s,bottomY:1*s},zone5:{topY:s,bottomY:a+10}}}),e.set("speed",{fast:9,medium:6,slow:3,stand:0}),e.set("bombForce",{distance:100,duration:300}),e.set("dangerTimer",5e3),e.set("timerForNextRandomHeavingBall",12e3),e.set("heavingBallTimer",1e4),e.set("stampTimer",2e4),e.set("maxCombos",9),e.set("rescueCoins",1e3),e.set("gameData",{levelScores:[10,20,30,50,80,130,210]}),e.set("bonusRate",[2,1]),t.set("ball",{width:41,height:45}),t.set("bomb",{width:35,height:32}),t.set("rainbowBall",{width:30,height:30}),t.set("grid",{width:28,height:28,rowSize:13});var r=this.scene.world.getPixelRatio();t.set("physicsWorld",{bound:5,worldBoundWidth:363,bulletCollisionRadius:6*r,gridBallCollisionRadius:14*r,detachedBallCollisionRadius:14*r,rainbowBallCollisionRadius:14*r}),t.set("numEggDestroyedToEmitParticle",15),t.set("shootingAngle",{ball:6,bomb:12}),this.topY=GameCore.Utils.Number.to2DPoint(0,0).y,this.ropeY=s,this.maxGridHeight=s,this.gamePlayHeight=a,this.bannerHeight=i},e}(),qc=Xc;!function(e){e[e.Red=14696223]="Red",e[e.Blue=2062558]="Blue",e[e.Green=1957450]="Green",e[e.Yellow=15447848]="Yellow",e[e.Gray=11250603]="Gray",e[e.Black=6052699]="Black",e[e.Pink=16725759]="Pink",e[e.Violet=7613892]="Violet",e[e.Cyan=3196146]="Cyan",e[e.Orange=16745472]="Orange",e[e.Purple=14044121]="Purple",e[e.Light=13159901]="Light",e[e.Bomb=16090639]="Bomb",e[e.Any=-1]="Any"}(zc||(zc={}));var Qc,Jc=rc.Z.GAMEPLAY.TEXTURES_32BIT,$c=Jc.KEY,el=Jc.FRAME,tl=function(){var e=t.prototype;function t(e){this.scene=void 0,this.shotGuideGroup=void 0,this.ballGrid=void 0,this.maxSize=void 0,this.tween=void 0,this.intersectionPoints=void 0,this.emitters=void 0,this.endPoint=void 0,this.scene=e,this.maxSize=this.scene.registry.get("numberOfLasers").number,this.createGuideObjects(),this.createIntersectionPointArray(),this.createEmitterArray(),this.createEndPoint()}return e.setBallGrid=function(e){this.ballGrid=e},e.hide=function(){var e;this.tween||(this.tween=this.scene.tweens.add({targets:y()(e=[]).call(e,this.shotGuideGroup,[this.endPoint]),alpha:0,duration:200}),this.hideAllEmitters())},e.getGuides=function(){return this.shotGuideGroup},e.destroy=function(){this.hideAllLasers(),this.hideAllEmitters(),this.endPoint.kill()},e.createEndPoint=function(){this.endPoint=this.scene.add.image(0,0,$c,el.SHOT_GUIDE_ENDPOINT),this.endPoint.setDepth(ja.Z.SHOOTER-1),this.endPoint.setDisplaySize(5,5),this.endPoint.kill()},e.createGuideObjects=function(){this.shotGuideGroup=[];for(var e=0;e<this.maxSize+1;e++){var t=this.scene.add.image(0,0,$c,el.SHOT_GUIDE_LIGHT).setOrigin(1,.5).setDepth(ja.Z.BULLET-2);t.revive(),this.shotGuideGroup.push(t)}},e.createIntersectionPointArray=function(){this.intersectionPoints=[];for(var e=0;e<this.maxSize+1;e++)this.intersectionPoints.push({x:0,y:0})},e.createEmitterArray=function(){this.emitters=[];for(var e=0;e<this.maxSize+1;e++){var t=this.scene.shotGuideParticles.createShotGuideEmitter();this.emitters.push(t)}},e.overlap=function(e,t,n){for(var i=0;i<n.length;i++)if(n[i]&&Phaser.Math.Distance.BetweenPointsSquared({x:e,y:t},n[i])<=400)return{x:n[i].x,y:n[i].y,overlap:!0};return{x:-1,y:-1,overlap:!1}},e.showFrom=function(e,t,n,i,a){var s;void 0===a&&(a=zc.Light),null==(s=this.tween)||s.remove(),this.tween=void 0;var r=this.scene.world.getPixelRatio(),o=this.scene.gameZone.width,c=this.scene.data.get("physicsWorld"),l=c.bulletCollisionRadius/r,h=.5*(o-c.worldBoundWidth)+.5*l;this.intersectionPoints[0]={x:t,y:n};for(var u=50*this.maxSize,d=2*l,p=i.x,f=i.y,g=0,m=0;m<u;++m){var v=t+p*d,y=n+f*d;if(v<=l+h){var S=(l+h-v)/p;v+=p*S,y+=f*S,p*=-1,this.intersectionPoints[g+1]={x:v,y:y},this.drawLaser_3D(this.intersectionPoints[g].x,this.intersectionPoints[g].y,this.intersectionPoints[g+1].x,this.intersectionPoints[g+1].y,g+1),this.updateEmitter(g+1,a),g++}else if(v>=o-l-h){var E=(o-l-h-v)/p;v+=p*E,y+=f*E,p*=-1,this.intersectionPoints[g+1]={x:v,y:y},this.drawLaser_3D(this.intersectionPoints[g].x,this.intersectionPoints[g].y,this.intersectionPoints[g+1].x,this.intersectionPoints[g+1].y,g+1),this.updateEmitter(g+1,a),g++}if(t=v,n=y,g===this.maxSize){this.updateEndPoint(g+1);break}var b=this.ballGrid.getBallsAt(t,n);if(this.overlap(t,n,b).overlap){this.intersectionPoints[g+1]={x:v,y:y},this.drawLaser_3D(this.intersectionPoints[g].x,this.intersectionPoints[g].y,this.intersectionPoints[g+1].x,this.intersectionPoints[g+1].y,g+1),this.updateEmitter(g+1,a),this.updateEndPoint(g+2);break}}this.hideEmittersAndLasersFromIndex(g+1)},e.updateEndPoint=function(e){this.endPoint.revive(),this.endPoint.setAlpha(1);var t=GameCore.Utils.Number.toPerspectivePoint(this.intersectionPoints[e-1].x,this.intersectionPoints[e-1].y),n=t.x,i=t.y;this.endPoint.setPosition(n,i)},e.hideEmittersAndLasersFromIndex=function(e){for(var t=e;t<=this.maxSize;t++)this.emitters[t].on=!1,this.shotGuideGroup[t].setVisible(!1)},e.hideAllEmitters=function(){this.emitters.forEach((function(e){e.on=!1}))},e.hideAllLasers=function(){this.shotGuideGroup.forEach((function(e){e.setVisible(!1)}))},e.updateEmitter=function(e,t){for(var n=1/this.scene.world.getPixelRatio(),i=1;i<e;i++){var a=GameCore.Utils.Number.toPerspectivePoint(this.intersectionPoints[i].x,this.intersectionPoints[i].y),s=a.x,r=a.y,o=a.scale;this.emitters[i].on=!0,this.emitters[i].setPosition(s,r),this.emitters[i].setScale({start:n*o*.6,end:n*o*.3})}},e.drawPoint_3D=function(e,t){var n=1/this.scene.world.getPixelRatio(),i=GameCore.Utils.Number.toPerspectivePoint(e,t),a=i.x,s=i.y,r=i.scale,o=this.scene.add.image(a,s,$c,el.BOMB).setDepth(1e4).setScale(r*n*.2);this.scene.time.addEvent({delay:100,callback:function(){o.destroy()}})},e.drawLaser_3D=function(e,t,n,i,a){var s=GameCore.Utils.Number.toPerspectivePoint(e,t),r=s.x,o=s.y,c=GameCore.Utils.Number.toPerspectivePoint(n,i),l=c.x,h=c.y,u=Phaser.Math.Angle.Between(r,o,l,h),d=this.shotGuideGroup[a-1];d.setPosition(r,o),d.setVisible(!0),d.setAlpha(1),d.setDisplaySize(Phaser.Math.Distance.Between(r,o,l,h),8),d.angle=(u+Math.PI/2*2)*Phaser.Math.RAD_TO_DEG},t}(),nl=tl,il={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},al=il.STATUS,sl=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(al.READY)},t.start=function(){this.isRunning()||this.setState(al.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(al.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===al.READY},t.isRunning=function(){return this.state===al.RUNNING},t.isStopped=function(){return this.state===al.STOPPED},e}(),rl=sl;!function(e){e.INITIALIZED="initialized",e.SHOOT_BALL="shoot-ball",e.GAME_OVER="game-over",e.TIMER_CREATED="timer-created",e.SCORE_CHANGED="scoreChanged"}(Qc||(Qc={}));var ol,cl=Qc,ll=il.STATUS,hl=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.updatePlayerScore=function(){var e=n.scene.layoutManager.objects.header.challengeBlock,t=n.scene.scoreCounter.getScore();e.leftPlayer.setScore(t)},n.logLevelByScore=function(){var e=n.scene.scoreCounter.getScore(),t=n.scene.registry.get("log_level");if(e>=1e4*t){var i=n.scene.grid,a=i.shotBallsCountPerLevel,s=i.matchedBallsCountPerLevel;n.scene.grid.shotBallsCountPerLevel=0,n.scene.grid.matchedBallsCountPerLevel=0,n.scene.analytics.event(qt._.LEVEL_END,{level:t,score:e,level_name:"level_"+t,success:!0,shot_balls:a,matched_balls:s});var r=t+1;n.scene.analytics.levelStart(r,e,"level_"+r),n.scene.registry.set("log_level",r)}},n.scene=t,n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=ya},n.start=function(){if(!this.isRunning()){var e=this.scene.storage.getState(),t=ks(e)||this.gameMode;switch(this.gameMode=t,this.gameMode){case ya:this.startSingleMode();break;case Aa:this.startOnlineMode();break;case ba:this.startTournamentMode();break;case Sa:this.startChallengeMode();break;case Ea:this.startMatchingGroupMode();break;default:this.stopOnlineMode(),this.stopChallengeMode(),this.stopTournamentMode()}this.setState(ll.RUNNING)}},n.stop=function(){switch(this.gameMode){case ya:this.stopSingleMode();break;case Aa:this.stopOnlineMode();break;case ba:this.stopTournamentMode();break;case Sa:this.stopChallengeMode();break;case Ea:this.stopMatchingGroupMode()}this.setState(ll.STOPPED)},n.setGameMode=function(e){this.isRunning()||(this.gameMode=e)},n.startSingleMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.revive(),e.reset(),this.scene.events.on(cl.SCORE_CHANGED,this.logLevelByScore),this.scene.events.on(cl.SCORE_CHANGED,e.animateToFill)},n.stopSingleMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.kill(),this.scene.events.off(cl.SCORE_CHANGED,this.logLevelByScore),this.scene.events.off(cl.SCORE_CHANGED,e.animateToFill)},n.startOnlineMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.revive(),e.reset(),this.scene.events.on(cl.SCORE_CHANGED,e.animateToFill)},n.stopOnlineMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.kill(),this.scene.events.off(cl.SCORE_CHANGED,e.animateToFill)},n.startTournamentMode=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,s,r,o,c,l,u,d,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.layoutManager.objects.header,n=t.tournamentPlayers,(i=t.progressTargets).revive(),i.reset(),this.scene.events.on(cl.SCORE_CHANGED,i.animateToFill),e.prev=4,n.kill(),e.next=8,this.scene.facebook.getTournamentAsync();case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:if(o=r.getPayload()){e.next=14;break}return e.abrupt("return");case 14:if((c=JSON.parse(o)).leaderboardId){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,Ys(c.leaderboardId,{limit:5});case 19:if(!((l=e.sent).length<1)){e.next=22;break}return e.abrupt("return");case 22:return u=de()(l).call(l,(function(e){return e.playerId})),e.next=25,this.scene.profile.requestProfiles(u);case 25:if(d=this.scene.profile.getProfiles(),p=de()(l).call(l,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=d[t];if(!a)return null;var s=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:s}})),!((f=bi()(s=he()(p).call(p,(function(e){return null!==e}))).call(s,(function(e,t){return t.score-e.score}))).length<1)){e.next=30;break}return e.abrupt("return");case 30:n.revive(),n.updateData(f),e.next=39;break;case 34:if(e.prev=34,e.t0=e.catch(4),!(e.t0 instanceof Ns)){e.next=38;break}return e.abrupt("return");case 38:(0,a.tO)(e.t0);case 39:case"end":return e.stop()}}),e,this,[[4,34]])})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){var e=this.scene.layoutManager.objects.header,t=e.tournamentPlayers,n=e.progressTargets;t.kill(),n.kill(),this.scene.events.off(cl.SCORE_CHANGED,n.animateToFill)},n.startChallengeMode=function(){var e=this.scene.layoutManager.objects.header,t=e.challengeBlock,n=e.progressTargets;n.reset(),t.revive();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),s=a.playerId,r=a.photo;t.leftPlayer.loadPhoto(s,r),t.leftPlayer.scoreText.kill();var o=yr(i),c=o.playerId,l=o.photo;t.rightPlayer.loadPhoto(c,l);var h=gr(i),u=h.whitePlayerId,d=h.whitePlayerScore,p=h.blackPlayerScore,f=s===u;t.leftPlayer.setScore(f?d:p),t.rightPlayer.setScore(f?p:d),this.scene.events.on(cl.SCORE_CHANGED,this.updatePlayerScore),this.scene.events.on(cl.SCORE_CHANGED,this.logLevelByScore),this.scene.events.on(cl.SCORE_CHANGED,n.animateToFill)},n.stopChallengeMode=function(){var e=this.scene.layoutManager.objects.header,t=e.challengeBlock,n=e.progressTargets;t.kill(),this.scene.events.off(cl.SCORE_CHANGED,this.updatePlayerScore),this.scene.events.off(cl.SCORE_CHANGED,this.logLevelByScore),this.scene.events.off(cl.SCORE_CHANGED,n.animateToFill)},n.startMatchingGroupMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.revive(),e.reset(),this.scene.events.on(cl.SCORE_CHANGED,e.animateToFill)},n.stopMatchingGroupMode=function(){var e=this.scene.layoutManager.objects.header.progressTargets;e.kill(),this.scene.events.off(cl.SCORE_CHANGED,e.animateToFill)},t}(rl),ul=hl,dl=function(e){function t(t,n,i,a,s){var r;return void 0===a&&(a=""),void 0===s&&(s=""),(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.image3D=void 0,r.currentLayer=void 0,r.scene=t,r.image3D=t.make.image({x:n,y:i,key:a,frame:s,add:!1}),r.image3D.setName("ArcadeImage3D"),r.assignLayer(r.scene.gridBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.setWorldSize=function(t,n){e.prototype.setWorldSize.call(this,t,n),this.image3D.setWorldSize(t,n)},n.postUpdate=function(){var e=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),t=e.x,n=e.y,i=e.scale;this.image3D.setScale(this.scaleX*i,this.scaleY*i),this.image3D.setPosition(t,n)},n.setPosition=function(t,n,i,a){var s,r;e.prototype.setPosition.call(this,t,n,i,a);var o=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),c=o.x,l=o.y,h=o.scale;return null==(s=this.image3D)||s.setScale(this.scaleX*h,this.scaleY*h),null==(r=this.image3D)||r.setPosition(c,l),this},n.setFrame=function(t){var n;return e.prototype.setFrame.call(this,t),null==(n=this.image3D)||n.setFrame(t),this},n.kill=function(){e.prototype.kill.call(this),this.image3D.kill(),this.removeLayer()},n.revive=function(){e.prototype.revive.call(this),this.image3D.revive(),this.assignLayer(this.currentLayer)},n.assignLayer=function(e){this.removeLayer(),this.currentLayer=e,this.currentLayer.add(this.image3D,!0)},n.removeLayer=function(){this.currentLayer&&this.currentLayer.remove(this.image3D,!0)},t}(Phaser.Physics.Arcade.Image),pl=dl,fl=rc.Z.GAMEPLAY.TEXTURES_32BIT,gl=fl.KEY,ml=fl.FRAME,vl=function(e){function t(t,n,i,a,s){var r;return void 0===a&&(a=""),void 0===s&&(s=""),(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.color=void 0,r.stamp=void 0,r.ballSize=void 0,r.scene=t,r.image3D.setName("AbstractBall"),r}(0,c.Z)(t,e);var n=t.prototype;return n.getColor=function(){return this.color},n.setColor=function(e){switch(this.setTexture(gl),e){case zc.Red:this.setFrame(ml.BALL_RED);break;case zc.Green:this.setFrame(ml.BALL_GREEN);break;case zc.Blue:this.setFrame(ml.BALL_BLUE);break;case zc.Yellow:this.setFrame(ml.BALL_YELLOW);break;case zc.Violet:this.setFrame(ml.BALL_VIOLET)}this.color=e,this.image3D.setTexture(this.texture.key,this.frame.name)},n.setStamp=function(e){var t;e&&(null==(t=this.stamp)||t.kill(),e.assignLayer(this.currentLayer),this.stamp=e)},n.getStamp=function(){return this.stamp},n.assignLayer=function(t){var n;e.prototype.assignLayer.call(this,t),null==(n=this.stamp)||n.assignLayer(t)},n.takeStamp=function(){var e=this.stamp;return this.stamp=void 0,e},n.postUpdate=function(){var t;e.prototype.postUpdate.call(this),null==(t=this.stamp)||t.followBall(this)},n.initDefault=function(){this.setAlpha(1),this.setAngle(0),this.setDefaultSize(),this.image3D.revive(),this.image3D.setAlpha(1)},n.setDefaultSize=function(){if(this.ballSize){var e=this.ballSize,t=e.width,n=e.height;this.setWorldSize(t,n)}},n.setWorldSize=function(t,n,i){void 0===i&&(i=!1),e.prototype.setWorldSize.call(this,t,n),i&&this.ballSize&&this.ballSize.setSize(t,n),this.ballSize||(this.ballSize=new Phaser.Structs.Size(t,n))},n.preKill=function(){this.image3D.kill()},t}(pl),yl=function(){function e(e){this.speed=void 0,this.speed=e}return e.prototype.fly=function(e,t){e.body.enable=!0,e.setVelocity(t.x*this.speed,t.y*this.speed)},e}(),Sl=rc.Z.GAMEPLAY.TEXTURES_32BIT,El=Sl.KEY,bl=Sl.FRAME,Al=function(e){function t(t){var n;return(n=e.call(this,t)||this).images=void 0,n.segments=void 0,n.group=void 0,n.color=void 0,n.images=[],n.segments=[],n.group=t.add.group({classType:Phaser.GameObjects.Image,defaultKey:El,defaultFrame:bl.TAIL}),n.createDefault(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createDefault=function(){var e=this.createDefaultImage();this.images.push(e)},n.createDefaultImage=function(){var e=this.group.get(0,0);return e.revive(),e.setWorldSize(30,90),e.setAngle(0),e.setOrigin(1,0),e.setAlpha(.8),e.setTint(this.color),this.add(e),e},n.move=function(e,t){if(this.x!==e||this.y!==t){var n=e-this.x,i=t-this.y,a=new Phaser.Math.Vector2(n,i);if(!(a.lengthSq()<100)){var s={x:0,y:0,head:0,length:a.length(),angle:a.angle()/Math.PI*180+90};this.setPosition(e,t);var r=s;this.segments.forEach((function(e){e.x-=n,e.y-=i,e.head=r.head+r.length,e.angle.toFixed(1)===r.angle.toFixed(1)&&(r.length+=e.length,e.head+=e.length,e.length=0),r=e})),this.segments.unshift(s),this.alignSegments()}}},n.resetTail=function(e,t){this.setPosition(e,t),this.images.forEach((function(e){return e.kill()})),this.images=[],this.createDefault(),this.segments=[{x:0,y:0,head:0,length:0,angle:0}],this.alignSegments()},n.setColor=function(e){this.color=e,this.group.setTint(e)},n.alignSegments=function(){var e,t=this;this.images.forEach((function(e){return e.kill()})),this.images=[],this.segments=he()(e=this.segments).call(e,(function(e){return!(e.head>=90)&&(0!==e.length&&(!(e.head+e.length>128)||(e.length=90-e.head,!0)))})),this.segments.forEach((function(e){var n=t.createDefaultImage();n.setPosition(e.x,e.y),t.alignSegment(n,e.head,e.head+e.length,e.angle),t.images.push(n)}))},n.alignSegment=function(e,t,n,i){var a=this.scene.world.getPixelRatio(),s=n-t;e.setCrop(0,t*a,30*a,s*a),e.setOrigin(.5*a,t/90*a),e.setAngle(i)},t}(Phaser.GameObjects.Container),wl=Al,Tl=rc.Z.GAMEPLAY.TEXTURES_32BIT,Pl=(Tl.KEY,Tl.FRAME,function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.tail=void 0,r.emitter=void 0,r.flyingBehavior=void 0,r.launching=!1,r.timerEvents=[],r.radius=0,r.scene=t,r.initSprite(),r.image3D.setName("BulletBall"),r.assignLayer(r.scene.bulletBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.initSprite=function(){var e=this.scene.registry.get("bullet").speed;this.flyingBehavior=new yl(e),this.tail=new wl(this.scene),this.tail.kill(),this.tail.setAlpha(.7),this.scene.shadowLayer.add(this.tail,!0)},n.initDefault=function(){return e.prototype.initDefault.call(this),this.setRotation(0),this.launching=!1,this},n.updatePhysicsRadius=function(e){var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},n.setPhysicsRadius=function(e){this.radius=e},n.launch=function(e){var t,n,i;this.flyingBehavior.fly(this,e),this.launching=!0;var a=this.getColor();this.tail.setColor(a),this.tail.resetTail(this.x,this.y),null==(t=this.emitter)||t.setTint(a),null==(n=this.emitter)||n.startFollow(this.image3D),null==(i=this.emitter)||i.start()},n.postUpdate=function(){var t=this.x,n=this.y;this.tail.move(t,n),this.launching&&(this.setRotation(this.body.velocity.angle()+Math.PI/2),this.updatePhysicsRadius(1.1*this.radius),this.scene.stateManager.isGameOver()&&this.kill()),e.prototype.postUpdate.call(this),this.y<-1e3&&this.kill(),this.setVisible(!1)},n.preKill=function(){var t,n=this;e.prototype.preKill.call(this),this.setVisible(!1),this.launching=!1,this.body.enable=!1,null==(t=this.emitter)||t.stop(),this.tail.kill();var i=this.scene.time.delayedCall(120,(function(){n.kill()}));this.timerEvents.push(i)},n.kill=function(){var t,n,i;this.launching=!1,null==(t=this.takeStamp())||t.kill(),null==(n=this.body)||n.world.disableBody(this.body),this.tail.kill(),null==(i=this.emitter)||i.stop(),this.timerEvents.forEach((function(e){return e.remove()})),this.timerEvents.length=0,e.prototype.kill.call(this)},n.setEmitter=function(e){this.emitter=e},t}(vl)),Cl=Pl,Il=function(e){function t(t,n){var i;(i=e.call(this,t,n,{})||this).scene=void 0,i.physicsRadius=void 0,i.tailParticles=void 0,i.ballSize=void 0,i.scene=n,i.setActive(!0),i.scene.add.existing((0,za.Z)(i)),i.physicsRadius=i.scene.data.get("physicsWorld").bulletCollisionRadius;var a=i.scene.data.get("ball"),s=a.width,r=a.height;return i.ballSize=new Phaser.Structs.Size(s,r),i.tailParticles=n.tailParticles,i.scene.events.off("postupdate",i.postUpdate,(0,za.Z)(i)),i.scene.events.on("postupdate",i.postUpdate,(0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.postUpdate=function(){this.scene.stateManager.isPaused()||this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.createBulletBall().kill()}},n.createBulletBall=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,t=new Cl(this.scene,0,0,e);this.add(t),t.setPhysicsRadius(this.physicsRadius);var n=this.ballSize,i=n.width,a=n.height;t.setWorldSize(i,a),t.body instanceof Phaser.Physics.Arcade.Body&&(t.body.onWorldBounds=!0),t.setDepth(ja.Z.BULLET);var s=this.tailParticles.createTailEmitter();return t.setEmitter(s),t},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=this.createBulletBall()),(n||0===n)&&i.setColor(n),this.world.enableBody(i),i.initDefault(),i.revive(),i.setPosition(e,t),i.updatePhysicsRadius(this.physicsRadius),i.setCollideWorldBounds(!0,1,1),i.body.enable=!1,this.scene.bulletGroup.add(i),i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.Physics.Arcade.Group),xl=Il,Bl=function(e){(0,c.Z)(n,e);var t=n.prototype;function n(t,n,i,a,s){var r;return(r=e.call(this,t,n,i,a,s)||this).row=-1,r.col=-1,r.isProcess=!1,r.heavingBehavior=void 0,r.image3D.setName("grid-ball"),r.setName("grid-ball"),r.assignLayer(r.scene.gridBallLayer),r}return t.isHeaving=function(){return void 0!=this.heavingBehavior},t.setHeavingBehavior=function(e){this.heavingBehavior=e},t.heave=function(){var e,t=this,n=null==(e=this.heavingBehavior)?void 0:e.heave(this);null==n||n.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){t.heavingBehavior=void 0}))},t.setProcessed=function(e){void 0===e&&(e=!0),this.isProcess=e},t.initDefault=function(){return e.prototype.initDefault.call(this),this.row=-1,this.col=-1,this.isProcess=!1,this.heavingBehavior=void 0,this},t.updatePhysicsRadius=function(e){void 0===e&&(e=33);var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},t.jiggle=function(e,t,n){var i=this;this.scene.tweens.addCounter({from:0,to:t,yoyo:!0,duration:150,loop:1,delay:n,onUpdate:function(t){if(i.active){var n=t.data[0].previous||0,a=t.getValue()-n;1===t.loopCounter?(i.x+=a*e.x,i.y+=a*e.y):(i.x-=a/4*e.x,i.y-=a/4*e.y)}else t.complete()},ease:"Sine.easeOut"})},t.moveTo=function(e,t,n){var i=this,a=e-this.x,s=t-this.y,r=Math.sqrt(a*a+s*s)/250*1e3;this.scene.tweens.addCounter({duration:r,onUpdate:function(e){if(i.active){var t=e.data[0].previous||0,r=e.getValue()-t,o=r*a,c=r*s;i.x+=o,i.y+=c,null==n||n.setPosition(i.x,i.y)}else e.complete()},ease:"Sine.easeOut"})},t.postUpdate=function(){e.prototype.postUpdate.call(this),this.image3D.setVisible(this.image3D.y>-20)},t.preKill=function(){this.scene.tweens.add({targets:this,duration:150,alpha:{from:1,to:.3},onComplete:this.kill,onCompleteScope:this})},t.kill=function(){var t,n;null==(t=this.takeStamp())||t.kill(),null==(n=this.body)||n.world.disableBody(this.body),e.prototype.kill.call(this)},n}(vl),kl=Bl,Rl=function(e){function t(t,n,i){var a;(a=e.call(this,t,n,{immovable:!0,allowGravity:!0,allowRotation:!1})||this).scene=void 0,a.physicsRadius=void 0,a.texture=void 0,a.ballSize=void 0,a.scene=n,a.scene.add.existing((0,za.Z)(a)),a.setActive(!0),a.texture=i,a.physicsRadius=a.scene.data.get("physicsWorld").gridBallCollisionRadius;var s=a.scene.data.get("ball"),r=s.width,o=s.height;return a.ballSize=new Phaser.Structs.Size(r,o),a.listenEvents(),a}(0,c.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.off("postupdate",this.postUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)},n.postUpdate=function(){this.scene.stateManager.isPaused()||this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=this.createGridBall()),(n||0===n)&&i.setColor(n),i.initDefault(),i.setPosition(e,t),i.revive(),i.updatePhysicsRadius(this.physicsRadius),i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.createGridBall().kill()}},n.createGridBall=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,t=this.ballSize,n=t.width,i=t.height,a=new kl(this.scene,0,0,e);return this.add(a),a.setWorldSize(n,i),a.setDepth(ja.Z.BALL_AND_TAIL),a},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.contains=function(e){return"grid-ball"===e.name},t}(Phaser.Physics.Arcade.Group),Ol=Rl,_l=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t},Dl=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),r=(0,Ee.qZ)(80),i+=1,e.next=9,Q().all([s,r]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ll=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},Nl=function(e){try{if(!_l())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?Ll(e):t.isIOS()&&Dl(e).catch((function(e){}))}catch(n){}},Ml=function(){function e(e){this.scene=void 0,this.vibrateSupport=void 0,this.scene=e,this.vibrateSupport=_l()}var t=e.prototype;return t.handleCombosIncreased=function(e){this.isVibrateEnable()&&(e>9?Nl(350):e>=3&&Nl(50*(e-2)))},t.handleBombCreated=function(){this.isVibrateEnable()&&Nl(350)},t.handleBombExploding=function(){this.isVibrateEnable()&&Nl(450)},t.handleAlertAboutFlyingDino=function(e){this.isVibrateEnable()&&Nl(e)},t.isVibrateEnable=function(){var e=this.scene.player.getPlayerSettings();return this.vibrateSupport&&e.vibrate},e}(),Gl=Ml,Fl=n(30),Zl=n.n(Fl),Ul=function(e){function t(t,n,i,a,s){var r;return void 0===a&&(a=""),void 0===s&&(s=""),(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.image3D=void 0,r.currentLayer=void 0,r.scene=t,r.image3D=t.make.sprite({x:n,y:i,key:a,frame:s,add:!1}),r.assignLayer(t.gridBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.setWorldSize=function(t,n){e.prototype.setWorldSize.call(this,t,n),this.image3D.setWorldSize(t,n)},n.postUpdate=function(){var e=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),t=e.x,n=e.y,i=e.scale;this.image3D.setScale(this.scaleX*i,this.scaleY*i),this.image3D.setPosition(t,n)},n.setPosition=function(t,n,i,a){var s,r;e.prototype.setPosition.call(this,t,n,i,a);var o=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),c=o.x,l=o.y,h=o.scale;return null==(s=this.image3D)||s.setScale(this.scaleX*h,this.scaleY*h),null==(r=this.image3D)||r.setPosition(c,l),this},n.setFrame=function(t){var n;return e.prototype.setFrame.call(this,t),null==(n=this.image3D)||n.setFrame(t),this},n.kill=function(){e.prototype.kill.call(this),this.image3D.kill(),this.removeLayer()},n.revive=function(){e.prototype.revive.call(this),this.image3D.revive(),this.currentLayer.add(this.image3D,!0)},n.assignLayer=function(e){this.removeLayer(),this.currentLayer=e,this.currentLayer.add(this.image3D,!0)},n.removeLayer=function(){this.currentLayer&&this.currentLayer.remove(this.image3D,!0)},t}(Phaser.Physics.Arcade.Image),Yl=Ul,zl=rc.Z.GAMEPLAY.TEXTURES_32BIT,Wl=zl.KEY,Hl=zl.FRAME,Kl=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.shadow=void 0,r.tailEmitter=[],r.fireParticles=void 0,r.launching=!1,r.flyingBehavior=void 0,r.size=void 0,r.radius=0,r.scene=t,r.createFireParticle(),r.initSprite(),r.assignLayer(t.bulletBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.setRocketShadow=function(){this.shadow=this.scene.add.image(this.image3D.x,this.image3D.y+12,Wl,Hl.ROCKET_SHADOW).setOrigin(.5,.5),this.shadow.setWorldSize(50,50),this.shadow.kill(),this.scene.shadowLayer.add(this.shadow,!0)},n.setBombShadow=function(){this.shadow=this.scene.add.image(this.image3D.x,this.image3D.y+12,Wl,Hl.SHADOW).setOrigin(.5,.5),this.shadow.setWorldSize(50,50),this.shadow.kill(),this.shadow.setAlpha(.65),this.scene.shadowLayer.add(this.shadow,!0)},n.createFireParticle=function(){var e=1/this.scene.world.getPixelRatio(),t=new Phaser.Geom.Circle(0,0,3);this.fireParticles=this.scene.add.particles(Wl),this.fireParticles.createEmitter({frame:[Hl.PARTICLE_LIGHT,Hl.PARTICLE_STAR],scale:{start:1.3*e,end:0,ease:Phaser.Math.Easing.Expo.In},alpha:{start:1,end:0},rotate:{min:-50,max:50},speed:{min:20,max:35},frequency:30,lifespan:{min:400,max:600},emitZone:{type:"random",source:t},blendMode:"ADD",tint:[14038808]}),this.fireParticles.setDepth(ja.Z.EFFECT),this.fireParticles.kill()},n.initSprite=function(){},n.initDefault=function(){this.setAlpha(1),this.setAngle(0),this.setDefaultSize(),this.image3D.revive(),this.shadow.revive(),this.setActive(!0),this.assignLayer(this.scene.bulletBallLayer)},n.setDefaultSize=function(){if(this.size){var e=this.size,t=e.width,n=e.height;this.setWorldSize(t,n)}},n.setWorldSize=function(t,n,i){void 0===i&&(i=!1),e.prototype.setWorldSize.call(this,t,n),i&&(this.size?this.size.setSize(t,n):this.size=new Phaser.Structs.Size(t,n))},n.updatePhysicsRadius=function(e){var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},n.setPhysicsRadius=function(e){this.radius=e},n.setFlyingBehavior=function(){var e=this.scene.registry.get("bullet").speed;return this.flyingBehavior=new yl(e),this},n.launch=function(e){var t=this;this.assignLayer(this.scene.gridBallLayer),this.flyingBehavior.fly(this,e),this.launching=!0;var n=zc.Black;Zl()(this.tailEmitter).forEach((function(e){null==e||e.setTint(n).startFollow(t.image3D).start()}))},n.postUpdate=function(){var t=this;e.prototype.postUpdate.call(this);var n=1/this.scene.world.getPixelRatio(),i=this.image3D,a=i.x,s=i.y;this.fireParticles.setPosition(a,s-this.image3D.displayHeight/1.5),this.fireParticles.setScale(2*this.image3D.scale),this.launching&&this.scene.stateManager.isGameOver()&&this.kill();var r=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y+12),o=r.x,c=r.y;this.shadow.setPosition(o,c),this.shadow.setScale(this.image3D.scale),Zl()(this.tailEmitter).forEach((function(e){null==e||e.setScale(t.image3D.scale*n)})),this.y<this.scene.gameSettings.topY&&this.kill()},n.makeExplosion=function(){this.preKill()},n.preKill=function(){var e=this;this.launching=!1,this.body.enable=!1,Zl()(this.tailEmitter).forEach((function(e){e.stop()})),this.hideGlow(),this.fireParticles.kill(),this.scene.time.delayedCall(100,(function(){e.kill()}))},n.kill=function(){var t;this.launching=!1,null==(t=this.body)||t.world.disableBody(this.body),Zl()(this.tailEmitter).forEach((function(e){e.stop()})),this.hideGlow(),this.fireParticles.kill(),this.shadow.kill(),e.prototype.kill.call(this)},n.setTailEmitter=function(e){this.tailEmitter=e},n.hideGlow=function(){},n.showGlow=function(){},t}(Yl),Vl=Kl,jl=function(e){function t(t,n){var i;(i=e.call(this,t,n)||this).scene=void 0,i.tailParticles=void 0,i.physicsRadius=void 0,i.depth=void 0,i.bombSize=void 0,i.scene=n,i.setActive(!0),i.scene.add.existing((0,za.Z)(i)),i.physicsRadius=i.scene.data.get("physicsWorld").bulletCollisionRadius;var a=i.scene.data.get("bomb"),s=a.width,r=a.height;return i.bombSize=new Phaser.Structs.Size(s,r),i.tailParticles=n.tailParticles,i.listenEvents(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setPhysicsRadius=function(e){return this.physicsRadius=e,this},n.setDepth=function(t,n){return this.depth=t,e.prototype.setDepth.call(this,t,n),this},n.listenEvents=function(){this.scene.events.off("postupdate",this.postUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)},n.postUpdate=function(){this.scene.stateManager.isPaused()||this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getFirstDead();return n||(n=this.addBomb()),this.world.enableBody(n),n.initDefault(),n.revive(),n.image3D.setOrigin(.5,.7),n.image3D.clearTint(),n.image3D.play("boom-flying"),n.setPosition(e,t),n.setCollideWorldBounds(!0,1,1),n.updatePhysicsRadius(this.physicsRadius),n.body.enable=!1,n},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.addBomb().kill()}},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.addBomb=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME,i=new Vl(this.scene,0,0,t,n.BOMB);i.setDepth(ja.Z.BULLET),i.setBombShadow();var a=this.tailParticles.createTailEmitter();i.setTailEmitter([a]),this.add(i),i.setPhysicsRadius(this.physicsRadius);var s=this.bombSize,r=s.width,o=s.height;return i.setWorldSize(r,o),this.scene.bulletGroup.add(i),i},t}(Phaser.Physics.Arcade.Group),Xl=jl,ql=n(548);!function(e){e.StampUp="stamp-up",e.StampGift="stamp-gift",e.None="none"}(ol||(ol={}));var Ql,Jl=ol,$l=function(e){function t(t,n,i,a,s){var r;return void 0===a&&(a=""),void 0===s&&(s=""),(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.image3D=void 0,r.currentLayer=void 0,r.scene=t,r.image3D=t.make.image({x:n,y:i,key:a,frame:s,add:!1}),r.image3D.setName("Image3D"),r.assignLayer(r.scene.gridBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.setWorldSize=function(t,n){e.prototype.setWorldSize.call(this,t,n),this.image3D.setWorldSize(t,n)},n.postUpdate=function(){var e=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),t=e.x,n=e.y,i=e.scale;this.image3D.setScale(this.scaleX*i,this.scaleY*i),this.image3D.setPosition(t,n)},n.setPosition=function(t,n,i,a){var s,r;e.prototype.setPosition.call(this,t,n,i,a);var o=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),c=o.x,l=o.y,h=o.scale;return null==(s=this.image3D)||s.setScale(this.scaleX*h,this.scaleY*h),null==(r=this.image3D)||r.setPosition(c,l),this},n.setFrame=function(t){var n;return e.prototype.setFrame.call(this,t),null==(n=this.image3D)||n.setFrame(t),this},n.kill=function(){e.prototype.kill.call(this),this.image3D.kill(),this.removeLayer()},n.revive=function(){e.prototype.revive.call(this),this.image3D.revive(),this.assignLayer(this.currentLayer)},n.assignLayer=function(e){this.removeLayer(),this.currentLayer=e,this.currentLayer.add(this.image3D,!0)},n.removeLayer=function(){this.currentLayer&&this.currentLayer.remove(this.image3D,!0)},t}(Phaser.GameObjects.Image),eh=$l,th=rc.Z.GAMEPLAY.TEXTURES_32BIT.FRAME,nh=function(e){(0,c.Z)(n,e);var t=n.prototype;function n(t,n,i,a){var s;return(s=e.call(this,t,n,i,a,"")||this).scene=void 0,s.stampType=void 0,s.fadeOutTween=void 0,s.explosiveAnims=void 0,s.scene=t,s.image3D.setName("Stamp3D"),s.image3D.setWorldSize(40,40),s.stampType=Jl.None,s.createExplosiveAnimation(),s}return t.getStampType=function(){return this.stampType},t.setStamp=function(e){switch(e){case Jl.StampUp:this.setFrame(th.BONUS_STAMP_UP);break;case Jl.StampGift:this.setFrame(th.BONUS_STAMP_GIFT);break;default:this.setFrame(th.BLANK)}this.stampType=e,this.image3D.setTexture(this.texture.key,this.frame.name)},t.followBall=function(e){this.setPosition(e.x,e.y+1),this.image3D.scale=e.image3D.scale,this.image3D.visible=e.image3D.visible},t.revive=function(){var t=this;e.prototype.revive.call(this),this.scene.time.addEvent({delay:33,callback:function(){t.explosiveAnims.explode(12,t.image3D.x,t.image3D.y)}}),this.playFadeOutTween()},t.kill=function(){e.prototype.kill.call(this),this.stopFadeOut()},t.playFadeOutTween=function(){var e=this.scene.registry.get("heavingBallTimer");this.image3D.setAlpha(1),this.fadeOutTween=this.scene.tweens.add({targets:this.image3D,duration:e,alpha:0,ease:Phaser.Math.Easing.Quadratic.In})},t.createExplosiveAnimation=function(){this.explosiveAnims=new ql.Z(this.scene),this.explosiveAnims.setDepth(ja.Z.EFFECT)},t.stopFadeOut=function(){var e;null==(e=this.fadeOutTween)||e.stop(),this.fadeOutTween=void 0},n}(eh),ih=nh,ah=function(e){function t(t){var n;return(n=e.call(this,t,{})||this).scene=void 0,n.scene=t,n.setActive(!0),n.initObjects(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getFirstDead();return n||(n=this.createStamp()),n.setPosition(e,t),n.revive(),n},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(){for(var e=0;e<5;e++){this.createStamp().kill()}},n.createStamp=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,t=new ih(this.scene,0,0,e);return this.add(t),t},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),sh=ah,rh=n(541),oh=n(542),ch=rc.Z.DEFAULT,lh=ch.KEY,hh=ch.FRAME,uh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popupBg=void 0,s.popupContainer=void 0,s.scoreText=void 0,s.rankingIcon=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.open=function(){e.prototype.open.call((0,za.Z)(s)),s.updateScore(),s.runOpenAnimation()},s.closePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.scene=t,s.createPopup(),s.createPopupContent(),s.setDepth(qa.Ks.POPUP),s.setY(-50),s.background.setAlpha(.5),s}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popupContainer=this.scene.make.container({}),this.add(this.popupContainer),this.popupBg=this.scene.make.image({key:lh,frame:hh.POPUP_GAMEPLAY}),this.popupBg.setWorldSize(375,121),this.popupContainer.add(this.popupBg),Phaser.Display.Align.In.Center(this.popupContainer,this.zone)},n.createPopupContent=function(){this.createScoreText()},n.createScoreText=function(){alert(1);var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#ffea5f"},origin:{x:0,y:.5},text:""}),t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffea5f"),t.addColorStop(1,"#f7ac2f"),e.setFill(t),e.setHighQuality(),e.setFontSize(this.scene.fontSize(32)),e.setStroke("#93550e",2),this.scoreText=e,this.rankingIcon=this.scene.add.image(-15,0,lh,hh.ICON_RANKING),this.rankingIcon.setWorldSize(36,36),this.popupContainer.add([this.scoreText,this.rankingIcon])},n.updateScore=function(){var e=this.scene.scoreCounter.getScore();this.scoreText.setText(""+e),Phaser.Display.Align.In.Center(this.scoreText,this.popupBg,15),Phaser.Display.Align.In.LeftCenter(this.rankingIcon,this.scoreText,45)},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,500)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,500)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popupContainer.y;this.popupShowUpAnimation=new rh.Z({targets:[this.popupContainer],delay:e,duration:t,props:{y:{start:350,from:350,to:n},alpha:{start:1,from:1,to:1}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.popupContainer],delay:e,duration:t,completeDelay:1e3})),null==(n=this.popupFadeOutAnimation)||n.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),dh=uh,ph=rc.Z.DEFAULT,fh=ph.KEY,gh=ph.FRAME,mh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popupBg=void 0,s.popupContainer=void 0,s.title=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.open=function(){e.prototype.open.call((0,za.Z)(s)),s.runOpenAnimation()},s.closePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.createBackground(),s.createPopup(),s.createPopupContent(),s.setDepth(qa.Ks.POPUP),s.setY(-50),s.background.setAlpha(1),s}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.isLandscape()?ma.Z.LANDSCAPE.KEY:ma.Z.PORTRAIT.KEY,t=this.scene.make.image({key:e,origin:{x:.5,y:.5}});t.setWorldSize(this.zone.width,this.zone.height),this.add(t),Phaser.Display.Align.In.Center(t,this.zone)},n.createPopup=function(){this.popupContainer=this.scene.make.container({}),this.add(this.popupContainer),this.popupBg=this.scene.make.image({key:fh,frame:gh.POPUP_GAMEPLAY}),this.popupBg.setWorldSize(375,121),this.popupContainer.add(this.popupBg),Phaser.Display.Align.In.Center(this.popupContainer,this.zone)},n.createPopupContent=function(){this.createTutorialText()},n.createTutorialText=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#ffea5f"},origin:{x:0,y:.5},text:"READY!"}),t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffea5f"),t.addColorStop(1,"#f7ac2f"),e.setFill(t),e.setHighQuality(),e.setFontSize(this.scene.fontSize(32)),e.setStroke("#93550e",2),this.popupContainer.add(e),Phaser.Display.Align.In.Center(e,this.popupBg,0,0),this.title=e},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,400)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,400)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.background.setAlpha(1),this.popupShowUpAnimation||(this.popupShowUpAnimation=new rh.Z({targets:[this.popupContainer],delay:e,duration:t,props:{alpha:{from:0,to:1}},onComplete:function(){n.background.setAlpha(0)}})),this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.popupContainer],delay:e,duration:t,props:{alpha:0}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),vh=mh,yh=n(539),Sh=n(549),Eh=rc.Z.DEFAULT.KEY,bh=function(e){function t(t,n){var i;(i=e.call(this,t,Eh,n.framePanelOn)||this).options=void 0,i.icon=void 0,i.label=void 0,i.getFrameByStatus=function(){var e=i.options,t=e.enable,n=e.frameOn,a=e.frameOff;return t?n:a},i.options=n,i.createIcon(),i.createLabel();var a=i.options.enable;return i.updateStatus(a),i}(0,c.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t),this.label.setText(e?this.scene.lang.Text.on:this.scene.lang.Text.off),this.alignSwitch(),this.changePanel()},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:Eh,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(14)}),this.add(this.label)},n.alignSwitch=function(){this.options.enable?(this.icon.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(this.icon,this.button),Phaser.Display.Align.In.Center(this.label,this.button,-10,1)):(this.icon.setOrigin(0,.5),Phaser.Display.Align.In.LeftCenter(this.icon,this.button),Phaser.Display.Align.In.Center(this.label,this.button,10,1))},n.changePanel=function(){this.options.enable?this.button.setFrame(this.options.framePanelOn):this.button.setFrame(this.options.framePanelOff),this.button.setWorldSize(90,26)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(qt._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(sc.Z),Ah=bh,wh=rc.Z.DEFAULT,Th=wh.KEY,Ph=wh.FRAME,Ch=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i)||this).barTopLeft=void 0,r.barTopMid=void 0,r.barTopRight=void 0,r.barMidLeft=void 0,r.barMidBg=void 0,r.barMidRight=void 0,r.barBottomLeft=void 0,r.barBottomMid=void 0,r.barBottomRight=void 0,r.setSize(a,s),r.setDepth(ja.Z.POPUP),r.createPopup(),r.scene.add.existing((0,za.Z)(r)),r}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Th,Ph.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Th,Ph.POPUP_TOP_CENTER),this.barTopRight=this.scene.add.image(0,0,Th,Ph.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Th,Ph.POPUP_LEFT_CENTER),this.barMidBg=this.scene.add.image(0,0,Th,Ph.POPUP_CENTER),this.barMidRight=this.scene.add.image(0,0,Th,Ph.POPUP_RIGHT_CENTER),this.barBottomLeft=this.scene.add.image(0,0,Th,Ph.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Th,Ph.POPUP_BOTTOM_CENTER),this.barBottomRight=this.scene.add.image(0,0,Th,Ph.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(15,15),this.barTopMid.setWorldSize(170,15),this.barTopRight.setWorldSize(15,15),this.barMidLeft.setWorldSize(15,170),this.barMidBg.setWorldSize(170,170),this.barMidRight.setWorldSize(15,170),this.barBottomLeft.setWorldSize(15,15),this.barBottomMid.setWorldSize(170,15),this.barBottomRight.setWorldSize(15,15),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-30,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-30),this.barMidBg.setWorldSize(this.width-30,this.height-30),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-30),this.barBottomMid.setWorldSize(this.width-30,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,G.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Ih=Ch,xh=rc.Z.DEFAULT,Bh=xh.KEY,kh=xh.FRAME,Rh=function(e){function t(t,n,i,s){var r;return(r=e.call(this,t,n,i,s)||this).scene=void 0,r.popup=void 0,r.line=void 0,r.title=void 0,r.replayButton=void 0,r.continueButton=void 0,r.homeButton=void 0,r.shareButton=void 0,r.settingMusic=void 0,r.settingVibrate=void 0,r.blockMusic=void 0,r.blockVibrate=void 0,r.contents=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.contentShowUpAnimation=void 0,r.isButtonReleased=!1,r.open=function(){e.prototype.open.call((0,za.Z)(r));var t=r.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;r.settingMusic.updateStatus(n),r.settingVibrate.updateStatus(i),_l()||(r.blockVibrate.kill(),r.blockMusic.setPosition(0,-70)),r.runOpenAnimation()},r.handleClosePopup=function(){r.scene.audio.playSound(Qa.Z.POPUP_OFF),r.runCloseAnimation(),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name),r.scene.stateManager.play()}))},r.handleReplayGame=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isButtonReleased){e.next=2;break}return e.abrupt("return");case 2:return r.isButtonReleased=!0,e.next=5,r.scene.handleShowAd();case 5:r.runCloseAnimation(),r.scene.layoutManager.objects.header.setAlpha(0),r.popupFadeOutAnimation.next((0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.scene.tweens.getTweensOf(r.replayButton).forEach((function(e){return e.complete()})),r.isButtonReleased=!1,r.scene.screen.close(r.name),r.scene.stateManager.quit(),r.scene.stateManager.ready(),r.scene.descentController.initialize(),r.scene.shooter.initBullet(),r.scene.shooter.hide(),e.next=10,r.scene.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game.globalScene,r=n(),o=ks(r),ne()(i=[ya,ba]).call(i,o)&&(t(xo()),t(Po())),c=null,o===Sa&&(s.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),c=yr(r),t({type:Qn,payload:{}})),t(Mo()),e.next=10,t(Jo(o,c));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,a.tO)(e.t0);case 15:return e.prev=15,Yo(300),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),r.handlePlayWithFriend=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isButtonReleased){e.next=2;break}return e.abrupt("return");case 2:return t=r.scene.game.storage.getState(),n=yr(t),i=Ta(t),e.next=7,r.scene.storage.dispatch(Ko());case 7:if(a=r.scene.game.storage.getState(),s=yr(a),o=Ta(a),!r.isChallengeMode(o)){e.next=16;break}if(!r.isChallengeMode(i)){e.next=14;break}if(s.playerId!==n.playerId){e.next=14;break}return e.abrupt("return");case 14:r.scene.screen.close(r.name),r.scene.stateManager.ready();case 16:case"end":return e.stop()}}),e)}))),r.handleGotoDashboard=function(){r.scene.stateManager.quit(),r.scene.screen.close(r.name),r.scene.scene.switch(Ba.C.DASHBOARD_SCENE)},r.handleGotoLeaderboard=function(){r.scene.scene.switch(Ba.C.LEADERBOARD_SCENE)},r.handleShareScore=function(){r.scene.storage.dispatch(Rr())},r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic(),r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e),e&&Nl(350)},r.scene=t,r.createPopup(),r.createCloseButton(),r.createPopupContent(),r.createInput(),r.setDepth(qa.Ks.POPUP),r.background.setAlpha(.6),r}(0,c.Z)(t,e);var n=t.prototype;return n.createInput=function(){this.continueButton.onClick=this.handleClosePopup,this.replayButton.onClick=this.handleReplayGame,this.homeButton.onClick=this.handleGotoDashboard,this.settingMusic.onClick=this.handleMusicSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.isChallengeMode=function(e){return e===Sa},n.createCloseButton=function(){var e=new Sh.Z(this.scene,{key:Bh,frame:kh.BUTTON_CLOSE,width:23,height:23,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,5,5)},n.createPopup=function(){this.popup=new Ih(this.scene,0,0,227,340);var e=this.scene.make.image({key:Bh,frame:kh.POPUP_SETTING});e.setWorldSize(211,291),this.popup.add(e),this.add(this.popup),Phaser.Display.Align.In.BottomCenter(e,this.popup,0,-8),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMenuButtons(),this.createFooterButtons(),this.popup.add([this.title,this.replayButton,this.continueButton,this.homeButton]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.replayButton,this.continueButton,this.homeButton])},n.createTitle=function(){this.title=this.scene.add.container();var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.settings});t.setPosition(0,0),t.setScale(.9*e),this.title.add(t),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},n.createMenuButtons=function(){this.createContinueButton(),this.createReplayButton();var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.vibrate;this.createMusicButton(t),this.createVibrateButton(n)},n.createContinueButton=function(){this.continueButton=new sc.Z(this.scene,Bh,kh.BUTTON_GREEN_162X40,162,40);var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.continue});t.setPosition(0,0),t.setScale(e*this.scene.fontSize(1)),this.continueButton.setName("Continue"),this.continueButton.add(t),Phaser.Display.Align.In.Center(t,this.continueButton,0,-1),Phaser.Display.Align.In.Center(this.continueButton,this.popup,0,20)},n.createReplayButton=function(){this.replayButton=new sc.Z(this.scene,Bh,kh.BUTTON_RED_162X40,162,40);var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.replay});t.setPosition(0,0),t.setScale(e*this.scene.fontSize(1)),this.replayButton.setName("Replay"),this.replayButton.add(t),Phaser.Display.Align.In.Center(t,this.replayButton,0,-1),Phaser.Display.Align.In.Center(this.replayButton,this.popup,0,75)},n.createFooterButtons=function(){this.createHomeButton()},n.createMusicButton=function(e){var t=this.scene.make.container({});this.settingMusic=new Ah(this.scene,{enable:e,frameOn:kh.SWITCH_ON,frameOff:kh.SWITCH_OFF,framePanelOn:kh.SWITCH_PANEL_ON,framePanelOff:kh.SWITCH_PANEL_OFF}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(25,0),this.settingMusic.icon.setWorldSize(26,26);var n=this.scene.make.image({key:Bh,frame:kh.ICON_SOUND});n.setPosition(-45,0),n.setWorldSize(31,28),t.add([n,this.settingMusic]),this.popup.add(t),t.setPosition(0,-95),this.blockMusic=t},n.createVibrateButton=function(e){var t=this.scene.make.container({});this.settingVibrate=new Ah(this.scene,{enable:e,frameOn:kh.SWITCH_ON,frameOff:kh.SWITCH_OFF,framePanelOn:kh.SWITCH_PANEL_ON,framePanelOff:kh.SWITCH_PANEL_OFF}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.setPosition(25,0),this.settingVibrate.icon.setWorldSize(26,26);var n=this.scene.make.image({key:Bh,frame:kh.ICON_VIBRATE});n.setPosition(-45,0),n.setWorldSize(29,35),t.add([n,this.settingVibrate]),this.popup.add(t),t.setPosition(0,-50),this.blockVibrate=t},n.createHomeButton=function(){this.homeButton=new sc.Z(this.scene,Bh,kh.BUTTON_HOME,37,37),this.homeButton.setName("Home"),Phaser.Display.Align.In.BottomCenter(this.homeButton,this.popup,0,-22)},n.createShareButton=function(){this.shareButton=new sc.Z(this.scene,Bh,kh.BUTTON_SHARE,37,37),this.shareButton.setName("Share"),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.popup,50,-22)},n.runOpenAnimation=function(){this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new Ic({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:-30},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new yh.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Oh=Rh,_h=n(555),Dh={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},Lh=function(e){function t(t){return e.call(this,Dh,t)||this}return(0,c.Z)(t,e),t}(dc.Z),Nh=rc.Z.DEFAULT,Mh=Nh.KEY,Gh=Nh.FRAME,Fh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).coinsText=void 0,s.contentHolder=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.open=function(t){e.prototype.open.call((0,za.Z)(s)),s.updateInteractive(t.isWatchAdsButtonClicked),s.updateCoinsNumber(t),s.runOpenAnimation()},s.handleClose=function(){s.runCloseAnimation()},s.createTexts(),s.setDepth(qa.Ks.PRIORITY),s.setY(-50),s.updateBackground(),s.setInteractiveZone(),s}(0,c.Z)(t,e);var n=t.prototype;return n.setInteractiveZone=function(){this.zone.setInteractive({useHandCursor:!0}),this.zone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleClose)},n.updateBackground=function(){this.background.setAlpha(.7)},n.createTexts=function(){this.contentHolder=new Phaser.GameObjects.Container(this.scene,0,0);var e=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"you don't have \n enough coins",font:Xa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),t=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"you have:",font:Xa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}});t.setTint(13467442);var n=this.scene.make.image({key:Mh,frame:Gh.ICON_COIN});n.setWorldSize(26,26),this.coinsText=this.scene.make.bitmapText({size:this.scene.fontSize(26),text:"0",font:Xa.Z.PRIMARY.KEY,origin:{x:0,y:.5}}),this.coinsText.setTint(16766720),this.contentHolder.add([t,n,this.coinsText,e]),this.add(this.contentHolder),Phaser.Display.Align.In.Center(t,this.zone,-40,40),Phaser.Display.Align.In.Center(n,t,77),Phaser.Display.Align.In.Center(this.coinsText,n,20),Phaser.Display.Align.In.Center(e,this,0,-40)},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Qa.Z.POPUP_OFF),this.runPopupExitsAnimation(0,200))},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400))},n.updateInteractive=function(e){var t=this;this.zone.disableInteractive(),e||this.scene.time.delayedCall(500,(function(){t.zone.setInteractive()}))},n.updateCoinsNumber=function(e){var t=e.coins;"number"===typeof t&&null!==t?this.coinsText.setText(""+t):this.coinsText.setText("0")},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.scale;this.popupShowUpAnimation=new Ic({targets:[this.contentHolder],delay:e,duration:t,props:{y:{from:350,to:this.contentHolder.y},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.contentHolder],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Zh=Fh,Uh=n(534),Yh=rc.Z.DEFAULT,zh=Yh.KEY,Wh=Yh.FRAME,Hh=GameCore.Configs.Gameplay,Kh=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.isSuccessfulRescue=void 0,s.isFailedRescue=!1,s.isClosed=!0,s.countdownCount=void 0,s.countdownTimer=void 0,s.countdownText=void 0,s.skipButton=void 0,s.watchAdsButton=void 0,s.useCoinButton=void 0,s.coinsNeeded=void 0,s.isWatchAdsButtonClicked=!1,s.isUseCoinButtonClicked=!1,s.buttonsPulsateAnimation=void 0,s.buttonFadeOutAnimation=void 0,s.buttonSlideToAnimation=void 0,s.skipButtonFadeInAnimation=void 0,s.scaleUpAnimation=void 0,s.notifyScreen=void 0,s.notEnoughCoinScreen=void 0,s.secondChanceLabel=void 0,s.circleTime=void 0,s.scoreText=void 0,s.yourScoreText=void 0,s.open=function(){var t;e.prototype.open.call((0,za.Z)(s)),s.scene.storage.dispatch((function(e,t){e({type:Gn,payload:{}});var n=t(),i=Pr(n).level,a=void 0===i?0:i,s=ks(n);window.game.analytics.event(qt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a})})),s.getNotifyScreen(),s.isClosed=!1,s.isSuccessfulRescue=!1,s.isFailedRescue=!1,s.countdownCount=Hh.RescueGamePopupTimeout,null==(t=s.countdownText)||t.setText(""),s.updateButtonsState(),s.updateScoreTexts(),s.runCountdown(),s.runButtonsPulsateAnimation(),s.runSkipButtonFadeInAnimation(),s.scene.audio.playSound(Qa.Z.POPUP_SHOW)},s.handleShowRewardedVideoAd=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isWatchAdsButtonClicked&&!s.isFailedRescue){e.next=2;break}return e.abrupt("return");case 2:return s.isWatchAdsButtonClicked=!0,s.watchAdsButton.setDisabled(!0),s.countdownTimer.pause(),e.next=7,s.scene.showRewardedVideoAsync();case 7:e.sent?s.handleSuccessfulRescue():s.handleFailedAds();case 9:case"end":return e.stop()}}),e)}))),s.handleFailedAds=function(){s.notifyScreen.once(GameCore.Screens.Events.CLOSE,s.handleFailedRescue)},s.showNotifyInsufficientCoins=function(e){var t;null==(t=s.countdownTimer)||t.pause(),s.isWatchAdsButtonClicked?(s.notEnoughCoinScreen.once(GameCore.Screens.Events.CLOSE,s.handleFailedRescue),s.scene.screen.open(qa.o4.NOT_ENOUGH_COINS_SCREEN,{coins:e,isWatchAdsButtonClicked:s.isWatchAdsButtonClicked}),s.scene.time.delayedCall(2e3,(function(){s.scene.screen.close(qa.o4.NOT_ENOUGH_COINS_SCREEN)})),s.isClosed=!0,s.scene.screen.close(s.name)):(s.notEnoughCoinScreen.once(GameCore.Screens.Events.CLOSE,s.handleCloseNotifyInsufficientCoins),s.scene.screen.open(qa.o4.NOT_ENOUGH_COINS_SCREEN,{coins:e,isWatchAdsButtonClicked:s.isWatchAdsButtonClicked}))},s.handleCloseNotifyInsufficientCoins=function(){var e,t,n;null==(e=s.countdownTimer)||e.resume(),s.runButtonEntranceAnimation(s.useCoinButton,s.watchAdsButton,!1),null==(t=s.scaleUpAnimation)||null==(n=t.tween)||n.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){s.watchAdsButton.setDisabled(!1)}))},s.handleFailedRescue=function(){s.isFailedRescue||(s.isFailedRescue=!0,s.skipButton.kill(),s.countdownTimer.remove(),s.isClosed||(s.isClosed=!0,s.scene.screen.close(s.name)),s.scene.stateManager.gameOver())},s.handleSuccessfulRescue=function(){var e;s.isSuccessfulRescue||(null==(e=s.countdownTimer)||e.remove(),s.isSuccessfulRescue=!0,s.scene.audio.playSound(Qa.Z.DAILY_REWARD),s.scene.screen.close(s.name),s.scene.stateManager.play())},s.handleRescueUsingCoin=function(){if(!s.isUseCoinButtonClicked&&!s.isFailedRescue){s.isUseCoinButtonClicked=!0,s.useCoinButton.setDisabled(!0),s.watchAdsButton.setDisabled(!0);var e=s.scene.player,t=e.getCustomData("coin"),n=t-s.coinsNeeded;t<s.coinsNeeded?s.showNotifyInsufficientCoins(t):(s.countdownTimer.remove(),s.scene.time.delayedCall(500,(function(){e.setCustomData("coin",n),s.handleSuccessfulRescue()})))}},s.runButtonEntranceAnimation=function(e,t,n){var i,a,r,o,c;null==(i=s.scaleUpAnimation)||i.remove(),null==(a=s.buttonFadeOutAnimation)||a.remove(),null==(r=s.buttonSlideToAnimation)||r.remove(),s.scaleUpAnimation=new _h.Z({targets:[t],onComplete:function(){n?s.scene.game.globalScene.screen.events.off(GameCore.Screens.Events.CLOSE,s.runButtonEntranceAnimation):s.scene.screen.events.off(GameCore.Screens.Events.CLOSE,s.runButtonEntranceAnimation)}}),s.buttonFadeOutAnimation=new oh.Z({targets:[e],props:{alpha:{start:1,from:1,to:0}},onComplete:function(){return e.kill()}}),s.buttonSlideToAnimation=new Lh({targets:[t],props:{x:{from:t.x,to:s.zone.x}},onComplete:function(){var e;return null==(e=s.scaleUpAnimation)?void 0:e.play()}}),null==(o=s.buttonFadeOutAnimation)||o.play(),null==(c=s.buttonSlideToAnimation)||c.play()},s.scene=t,s.countdownCount=Hh.MaxRescueCount,s.coinsNeeded=s.scene.registry.get("rescueCoins"),s.setDepth(qa.Ks.POPUP),s.background.setAlpha(.6),s.createContent(),s}(0,c.Z)(t,e);var n=t.prototype;return n.getNotifyScreen=function(){var e=this.scene.game.globalScene;if(!this.notifyScreen){var t=e.screen.get(qa.o4.NOTIFY_SCREEN);t instanceof Uh.Z&&(this.notifyScreen=t)}},n.updateButtonsState=function(){this.watchAdsButton.revive(),this.watchAdsButton.setAlpha(1),this.watchAdsButton.setDisabled(!1),this.isWatchAdsButtonClicked=!1,Phaser.Display.Align.In.Center(this.watchAdsButton,this.zone,0,110),Phaser.Display.Align.In.Center(this.skipButton,this.zone,0,175)},n.createContent=function(){this.createCloseButton(),this.createScoreTexts(),this.createSecondChanceLabel(),this.createCircleTime(),this.createWatchAdsButton(),this.createUseCoinButton(),this.createNotEnoughCoinsScreen(),this.createSkipButton()},n.updateScoreTexts=function(){var e=this.scene.scoreCounter.getScore();this.scoreText.setText(e.toString())},n.runCountdown=function(){var e,t=this;null==(e=this.countdownTimer)||e.remove(),this.countdownTimer=this.scene.tweens.addCounter({from:-90,to:270,duration:1e3*this.countdownCount,onUpdate:function(e){var n=Math.round(e.getValue()||0);t.circleTime.clear(),t.circleTime.lineStyle(7,16766720,1),t.circleTime.beginPath(),t.circleTime.arc(0,-20,70,Phaser.Math.DegToRad(270),Phaser.Math.DegToRad(n),!0),t.circleTime.strokePath()},onComplete:function(){t.rescueTimeout()}})},n.createCloseButton=function(){var e=new Sh.Z(this.scene,{key:zh,frame:Wh.BUTTON_CLOSE,width:37,height:37,paddingZone:20});this.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleFailedRescue,e.kill(),Phaser.Display.Align.In.TopRight(e,this.zone,-15,-15)},n.createNotEnoughCoinsScreen=function(){this.notEnoughCoinScreen=this.scene.screen.add(qa.o4.NOT_ENOUGH_COINS_SCREEN,Zh)},n.createUseCoinButton=function(){this.useCoinButton=new sc.Z(this.scene,zh,Wh.BUTTON_BLUE_134X50,134,50),this.useCoinButton.setName("UseCoin");var e=this.scene.make.image({key:zh,frame:Wh.ICON_COIN});e.setWorldSize(30,30);var t=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:0,y:.45},text:""+this.coinsNeeded});t.setHighQuality(),t.setFontSize(this.scene.fontSize(24)),t.setStroke("#2155eb",3),this.add(this.useCoinButton),this.useCoinButton.add([t,e]),Phaser.Display.Align.In.Center(t,this.useCoinButton,20,1),Phaser.Display.Align.In.Center(e,this.useCoinButton,-30),this.useCoinButton.kill(),this.useCoinButton.onClick=this.handleRescueUsingCoin},n.createCircleTime=function(){this.circleTime=this.scene.make.graphics({}),this.add(this.circleTime)},n.createWatchAdsButton=function(){this.watchAdsButton=new sc.Z(this.scene,zh,Wh.BUTTON_GREEN_214X56,214,56),this.watchAdsButton.setName("ViewAd");var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.continue});t.setPosition(0,0),t.setScale(e*this.scene.fontSize(1)),t.setSize(t.displayWidth,t.displayHeight);var n=this.scene.make.image({key:zh,frame:Wh.ICON_ADS_VIDEO});n.setWorldSize(36,28),this.watchAdsButton.add([t,n]),this.add(this.watchAdsButton),Phaser.Display.Align.In.Center(t,this.watchAdsButton,20,-1),Phaser.Display.Align.To.LeftCenter(n,t,8),this.watchAdsButton.onClick=this.handleShowRewardedVideoAd},n.createSkipButton=function(){var e=1/this.scene.world.getPixelRatio();this.skipButton=new sc.Z(this.scene,rc.Z.TEXTS.KEY,this.scene.lang.Texture.skip),this.skipButton.setName("Skip"),this.skipButton.button.setScale(.8*e),this.skipButton.kill(),this.add(this.skipButton),this.skipButton.onClick=this.handleFailedRescue,Phaser.Display.Align.In.Center(this.skipButton,this,0,60)},n.createScoreTexts=function(){var e=1/this.scene.world.getPixelRatio();this.yourScoreText=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.yourScore}),this.yourScoreText.setScale(e),this.scoreText=this.scene.make.bitmapText({size:this.scene.fontSize(50),text:"",font:Xa.Z.PRIMARY.KEY,origin:{x:.45,y:.5}}),this.add([this.scoreText,this.yourScoreText]),Phaser.Display.Align.In.Center(this.yourScoreText,this,0,-200),Phaser.Display.Align.In.Center(this.scoreText,this,0,-140)},n.createSecondChanceLabel=function(){var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.secondChance,origin:{x:.5,y:.5}});e.setCenterAlign(),e.setFontSize(this.scene.fontSize(25)),this.secondChanceLabel=e,this.add(this.secondChanceLabel),Phaser.Display.Align.In.Center(this.secondChanceLabel,this,3,-20)},n.rescueTimeout=function(){this.watchAdsButton.setDisabled(!0),this.handleFailedRescue()},n.runButtonsPulsateAnimation=function(){var e;this.buttonsPulsateAnimation||(this.buttonsPulsateAnimation=new gc({targets:[this.watchAdsButton],props:{scale:{from:.9,to:1},duration:500}})),null==(e=this.buttonsPulsateAnimation)||e.play()},n.runSkipButtonFadeInAnimation=function(){var e;this.skipButtonFadeInAnimation||(this.skipButtonFadeInAnimation=new rh.Z({targets:[this.skipButton],delay:2e3,props:{alpha:{start:0,from:0,to:1}}})),this.skipButton.revive(),null==(e=this.skipButtonFadeInAnimation)||e.play()},n.getTotalUseRescue=function(){return+this.isSuccessfulRescue},t}(GameCore.Screen),Vh=Kh,jh=rc.Z.GAMEPLAY.TEXTURES,Xh=jh.KEY,qh=jh.FRAME,Qh=function(e){function t(t){var n={frameRate:30,frames:t.generateFrameNames(Xh,{prefix:qh.BOMB_EXPLOSIVE,end:24,zeroPad:2}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,Xh,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),Jh=Qh,$h=rc.Z.GAMEPLAY.TEXTURES,eu=$h.KEY,tu=$h.FRAME,nu=function(e){function t(t){var n={frameRate:45,frames:t.generateFrameNames(eu,{prefix:tu.BOMB_FLYING,end:39,zeroPad:2}),showOnStart:!0,hideOnComplete:!0,repeat:-1};return e.call(this,t,eu,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),iu=nu,au=rc.Z.GAMEPLAY.TEXTURES,su=au.KEY,ru=au.FRAME,ou=function(e){function t(t){var n={frameRate:30,frames:t.generateFrameNames(su,{prefix:ru.BOX_EXPLOSIVE,end:4,zeroPad:2}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,su,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),cu=ou,lu=rc.Z.GAMEPLAY.TEXTURES,hu=lu.KEY,uu=lu.FRAME,du=function(e){function t(t){var n={frameRate:30,frames:t.generateFrameNames(hu,{prefix:uu.GREY_LIGHT,start:0,end:38,zeroPad:2})};return e.call(this,t,hu,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),pu=du,fu=rc.Z.GAMEPLAY.TEXTURES,gu=fu.KEY,mu=fu.FRAME,vu=function(e){function t(t){var n={frameRate:30,frames:t.generateFrameNames(gu,{prefix:mu.ROCKET_FLYING,end:9,zeroPad:2}),showOnStart:!0,hideOnComplete:!0,repeat:-1};return e.call(this,t,gu,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),yu=vu,Su=rc.Z.GAMEPLAY.TEXTURES,Eu=Su.KEY,bu=Su.FRAME,Au=function(e){function t(t){var n={frameRate:10,frames:t.generateFrameNames(Eu,{prefix:bu.SHOWING_BOMB,start:1,end:4}),showOnStart:!0,hideOnComplete:!0};return e.call(this,t,Eu,n)||this}return(0,c.Z)(t,e),t}(Phaser.Animations.Animation),wu=Au,Tu=function(){function e(e){this.scene=void 0,this.scene=e,this.addGlobalAnims()}return e.prototype.addGlobalAnims=function(){var e=this.scene.anims,t=new iu(e);e.add("boom-flying",t);var n=new wu(e);e.add("showing-bomb-effect",n);var i=new pu(e);e.add("hole-light",i);var a=new yu(e);e.add("rocket-flying",a);var s=new Jh(e);e.add("bomb-explosive",s);var r=new cu(e);e.add("box-explosive",r)},e}(),Pu=Tu,Cu=rc.Z.DEFAULT,Iu=Cu.KEY,xu=Cu.FRAME,Bu=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Iu,frame:xu.ICON_HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.hand.setPosition(20,20),this.add(this.hand)},n.tap=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:150,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:150}},yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.doubleTap=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.move=function(e,t,n,i,a){this.scene.tweens.add({delay:n,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{duration:i,from:this.x,to:e},y:{duration:i,from:this.y,to:t}},onComplete:a})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),ku=Bu,Ru=rc.Z.GAMEPLAY.TEXTURES_32BIT,Ou=Ru.KEY,_u=Ru.FRAME,Du=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tween=void 0,n.arrows=void 0,n.arrowsShadow=void 0,n.circleShadow=void 0,n.circle=void 0,n.glow=void 0,n.scene=t,n.createSprite(),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createSprite=function(){var e=this.scene,t=e.make.image({key:Ou,frame:_u.CIRCLE});t.setWorldSize(73,73);var n=e.make.image({key:Ou,frame:_u.SHOOTER_SHADOW});n.setWorldSize(75,75),n.setAlpha(.8),n.setPosition(0,12);var i=e.make.image({key:Ou,frame:_u.SHOOTER_GLOW});i.setWorldSize(120,130),i.setAlpha(.5),i.setPosition(0,20);var a=e.make.image({key:Ou,frame:_u.ARROWS});a.setWorldSize(90,50),a.setAlpha(0);var s=e.make.image({key:Ou,frame:_u.ARROWS_SHADOW});s.setWorldSize(90,50),s.setAlpha(0),s.setPosition(0,12),this.add([i,n,s,t,a]),this.arrows=a,this.arrowsShadow=s,this.circleShadow=n,this.circle=t,this.glow=i},n.playAnimation=function(){var e=this;this.tween=this.scene.tweens.addCounter({from:0,to:1,delay:2e3,duration:2666,repeat:-1,repeatDelay:5e3,onUpdate:function(t){if(e.scene.shooter.isBombAttached())return e.arrows.setAlpha(0),void e.arrowsShadow.setAlpha(0);var n=t.getValue(),i=n<=.5?2*n:2*(1-n);e.arrows.setAlpha(i),e.arrows.setAngle(100-250*n),e.arrowsShadow.setAlpha(i),e.arrowsShadow.setAngle(100-250*n)}})},n.destroy=function(){var e;null==(e=this.tween)||e.remove()},n.showAnimation=function(){var e=(0,o.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1e3),e.next=3,new(Q())((function(e){n.glow.kill();var i={x:(n.circle.x+n.circleShadow.x)/2,y:(n.circle.y+n.circleShadow.y)/2},a=n.circle.y;n.circle.y=i.y,n.scene.tweens.add({targets:n.circle,y:a,alpha:{from:0,to:1},ease:"Power3",duration:t});var s=n.circleShadow.x,r=n.circleShadow.y;n.circleShadow.setPosition(i.x,i.y),n.scene.tweens.add({targets:n.circleShadow,x:s,y:r,alpha:{from:0,to:1},ease:"Power3",duration:t,onComplete:function(){n.glow.revive(),e("complete")}})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Lu=Du,Nu=rc.Z.GAMEPLAY.TEXTURES_32BIT,Mu=Nu.KEY,Gu=Nu.FRAME,Fu=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.redEggGroup=void 0,s.blueEggGroup=void 0,s.shotGuideGroup=void 0,s.endPoint=void 0,s.middleShotGuide=void 0,s.lastShotGuide=void 0,s.shooter=void 0,s.bullet=void 0,s.nextBullet=void 0,s.nextNextBullet=void 0,s.tutorialHand=void 0,s.shooterPosition=void 0,s.bulletPosition=void 0,s.nextBulletPosition=void 0,s.shotGuideDirect=void 0,s.guideSpace=void 0,s.understoodButton=void 0,s.tutorialText=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.nextBulletScale=.8,s.open=function(){e.prototype.open.call((0,za.Z)(s)),s.runOpenAnimation(),s.animateShotGuideToShootBlueEggs(),s.scene.analytics.event(qt._.TUTORIAL_STEP,{step:"UseShooter"})},s.closePopup=function(){s.scene.audio.playSound(Qa.Z.POPUP_OFF),s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.animateShotGuideToShootBlueEggs=function(){s.setDefaultObjects();var e=s.shotGuideDirect,t=290*Math.PI/180,n=265*Math.PI/180;s.tutorialHand.tapAndHold(1300),s.scene.tweens.addCounter({from:t,to:n,duration:300,onStart:function(){s.nextBullet.setAlpha(1),s.bullet.setAlpha(1),s.shotGuideGroup.setAlpha(1)},onUpdate:function(t){var n=s.bulletPosition,i=n.x,a=n.y;e.setAngle(t.getValue()),s.shotGuideGroup.setXY(i,a,e.x*s.guideSpace,e.y*s.guideSpace),s.shotGuideGroup.getChildren().forEach((function(t,n){t.setVisible(!0),t.setAngle((e.angle()+Math.PI/2*2)*Phaser.Math.RAD_TO_DEG),s.endPoint.revive();var i=s.guideSpace+14,a=s.bulletPosition,r=a.x,o=a.y,c=r+e.x*(5*i-5),l=o+e.y*(5*i-5);s.endPoint.setPosition(c,l),n>=12&&t.setVisible(!1)})),s.tutorialHand.setPosition(s.middleShotGuide.x,s.middleShotGuide.y)},onComplete:s.animateHitBlueEggs,delay:1500})},s.animateHitBlueEggs=function(){s.tutorialHand.unHold(200,!0);var e=s.shotGuideDirect,t=s.guideSpace+14,n=s.bulletPosition,i=n.x,a=n.y;s.setShotGuideTo(-5);var r=i+e.x*(5*t-3),o=a+e.y*(5*t-3);s.scene.tweens.add({targets:s.bullet,x:r,y:o,duration:300,onStart:function(){s.shotGuideGroup.setVisible(!1),s.endPoint.kill(),s.tutorialHand.hide(),s.animateNextBulletToBullet()},onComplete:function(){var e;s.scene.tweens.add({targets:y()(e=s.blueEggGroup.getChildren()).call(e,s.bullet),alpha:0,duration:300,onComplete:s.showTapTapToSwitchEgg})},delay:500})},s.showTapTapToSwitchEgg=function(){var e=s.bulletPosition,t=e.x,n=e.y;s.bullet.setAlpha(1),s.bullet.setPosition(t,n),s.nextBullet.setFrame(Gu.BALL_RED),s.shotGuideGroup.setVisible(!0);var i=s.shotGuideDirect,a=s.guideSpace+12.5,r=t+i.x*(6*a),o=n+i.y*(6*a);s.endPoint.setPosition(r,o),s.endPoint.revive(),s.tutorialHand.setPosition(s.shooter.x,s.shooter.y),s.tutorialHand.show(),s.tutorialHand.doubleTap(100,!0,s.animateSwapBall)},s.animateSwapBall=function(){var e=s.bullet;s.bullet=s.nextBullet,s.nextBullet=e,s.nextNextBullet.setVisible(!1);var t=s.nextBulletPosition.x-s.shooterPosition.x,n=s.nextBulletPosition.y-s.shooterPosition.y,i=new Phaser.Math.Vector2(t,n),a=s.bulletPosition.x-s.shooterPosition.x,r=s.bulletPosition.y-s.shooterPosition.y,o=new Phaser.Math.Vector2(a,r),c=1/s.scene.world.getPixelRatio(),l=o.length(),h=i.length();s.shotGuideGroup.setVisible(!1),s.endPoint.setVisible(!1),s.scene.tweens.add({targets:s.nextBullet,scale:c*s.nextBulletScale,duration:300}),s.scene.tweens.addCounter({from:o.angle(),to:i.angle(),duration:300,onUpdate:function(e){var t=e.getValue();s.nextBullet.x=s.shooterPosition.x+Math.cos(t)*h,s.nextBullet.y=s.shooterPosition.y+Math.sin(t)*h}}),s.scene.tweens.add({targets:s.bullet,scale:c,duration:300}),s.scene.tweens.addCounter({from:i.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(e){var t=e.getValue();s.bullet.x=s.shooterPosition.x+Math.cos(t)*l,s.bullet.y=s.shooterPosition.y+Math.sin(t)*l},onComplete:function(){s.shotGuideGroup.setVisible(!0),s.endPoint.setVisible(!0),s.scene.time.delayedCall(200,s.animateShotGuideToShootRedEggs)}})},s.animateShotGuideToShootRedEggs=function(){s.shotGuideGroup.setVisible(!0),s.tutorialHand.show(),s.tutorialHand.setPosition(s.middleShotGuide.x,s.middleShotGuide.y);var e=s.shotGuideDirect,t=261*Math.PI/180,n=283.5*Math.PI/180;s.tutorialHand.tapAndHold(300),s.scene.tweens.addCounter({from:t,to:n,duration:300,onUpdate:function(t){var n=s.bulletPosition,i=n.x,a=n.y;e.setAngle(t.getValue()),s.shotGuideGroup.setXY(i,a,e.x*s.guideSpace,e.y*s.guideSpace),s.shotGuideGroup.getChildren().some((function(t){t.setVisible(!0),t.setAngle(e.angle()*Phaser.Math.RAD_TO_DEG)}));var r=s.guideSpace+12.5,o=i+e.x*(6*r),c=a+e.y*(6*r);s.endPoint.setPosition(o,c),s.tutorialHand.setPosition(s.middleShotGuide.x,s.middleShotGuide.y)},onComplete:s.animateHitRedEggs,delay:600})},s.animateHitRedEggs=function(){s.tutorialHand.unHold(200,!0);var e=s.shotGuideDirect,t=s.guideSpace+12.5,n=s.bulletPosition,i=n.x,a=n.y;s.setShotGuideTo(13.5);var r=i+e.x*(6*t+6),o=a+e.y*(6*t+6);s.scene.tweens.add({targets:s.bullet,x:r,y:o,scale:.48,duration:300,onStart:function(){s.shotGuideGroup.setVisible(!1),s.endPoint.kill(),s.animateNextBulletToBullet()},onComplete:function(){var e;s.scene.tweens.add({targets:y()(e=s.redEggGroup.getChildren()).call(e,s.bullet),alpha:0,duration:300,completeDelay:600,onComplete:s.animateShotGuideToShootBlueEggs})},delay:500})},s.scene=t,s.createPopup(),s.createPopupContent(),s.createUnderstoodButton(),s.setDepth(qa.Ks.POPUP),s.setY(-50),s.background.setAlpha(.4),s}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){var e=rc.Z.DEFAULT,t=e.KEY,n=e.FRAME;this.popup=new Ih(this.scene,0,0,300,400);var i=this.scene.make.image({key:t,frame:n.POPUP_DAILY_REWARDS});i.setWorldSize(280,270),this.popup.add(i),this.add(this.popup),Phaser.Display.Align.In.BottomCenter(i,this.popup,0,-65),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTutorialText(),this.configGuide(),this.createEndPoint(),this.createGrid(),this.createShotGuide(),this.createShooter(),this.createBullet(),this.createHandGuide()},n.createTutorialText=function(){this.tutorialText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.guide,origin:{x:.5,y:.5}}),this.tutorialText.setCenterAlign(),Phaser.Display.Align.In.TopCenter(this.tutorialText,this.popup,0,-25),this.popup.add(this.tutorialText)},n.configGuide=function(){this.shotGuideDirect=new Phaser.Math.Vector2(0,-1),this.shotGuideDirect.setAngle(290*Math.PI/180),this.guideSpace=10,this.shooterPosition=new Phaser.Geom.Point(0,80),this.bulletPosition=new Phaser.Geom.Point(this.shooterPosition.x,this.shooterPosition.y-27.5),this.nextBulletPosition=new Phaser.Geom.Point(this.shooterPosition.x+22.5,this.shooterPosition.y+22.5)},n.createGrid=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME;this.redEggGroup=this.scene.add.group({defaultKey:t,defaultFrame:n.BALL_RED});for(var i=0;i<4;i++){var a=this.redEggGroup.get();a.setWorldSize(40,44),a.setScale(.48)}this.redEggGroup.setXY(-36,-106.5,27),this.popup.add(this.redEggGroup.getChildren()),this.blueEggGroup=this.scene.add.group({defaultKey:t,defaultFrame:n.BALL_BLUE});for(var s=0;s<3;s++)this.blueEggGroup.get().setWorldSize(40,44);this.blueEggGroup.setXY(-24,-88,28),this.popup.add(this.blueEggGroup.getChildren())},n.createEndPoint=function(){this.endPoint=this.scene.add.image(0,84,Mu,Gu.SHOT_GUIDE_ENDPOINT),this.endPoint.setWorldSize(8,8),this.endPoint.kill(),this.popup.add(this.endPoint)},n.createShotGuide=function(){this.shotGuideGroup=this.scene.add.group({defaultKey:Mu,defaultFrame:Gu.SHOT_GUIDE_LIGHT});for(var e=0;e<13;e++)if(4===e)this.middleShotGuide=this.shotGuideGroup.get(),this.middleShotGuide.setWorldSize(10,10),this.middleShotGuide.setVisible(!1);else{var t=this.shotGuideGroup.get();t.setWorldSize(10,10),t.setVisible(!1)}this.lastShotGuide=this.shotGuideGroup.get(),this.lastShotGuide.setVisible(!1).setWorldSize(10,10),this.shotGuideGroup.setXY(0,84,this.shotGuideDirect.x*this.guideSpace,this.shotGuideDirect.y*this.guideSpace),this.popup.add(this.shotGuideGroup.getChildren())},n.createShooter=function(){var e=this.shooterPosition,t=e.x,n=e.y;this.shooter=new Lu(this.scene),this.shooter.setScale(1.1,.8),this.shooter.setPosition(t,n),this.popup.add(this.shooter)},n.createBullet=function(){var e=this.bulletPosition,t=e.x,n=e.y;this.bullet=this.scene.add.image(t,n,Mu,Gu.BALL_BLUE),this.bullet.setWorldSize(40,44),this.popup.add(this.bullet);var i=this.nextBulletPosition,a=i.x,s=i.y;this.nextBullet=this.scene.add.image(a,s,Mu,Gu.BALL_BLUE),this.nextBullet.setWorldSize(40,44),this.popup.add(this.nextBullet),this.nextNextBullet=this.scene.add.image(a,s,Mu,Gu.BALL_BLUE),this.nextNextBullet.setWorldSize(40,44),this.nextNextBullet.setVisible(!1),this.popup.add(this.nextNextBullet)},n.createHandGuide=function(){this.tutorialHand=new ku(this.scene),this.add(this.tutorialHand)},n.createUnderstoodButton=function(){var e=rc.Z.DEFAULT,t=e.KEY,n=e.FRAME;this.understoodButton=new sc.Z(this.scene,t,n.BUTTON_GREEN_84X36,84,36),this.understoodButton.setName("Ok");var i=1/this.scene.world.getPixelRatio();this.understoodButton.onClick=this.closePopup;var a=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.ok});a.setPosition(0,0),a.setScale(i),Phaser.Display.Align.In.Center(a,this.understoodButton,0,0),this.understoodButton.add(a),this.popup.add(this.understoodButton),Phaser.Display.Align.In.BottomCenter(this.understoodButton,this.popup,0,-14)},n.setDefaultObjects=function(){var e=this,t=1/this.scene.world.getPixelRatio(),n=this.bulletPosition,i=n.x,a=n.y,s=this.nextBulletPosition,r=s.x,o=s.y;this.blueEggGroup.setAlpha(1),this.redEggGroup.setAlpha(1),this.bullet.setAlpha(1),this.bullet.setPosition(i,a),this.bullet.setFrame(Gu.BALL_BLUE),this.bullet.setScale(t),this.nextBullet.setFrame(Gu.BALL_BLUE),this.nextBullet.setScale(t*this.nextBulletScale),this.nextNextBullet.setPosition(r,o),this.nextNextBullet.setVisible(!1),this.shotGuideDirect.setAngle(290*Math.PI/180);var c=this.shotGuideDirect,l=c.x,h=c.y;this.shotGuideGroup.setXY(i,a,l*this.guideSpace,h*this.guideSpace),this.shotGuideGroup.setVisible(!1),this.tutorialHand.show(),this.tutorialHand.setPosition(this.middleShotGuide.x,this.middleShotGuide.y);var u=[this.redEggGroup.getChildren(),this.blueEggGroup.getChildren(),this.shooter,this.tutorialHand];this.blueEggGroup.setAlpha(0),this.redEggGroup.setAlpha(0),this.shooter.setAlpha(0),this.nextBullet.setAlpha(0),this.bullet.setAlpha(0),this.shotGuideGroup.setAlpha(0),this.tutorialHand.setAlpha(0),u.forEach((function(t,n){e.scene.tweens.add({targets:t,delay:300+200*n,alpha:{from:0,to:1}})}))},n.setShotGuideTo=function(e){this.shotGuideDirect.setAngle((270+e)*Math.PI/180)},n.animateNextBulletToBullet=function(){var e=this,t=1/this.scene.world.getPixelRatio(),n=this.nextBulletPosition.x-this.shooterPosition.x,i=this.nextBulletPosition.y-this.shooterPosition.y,a=new Phaser.Math.Vector2(n,i),s=this.bulletPosition.x-this.shooterPosition.x,r=this.bulletPosition.y-this.shooterPosition.y,o=new Phaser.Math.Vector2(s,r),c=o.length(),l=this.nextBulletPosition,h=l.x,u=l.y;this.nextNextBullet.setVisible(!0),this.nextNextBullet.setPosition(h,u),this.nextNextBullet.setScale(t*this.nextBulletScale),this.scene.tweens.add({targets:this.nextNextBullet,scale:{from:t*this.nextBulletScale,to:t},duration:300}),this.scene.tweens.addCounter({from:a.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.nextNextBullet.x=e.shooterPosition.x+Math.cos(n)*c,e.nextNextBullet.y=e.shooterPosition.y+Math.sin(n)*c}}),this.nextBullet.setFrame(Gu.BALL_RED),this.scene.tweens.add({targets:this.nextBullet,scale:{from:0,to:t*this.nextBulletScale},duration:300})},n.runOpenAnimation=function(){this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,400)},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new rh.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:{from:0,to:1},scale:{from:0,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.popup],delay:e,duration:t,props:{alpha:0,scale:0}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Zu=Fu,Uu=rc.Z.GAMEPLAY.TEXTURES,Yu=Uu.KEY,zu=Uu.FRAME,Wu=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i,Yu,zu.HAND)||this).tween=void 0,a.x-=50,a.setWorldSize(65.5,55.5),t.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.tween=this.scene.tweens.add({targets:this,x:{from:this.x,to:this.x+100},duration:750,yoyo:!0,loop:-1,ease:Phaser.Math.Easing.Sine})},n.hide=function(){this.tween.complete(),this.setVisible(!1)},t}(Phaser.GameObjects.Image),Hu=Wu;!function(e){e[e.Initial=0]="Initial",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.Paused=3]="Paused",e[e.Rescuing=4]="Rescuing",e[e.GameOver=5]="GameOver",e[e.Quit=6]="Quit"}(Ql||(Ql={}));var Ku,Vu=Ql,ju=function(){function e(e){this.scene=void 0,this.state=void 0,this.scene=e}return e.prototype.getState=function(){return this.state},e}(),Xu=ju,qu=n(67),Qu=n.n(qu),Ju=n(37),$u=n.n(Ju),ed=n(41),td=n.n(ed);!function(e){e[e.Ball=0]="Ball",e[e.Bomb=1]="Bomb",e[e.Rocket=2]="Rocket",e[e.None=3]="None"}(Ku||(Ku={}));var nd=Ku;function id(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ad(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ad(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var sd=Math.sqrt(3)/2,rd=[[[-1,-1],[-1,0],[0,-1],[0,1],[1,-1],[1,0]],[[-1,0],[-1,1],[0,-1],[0,1],[1,0],[1,1]]],od=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).index=0,n.staggered=!1,n.size=0,n.count=0,n.firstX=0,n.depth=0,n}return(0,c.Z)(t,e),t}((0,I.Z)(Array)),cd=function(){function e(e,t){this.scene=void 0,this.pool=void 0,this.detachedBallPool=void 0,this.layoutData=void 0,this.size=void 0,this.grid=[],this.ballsWillBeDestroyed=[],this.orphanBallsWillBeDestroyed=[],this.rowSize=0,this.ballsCount=0,this.firstY=0,this.fullRow=void 0,this.eventAddHavingBall=void 0,this.waitingQueue=[],this.matchedBallsCount=0,this.shotBallsCount=0,this.matchedBallsCountPerLevel=0,this.shotBallsCountPerLevel=0,this.limitSoundTimer=void 0,this.clearOrphanBallTimer=void 0,this.scene=e,this.pool=t;var n=this.scene.data.get("grid"),i=n.width,a=n.height,s=n.rowSize;this.rowSize=s,this.size=new Phaser.Structs.Size(i,a),this.detachedBallPool=e.detachedBallPool}var t=e.prototype;return t.getBallsAt=function(e,t){if(0===this.grid.length)return[];if(this.bottomY+40<t)return[];var n=this.getRowColByXY(e,t),i=n.row,a=n.col,s=this.getNeighbors(i,a),r=this.grid[i];if(r){var o=r[a];o&&s.push(o)}return s},t.getPool=function(){return this.pool},t.getVisiblesBall=function(){var e,t=this.getIndexOfHighestFullEggRow();return st()(e=this.grid).call(e,t,this.grid.length)},t.getIndexOfHighestFullEggRow=function(){var e;return Ha()(e=this.grid).call(e,(function(e){return e.size!==e.count}))-1},t.start=function(){},t.addEventToRandomStamp=function(){var e=this;this.eventAddHavingBall=this.scene.time.addEvent({delay:this.scene.registry.get("timerForNextRandomHeavingBall"),repeat:-1,startAt:3e3,callback:function(){e.randomStampOnBall()}}),this.scene.events.emit(cl.TIMER_CREATED,this.eventAddHavingBall)},t.resetAlphaForAllBalls=function(){var e;de()(e=this.grid).call(e,(function(e){return de()(e).call(e,(function(e){e&&e.image3D.setAlpha(1)}))}))},t.destroy=function(){var e;this.scene&&(this.clearGrid(),null==(e=this.eventAddHavingBall)||e.remove())},t.setLayoutData=function(e){return this.layoutData=e,this},t.checkFirstRowSpawn=function(){this.grid[0]||this.spawnRow()},t.rowColToXY=function(e,t){var n=this.size.width,i=.5*n,a=this.ballInterval,s=this.grid[0],r=this.isRowStaggered(e),o=s.firstX+t*n;return s.staggered!=r&&(r?o+=i:o-=i),[o,this.firstY+e*a]},t.findNearestEmptyPositionByXY=function(e,t,n,i){var a=this;void 0===i&&(i=0);var s=this.getNeighborsPositionAt(n.row,n.col);bi()(s).call(s,(function(n,i){var s=n[0],r=n[1],o=i[0],c=i[1],l=a.rowColToXY(s,r),h=l[0],u=l[1],d=a.rowColToXY(o,c),p=d[0],f=d[1];return Phaser.Math.Distance.Between(e,t,h,u)<Phaser.Math.Distance.Between(e,t,p,f)?-1:1}));for(var r=s[0];s.length>0;){var o=s[0],c=o[0],l=o[1];if(!this.grid[c]||!this.grid[c][l])return s[0];s.shift()}if(2===i)return[];var h=r[0],u=r[1],d=this.grid[h][u];return d?this.findNearestEmptyPositionByXY(e,t,d,i+1):[]},t.animateDestroyedBallByBomb=function(e,t,n,i){var a=this;this.orphanBallsWillBeDestroyed.push(t),e.forEach((function(s,r){a.ballsWillBeDestroyed.push(s);var o=a.scene.time.addEvent({delay:33*r+0,callback:function(){s.forEach((function(e){var t=a.detachedBallPool.spawn(e.x,e.y,e.getColor()),s=e.takeStamp();s&&a.scene.stampUtilManager.handleUtil(s),t.dropType=nd.Bomb;var r=t.x-n,o=3*(t.y-i),c=new Phaser.Math.Vector2(r,o);c.normalize(),t.explosiveDetach(250*c.x,250*c.y),a.playRollingSound(),e.kill()})),s.length=0,r===e.length-1&&(a.animateOrphans(t,nd.Bomb),a.scene.scoreCounter.updateCombosMultiplier(),t.length=0)}});a.scene.events.emit(cl.TIMER_CREATED,o)}))},t.animateDestroyedBall=function(e,t){var n=this;this.orphanBallsWillBeDestroyed.push(t),e.forEach((function(i,a){n.ballsWillBeDestroyed.push(i);var s=n.scene.time.addEvent({delay:0,callback:function(){i.forEach((function(e){var t=n.detachedBallPool.spawn(e.x,e.y,e.getColor());t.dropType=nd.Ball,t.setStamp(e.takeStamp());var i=Phaser.Math.Between(-100,100),a=Phaser.Math.Between(-20,10);t.detach(i,a),n.playRollingSound(),e.kill()})),i.length=0,a===e.length-1&&(n.animateOrphans(t,nd.Ball),n.scene.scoreCounter.updateCombosMultiplier(),t.length=0)}});n.scene.events.emit(cl.TIMER_CREATED,s)}))},t.attachBall=function(e,t){var n,i=this,s=e.x,r=e.y,o=this.findNearestEmptyPositionByXY(s,r,t);if(0!==o.length){var c=o[0],l=o[1],h=this.rowColToXY(c,l),u=h[0],d=h[1];if(c===this.grid.length){var p=new od(this.rowSize);Ds()(p).call(p,void 0);var f=this.grid[c-1];p.staggered=!f.staggered,p.firstX=f.firstX+this.size.width/2,p.size=f.size+1,p.depth=f.depth+1,f.staggered?p.firstX-=this.size.width:p.size-=2,this.grid.push(p)}else if(c>this.grid.length){var g=new Error("Invalid position when attach ball"),m={pos:{row:c,col:l},ballsCount:this.ballsCount,gridLen:this.grid.length,firstY:this.firstY,bottomY:this.bottomY};(0,a.R0)(g,m)}var v=this.grid[c];if(v){var y=this.pool.spawn(u,d,e.getColor());this.scene.physics.world.enableBody(y),y.setStamp(e.takeStamp()),y.row=c,y.col=l,y.setDepth(v.depth),v[l]=y,v.count+=1,null==(n=e.tail)||n.move(y.x,y.y),this.jiggleNeighborsBall(y),this.resetProcessed();var S=this.findMatchesByLevelAt(y),E=S[0],b=S[1]>=3;if(this.scene.scoreCounter.processCombos(b),this.shotBallsCount+=1,this.shotBallsCountPerLevel+=1,b){var A;this.matchedBallsCount+=1,this.matchedBallsCountPerLevel+=1,this.scene.audio.playSound(Qa.Z.BUBBLE_POP),E.forEach((function(e){if(i.removeFromGrid(e),!A){var t=Qu()(e).call(e,(function(e){return void 0!=e.getStamp()}));A=null==t?void 0:t.takeStamp()}})),A&&this.scene.stampUtilManager.handleUtil(A);var w=this.findOrphanedBalls();this.removeFromGrid(w),this.animateDestroyedBall(E,w),this.cleanUpEmptyRows()}else{this.ballsCount+=1,this.scene.scoreCounter.updateCombosMultiplier();var T=this.scene.registry.get("zones").zones.zone5.topY;y.y-this.ballInterval/2>T&&(this.removeFromGrid([y]),this.animateOrphans([y],nd.Ball),y.kill(),this.cleanUpEmptyRows())}}}},t.generateRows=function(e){if(void 0===e&&(e=6),!this.layoutData)return this;for(var t=0;t<e;++t)this.spawnRow();return this.updateNewHighestFullRow(),this},t.generatePatterns=function(e){if(void 0===e&&(e=3),!this.layoutData)return this;for(var t=this.layoutData.getRandomPatternIndexes(e),n=0;n<e;++n){var i=t.pop();this.spawnPattern(i)}return this},t.moveBy=function(e,t){var n,i;return 0===this.pool.countActive()||(this.firstY+=e+t,this.grid.forEach((function(n){n.forEach((function(n){n&&(n.y+=e+t)}))})),this.ballsWillBeDestroyed=he()(n=this.ballsWillBeDestroyed).call(n,(function(e){return e.length})),this.ballsWillBeDestroyed.forEach((function(t){t.forEach((function(t){t&&(t.y+=e)}))})),this.orphanBallsWillBeDestroyed=he()(i=this.orphanBallsWillBeDestroyed).call(i,(function(e){return e.length})),this.orphanBallsWillBeDestroyed.forEach((function(t){t.forEach((function(t){t&&(t.y+=e)}))}))),this},t.dropAllBalls=function(){var e=[];this.grid.forEach((function(t){t.forEach((function(t){t&&e.push(t)}))})),this.removeFromGrid(e,!1),this.animateOrphans(e,nd.None),this.cleanUpEmptyRows()},t.spawnRow=function(e){if(void 0===e&&(e=!0),e){var t=this.waitingQueue.shift();return void 0===t?void this.spawnRow(!1):void this.addRowToFront(t)}var n=this.grid[0],i=this.rowSize;n&&!n.staggered&&(i=this.rowSize-1);var a=this.layoutData.getNextRow(i);this.addRowToFront(a)},t.spawnPattern=function(e){void 0===e&&(e=0);var t=this.grid[0],n=this.rowSize;t&&!t.staggered&&(n=this.rowSize-1),12===n&&0==this.waitingQueue.length&&this.spawnRow(!1);var i=this.layoutData.getNextPattern(e);this.pushPatternToWaitingQueue(i)},t.pushPatternToWaitingQueue=function(e){var t=this;e.forEach((function(e){t.waitingQueue.push(e)}))},t.clearGrid=function(){var e=this;this.grid.forEach((function(t){var n=he()(t).call(t,(function(e){return e}));e.removeFromGrid(n,!1),n.forEach((function(e){e.kill()}))})),this.cleanUpEmptyRows()},t.updateCoordinate=function(){this.grid.forEach((function(e,t){e.forEach((function(e,n){e&&(e.row=t,e.col=n)})),e.index=t}))},t.addRowToFront=function(e){var t=this,n=.5*this.scene.gameZone.width,i=this.size.width,a=.5*i,s=this.ballInterval,r=new od;this.grid.unshift(r);var o=this.scene.gameSettings.topY;if(this.grid.length<=1)r.staggered=!1,r.size=this.rowSize,this.firstY=o,r.depth=100-this.grid.length;else{var c=this.grid[1];r.staggered=!c.staggered,r.size=this.rowSize-+r.staggered,r.depth=c.depth-1,this.firstY-=s,o=this.firstY}var l=n-.5*r.size*i+a;r.firstX=l,e.forEach((function(e){if(-1!==e){var n=t.pool.spawn(l,o,e);r.push(n),r.count+=1,n.setDepth(r.depth)}else r.push(void 0);l+=i})),this.ballsCount+=r.count,r.staggered&&r.push(void 0),this.updateCoordinate(),this.updateNewHighestFullRow()},t.removeFromGrid=function(e,t){var n=this;void 0===t&&(t=!0),this.ballsCount-=e.length,e.forEach((function(e){var t=e.row,i=e.col;n.grid[t][i]=void 0,n.grid[t].count-=1,n.scene.physics.world.disableBody(e.body)})),t&&this.checkFirstRowSpawn()},t.animateOrphans=function(e,t,n){var i=this;void 0===n&&(n=!1),e.forEach((function(e){var a=i.detachedBallPool.spawn(e.x,e.y,e.getColor());if(a.dropType=t,a.setStamp(e.takeStamp()),n){var s=Phaser.Math.Between(-33.4,33.4),r=Phaser.Math.Between(-25,-8.4);a.explosiveDetach(s,r),i.playRollingSound()}else{var o=Phaser.Math.Between(-80,80),c=Phaser.Math.Between(-20,20);a.detach(o,c),i.playRollingSound()}e.kill()}))},t.findOrphanedBalls=function(){var e,t,n=this;this.resetProcessed();var i=this.getIndexOfHighestFullEggRow(),a=this.grid[i+1]||[],s=null==a?void 0:he()(a).call(a,(function(e){return e}));if(!s)return[];this.resetProcessed(),st()(e=this.grid).call(e,0,i+1).forEach((function(e){e.forEach((function(e){null==e||e.setProcessed(!0)}))})),s.forEach((function(e){n.findMatchesByLevelAt(e,zc.Any)}));var r=[];return st()(t=this.grid).call(t,i+1,this.grid.length).forEach((function(e){e.forEach((function(e){e&&!e.isProcess&&r.push(e)}))})),r},t.resetProcessed=function(){this.grid.forEach((function(e){e.forEach((function(e){null==e||e.setProcessed(!1)}))}))},t.destroyNeighBors=function(e,t,n){var i=this,a=this.findNearestEmptyPositionByXY(e,t,n);if(0!==a.length){var s=a[0],r=a[1],o=this.getAroundByLevel(4,s,r);o.forEach((function(e){i.removeFromGrid(e)}));var c=this.findOrphanedBalls();this.removeFromGrid(c),this.scene.time.delayedCall(33,(function(){i.animateDestroyedBallByBomb(o,c,e,t)})),this.cleanUpEmptyRows()}},t.isRowStaggered=function(e){var t=this.grid[0];return e%2==0?t.staggered:!t.staggered},t.getNeighborsPositionAt=function(e,t){var n=this,i=this.isRowStaggered(e),a=rd[+i],s=de()(a).call(a,(function(n){return[e+n[0],t+n[1]]})),r=he()(s).call(s,(function(e){var t=e[0],i=e[1],a=n.rowSize-+n.isRowStaggered(t);return i>=0&&i<a}));return r},t.getNeighbors=function(e,t){var n,i=this,a=this.isRowStaggered(e),s=rd[+a];return he()(n=de()(s).call(s,(function(n){var a=e+n[0],s=t+n[1],r=i.grid[a];if(r&&r[s])return r[s]}))).call(n,(function(e){return e}))},t.getNeighBorsLength=function(e,t){var n=this.isRowStaggered(e);return 0===e?n?0===t||11===t?3:12===t?0:4:0===t||12===t?2:4:n?0===t||11===t?5:12===t?0:6:0===t||12===t?3:6},t.filterBallsByPositions=function(e){var t=this,n=[];return e.forEach((function(e){var i=e[0],a=e[1],s=t.grid[i];if(s){var r=s[a];r&&n.push(r)}})),n},t.getAllBallsByPositions=function(e){var t=[];return e.forEach((function(e){var n=e[0],i=e[1];t.push({row:n,col:i})})),t},t.getNeighborsByLevelAt=function(e,t,n){var i=this;this.resetProcessed();var a=[];if(this.grid[t]){var s=this.grid[t][n];s&&(s.isProcess=!0)}var r=this.filterBallsByPositions(this.getNeighborsPositionAt(t,n));a.push(r),r.forEach((function(e){e.isProcess=!0}));for(var o=function(e){var t=a[a.length-1];if(0==t.length)return a.pop(),"break";var n=[];t.forEach((function(e){i.filterBallsByPositions(i.getNeighborsPositionAt(e.row,e.col)).forEach((function(e){e.isProcess||(e.isProcess=!0,n.push(e))}))})),a.push(n)},c=0;c<e-1;c++){if("break"===o())break}return a},t.getAroundByLevel=function(e,t,n){var i=this;this.resetProcessed();for(var a=[[{row:t,col:n}]],s=function(e){var t=a[a.length-1];if(0==t.length)return a.pop(),"break";var n=[];t.forEach((function(e){i.getAllBallsByPositions(i.getNeighborsPositionAt(e.row,e.col)).forEach((function(e){(function(e,t){for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<i.length;a++){var s=i[a];if(s.row===e.row&&s.col===e.col)return!0}return!1})(e,a)||n.push(e)}))})),a.push(n)},r=0;r<e;r++){if("break"===s())break}var o=[];return a.forEach((function(e){var t=[];e.forEach((function(e){if(i.grid[e.row]){var n=i.grid[e.row][e.col];n&&(n.isProcess||(n.isProcess=!0,t.push(n)))}})),o.push(t)})),o},t.findMatchesByLevelAt=function(e,t){var n=this,i=[],a=t||e.getColor();e.isProcess=!0,i.push([e]);for(var s=1,r=function(e){var t=i[i.length-1];if(0==t.length)return i.pop(),"break";var r=[];t.forEach((function(e){n.filterBallsByPositions(n.getNeighborsPositionAt(e.row,e.col)).forEach((function(e){var t,n;e.isProcess||((t=a,n=e.getColor(),t===zc.Any||n===zc.Any||t===n)&&(r.push(e),s+=1),e.isProcess=!0)}))})),i.push(r)},o=0;o<i.length;o++){if("break"===r())break}return[i,s]},t.jiggleNeighborsBall=function(e){var t=this.getNeighborsByLevelAt(3,e.row,e.col),n=[6,4,2,1];t.forEach((function(t,i){var a=n[i];t.forEach((function(t){var n=t.x-e.x,s=t.y-e.y,r=new Phaser.Math.Vector2(n,s);r.normalize(),t.jiggle(r,a,33*i)}))}))},t.updateNewHighestFullRow=function(){var e=this.fullRow;if(e){var t=e.index+1,n=this.grid[t];if(n&&n.count===n.size)return}for(var i=0,a=e?e.index:this.grid.length-1,s=this.grid.length-1;s>=0;s--){var r=this.grid[s];if(r&&r.count===r.size){i=s;break}}i>0&&(i-=1);for(var o=a;o>=i;o--){var c=this.grid[o];if(c)for(var l,h=id(c);!(l=h()).done;){var u=l.value;u&&!u.body.enable&&this.scene.physics.world.enable(u)}}this.fullRow=this.grid[i]},t.cleanUpEmptyRows=function(){for(var e=this.grid.length-1;e>0;--e){if(this.grid[e].count>0)return;this.grid.pop()}},t.randomStampOnBall=function(){for(var e=this,t=Phaser.Math.Between(0,50),n=0,i=this.grid.length-1;i>=0;i--)for(var a=this.grid[i],s=function(i){var s=a[i];if(s){if(n===t){if(s.isHeaving())e.randomStampOnBall();else{var r=e.layoutData.getRandomStamp();s.setStamp(r);var o=e.scene.registry.get("heavingBallTimer"),c=e.scene.time.delayedCall(o,(function(){var e;null==(e=s.takeStamp())||e.kill()}));e.scene.events.emit(cl.TIMER_CREATED,c)}return{v:void 0}}n++}},r=a.length-1;r>=0;r--){var o=s(r);if("object"===typeof o)return o.v}},t.spawnStamp=function(e,t,n){var i=this,a=1/this.scene.world.getPixelRatio();e.setScale(1.25*a),e.setPosition(t,n);var s=this.scene.registry.get("zones").zones.zone5.topY-n+90;this.scene.tweens.add({targets:e,y:n+s,offset:0,duration:s/.5,onComplete:function(){e.setScale(a),e.setVisible(!1),i.scene.shooter.collectStamp(e)},ease:Phaser.Math.Easing.Quadratic.In})},t.getRowColByXY=function(e,t){var n,i=(t-this.topY+.5*this.size.height)/this.ballInterval,a=Math.round(i)-1;if(a%2===0)n=this.firstRow.firstX;else{var s=a%2===0?this.firstRow.staggered:!this.firstRow.staggered;n=this.firstRow.firstX-this.size.width/2,s&&(n+=this.size.width)}var r=(e-n)/this.size.width;return{row:a,col:Math.round(r)}},t.getHalfGridBelow=function(e){var t,n=[],i=Math.ceil(this.bottomY-e)/this.ballInterval;return n.push.apply(n,st()(t=this.grid).call(t,this.grid.length-i)),n},t.makeBallExplode=function(e){this.removeFromGrid([e]),this.animateOrphans([e],nd.Rocket,!0),this.cleanUpEmptyRows(),this.clearOrphanBall()},t.clearOrphanBall=function(){var e=this;this.clearOrphanBallTimer&&!this.clearOrphanBallTimer.hasDispatched||(this.scene.audio.playSound(Qa.Z.POISON_DRINK),this.clearOrphanBallTimer=this.scene.time.delayedCall(66,(function(){var t=e.findOrphanedBalls();e.removeFromGrid(t),e.animateOrphans(t,nd.Rocket),e.cleanUpEmptyRows()})))},t.clearHalfGrid=function(){var e,t=this,n=this.grid.length,i=Math.floor(n/2),a=[];st()(e=this.grid).call(e,i).forEach((function(e){var n=[];e.forEach((function(e){e&&n.push(e)})),a.unshift(n),t.removeFromGrid(n)})),this.animateDestroyedBall(a,[]),this.cleanUpEmptyRows(),this.updateNewHighestFullRow()},t.playRollingSound=function(){this.limitSoundTimer&&!this.limitSoundTimer.hasDispatched||(this.scene.audio.playSound(Qa.Z.ROLLING),this.limitSoundTimer=this.scene.time.delayedCall(32,(function(){})))},(0,G.Z)(e,[{key:"height",get:function(){return(this.grid.length-1)*this.ballInterval+this.size.height}},{key:"ballInterval",get:function(){return Math.round(this.size.height*sd)}},{key:"topY",get:function(){return 0===this.grid.length?this.scene.gameSettings.topY:this.firstY-.5*this.size.height}},{key:"bottomY",get:function(){return this.topY+this.height}},{key:"firstRow",get:function(){return this.grid[0]}},{key:"getDangerRows",get:function(){var e=this.scene.registry.get("zones").zones,t=[];if(this.bottomY>e.zone5.topY){var n,i=Math.ceil((this.bottomY-e.zone5.topY)/this.ballInterval);t.push.apply(t,st()(n=this.grid).call(n,this.grid.length-i))}return t}},{key:"totalBalls",get:function(){return this.ballsCount}}]),e}(),ld=cd,hd=n(90),ud=n.n(hd),dd=[[" - - - - - - - - - - - -","- - - - - - - - - - - - -"," o o o o o o o o o o o o","- - - - - - - - - - - - o"," - o o o o o o o o o o o","- o - - - - - - - - - - -"," - o o o o o o o o o o -","- - - - - - - - - - - o -"," - - - o o o o o o o o -","- - - o - - - - - - - - -"," - - - o o o o o o - - -","- - - - - - - - - - - - -"],[" - - - - - - - - - - - -","o o o o o o o o o o o o o"," - - - - - - - o - - - -","- - - o o o o o - - - - -"," - - o - - - - - - - - -","- - - o o o o o o o - - -"," - - - - - - - - - o - -","- - o o o o o o o o - - -"," - o - - - - - - - - - -","- - o o o o o o o o o - -"," - - - - - - - - - - o -","- o o o o o o o o o o - -"," o - - - - - - - - - - -","- o o o o o o o o o o o -"," - - - - - - - - - - - o","- - - - - - o o o o o o -"," - - - - - o - - - - - -","- - - - - - - - - - - - -"],[" - - - - - - - - - - - -","o - - o o o o o o o - - o"," o o o - - - - - - o o o","- o - - - - - - - - - o -"," - o - o - - - - o - o -","- o - o o - - - o o - o -"," - o o - o - - o - o o -","- - o - - o - o - - o - -"," - o o - - o o - - o o -","- - o - - - o - - - o - -"],[" - - - - - - - - - - - -","- - o o o o o o o o o - -"," - o - - - - - - - - o -","- o - o o o o o o o - o -"," o - o - - - - - - o - o","- o - o o o o o o - o - o"," - o - - - - - - - o - o","- - o o o o o o o o - o -"," - - - - - - - - - - o -","- - - o o o o o o o o - -"],[" - - - - - - - - - - - -","o - - - - - - - - - - - o"," o - - - - - - - - - - o","- o - - - - - - - - - o -"," - o - - - - - - - - o -","- - o - - - o - - - o - -"," - - o - - o o - - o - -","- - - o - o - o - o - - -"," - - - o o - - o o - - -","- - - - o - - - o - - - -"],[" - - - - - - - - - - - -","- - - - - - - - o o o o o"," - - - - - - - o - - - -","- - - - - - - o - - - - -"," - - - - - - o - - - - -","- - - - - - o - - - - - -"," - - - - - o - - - - - -","o o o o o o - - - - - - -"]],pd=[[" - - - - - - - - - - - -","o o o o o o o o o o o o o"," - - - - - o o - - - - -","- - - - - p o p - - - - -"," - - - - p o o p - - - -","- - - - p o p o p - - - -"," - - - p o p p o p - - -","- - - p o p o p o p - - -"," - - p o p o o p o p - -","- - p o p o p o p o p - -"," - p o p o p o o p o p -","- p o p o p p p p p o p -"," p o p o o o o o o o o p","p o p p p p p p p p p p p"," o o o o o o o o o o o o","- - - - - - - - - - - - -"],[" - - - - - - - - - - - -","- - - - - - o - - - - - -"," - - - - - o o - - - - -","- - - - o o p o o - - - -"," - - - o p - - p o - - -","- - o o p - - - p o o - -"," o o p p - - - - p p o o","- - o o p - - - p o o - -"," - - - o p - - p o - - -","- - - - o o p o o - - - -"," - - - - - o o - - - - -","- - - - - - o - - - - - -"],[" - - - - - - - - - - - -","- - - - - - - - - - - - -"," - - - o o o o o o - - -","- - - o p p p p p o - - -"," - - o p o o o o p o - -","- - o p o p p p o p o - -"," - o p o p o o p o p o -","- o p o p o p o p o p o -"," o p o p p p p o p o p o","p o p o o o o o p o p o -"," p o p p p p p p o p o -","- p o o o o o o o p o - -"," - p p p p p p p p o - -","o o o o o o o o o o - - -"],[" - - - - - - - - - - - -","o o o o - o o o - o o o o"," o - - o o - - o o - - o","- o o - - - p - - - o o -"," - - o - - p p - - o - -","o o o o - - p - - o o o o"," o - - - - - - - - - - o","- o o o o o - o o o o o -"," - - - - - o o - - - - -","- - - - - - o - - - - - -"],[" - - - - - - - - - - - -","- - o o o o o o o o o - -"," - o - - - - - - - - o -","- o - p p p p p p p - o -"," o - p - - - - - - p - o","o - p - o o o o o - p - o"," o - p - - - - - - p - o","- o - p p p p p p p - o -"," - o - - - - - - - - o -","- - o o o o o o o o o - -"],[" - - - - - - - - - - - -","- o o o o - - - o o o o -"," o p p p o - - o p p p o","o p p p p o - o p p p p o"," o o p p p o o p p p o o","- - o o p p o p p o o - -"," - - - o p p p p o - - -","- - - - o o p o o - - - -"," - - - - - o o - - - - -","- - - - - - o - - - - - -"]],fd=[[" - - - - - - - - - - - -","- - - - - - - - - - - - -"," o o o o o o o o o o o o","p o q p o q p o q p o q p"," p o q p o q p o q p o q","q p o q p o q p o q p o q"," q p o q p o q p o q p o","o q p o q p o q p o q p o"," o q p o q p o q p o q p","p o q p o q p o q p o q p"],[" - - - - - - - - - - - -","- - - - - - o - - - - - -"," - - - - - o o - - - - -","- - - - - o q o - - - - -"," o o o o o q q o o o o o","- o q q q q p q q q q o -"," - o q p p p p p p q o -","- - o q p p - p p q o - -"," - o q p p p p p p q o -","- o q q q q p q q q q o -"," o o o o o q q o o o o o","- - - - - o q o - - - - -"," - - - - - o o - - - - -","- - - - - - o - - - - - -"],[" - - - - - - - - - - - -","p p p p p p p p p p p p p"," q q q q q q q q q q p p","- q p p o o p p q q p p p"," q p p o o p p q q p p p","q p p o o p p q q p p p -"," q p p o o p p q q p p p","- q p p o o p p q q p p p"],[" - - - - - - - - - - - -","- - - - - - - - - - - - -"," o - - o o o o o o - - o","o o - o - p - q - o - o o"," o o o - p - q - p o o o","o o o - p - q - p - o o o"," o o o p - q - p - o o o","o o - o - q - p - o - o o"," o - - o o o o o o - - o","- - - - - - - - - - - - -"],[" - - - - - - - - - - - -","- - - - - - - - - - - - -"," o o o - - - - - - o o o","- - - o - - p - - o - - -"," - - - o - p p - o - - -","- - - - o p q p o - - - -"," - - - - o q q o - - - -","- - - - p o - o p - - - -"," - - - p o - - o p - - -","- - - p o - p - o p - - -"," - - p q o p p o q p - -","- - p q o o q o o q p - -"," - p q o o q q o o q p -","- p q o o q p q o o q p -"," p q o p o p p o p o q p","p q o p q o p o q p o q p"],[" a a a a a a a a a a a a","a a a a a a a a a a a a a"," a a y y y y y y y y a a","a y y y y y y y y y y y a"," y b b b b y y b b b b y","y b a a a b y b a a a b y"," b a v v a b b a v v a b","y b a a a b y b a a a b y"," y b b b b y y b b b b y","y y y y y y y y y y y y y"," b y y a a a a a a y y b","y b y y y y y y y y y b y"," b b y y y y y y y y b b","- - - - - - - - - - - - q"]];if(GameCore.Utils.Valid.isDebugger())for(var gd,md=y()(gd=[]).call(gd,dd,pd,fd),vd=0;vd<md.length;vd++){var yd=md[vd],Sd=yd.join(" ");ne()(Sd).call(Sd,"q")?ne()(fd).call(fd,yd):ne()(Sd).call(Sd,"p")?ne()(pd).call(pd,yd):ne()(dd).call(dd,yd)}var Ed,bd=[Jl.StampGift,Jl.StampUp],Ad=[zc.Green,zc.Red,zc.Yellow,zc.Blue,zc.Violet],wd=function(){function e(e){this.scene=void 0,this.currentColors=void 0,this.currentBulletColors=void 0,this.countBulletColors=void 0,this.currentPatternList=void 0,this.canRandomPatternColor=void 0,this.rowSize=void 0,this.currentStampList=[],this.scene=e,this.rowSize=this.scene.data.get("grid").rowSize,this.setRandomPatternColor(!0),this.setGridLevel(1),this.setBulletLevel(1)}var t=e.prototype;return t.setGridLevel=function(e){this.currentColors=st()(Ad).call(Ad,0,e+2),this.updateCurrentPatternList()},t.setBulletLevel=function(e){var t;this.currentBulletColors=st()(Ad).call(Ad,0,e+2),this.countBulletColors=Ds()(t=Array(this.currentColors.length)).call(t,0)},t.setRandomPatternColor=function(e){this.canRandomPatternColor=e},t.getRandomPatternIndexes=function(e){for(var t=[],n=[],i=0;i<this.currentPatternList.length;i++)t.push(i);for(var a=0;a<e;a++){var s=Phaser.Math.Between(0,t.length-1);n.push(t[s]),Va()(t).call(t,s,1)}return n},t.getNextPattern=function(e){var t,n,i=this.currentPatternList[e],a=de()(t=Ds()(n=Array(this.currentColors.length)).call(n,0)).call(t,(function(e,t){return t})),s=[],r=this.get3ColorsForPattern(),o=r.index1,c=r.index2,l=r.index3,h=this.currentColors[o],u=this.currentColors[c],d=this.currentColors[l];ne()(dd).call(dd,i)?Va()(a).call(a,o,1):ne()(pd).call(pd,i)?(Va()(a).call(a,ge()(a).call(a,o),1),Va()(a).call(a,ge()(a).call(a,c),1)):ne()(fd).call(fd,i)&&(Va()(a).call(a,ge()(a).call(a,o),1),Va()(a).call(a,ge()(a).call(a,c),1),Va()(a).call(a,ge()(a).call(a,l),1));for(var p=i.length-1;p>=0;--p){for(var f=i[p],g=[],m=0;m<f.length;++m)switch(f.charAt(m)){case"o":g.push(h);break;case"p":g.push(u);break;case"q":g.push(d);break;case"b":g.push(zc.Blue);break;case"y":g.push(zc.Yellow);break;case"v":g.push(zc.Violet);break;case"a":g.push(zc.Green);break;case"-":g.push(this.currentColors[Phaser.Utils.Array.GetRandom(a)])}s[i.length-1-p]=g}return s},t.getNextRow=function(e){for(var t=[],n=0;n<e;++n)t.push(this.getRandomColor());return t},t.getRandomColor=function(){var e=Math.floor(Math.random()*this.currentColors.length);return this.currentColors[e]},t.getRandomBulletColor=function(){var e,t,n=this.scanColorsOnGrid(),i=n.length,a=Math.floor(Math.random()*i);if(this.countBulletColors[ge()(e=this.currentBulletColors).call(e,n[a])]>=2){var s=i-1;i<3&&(s=i);var r=Math.floor(Math.random()*s);a=r===a?r+1:r}var o,c=n[a]||n[0],l=ge()(t=this.currentBulletColors).call(t,c);0===this.countBulletColors[l]&&(this.countBulletColors=Ds()(o=Array(this.currentBulletColors.length)).call(o,0));return this.countBulletColors[l]+=1,c},t.getRandomStamp=function(){var e,t=st()(e=this.scene.registry.get("bonusRate")).call(e,0,this.currentStampList.length),n=ud()(t).call(t,(function(e,t){return e+t}),0),i=Math.ceil(Math.random()*n),a=Ha()(t).call(t,(function(e){return(i-=e)<=0})),s=this.currentStampList[a],r=this.scene.stampPool.spawn();return r.setStamp(s),r},t.cloneStamp=function(e){var t=this.scene.stampPool.spawn();return t.setStamp(e.getStampType()),t},t.setStampListLength=function(e){this.currentStampList=st()(bd).call(bd,0,e)},t.getBomb=function(){return this.scene.bombPool.spawn()},t.getRainbowBall=function(){return this.scene.rainbowBallPool.spawn()},t.initCellGroup=function(e,t){var n=this.scene.grid,i=n.fullRow;i||n.updateNewHighestFullRow();for(var a=i?i.index:0,s=a>e?0:a,r=[],o=t;o>=s;o--){r[o]=[];for(var c=0;c<this.rowSize;c++)r[o][c]={row:o,col:c,isProcessed:!1}}return r},t.initEmptyCells=function(e,t){var n=[],i=e[t][0];return i.isProcessed=!0,n.push(i),n},t.isCellExisting=function(e,t,n){var i=n[e];return!(!i||!i[t])},t.scanAroundBalls=function(e,t,n){var i=this;this.scene.grid.getNeighbors(e.row,e.col).forEach((function(e){var a=e.row,s=e.col;if(i.isCellExisting(a,s,t)){var r=t[a][s];if(!1===r.isProcessed){r.isProcessed=!0;var o=e.getColor();!1===ne()(n).call(n,o)&&n.push(o)}}}))},t.addToEmptyCells=function(e,t,n,i){if(this.isCellExisting(e,t,i)){var a=i[e][t];!1===a.isProcessed&&(a.isProcessed=!0,n.push(a))}},t.isAmountColorsAtMax=function(e){return e.length===this.currentBulletColors.length},t.isCellContainBall=function(e,t){var n=this.scene.grid.grid[e];return!(!n||!n[t])},t.scanAroundCells=function(e,t,n,i){var a=this;this.scene.grid.getNeighborsPositionAt(e.row,e.col).forEach((function(e){var s=e[0],r=e[1];s<=i&&(a.isCellContainBall(s,r)||a.addToEmptyCells(s,r,n,t))}))},t.scanColorsOnGrid=function(){for(var e=[],t=this.scene.grid.grid.length-1,n=t+1,i=this.initCellGroup(t,n),a=this.initEmptyCells(i,n);a.length>0;){var s=a.pop();if(s&&(this.scanAroundBalls(s,i,e),this.scanAroundCells(s,i,a,n)),this.isAmountColorsAtMax(e))break}return 0===e.length?this.currentBulletColors:e},t.updateCurrentPatternList=function(){switch(this.currentColors.length){case 3:var e;this.currentPatternList=y()(e=[]).call(e,dd);break;case 4:var t;this.currentPatternList=y()(t=[]).call(t,dd,pd);break;case 5:var n;this.currentPatternList=y()(n=[]).call(n,pd,fd)}},t.get3ColorsForPattern=function(){var e=this.currentColors.length-1;this.canRandomPatternColor&&(e=Phaser.Math.Between(0,this.currentColors.length-1));for(var t=Phaser.Math.Between(0,this.currentColors.length-1);t===e;)t=Phaser.Math.Between(0,this.currentColors.length-1);for(var n=Phaser.Math.Between(0,this.currentColors.length-1);n===e||n===t;)n=Phaser.Math.Between(0,this.currentColors.length-1);return{index1:e,index2:t,index3:n}},e}(),Td=wd;!function(e){e[e.LOADING=0]="LOADING",e[e.SWAPPING=1]="SWAPPING",e[e.READY=2]="READY",e[e.SHOOTING=3]="SHOOTING"}(Ed||(Ed={}));var Pd,Cd=Ed,Id=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i,a,s)||this).fireParticle=void 0,r.image3D.setOrigin(.5,.6),r.fireParticle=t.tailParticles.createFireEmitter(),r}(0,c.Z)(t,e);var n=t.prototype;return n.launch=function(t){var n=this;e.prototype.launch.call(this,t),this.image3D.setOrigin(.5,.5),this.scene.time.delayedCall(50,(function(){n.fireParticle.stop(),n.fireParticle.stopFollow()}))},n.showGlow=function(){this.fireParticle.start(),this.fireParticle.startFollow(this.image3D,0,10),this.updateAngle(new Phaser.Math.Vector2(0,-1))},n.kill=function(){e.prototype.kill.call(this),this.fireParticle.stop()},n.updateAngle=function(e){var t=800*-e.x,n=800*-e.y;this.fireParticle.setGravity(t,n),this.fireParticle.followOffset.set(15*-e.x,15*-e.y),this.image3D.setAngle(e.angle()*Phaser.Math.RAD_TO_DEG+90),this.shadow.setAngle(this.image3D.angle)},n.postUpdate=function(){if(e.prototype.postUpdate.call(this),this.launching){var t=(this.body.velocity.angle()||-Math.PI/2)+Math.PI/2;this.image3D.setRotation(t),this.shadow.setRotation(t)}},t}(Vl),xd=Id,Bd=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return(0,c.Z)(t,e),t.prototype.setPosition=function(t,n,i,a){e.prototype.setPosition.call(this,t,n,i,a);var s=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y),r=s.x,o=s.y;return e.prototype.setPosition.call(this,r,o),this},t}(Phaser.GameObjects.Container),kd=Bd,Rd=function(e){(0,c.Z)(n,e);var t=n.prototype;function n(t,n,i){var a;return(a=e.call(this,t,n,i)||this).text=void 0,a.textShadow=void 0,a.scaleValue=void 0,a.scaleUpAnimation=void 0,a.createShadow(),a.createValue(),a.createAnimation(),a.setValue(0),a.scene.add.existing((0,za.Z)(a)),a}return t.setValue=function(e){this.text.setText("x"+e),this.text.setVisible(0!==e),this.textShadow.setText("x"+e),this.textShadow.setVisible(0!==e),this.updateScaleForCombo(e),this.scaleUpAnimation.restart()},t.updateScaleForCombo=function(e){this.scaleValue=e>=15?1.225:1+.015*e},t.createAnimation=function(){var e=this;this.scaleUpAnimation=this.scene.tweens.add({targets:[this.text,this.textShadow],scale:{start:1,from:1,to:1.2},yoyo:!0,duration:200,onUpdate:function(t){t.updateTo("scale",e.scaleValue,!1)},ease:Phaser.Math.Easing.Sine.Out})},t.createValue=function(){this.text=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(23),text:"x0",origin:{x:.5,y:.15}}),this.add(this.text)},t.createShadow=function(){this.textShadow=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(23),text:"x0",origin:{x:.5,y:.15}}),this.textShadow.setPosition(0,12*.6),this.textShadow.setAlpha(.2),this.textShadow.setTint(0),this.add(this.textShadow)},n}(Phaser.GameObjects.Container),Od=Rd,_d=Phaser.Input.Events,Dd=_d.GAMEOBJECT_POINTER_DOWN,Ld=_d.GAMEOBJECT_POINTER_MOVE,Nd=_d.GAMEOBJECT_POINTER_UP,Md=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.launcher=void 0,a.shootingArea=void 0,a.switchingArea=void 0,a.shootingAngle=void 0,a.timeToReloadBullet=150,a.shotGuide=void 0,a.combosText=void 0,a.currentBullet=void 0,a.bomb=void 0,a.nextBullet=void 0,a.bombAttached=!1,a.stampQueue=[],a.shooterState=void 0,a.isPointerDownInShootingArea=!1,a.isPointerMoveInShootingArea=!1,a.isDisabledShooting=!0,a.isDisabledShotGuide=!0,a.isDisabledSwitching=!0,a.nextBulletScale=.75,a.bombUsed=0,a.rocketUsed=0,a.shootingPosition=void 0,a.nextShootingPosition=void 0,a.attachItemTimeline=void 0,a.onPointerDown=function(e,t){if(t[0]===a.switchingArea)return a.isPointerDownInShootingArea=!0,void(a.isPointerMoveInShootingArea=!1);e.worldY>a.getWorldPosition().y-20||e.worldY<45?a.isPointerMoveInShootingArea=!1:(a.updateAngle(e),a.isPointerMoveInShootingArea=!0)},a.onPointerMove=function(e,t){t[0]!==a.switchingArea?e.worldY>a.getWorldPosition().y-20||e.worldY<45?a.isPointerMoveInShootingArea=!1:(a.updateAngle(e),a.isPointerMoveInShootingArea=!0):a.isPointerMoveInShootingArea=!1},a.onPointerUp=function(e){e.rightButtonReleased()?a.swapBalls():(a.isPointerDownInShootingArea&&a.isPointerMoveInShootingArea&&a.shoot(e),a.isPointerDownInShootingArea=!1)},a.putBombOnShooter=function(){a.shooterState=Cd.LOADING;var e=a.scene.ballLayoutData.getBomb().setFlyingBehavior();e.scale=0,e.setPosition(a.shootingPosition.x,a.shootingPosition.y),e.shadow.setVisible(!0),e.shadow.setPosition(e.image3D.x-4,e.image3D.y+14),e.showGlow(),e.fireParticles.revive(),a.bomb=e,a.bombAttached=!0;var t=1/a.scene.world.getPixelRatio();a.scene.add.tween({targets:e,scale:t,ease:Phaser.Math.Easing.Bounce.Out,duration:300,onComplete:function(){a.shooterState=Cd.READY}}),a.scene.add.sprite(e.x+10,e.y+10,"").play("showing-bomb-effect").setWorldSize(120,123)},a.putRainbowBallOnShooter=function(){a.shooterState=Cd.LOADING;var e=a.scene.ballLayoutData.getRainbowBall().setFlyingBehavior();e.image3D.play("rocket-flying",!0),e.scale=0,e.setPosition(a.shootingPosition.x,a.shootingPosition.y),e.showGlow(),a.bomb=e,a.bombAttached=!0;var t=1/a.scene.world.getPixelRatio();a.scene.add.tween({targets:e,scale:t,ease:"Bounce.easeOut",duration:300,onComplete:function(){a.shooterState=Cd.READY}}),a.scene.add.sprite(e.x+10,e.y+10,"").play("showing-bomb-effect").setWorldSize(120,123)},a.updateAngle=function(e){var t=GameCore.Utils.Number.to2DPoint(e.worldX,e.worldY),n=t.x,i=t.y,s=n-a.shootingPosition.x,r=i-a.shootingPosition.y,o=new Phaser.Math.Vector2(s,r);o.normalize(),a.shootingAngle.copy(o)},a.handleCloseScreen=function(){a.scene.input.setTopOnly(!0);var e=a.scene.input.activePointer;if(e.active&&!(e.worldY<80)){var t=e.worldX-a.shootingPosition.x,n=e.worldY-a.shootingPosition.y,i=new Phaser.Math.Vector2(t,n);i.normalize(),a.shootingAngle.copy(i)}},a.scene=t,a.setDepth(ja.Z.SHOOTER),a.shooterState=Cd.LOADING,a.initBulletPosition(),a.createObjects(),a.initEvents(),a.initController(),a.setCombosText(0),t.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.getState=function(){return this.shooterState},n.initBulletPosition=function(){this.shootingPosition={x:this.x,y:this.y-30.5},this.nextShootingPosition={x:this.x+30.5*Math.cos(Math.PI/4.4),y:this.y+30.5*Math.sin(Math.PI/4.4)}},n.createObjects=function(){this.launcher=new Lu(this.scene),this.launcher.setScale(1.15,.9),this.combosText=new Od(this.scene,0,3),this.add(this.launcher),this.add([this.combosText])},n.initController=function(){var e=this,t=this.scene.add.rectangle(0,0,this.scene.gameZone.width,this.scene.gameZone.height);t.setName("shootingArea");var n=this.scene.add.rectangle(0,0,90,90);t.setOrigin(0,0),t.setInteractive(),t.on(Dd,(function(){e.isPointerDownInShootingArea=!0})),this.scene.input.on(Dd,this.onPointerDown),this.scene.input.on(Ld,this.onPointerMove),this.scene.input.on(Nd,this.onPointerUp);var i=!1;n.setInteractive({useHandCursor:!0}),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){i=!0})),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){i=!1})),n.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){i&&e.swapBalls()})),this.shootingAngle=new Phaser.Math.Vector2(0,-1),this.add([n]),this.switchingArea=n,this.shootingArea=t},n.initEvents=function(){this.scene.screen.events.off(GameCore.Screens.Events.CLOSE,this.handleCloseScreen),this.scene.screen.events.on(GameCore.Screens.Events.CLOSE,this.handleCloseScreen)},n.collectStamp=function(e){this.stampQueue.push(e)},n.pause=function(){this.setDisabledShooting(),this.setDisabledShotGuide(),this.setDisabledSwitching()},n.resume=function(){this.setDisabledShooting(!1),this.setDisabledShotGuide(!1),this.setDisabledSwitching(!1)},n.initBullet=function(){var e,t=1/this.scene.world.getPixelRatio(),n=this.scene,i=n.bulletBallPool,a=n.ballLayoutData,s=i.spawn(this.shootingPosition.x,this.shootingPosition.y,a.getRandomBulletColor());null==(e=this.currentBullet)||e.kill(),this.currentBullet=s;var r=i.spawn(this.nextShootingPosition.x,this.nextShootingPosition.y,a.getRandomBulletColor());r.scale=t*this.nextBulletScale,this.nextBullet=r,this.shooterState=Cd.READY},n.setGuide=function(e){this.shotGuide=e},n.attachBomb=function(){if(this.scene.analytics.event(qt._.USE_ITEM,{item_name:"bomb",level:this.scene.registry.get("log_level"),success:!this.bombAttached}),!this.bombAttached){this.bombUsed+=1,this.shooterState=Cd.LOADING,this.bombAttached=!0;var e=this.scene.animationsManager.animationAttachBomb();this.hideBullets(),e.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,this.putBombOnShooter),this.attachItemTimeline=e}},n.attachRainbowBall=function(){var e=this.scene.registry.get("log_level");if(this.scene.analytics.event(qt._.USE_ITEM,{item_name:"rocket",level:e,level_name:"level_"+e,success:!this.bombAttached}),!this.bombAttached){this.rocketUsed+=1,this.shooterState=Cd.LOADING,this.bombAttached=!0;var t=this.scene.animationsManager.animationAttachRainbowBall();this.hideBullets(),t.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,this.putRainbowBallOnShooter),this.attachItemTimeline=t}},n.genNextBullet=function(){var e,t=1/this.scene.world.getPixelRatio(),n=this.scene,i=n.bulletBallPool,a=n.ballLayoutData,s=i.spawn(this.nextShootingPosition.x,this.nextShootingPosition.y,a.getRandomBulletColor());(s.scale=0,this.stampQueue.length)&&(s.setStamp(this.stampQueue[0]),Va()(e=this.stampQueue).call(e,0,1));this.nextBullet=s,this.scene.tweens.add({targets:s,scale:t*this.nextBulletScale,duration:300,delay:this.timeToReloadBullet})},n.swapBalls=function(){var e=this;if(!this.isDisabledSwitching&&this.shooterState==Cd.READY&&!this.bombAttached){this.shooterState=Cd.SWAPPING,this.scene.audio.playSound(Qa.Z.SWITCH_BUBBLE);var t=this.currentBullet;if(this.currentBullet=this.nextBullet,this.nextBullet=t,this.currentBullet){var n=this.currentBullet.x-this.x,i=this.currentBullet.y-this.y,a=new Phaser.Math.Vector2(n,i),s=this.shootingPosition.x-this.x,r=this.shootingPosition.y-this.y,o=new Phaser.Math.Vector2(s,r),c=1/this.scene.world.getPixelRatio(),l=o.length();this.scene.tweens.add({targets:this.nextBullet,scale:c*this.nextBulletScale,duration:300}),this.scene.tweens.addCounter({from:o.angle(),to:a.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.nextBullet&&(e.nextBullet.x=e.x+Math.cos(n)*l,e.nextBullet.y=e.y+Math.sin(n)*l)}}),this.scene.tweens.add({targets:this.currentBullet,scale:c,duration:300}),this.scene.tweens.addCounter({from:a.angle()+2*Math.PI,to:o.angle(),duration:300,onUpdate:function(t){var n=t.getValue();e.currentBullet&&(e.currentBullet.x=e.x+Math.cos(n)*l,e.currentBullet.y=e.y+Math.sin(n)*l)},onComplete:function(){e.shooterState=Cd.READY}})}}},n.attachBullet=function(){var e=this;if(this.scene&&this.shooterState!=Cd.LOADING&&(this.currentBullet=this.nextBullet,this.genNextBullet(),this.currentBullet)){this.shooterState=Cd.LOADING;var t=this.currentBullet.x-this.x,n=this.currentBullet.y-this.y,i=new Phaser.Math.Vector2(t,n),a=this.shootingPosition.x-this.x,s=this.shootingPosition.y-this.y,r=new Phaser.Math.Vector2(a,s),o=r.length(),c=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:this.currentBullet,scale:c,duration:300,delay:this.timeToReloadBullet}),this.scene.tweens.addCounter({from:i.angle()+2*Math.PI,to:r.angle(),duration:300,delay:this.timeToReloadBullet,onUpdate:function(t){var n;if(null!=(n=e.currentBullet)&&n.active){var i=t.getValue();e.currentBullet.x=e.x+Math.cos(i)*o,e.currentBullet.y=e.y+Math.sin(i)*o}else t.stop()},onComplete:function(){e.bombAttached||(e.shooterState=Cd.READY)}})}},n.update=function(e){var t,n=this.isDisabledShotGuide||this.shooterState!=Cd.READY;(this.isPointerMoveInShootingArea||(n=!0),n)?null==(t=this.shotGuide)||t.hide():this.updateShootingAngle(e)},n.hideShotGuide=function(){var e;null==(e=this.shotGuide)||e.hide()},n.updateShootingAngle=function(e){var t=this.constraintAngle(this.shootingAngle);if(this.bombAttached){var n;if(!this.bomb)return;this.bomb instanceof xd&&this.bomb.updateAngle(t);var i=this.bomb instanceof xd?zc.Pink:zc.Black;null==(n=this.shotGuide)||n.showFrom(e,this.bomb.x,this.bomb.y,t,i)}else{var a;if(!this.currentBullet)return;null==(a=this.shotGuide)||a.showFrom(e,this.currentBullet.x,this.currentBullet.y,t,this.currentBullet.getColor())}},n.shoot=function(e){var t;if(!this.isDisabledShooting&&this.shooterState==Cd.READY){var n=GameCore.Utils.Number.to2DPoint(e.worldX,e.worldY),i=n.x,a=n.y,s=i-this.shootingPosition.x,r=a-this.shootingPosition.y,o=new Phaser.Math.Vector2(s,r);if(o.normalize(),this.scene.audio.playSound(Qa.Z.SHOOT_BUBBLE),this.bombAttached){if(!this.bomb)return;this.bomb instanceof xd&&this.scene.audio.playSound(Qa.Z.ROCKET_BOOST),this.bomb instanceof Vl&&this.scene.audio.playSound(Qa.Z.BOMB_BOOST),this.bomb.launch(this.constraintAngle(o)),this.bomb=void 0,this.scene.events.emit(cl.SHOOT_BALL,this.currentBullet),this.bombAttached=!1,this.showBullets()}else{if(!this.currentBullet)return;this.currentBullet.launch(this.constraintAngle(o)),this.scene.events.emit(cl.SHOOT_BALL,this.currentBullet),this.currentBullet=void 0,this.attachBullet()}null==(t=this.shotGuide)||t.hide(),this.shooterState=Cd.SHOOTING}},n.setDisabledShooting=function(e){void 0===e&&(e=!0),this.isDisabledShooting=e},n.setDisabledSwitching=function(e){void 0===e&&(e=!0),this.isDisabledSwitching=e},n.setDisabledShotGuide=function(e){void 0===e&&(e=!0),this.isDisabledShotGuide=e},n.destroy=function(){var e;this.scene&&(this.scene.input.off(Dd,this.onPointerDown),this.scene.input.off(Ld,this.onPointerMove),this.scene.input.off(Nd,this.onPointerUp),this.launcher.kill(),null==(e=this.bomb)||e.kill(),this.bombAttached=!1,this.currentBullet&&(this.currentBullet.kill(),this.currentBullet=void 0),this.nextBullet&&(this.nextBullet.kill(),this.nextBullet=void 0),this.shotGuide.destroy(),this.scene.events.off("multiplierChanged"),this.scene.screen.events.off(GameCore.Screens.Events.CLOSE,this.handleCloseScreen),this.stampQueue.forEach((function(e){return e.kill()})),this.kill(),this.scene.children.remove(this),this.switchingArea.destroy(),this.shootingArea.destroy())},n.setCombosText=function(e){this.combosText.setValue(e)},n.constraintAngle=function(e){var t=this.getShootingAngle(),n=e.clone();return n.rotate(-Math.PI/2),n.angle()<Math.PI/2+t&&n.setAngle(Math.PI/2+t),n.angle()>3*Math.PI/2-t&&n.setAngle(3*Math.PI/2-t),n.rotate(Math.PI/2),n},n.getShootingAngle=function(){var e=this.scene.data.get("shootingAngle");return(this.isBombAttached()?e.bomb:e.ball)*Math.PI/180},n.isBombAttached=function(){return this.bombAttached},n.shakeBomb=function(){var e=this;if(this.isBombAttached()&&this.bomb){this.scene.tweens.killTweensOf(this.bomb);var t=this.bomb.x;this.scene.tweens.add({targets:[this.bomb],repeat:3,duration:33,x:t+3,onRepeat:function(n){if(e.bomb){var i=e.bomb.x>=t?-3:3;n.updateTo("x",t+i)}},onComplete:function(){var n;null==(n=e.bomb)||n.setX(t)},onStop:function(){var n;null==(n=e.bomb)||n.setX(t)}})}},n.hide=function(){var e,t;this.setAlpha(0),null==(e=this.currentBullet)||e.image3D.setAlpha(0),null==(t=this.nextBullet)||t.image3D.setAlpha(0)},n.show=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setAlpha(1),e.next=3,this.launcher.showAnimation(1e3);case 3:i=[null==(t=this.currentBullet)?void 0:t.image3D,null==(n=this.nextBullet)?void 0:n.image3D],this.scene.add.tween({targets:i,alpha:{from:0,to:1},duration:800}),this.launcher.playAnimation();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getBombUsed=function(){return this.bombUsed},n.getRocketUsed=function(){return this.rocketUsed},n.hideBullets=function(){var e,t;this.currentBullet&&this.scene.tweens.killTweensOf(this.currentBullet.image3D),this.nextBullet&&this.scene.tweens.killTweensOf(this.nextBullet.image3D),this.scene.tweens.add({targets:[null==(e=this.currentBullet)?void 0:e.image3D,null==(t=this.nextBullet)?void 0:t.image3D],alpha:0,duration:150})},n.showBullets=function(){var e,t,n=this;this.currentBullet&&this.scene.tweens.killTweensOf(this.currentBullet.image3D),this.nextBullet&&this.scene.tweens.killTweensOf(this.nextBullet.image3D),this.scene.tweens.add({targets:[null==(e=this.currentBullet)?void 0:e.image3D,null==(t=this.nextBullet)?void 0:t.image3D],alpha:1,duration:this.timeToReloadBullet+300,onComplete:function(){n.shooterState=Cd.READY}})},t}(kd),Gd=Md;!function(e){e[e.Beginning=0]="Beginning",e[e.Descending=1]="Descending",e[e.Reversing=2]="Reversing",e[e.Holding=3]="Holding"}(Pd||(Pd={}));var Fd=Pd;function Zd(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ud(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ud(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Yd=5e3,zd=.25,Wd=function(){function e(e,t,n){var i=this;void 0===n&&(n=0),this.scene=void 0,this.ballGrid=void 0,this.speed=void 0,this.speedFactor=1,this.speedRate=1,this.speedRateByColorLevel=1,this.speedRateUpCount=0,this.timeStopFactor=1,this.distanceWillBeMove=0,this.moveRatio=.3,this.state=Fd.Holding,this.zone=void 0,this.levelUpSetting=void 0,this.bombForce=void 0,this.dangerTimer=void 0,this.setSpeedTween=void 0,this.toSpeed=0,this.isReversing=void 0,this.reversingTween=void 0,this.playTimeline=void 0,this.initialTween=void 0,this.lastSpeed=void 0,this.endangerTween=void 0,this.revert=function(e,t){if(0!==e){var n=1e3*-e/t,a=i.speed;i.changeState(Fd.Reversing,n),i.isReversing=!0,i.reversingTween=i.scene.tweens.addCounter({from:0,to:e,duration:t,onUpdate:function(e){var t=(e.getValue()||0)-(e.data[0].previous||0);i.moveGrid(-t)},onComplete:function(){i.changeState(Fd.Descending,a)},completeDelay:150})}},this.changeState=function(e,t){switch(void 0===t&&(t=0),i.state){case Fd.Reversing:case Fd.Holding:i.setSpeed(.8*t,!0),i.isReversing=!1}switch(e){case Fd.Beginning:i.setSpeed(t,!0),i.isReversing=!1;break;case Fd.Descending:i.setSpeed(t),i.isReversing=!1;break;case Fd.Reversing:i.setSpeed(t,!0),i.isReversing=!0;break;case Fd.Holding:i.lastSpeed=i.speed,i.setSpeed(0,!0)}i.state=e},this.scene=e,this.ballGrid=t,this.speed=n,this.zone=this.scene.registry.get("zones").zones,this.levelUpSetting=this.scene.registry.get("levelUpSetting"),this.bombForce=this.scene.registry.get("bombForce"),this.dangerTimer=this.scene.registry.get("dangerTimer")}var t=e.prototype;return t.getSpeedRate=function(){return this.speedRate*this.speedRateByColorLevel*this.timeStopFactor},t.handleUseStampUp=function(){var e=this.bombForce,t=e.distance,n=e.duration;this.revert(t,2*n)},t.resetSpeedRate=function(){this.speedRate=1},t.resetHalfSpeedRate=function(){this.speedRate=.5*(this.speedRate-1)+1},t.handleRescue=function(){this.ballGrid.clearHalfGrid(),this.resetHalfSpeedRate(),this.state=Fd.Descending},t.setSpeedScale=function(e){this.speedFactor=e},t.handleTimeStop=function(){var e=this;this.timeStopFactor=zd,this.scene.time.addEvent({delay:Yd,callback:function(){e.timeStopFactor=1}})},t.handleLevelUp=function(){this.speedRateUpCount+=1,this.speedRate+=1*this.levelUpSetting.levelUpSpeedRate/Math.sqrt(this.speedRateUpCount)},t.setSpeedRateByColorLevel=function(e){switch(e){case 1:this.speedRateByColorLevel=1.7;break;case 2:this.speedRateByColorLevel=1.35;break;default:this.speedRateByColorLevel=1}},t.handleBombExplode=function(){var e=this.bombForce,t=e.distance,n=e.duration;this.revert(t,n)},t.initialize=function(){var e=this;this.ballGrid.generatePatterns(3);var t=Math.floor(35+(this.scene.world.getWorldSize().height-667)/200*14);this.ballGrid.generateRows(t),this.initialTween=this.scene.tweens.addCounter({from:0,to:280,ease:Phaser.Math.Easing.Sine.Out,duration:800,onUpdate:function(t){var n=t.data[0].previous||0,i=t.getValue()-n;e.ballGrid.moveBy(i,0)}}),this.setSpeedRateByColorLevel(1)},t.descent=function(){this.changeState(Fd.Descending,this.lastSpeed)},t.play=function(){var e=this;this.initialTween.remove();var t=this.scene.gameSettings.maxGridHeight-310-this.ballGrid.bottomY;this.ballGrid.moveBy(t,0);var n=this.scene.tweens.createTimeline();this.scene.audio.playSound(Qa.Z.ROLLING);for(var i=0;i<this.ballGrid.grid.length;i++){var a=this.ballGrid.grid[i];if(a)for(var s,r=Zd(a);!(s=r()).done;){var o=s.value;o&&n.add({targets:[o],y:{start:o.y-t,from:o.y-t,to:o.y},delay:30*Math.random(),duration:1500-o.y,ease:Phaser.Math.Easing.Sine.In,offset:0})}}n.play(),n.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,(function(){e.scene.showGuide(),e.scene.shooter.resume()})),this.playTimeline=n},t.begin=function(){var e=this,t=GameCore.Configs.Gameplay.Grid.Speed;this.changeState(Fd.Beginning,t.Slow*this.getSpeedRate());var n=this.scene.time.delayedCall(3e3,(function(){e.changeState(Fd.Descending,t.Slow)}));this.scene.events.emit(cl.TIMER_CREATED,n)},t.endanger=function(){var e,t=this;this.state!==Fd.Holding&&(this.lastSpeed=this.speed),this.scene.audio.playSound(Qa.Z.ENDANGER_TIME,{volume:.5}),this.changeState(Fd.Holding);var n=this.dangerTimer;null==(e=this.endangerTween)||e.remove(),this.endangerTween=this.scene.tweens.addCounter({from:1,to:.3,yoyo:!0,duration:100,repeat:Math.floor(n/100/2),onUpdate:function(e){var n=t.ballGrid.getDangerRows;if(n.length<=0){if(e.remove(),t.ballGrid.resetAlphaForAllBalls(),t.state===Fd.Descending)return;t.changeState(Fd.Descending,t.lastSpeed)}else t.state===Fd.Descending&&e.remove(),n.forEach((function(t){t.forEach((function(t){null==t||t.image3D.setAlpha(e.getValue()||0)}))}))},onComplete:this.scene.stateManager.rescue})},t.checkGridToSpawnRow=function(){var e=this.ballGrid.firstRow;e&&e.count<e.size&&this.ballGrid.spawnRow(),this.ballGrid.topY>this.scene.gameSettings.topY-25&&this.ballGrid.spawnRow(),this.ballGrid.totalBalls<=20&&this.ballGrid.spawnRow()},t.moveGrid=function(e,t){void 0===t&&(t=0),this.distanceWillBeMove+=e;var n=this.moveRatio;if(!(Math.abs(this.distanceWillBeMove+t)<n)){var i=Math.round(this.distanceWillBeMove/n)*n;this.ballGrid.moveBy(i,t),this.distanceWillBeMove-=i,this.checkGridToSpawnRow()}},t.getSpeed=function(){return this.speed},t.setSpeed=function(e,t){var n,i,a=this;if(void 0===t&&(t=!1),t)return null==(i=this.setSpeedTween)||i.complete(),this.speed=e,void(this.toSpeed=e);if(e!=this.toSpeed&&(null==(n=this.setSpeedTween)||!n.isPlaying())){var s=e>this.toSpeed?500:0;this.setSpeedTween=this.scene.tweens.addCounter({from:this.toSpeed,to:e,duration:1e3,delay:s,onUpdate:function(e){a.speed=e.getValue()}}),this.toSpeed=e}},t.update=function(e){if(!this.isReversing){var t=this.ballGrid.bottomY,n=GameCore.Configs.Gameplay.Grid.Speed,i=this.getSpeedRate();switch(this.state){case Fd.Beginning:this.moveGrid(Phaser.Math.GetSpeed(this.speed,1)*e*this.speedFactor,0);break;case Fd.Descending:if(t>this.zone.zone5.topY)this.endanger();else if(t>this.zone.zone4.topY)this.setSpeed(n.Slow*i);else if(t>this.zone.zone3.topY)this.setSpeed(n.Medium*i);else if(t>this.zone.zone2.topY)this.setSpeed(n.Fast*i);else{var a=(this.zone.zone2.topY+60-t)/this.zone.zone2.topY+1;this.setSpeed(n.Fast*a*i*.5)}this.moveGrid(Phaser.Math.GetSpeed(this.speed,1)*e*this.speedFactor,0)}}},e}(),Hd=Wd,Kd=99999999,Vd=function(){function e(e){var t=this;this.scene=void 0,this.tweens=[],this.addNewColorTimer=void 0,this.level=void 0,this.counter=void 0,this.handleLevelUp=function(){if(t.level+=1,2==t.level||4==t.level){var e=t.scene.registry.get("log_level"),n=Math.floor(t.level/2+1);t.scene.analytics.event(qt._.COLOR_LEVEL_UP,{color_level:t.level,level:e,level_name:"level_"+e}),t.scene.ballLayoutData.setGridLevel(n),t.scene.scoreCounter.setLevel(n),t.scene.descentController.setSpeedRateByColorLevel(n),t.processLevelUp()}else{t.scene.grid.generatePatterns(1),t.scene.descentController.handleLevelUp();var i=t.scene.registry.get("levelTime");t.startEventAddNewColor(i)}3==t.level&&(t.scene.ballLayoutData.setStampListLength(1),t.scene.grid.addEventToRandomStamp()),5==t.level&&t.scene.ballLayoutData.setStampListLength(2)},this.scene=e,this.level=1}var t=e.prototype;return t.start=function(){var e=this.scene.registry.get("levelTime");this.startEventAddNewColor(e)},t.getLevel=function(){return this.level},t.startEventAddNewColor=function(e){var t=this.scene.time.delayedCall(e,this.handleLevelUp);this.scene.timerEvents.push(t),this.addNewColorTimer=t},t.processLevelUp=function(){var e=this,t=0,n=this.scene.tweens.addCounter({duration:Kd,onUpdate:function(t){0===e.scene.grid.waitingQueue.length&&t.complete()},onComplete:function(n){t+=n.elapsed,e.scene.ballLayoutData.setRandomPatternColor(!1),e.scene.grid.generatePatterns(1),e.scene.ballLayoutData.setRandomPatternColor(!0),e.scene.grid.generatePatterns(1);var i=e.scene.grid.firstRow||[];e.scene.tweens.addCounter({duration:Kd,onUpdate:function(e){i.count<i.size&&e.complete()},onComplete:function(n){t+=n.elapsed;var i=Math.floor(e.level/2+1);e.scene.ballLayoutData.setBulletLevel(i);var a=e.scene.registry.get("log_level");e.scene.analytics.event(qt._.PROCESS_LEVEL_UP,{color_level:i,level:a,level_name:"level_"+a,time:t}),e.handleLevelUp()}})}});this.tweens.push(n)},t.setTimeScale=function(e){this.tweens.forEach((function(t){return t.setTimeScale(e)})),this.addNewColorTimer.timeScale=e},t.destroy=function(){},e}(),jd=Vd,Xd=function(){function e(e){var t=this;this.scene=void 0,this.levelScores=void 0,this.score=void 0,this.scoreByBomb=void 0,this.scoreByRocket=void 0,this.baseScore=void 0,this.multiplier=void 0,this.combos=void 0,this.level=void 0,this.starNoteIndex=void 0,this.totalExplosiveBalls=void 0,this.totalDroppedBals=void 0,this.totalSpecialCombos=void 0,this.circleSoundInHole=0,this.limitSoundTimer=void 0,this.pushScoreAsync=(0,oa.D)((function(e){t.scene.storage.dispatch(Qo(e))}),2e3),this.scene=e,this.score=0,this.scoreByBomb=0,this.scoreByRocket=0,this.baseScore=0,this.multiplier=1,this.combos=0,this.level=1,this.starNoteIndex=1;var n=this.scene.registry.get("gameData");this.levelScores=n.levelScores,this.setLevel(1),this.totalExplosiveBalls=0,this.totalDroppedBals=0,this.totalSpecialCombos=0}var t=e.prototype;return t.setLevel=function(e){this.level=e,this.baseScore=this.levelScores[e-1]},t.calculateScoreByBalls=function(e){return this.baseScore*e*this.multiplier},t.increaseScore=function(e){this.score+=e,this.scene.events.emit(cl.SCORE_CHANGED);var t=this.scene.player.getPlayerData().score,n=void 0===t?0:t;this.score>n&&this.pushScoreAsync(this.score)},t.updateCombosMultiplier=function(){switch(this.combos){case 0:this.multiplier=1;break;case 3:this.multiplier=2;break;case 8:this.multiplier=3;break;case 12:this.multiplier=4;break;case 15:this.multiplier=5}},t.processCombos=function(e){e?(this.combos+=1,this.scene.vibrateController.handleCombosIncreased(this.combos),7===this.combos&&(this.scene.shooter.attachBomb(),this.scene.vibrateController.handleBombCreated()),12===this.combos&&(this.totalSpecialCombos+=1,this.scene.shooter.attachRainbowBall(),this.scene.vibrateController.handleBombCreated()),20===this.combos&&(this.scene.shooter.attachBomb(),this.scene.vibrateController.handleBombCreated()),25===this.combos&&(this.totalSpecialCombos+=1,this.scene.shooter.attachRainbowBall(),this.scene.vibrateController.handleBombCreated())):this.combos=0,this.scene.shooter.setCombosText(this.combos)},t.getStampMultiply=function(e){return 1},t.processBallsDestroyed=function(e){var t=this,n=this.scene.floatingScorePool,i=this.scene.ads.getBannerHeight();e.forEach((function(e){var a=t.getStampMultiply(e.takeStamp()),s=t.calculateScoreByBalls(a);n.spawn(e.image3D.x,e.image3D.y-i,e.getColor(),s).playAnimation(),t.increaseScore(s)})),this.totalExplosiveBalls+=e.length},t.collectDetachedBall=function(e,t){this.circleSoundInHole=(this.circleSoundInHole+1)%4,this.playCollectDetachedBallSound();var n=this.scene.floatingScorePool,i=t*this.getStampMultiply(e.takeStamp())*this.multiplier*this.level,a=e.image3D,s=a.x,r=a.y,o=e.getColor();n.spawn(s,r-40,o,i).playAnimation(),this.increaseScore(i),e.dropType==nd.Rocket&&(this.scoreByRocket+=i),e.dropType==nd.Bomb&&(this.scoreByBomb+=i),this.totalDroppedBals+=1},t.getScore=function(){return this.score},t.getTotalExplosiveBalls=function(){return this.totalExplosiveBalls},t.getTotalDroppedBals=function(){return this.totalDroppedBals},t.getTotalSpecialCombos=function(){return this.totalSpecialCombos},t.playCollectDetachedBallSound=function(){this.limitSoundTimer&&!this.limitSoundTimer.hasDispatched||(this.scene.audio.playSound(Qa.Z.STAR_NOTE+this.starNoteIndex),++this.starNoteIndex>16&&(this.starNoteIndex=1),this.limitSoundTimer=this.scene.time.delayedCall(Phaser.Math.Between(20,40),(function(){})))},e}(),qd=Xd,Qd=function(e){function t(t){var n;return(n=e.call(this,t)||this).startGame=function(){var e=n.scene;e.events.once(cl.SHOOT_BALL,(function(){e.gamePlayTimeManger.start(),e.levelUpController.start(),e.grid.start(),e.descentController.begin(),n.scene.itemManager.start()}))},n.state=Vu.Ready,n.createNewGame(),t.physicsManager.detachVsGridCollider.revive(),n.startGame(),t.ads.preloadRewardedVideoAsync().catch((function(e){})),t.ads.preloadMidRollAdAsync().catch((function(){})),n}(0,c.Z)(t,e);var n=t.prototype;return n.createNewGame=function(){var e=this.scene;e.data.set("Mission",{totalFlyingDinos:0}),e.data.set("life",GameCore.Configs.Gameplay.MaxRescueCount);var t=e.registry.get("zones").zones,n=e.gameZone.width,i=GameCore.Utils.Number.toPerspectivePoint(.5*n,t.zone5.bottomY-95),a=i.x,s=i.y;e.shooter=new Gd(e,a,s);var r=new Td(e);e.ballLayoutData=r,e.grid=new ld(e,e.gridBallPool),e.grid.setLayoutData(r),e.shotGuide.setBallGrid(e.grid),e.shooter.setGuide(e.shotGuide),e.descentController=new Hd(e,e.grid),e.levelUpController=new jd(e),e.scoreCounter=new qd(e),this.scene.events.emit(cl.SCORE_CHANGED),this.listenEvents(),e.layoutManager.alignShooter(),e.hideGamePlayUI(),e.registry.set("log_level",1)},n.listenEvents=function(){var e=this;this.scene.events.off(cl.TIMER_CREATED),this.scene.events.on(cl.TIMER_CREATED,(function(t){e.scene.timerEvents.push(t)}))},n.initGame=function(){},n.ready=function(){},n.play=function(){var e=this.scene;e.startManager(),this.scene.audio.playSound(Qa.Z.START_GAME),this.scene.showGamePlayUI(),e.descentController.play(),this.scene.fpsManager.start();var t=new mp(this.scene);e.stateManager.transitionTo(t)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new ep(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(Xu),Jd=Qd,$d=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=Vu.Quit,t.screen.close(qa.o4.PAUSE_SCREEN),t.destroyGamePlay(),t.hideGamePlayUI(),t.handleCloseBannerAds(),t.stampUtilManager.totalStampUsed=0,n.scene.fpsManager.stop(),n.scene.gamePlayTimeManger.stop(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initGame=function(){},n.ready=function(){var e=new Jd(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){},n.update=function(e){},t}(Xu),ep=$d,tp=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=Vu.Paused,t.pauseGame(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initGame=function(){},n.ready=function(){this.scene.resumeGame();var e=new Jd(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){this.scene.resumeGame();var e=new mp(this.scene);this.scene.stateManager.transitionTo(e)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){this.scene.resumeGame();var e=new ep(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(Xu),np=tp,ip=n(96),ap=n.n(ip),sp=(0,Y.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.tasks}],(function(e){return e})),rp=(0,Y.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.process}],(function(e){return e})),op=(0,Y.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isRequesting}],(function(e){return e})),cp=((0,Y.P1)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isNotice}],(function(e){return e})),function(){var e=(0,o.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(Q())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),lp=cp,hp=GameCore.Configs.Tournament.RequestTournamentBeforeInterstitialAd,up=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleShowInterstitialAd=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.handleShowAd();case 2:n.handleFinishGame();case 3:case"end":return e.stop()}}),e)}))),n.handleFinishGame=function(){var e=n.scene;e.stateManager.quit(),e.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,c,l,u,d,p,f,g,m,v,y,S,E,b,A,w,T,P,C,I,x,B,k,R,O,_,D,L,N,M,G,F,Z,U,Y,z,W,H,K,V;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,s=i.analytics,r=i.facebook,i.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,loading:!0}),c=n(),l=ks(c),u=Pr(c),d=u.score,p=void 0===d?0:d,f=u.level,g=void 0===f?0:f,m=u.rocketUsed,v=void 0===m?0:m,y=u.bombUsed,S=void 0===y?0:y,E=u.shotBallsCount,b=void 0===E?0:E,A=u.matchedBallsCount,w=void 0===A?0:A,T=u.scoreByBomb,P=void 0===T?0:T,C=u.scoreByRocket,I=void 0===C?0:C,x=u.totalStampUsed,B=void 0===x?0:x,k=u.gameLevel,R=void 0===k?0:k,O=u.gamePlayedTime,_=void 0===O?0:O,!1===GameCore.Configs.Tournament.RequestTournamentBeforeInterstitialAd&&t(qs(p)),t(Qo(p)),e.next=11,t($o(l,{score:p}));case 11:if(c=n(),D=Rs(c),L=Os(c),N=Math.floor((L-D)/1e3),s.event(qt._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(l),level:g,level_name:"level_"+g,game_level:R,time_played:N,game_played_time:_/1e3,bomb_used:S,rocket_used:v,shot_balls:b,matched_balls:w,score:p,score_by_bomb:P,score_by_rocket:I,total_stamp_used:B}),M=r.getContextID(),l===Ea&&M&&t(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,s,r,o,c,l,u,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.game.analytics,e.prev=1,s=FBInstant.context.getID(),zr({contextId:s}),r=n(),o=Ar(r),c=o.playerId,l=o.score,u=Pr(r),d=u.score,!c||c===va.playerId){e.next=25;break}if(!(d>l)){e.next=18;break}return e.next=13,Zr(r);case 13:return p=e.sent,e.next=16,eo(p,r);case 16:e.next=23;break;case 18:return e.next=20,_r(r);case 20:return p=e.sent,e.next=23,to(p,r);case 23:e.next=30;break;case 25:return e.next=27,_r(r);case 27:return p=e.sent,e.next=30,to(p,r);case 30:Hr({imageShare:p}),i.event(qt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),i.event(qt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,a.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!M||l!==Sa){e.next=27;break}if(G=yr(c),(F=G.playerId)&&F!==va.playerId){e.next=22;break}return e.abrupt("return");case 22:Z=Tr(c),U=Z[F]||{},Y=U.score,z=void 0===Y?0:Y,W=gr(c),H=W._id,K=W.whitePlayerFinish,V=W.blackPlayerFinish,t(K&&V?p>z?Jr(F,{matchId:H,contextId:M}):Qr(F,{matchId:H,contextId:M}):$r(F,{matchId:H,contextId:M,score:p}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),(0,a.tO)(e.t0);case 32:return e.prev=32,Yo(300),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}()),e.input.enabled=!0,n.updateDailyMission()},n.state=Vu.GameOver,n.handleGameOver(),n}(0,c.Z)(t,e);var n=t.prototype;return n.handleGameOver=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.scene).physicsManager.detachVsGridCollider.kill(),n.input.enabled=!1,null==(t=n.grid)||t.dropAllBalls(),n.shooter.hideShotGuide(),n.background.clearTint(),this.scene.tweens.add({targets:n.layoutManager.objects.ropeLine,alpha:0,duration:200}),i=n.registry.get("log_level"),a=this.scene.scoreCounter.getScore(),n.analytics.levelFail(i,a,"level_"+i),n.events.emit(cl.GAME_OVER),n.audio.playSound(Qa.Z.GAMEOVER),e.next=14,lp(n,5e3);case 14:if(!0!==hp){e.next=17;break}return e.next=17,n.storage.dispatch(qs(a));case 17:this.handleShowInterstitialAd(),this.scene.analytics.event(qt._.FPS_MATCH,{fps:Math.round(this.scene.fpsManager.getFps()),avg_fps:Math.round(this.scene.fpsManager.avgFps.average),avg_fps_last:Math.round(this.scene.fpsManager.avgFpsInTime.min),avg_fps_min:Math.round(this.scene.fpsManager.avgFpsInTime.min),avg_fps_max:Math.round(this.scene.fpsManager.avgFpsInTime.max)});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateDailyMission=function(){this.emitTaskCompleteGame(),this.emitTaskCollectExplosiveBubbles(),this.emitTaskCollectDroppedBubbles(),this.emitTaskGetSpecialCombos(),this.emitTaskUseRescue(),this.emitTaskReachTargetPoints()},n.emitTaskCompleteGame=function(){Br.emit(lr.COMPLETE_GAMES.EVENT,{type:"amount",value:1})},n.emitTaskCollectExplosiveBubbles=function(){var e=this.scene.scoreCounter.getTotalExplosiveBalls();e>0&&Br.emit(lr.COLLECT_BUBBLES.EVENT,{type:"amount",value:e})},n.emitTaskCollectDroppedBubbles=function(){var e=this.scene.scoreCounter.getTotalDroppedBals();e>0&&Br.emit(lr.DROP_BUBBLES.EVENT,{type:"amount",value:e})},n.emitTaskGetSpecialCombos=function(){var e=this.scene.scoreCounter.getTotalSpecialCombos();e>0&&Br.emit(lr.GET_RAINBOW_BUBBLE.EVENT,{type:"amount",value:e})},n.emitTaskUseRescue=function(){var e=this.scene.rescueScreen.getTotalUseRescue();e>0&&Br.emit(lr.USE_RESCUE.EVENT,{type:"amount",value:e})},n.emitTaskReachTargetPoints=function(){var e=this.scene.game.storage.getState(),t=sp(e);if(t&&!((null==t?void 0:t.length)<1)){var n=Qu()(t).call(t,(function(e){return e.id===lr.REACH_TARGET_POINTS.ID}));if(n){var i=n.require,a=X()(n.require);if(-1!==ge()(a).call(a,"amount")){var s=i.amount,r=this.scene.scoreCounter.getScore();!s||s>=r||Br.emit(lr.REACH_TARGET_POINTS.EVENT,{type:"amount",value:s})}}}},n.initGame=function(){},n.ready=function(){var e=new Jd(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){var e=new ep(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(Xu),dp=up,pp=function(e){function t(t){var n;(n=e.call(this,t)||this).state=Vu.Rescuing,t.pauseGame();var i=t.storage.getState(),a=ks(i),s=t.scoreCounter.getScore(),r=t.registry.get("log_level"),o=t.shooter.getBombUsed(),c=t.shooter.getRocketUsed(),l=t.grid,h=l.shotBallsCount,u=l.matchedBallsCount,d=n.scene.stampUtilManager.totalStampUsed,p=n.scene.scoreCounter,f=p.scoreByBomb,g=p.scoreByRocket,m=n.scene.gamePlayTimeManger.getGamePlayedTime(),v=n.scene.levelUpController.getLevel();return t.analytics.event(qt._.MATCH_FAIL,{game_mode:GameCore.Utils.String.toUpperCamelCase(a),score:s}),t.storage.dispatch(Fo({score:s,level:r,bombUsed:o,rocketUsed:c,shotBallsCount:h,matchedBallsCount:u,scoreByBomb:f,scoreByRocket:g,totalStampUsed:d,gameLevel:v,gamePlayedTime:m})),ap()(t.data).life<1?(t.time.delayedCall(0,t.stateManager.gameOver),(0,za.Z)(n)):(ap()(t.data).life-=1,t.screen.open(qa.o4.RESCUE_SCREEN),t.analytics.levelRescue(r,s,"level_"+r),n)}(0,c.Z)(t,e);var n=t.prototype;return n.initGame=function(){},n.ready=function(){},n.play=function(){var e=this.scene;e.resumeGame(),e.descentController.handleRescue(),e.grid.resetAlphaForAllBalls();var t=new mp(this.scene);this.scene.stateManager.transitionTo(t)},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){this.scene.resumeGame();var e=new dp(this.scene);this.scene.stateManager.transitionTo(e)},n.quit=function(){var e=new ep(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){},t}(Xu),fp=pp,gp=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=Vu.Playing,n}(0,c.Z)(t,e);var n=t.prototype;return n.initGame=function(){},n.ready=function(){},n.play=function(){},n.pause=function(){this.scene.pauseGame();var e=new np(this.scene);this.scene.stateManager.transitionTo(e)},n.rescue=function(){var e=new fp(this.scene);this.scene.stateManager.transitionTo(e)},n.gameOver=function(){},n.quit=function(){var e=new ep(this.scene);this.scene.stateManager.transitionTo(e)},n.update=function(e){this.scene.shooter.update(e),this.scene.descentController.update(e)},t}(Xu),mp=gp,vp=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=Vu.Initial,n}(0,c.Z)(t,e);var n=t.prototype;return n.initGame=function(){},n.ready=function(){var e=new Jd(this.scene);this.scene.stateManager.transitionTo(e)},n.play=function(){},n.pause=function(){},n.rescue=function(){},n.gameOver=function(){},n.quit=function(){},n.update=function(e){},t}(Xu),yp=vp,Sp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameState=void 0,n.initGame=function(){n.gameState.initGame()},n.ready=function(){n.gameState.ready()},n.play=function(){n.gameState.play()},n.pause=function(){n.gameState.pause()},n.rescue=function(){n.gameState.rescue()},n.gameOver=function(){n.gameState.gameOver()},n.quit=function(){n.gameState.quit()},n.update=function(e){n.gameState.update(e)},n.isPlaying=function(){return n.gameState instanceof mp},n.isPaused=function(){return n.gameState instanceof np},n.isReady=function(){return n.gameState instanceof Jd},n.isRescuing=function(){return n.gameState instanceof fp},n.isGameOver=function(){return n.gameState instanceof dp},n.scene=t,n}(0,c.Z)(t,e);var n=t.prototype;return n.transitionTo=function(e){this.gameState=e},n.init=function(){if(!this.gameState){var e=new yp(this.scene);this.transitionTo(e)}},n.getState=function(){var e;return null==(e=this.gameState)?void 0:e.getState()},n.isState=function(e){return this.gameState.getState()===e},t}(rl),Ep=Sp,bp=rc.Z.GAMEPLAY.TEXTURES_32BIT,Ap=bp.KEY,wp=bp.FRAME,Tp=function(e){function t(t){var n;return(n=e.call(this,t,Ap)||this).setDepth(ja.Z.GRID_LAYER-1),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createTailEmitter=function(){var e=1/this.scene.world.getPixelRatio(),t={x:200,y:200,frame:[wp.PARTICLE_STAR,wp.PARTICLE_CIRCLE_1,wp.PARTICLE_CIRCLE_2],angle:{min:45,max:135},scale:{start:e,end:0},alpha:{start:.7,end:0},speed:{min:50,max:100},frequency:20,quantity:5,tint:16777215,lifespan:{min:500,max:1e3},on:!1};return this.createEmitter(t)},n.createFireEmitter=function(){var e=1/this.scene.world.getPixelRatio(),t=new Phaser.Geom.Circle(1,0,3),n={x:200,y:200,frame:[wp.PARTICLE_LIGHT],scale:{start:.7*e,end:.1*e,ease:Phaser.Math.Easing.Expo.In},alpha:{start:1,end:.6},frequency:20,quantity:2,lifespan:{min:350,max:400},emitZone:{type:"random",source:t},blendMode:"ADD",on:!1};return this.createEmitter(n)},n.createTailEmitterSmoke=function(){var e=1/this.scene.world.getPixelRatio(),t={x:200,y:200,frame:[wp.PARTICLE_DUST_01,wp.PARTICLE_DUST_02],angle:{min:45,max:135},scale:{start:.4*e,end:0},alpha:{start:1,end:0},speed:{min:20,max:60},frequency:10,quantity:[1,2,3,4,5],tint:16777215,lifespan:{min:500,max:1500},on:!1};return this.createEmitter(t)},n.createTailEmitterSpark=function(){var e=1/this.scene.world.getPixelRatio(),t={x:200,y:200,frame:[wp.PARTICLE_STAR],angle:{min:45,max:135},scale:{start:1.5*e,end:0},alpha:{start:1,end:0},speed:{min:50,max:100},frequency:15,quantity:[3,4,5],tint:[15366656,16711168,15772167],lifespan:{min:500,max:1500},on:!1};return this.createEmitter(t)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Pp=Tp,Cp=rc.Z.GAMEPLAY.TEXTURES_32BIT,Ip=Cp.KEY,xp=Cp.FRAME,Bp=function(e){function t(t,n,i,a,s){var r;return(r=e.call(this,t,n,i,a,s)||this).scene=void 0,r.canCollideWithGrid=void 0,r.collidedWithGrid=void 0,r.canPlaySoundWithShooter=void 0,r.detachEvent1=void 0,r.detachEvent2=void 0,r.shadow=void 0,r.tween=void 0,r.flying=void 0,r.dropType=void 0,r.handleDetachedBallFallInHole=function(){var e=r.scene;if(e.stateManager.isPlaying()){var t=e.scoreArea.getHoleByX(r.image3D.x);r.kill(),t&&(e.scoreCounter.collectDetachedBall((0,za.Z)(r),t.getScore()),t.playLightAnimation())}else r.kill()},r.scene=t,r.canCollideWithGrid=!0,r.canPlaySoundWithShooter=!0,r.setName("detach-ball"),r.shadow=t.make.image({x:n,y:i,key:Ip,frame:xp.SHADOW,add:!1}),r.shadow.setTintFill(592137),r.image3D.setName("DetachedBall"),r.flying=!1,r.assignLayer(r.scene.gridBallLayer),r}(0,c.Z)(t,e);var n=t.prototype;return n.detach=function(e,t){var n=this;this.setVelocity(e,t),this.applyFall(),this.collidedWithGrid=!1,this.detachEvent1=this.scene.time.addEvent({delay:750,repeat:-1,callback:function(){n.collidedWithGrid&&(n.collidedWithGrid=!1,n.detachEvent2=n.scene.time.addEvent({delay:500,callback:function(){n.collidedWithGrid&&(n.applyFlyTexture(Phaser.Math.Between(18,24)),n.setVelocity(Phaser.Math.Between(-60,60),Phaser.Math.Between(-30,30)),n.detachEvent1.remove())}}),n.scene.timerEvents.push(n.detachEvent2))}}),this.scene.timerEvents.push(this.detachEvent1)},n.explosiveDetach=function(e,t){this.setVelocity(e,t),this.applyFlyTexture(Phaser.Math.Between(24,30))},n.applyFlyTexture=function(e){var t=this;this.applyFly();var n=2*e/40*1e3;if(void 0==this.tween){var i=this.scene.tweens.add({targets:this,z:{start:0,from:0,to:e},duration:n/2,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,onComplete:function(){t.applyFall(),t.scene.audio.playSound(Qa.Z.ROLLING)}});this.tween=i}else this.tween.duration=n/2,this.tween.calcDuration(),this.tween.updateTo("z",e,!1),this.tween.restart()},n.applyFly=function(){this.flying=!0,this.setGravityY(300),this.setFlyColor(this.color),this.shadow.revive(),this.canCollideWithGrid=!1,this.assignLayer(this.scene.flyingBallLayer),this.scene.flyingBallShadowLayer.add(this.shadow,!0)},n.applyFall=function(){this.flying=!1,this.setGravityY(600),this.setColor(this.color),this.shadow.kill(),this.scene.flyingBallShadowLayer.remove(this.shadow,!0)},n.setFlyColor=function(e){switch(this.setTexture(Ip),e){case zc.Red:this.setFrame(xp.BALL_RED_MIN),this.shadow.setFrame("bubbles/red-shadow");break;case zc.Green:this.setFrame(xp.BALL_GREEN_MIN),this.shadow.setFrame("bubbles/green-shadow");break;case zc.Blue:this.setFrame(xp.BALL_BLUE_MIN),this.shadow.setFrame("bubbles/blue-shadow");break;case zc.Yellow:this.setFrame(xp.BALL_YELLOW_MIN),this.shadow.setFrame("bubbles/yellow-shadow");break;case zc.Violet:this.setFrame(xp.BALL_VIOLET_MIN),this.shadow.setFrame("bubbles/violet-shadow")}this.color=e,this.image3D.setTexture(this.texture.key,this.frame.name)},n.initDefault=function(){return e.prototype.initDefault.call(this),this.shadow.revive(),this.shadow.setVisible(!1),this.assignLayer(this.scene.gridBallLayer),this.canPlaySoundWithShooter=!0,this.canCollideWithGrid=!0,this},n.updatePhysicsRadius=function(e){void 0===e&&(e=33);var t=.5*this.width-e,n=.5*this.height-e;this.setCircle(e,t,n)},n.postUpdate=function(){if(e.prototype.postUpdate.call(this),this.y>this.scene.gameSettings.ropeY&&this.setGravityY(1600),this.y>this.scene.gameZone.height-10&&this.handleDetachedBallFallInHole(),this.shadow.visible){var t,n=GameCore.Utils.Number.toPerspectivePoint(this.x,this.y+13+this.z),i=n.y,a=n.scale;this.shadow.setPosition(this.image3D.x,i),this.image3D.setScale(this.image3D.scaleX*(1+this.z/100),this.image3D.scaleY*(1+this.z/100)),this.shadow.setScale(this.scaleX*a*(1+this.z/150),this.scaleY*a*(1+this.z/150)),null==(t=this.stamp)||t.followBall(this)}this.setVelocity(this.body.velocity.x,.99*this.body.velocity.y)},n.preKill=function(){var e,t;this.body.world.disableBody(this.body),this.scene.tweens.add({targets:this,duration:150,alpha:.3,scale:1.2*this.scale,onComplete:this.kill,onCompleteScope:this}),null==(e=this.detachEvent1)||e.remove(),null==(t=this.detachEvent2)||t.remove(),this.canCollideWithGrid=!0},n.kill=function(){var t,n,i;null==(t=this.takeStamp())||t.kill(),this.shadow.kill(),this.body.world.disableBody(this.body),e.prototype.kill.call(this),null==(n=this.detachEvent1)||n.remove(),null==(i=this.detachEvent2)||i.remove(),this.canCollideWithGrid=!0},t}(vl),kp=Bp,Rp=function(){function e(e,t){this.scene=void 0,this.active=void 0,this.physicsManager=void 0,this.scene=e,this.physicsManager=t,this.active=!0}var t=e.prototype;return t.update=function(){},t.kill=function(){this.active=!1},t.revive=function(){this.active=!0},e}(),Op=Rp,_p=function(e){function t(t,n){return e.call(this,t,n)||this}return(0,c.Z)(t,e),t.prototype.update=function(){var e=this,t=this.scene.grid.bottomY+14;this.scene.detachedBallPool.getChildren().forEach((function(n){var i=n.y<t,a=n.canCollideWithGrid&&n instanceof Phaser.Physics.Arcade.Image&&n.body.enable;i&&a&&e.scene.grid.getBallsAt(n.body.center.x,n.body.center.y).forEach((function(t){var i=n.body,a=t.body;e.scene.physics.world.circleBodyIntersects(i,a)&&e.scene.physics.world.separate(i,a,(function(e,t){if(e instanceof kp){e.collidedWithGrid=!0;var n=e.body,i=t.body;n.y>i.y&&(n.y+=1.5)}}))}))}))},t}(Op),Dp=_p,Lp=function(e){function t(t,n){return e.call(this,t,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.getClosestPointOnMovingVectorBullet=function(e,t,n){var i=new Phaser.Geom.Point(n.x,n.y),a=t.y-e.y,s=e.x-t.x,r=a*e.x+s*e.y,o=-s*i.x+a*i.y,c=a*a- -s*s,l=0,h=0;return 0!=c?(l=(a*r-s*o)/c,h=(a*o- -s*r)/c):(l=i.x,h=i.y),new Phaser.Geom.Point(l,h)},n.getMovingPointsOfBullet=function(e){for(var t=[],n=new Phaser.Geom.Point(e.body.center.x,e.body.center.y),i=new Phaser.Geom.Point(n.x-e.body.deltaX(),n.y-e.body.deltaY()),a=2;a>=0;a--){var s=(1-a/3)*n.x+a/3*i.x,r=(1-a/3)*n.y+a/3*i.y,o=new Phaser.Geom.Point(s,r);t.push(o)}return t},n.checkDynamicStaticCollision=function(e,t,n){if(!t.body.enable||!n.body.enable)return!1;var i=new Phaser.Geom.Point(t.body.center.x-t.body.deltaX(),t.body.center.y-t.body.deltaY()),a=this.getClosestPointOnMovingVectorBullet(e,i,n),s=Phaser.Math.Distance.Between(a.x,a.y,n.x,n.y),r=this.physicsManager.DPR,o=Math.floor((t.body.radius+n.body.radius)/r);if(s<=o&&!(t instanceof xd)){var c=this.getTrueCollidePosition(a,t,n);t.setPosition(c.x,c.y)}return s<=o},n.sortBallsByHeight=function(e,t){bi()(t).call(t,(function(t,n){var i=Math.floor(t.y),a=Math.floor(n.y);return i===a?e.body.velocity.x>0?t.x-n.x:n.x-t.x:a-i}))},n.getTrueCollidePosition=function(e,t,n){var i=t.body.halfWidth+n.body.halfWidth,a=Phaser.Math.Distance.Between(e.x,e.y,n.x,n.y),s=Math.sqrt(Math.pow(i,2)-Math.pow(a,2)),r=e.x-s*(t.body.velocity.x/t.body.velocity.length()),o=e.y-s*(t.body.velocity.y/t.body.velocity.length());return new Phaser.Geom.Point(r,o)},n.update=function(){var e=this,t=this.scene.grid;this.scene.bulletGroup.getChildren().forEach((function(n){if(n instanceof Phaser.Physics.Arcade.Image&&n.body.enable){var i=e.getMovingPointsOfBullet(n),a=1;n instanceof xd&&(a=2),i.some((function(i){var s=t.getRowColByXY(i.x,i.y),r=s.row,o=s.col;t.getAroundByLevel(a,r,o).forEach((function(t){e.sortBallsByHeight(n,t),e.scene.physics.world.enable(t),t.some((function(t){if(e.checkDynamicStaticCollision(i,n,t)&&e.physicsManager.handleBulletHitGrid(n,t))return}))}))}))}}))},t}(Op),Np=Lp,Mp=function(){function e(e,t,n,i,a,s){this.scene=void 0,this.startX=void 0,this.endX=void 0,this.startY=void 0,this.endY=void 0,this.grid=void 0,this.objects=void 0,this.scene=e,this.grid=t,this.startX=n,this.endX=i,this.startY=a,this.endY=s,this.objects=[]}var t=e.prototype;return t.isInCell=function(e,t){return e>=this.startX&&e<=this.endX&&t>=this.startY&&t<=this.endY},t.update=function(){var e=this;if(!(this.objects.length<=1))for(var t=0;t<this.objects.length;t++)for(var n=t+1;n<this.objects.length;n++){var i=this.objects[t].body,a=this.objects[n].body;t!=n&&this.scene.physics.world.circleBodyIntersects(i,a)&&this.scene.physics.world.separate(i,a,(function(t,n){var i=t,a=n;e.grid.collider.handleCollide(i,a)}))}},t.reset=function(){this.objects=[]},t.add=function(e){this.objects.push(e)},e}(),Gp=Mp,Fp=function(){function e(e,t){this.scene=void 0,this.collider=void 0,this.startX=void 0,this.endX=void 0,this.startY=void 0,this.endY=void 0,this.offX=void 0,this.offY=void 0,this.rowSize=void 0,this.columnSize=void 0,this.cells=void 0,this.staticObjects=void 0,this.scene=e,this.collider=t,this.init()}var t=e.prototype;return t.init=function(){this.cells=[],this.staticObjects=[];var e=this.scene.world.getWorldSize(),t=this.scene.gameSettings;this.startX=0,this.endX=e.width,this.startY=t.topY,this.endY=e.height,this.offX=75,this.offY=50,this.rowSize=Math.ceil((this.endY-this.startY)/this.offY),this.columnSize=Math.ceil((this.endX-this.startX)/this.offX);for(var n=0;n<this.rowSize;n++){this.cells[n]=[];for(var i=0;i<this.columnSize;i++){var a=this.startX+i*this.offX,s=a+this.offX,r=this.startY+n*this.offY,o=r+this.offY,c=new Gp(this.scene,this,a,s,r,o);this.cells[n][i]=c}}},t.addToGrid=function(e){for(var t=this.getAroundPoints(e),n=[],i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y,o=this.getRowColumnByXY(s,r),c=o.row,l=o.column;if(this.cells[c]){var h=this.cells[c][l];h&&(ne()(n).call(n,h)||(n.push(h),h.add(e)))}}},t.addToStaticObjects=function(e){var t;ne()(t=this.staticObjects).call(t,e)||this.staticObjects.push(e)},t.resetCells=function(){for(var e=this,t=0;t<this.rowSize;t++)for(var n=0;n<this.columnSize;n++){this.cells[t][n].reset()}this.staticObjects.forEach((function(t){e.addToGrid(t)}))},t.getAroundPoints=function(e){var t=e.body.center,n=t.x,i=t.y,a=e.body,s=a.left,r=a.right,o=a.top,c=a.bottom;return[new Phaser.Geom.Point(s,i),new Phaser.Geom.Point(r,i),new Phaser.Geom.Point(n,o),new Phaser.Geom.Point(n,c)]},t.getRowColumnByXY=function(e,t){var n=Math.floor((e-this.startX)/this.offX);return{row:Math.floor((t-this.startY)/this.offY),column:n}},t.update=function(){for(var e=0;e<this.rowSize;e++)for(var t=0;t<this.columnSize;t++){this.cells[e][t].update()}},e}(),Zp=Fp,Up=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).uniformGrid=void 0,i.uniformGrid=new Zp(t,(0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.playSoundWithShooter=function(e){var t=e;t.canPlaySoundWithShooter&&(t.canPlaySoundWithShooter=!1,this.scene.audio.playSound(Qa.Z.BUBBLE_HIT))},n.handleCollide=function(e,t){e===this.physicsManager.shooter?this.playSoundWithShooter(t):t===this.physicsManager.shooter&&this.playSoundWithShooter(e)},n.update=function(){var e=this,t=this.scene.detachedBallPool;t.getTotalUsed()>0&&(this.uniformGrid.resetCells(),t.getChildren().forEach((function(t){t.active&&e.uniformGrid.addToGrid(t)})),this.uniformGrid.update())},t}(Op),Yp=Up,zp=rc.Z.GAMEPLAY.TEXTURES_32BIT,Wp=zp.KEY,Hp=zp.FRAME,Kp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.detachVsGridCollider=void 0,n.detachedCollider=void 0,n.shooter=void 0,n.DPR=void 0,n.colliders=void 0,n.handleBulletHitGrid=function(e,t){return e instanceof Cl?(n.handleBallHitGrid(e,t),!0):e instanceof xd?(n.handleRainbowBallHitGridBall(e,t),!1):e instanceof Vl&&(n.handleBombHitGrid(e,t),!0)},n.handleBallHitGrid=function(e,t){return e instanceof Cl&&(t instanceof kl&&(e.body.enable&&t.body.enable?(e.body.enable=!1,n.scene.audio.playSound(Qa.Z.BUBBLE_HIT),n.scene.grid.attachBall(e,t),e.preKill(),n.scene.grid.updateNewHighestFullRow(),!0):void 0))},n.handleBombHitGrid=function(e,t){if(!(e instanceof Vl))return!1;if(!(t instanceof kl))return!1;var i=n.scene;return e.body.enable&&(i.animationsManager.handleBombWillBeDestroyed(e),n.scene.shake(450,.0024),n.scene.vibrateController.handleBombExploding(),e.makeExplosion(),i.audio.playSound(Qa.Z.BOMB_EXPLODE)),e.body.enable=!1,i.grid.destroyNeighBors(e.x,e.y,t),n.scene.grid.updateNewHighestFullRow(),!0},n.handleRainbowBallHitGridBall=function(e,t){return e instanceof xd&&(t instanceof kl&&(n.scene.grid.makeBallExplode(t),n.scene.grid.updateNewHighestFullRow(),!0))},n.scene=t,n.colliders=[],n.DPR=n.scene.world.getPixelRatio(),t.physics.world.useTree=!1,n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){this.addCollision()},n.addCollision=function(){var e=this.scene;this.detachVsGridCollider=new Dp(e,this),this.colliders.push(this.detachVsGridCollider);var t=new Np(e,this);this.colliders.push(t),this.detachedCollider=new Yp(e,this),this.colliders.push(this.detachedCollider),this.addShooterCollision()},n.addShooterCollision=function(){var e=this,t=this.scene.physics.add.image(185.5,450,Wp,Hp.CIRCLE);t.setImmovable(!0);var n=.5*t.width-40,i=.5*t.height-40;t.setCircle(40,n,i),t.setVisible(!1),t.setMass(2),this.scene.time.delayedCall(0,(function(){return t.setPosition(e.scene.shooter.x,e.scene.shooter.y)})),this.detachedCollider.uniformGrid.addToStaticObjects(t),this.shooter=t},n.update=function(){if(!this.scene.stateManager.isPaused())for(var e=this.colliders,t=0;t<e.length;t++){var n=e[t];n.active&&n.update()}},t}(rl),Vp=Kp,jp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e,t,n=this,i=de()(e=Ds()(t=Array(50)).call(t,null)).call(e,(function(){return n.scene.make.sprite({key:rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,add:!1})}));i.forEach((function(e){n.add(e),e.kill()})),this.scene.animsLayer.add(i,!0)},n.spawn=function(e,t){var n=this.getFirstDead();n||(n=this.scene.make.sprite({key:rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,add:!1}),this.add(n),this.scene.animsLayer.add(n,!0));var i=1/this.scene.world.getPixelRatio();return n.setScale(i),n.revive(),n.setDepth(ja.Z.EFFECT),n.clearTint(),n.setAlpha(1),n.setPosition(e,t),n},n.explode=function(e,t,n){var i=this,a=this.spawn(e,t);a.setTint(n),a.setAlpha(.8),a.play("egg-explosive"),a.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.despawn(a)}))},n.bombExplode=function(e,t,n){var i=this,a=this.spawn(e,t);a.play("bomb-explosive"),a.setScale(3*n,2.7*n),a.clearTint(),a.setDepth(3),a.setAlpha(1),a.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){i.despawn(a)}))},n.despawn=function(e){this.killAndHide(e)},n.reset=function(){var e=this;this.getChildren().forEach((function(t){t instanceof Phaser.GameObjects.Sprite&&t.active&&(t.stop(),e.despawn(t))}))},t}(Phaser.GameObjects.Group),Xp=jp,qp=n(558),Qp=il.STATUS,Jp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.explosivePool=void 0,n.paperFireworksCelebration=void 0,n.starExplosive=void 0,n.handleBallsWillBeDestroyed=function(e){e.forEach((function(e){n.handleBallWillBeDestroyed(e)}))},n.handleBallWillBeDestroyed=function(e){n.explosivePool.explode(e.x,e.y,e.getColor())},n.handleBombWillBeDestroyed=function(e){n.explosivePool.bombExplode(e.image3D.x,e.image3D.y,e.image3D.scale)},n.handleDestroyedLotsEgg=function(){var e=n.scene.gameZone,t=e.width,i=e.height;n.paperFireworksCelebration.run(-5,i+20,t+20,.8*i)},n.animationAttachBomb=function(){var e=n.scene.world.getWorldSize(),t=e.width/2,i=e.height/2+50,a=1/n.scene.world.getPixelRatio(),s=rc.Z.GAMEPLAY.TEXTURES_32BIT,r=s.KEY,o=s.FRAME,c=n.explosivePool.spawn(t,i);c.setTexture(r,o.BOMB),c.setScale(0);var l=n.scene.tweens.createTimeline();l.add({targets:[c],duration:300,y:"-=10",scale:1.3*a,ease:Phaser.Math.Easing.Sine.In}),l.add({offset:600,targets:[c],duration:400,ease:Phaser.Math.Easing.Sine.In,scale:.5*a});var h=n.scene.shooter.shootingPosition,u=h.x,d=h.y;return l.add({targets:[c],x:{from:t,to:u},y:d,duration:400,offset:600,ease:Phaser.Math.Easing.Sine.In}),n.starExplosive.explode(40,t,i),l.play(),l.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,(function(){c.kill()})),l},n.animationAttachRainbowBall=function(){var e=n.scene.world.getWorldSize(),t=e.width/2,i=e.height/2+50,a=1/n.scene.world.getPixelRatio(),s=rc.Z.GAMEPLAY.TEXTURES_32BIT,r=s.KEY,o=s.FRAME,c=n.explosivePool.spawn(t,i);c.setTexture(r,o.ROCKET),c.setScale(0),c.setAlpha(1),c.clearTint();var l=n.scene.tweens.createTimeline();l.add({targets:[c],duration:300,y:"-=10",scale:1.3*a,ease:Phaser.Math.Easing.Sine.In}),l.add({targets:[c],duration:400,offset:600,ease:Phaser.Math.Easing.Sine.In,scale:.5*a});var h=n.scene.shooter.shootingPosition,u=h.x,d=h.y;return l.add({targets:[c],x:{from:t,to:u},y:d,duration:500,offset:600,ease:Phaser.Math.Easing.Sine.In}),n.starExplosive.explode(40,t,i),l.play(),l.on(Phaser.Tweens.Events.TIMELINE_COMPLETE,(function(){c.kill()})),l},n.scene=t,n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this.scene;this.explosivePool=new Xp(e),this.paperFireworksCelebration=new $a.Z(e),this.paperFireworksCelebration.setDepth(ja.Z.ON_TOP),this.starExplosive=new qp.Z(e),this.starExplosive.setDepth(ja.Z.EFFECT),this.setState(Qp.READY)},n.start=function(){this.isRunning()||(this.paperFireworksCelebration.revive(),this.setState(Qp.RUNNING))},n.stop=function(){this.isRunning()&&(this.paperFireworksCelebration.stop(),this.explosivePool.reset(),this.setState(Qp.STOPPED))},t}(rl),$p=Jp,ef={GIFT:{ID:"ItemGift"}},tf=n(537),nf=n(553),af=n(551),sf=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,rf=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t)||this).scene=void 0,s.isActive=!0,s.item=void 0,s.shakeAnimation=void 0,s.scene=t,s.createItem(n,i,a),s.createAnimations(),s.setDepth(ja.Z.ITEM),s.scene.add.existing((0,za.Z)(s)),s}(0,c.Z)(t,e);var n=t.prototype;return n.activeItem=function(){this.isActive=!0},n.deactivateItem=function(){this.isActive=!1},n.createAnimations=function(){this.shakeAnimation=new af.Z({targets:[this.item],repeat:3,props:{x:4}})},n.createItem=function(e,t,n){this.item=this.scene.add.image(0,0,sf,e),this.item.setWorldSize(t,n),this.add(this.item)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(qt._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},(0,G.Z)(t,[{key:"onClick",set:function(e){var t=this,n=this.item,i=n.width,a=n.height;this.setSize(i,a),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){e(),t.logButtonEvent()}))}}]),t}(Phaser.GameObjects.Container),of=rf,cf=rc.Z.GAMEPLAY.TEXTURES_32BIT,lf=cf.KEY,hf=cf.FRAME,uf=GameCore.Configs.Gameplay.ItemConfig.giftTime,df=function(e){function t(t){var n;return(n=e.call(this,t,hf.ITEM_GIF_CLOSE,41.5,42.5)||this).scene=void 0,n.timer=void 0,n.giftTime=void 0,n.timeCount=void 0,n.isGiftOpen=void 0,n.glowEffect=void 0,n.shadow=void 0,n.glowAnimation=void 0,n.starTwinkleUp=void 0,n.giftOpenAnimation=void 0,n.countDownText=void 0,n.handleClickGiftItem=function(){if(n.isGiftOpen)return n.scene.shooter.isBombAttached()?(n.shakeAnimation.play(),void(n.scene.shooter.getState()===Cd.READY&&n.scene.shooter.shakeBomb())):void n.useGiftItem();n.shakeAnimation.play()},n.startCountdown=function(){var e;if(n.scene.itemManager.isRunning()){null==(e=n.timer)||e.remove(),n.timeCount=0,n.countDownText.revive();var t=(0,Ee.F0)(1e3*n.giftTime,!1);n.countDownText.setText(t),n.timer=n.scene.time.addEvent({loop:!0,delay:1e3,callback:function(){n.timeCount+=1;var e,t=n.giftTime-n.timeCount;if(t<=0)return null==(e=n.timer)||e.remove(),n.countDownText.kill(),void n.setGiftOpen();var i=(0,Ee.F0)(1e3*t,!1);n.countDownText.setText(i),t%3==0&&n.shakeItem()}}),n.scene.timerEvents.push(n.timer)}},n.useGiftItem=(0,o.Z)(h().mark((function e(){var t,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene){e.next=2;break}return e.abrupt("return");case 2:return n.scene.stateManager.pause(),e.next=5,n.scene.showRewardedVideoAsync();case 5:t=e.sent,i=n.scene.registry.get("log_level"),n.scene.analytics.event(qt._.USE_GIFT,{success:t,level:i,level_name:"level_"+i}),t?(n.handleReceiveGift(),n.scene.stateManager.play(),n.deactivateItem(),a=n.scene.time.delayedCall(1500,(function(){n.activeItem()})),n.scene.timerEvents.push(a)):(s=n.scene.time.delayedCall(1500,(function(){n.scene.stateManager.play(),n.deactivateItem()})),n.scene.timerEvents.push(s),r=n.scene.time.delayedCall(3e3,(function(){n.activeItem()})),n.scene.timerEvents.push(r));case 9:case"end":return e.stop()}}),e)}))),n.handleReceiveGift=function(){n.scene.tweens.killTweensOf(n.item),n.scene.descentController.descent(),n.scene.shooter.attachBomb(),Br.emit(lr.COLLECT_BOMBS.EVENT,{type:"amount",value:1})},n.scene=t,n.setName("GiftBomb"),n.giftTime=uf,n.timeCount=0,n.onClick=n.handleClickGiftItem,n.createShadow(),n.createShakeAnimation(),n.createGlowEffect(),n.createStarEffect(),n.createCountdownText(),n.setGiftClose(),n.kill(),n.setScale(1.2),n}(0,c.Z)(t,e);var n=t.prototype;return n.createShadow=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME,i=this.scene.add.image(0,0,t,n.ITEM_GIFT_SHADOW);this.shadow=i,i.setWorldSize(41.25,17.05),this.add(i),this.bringToTop(this.item)},n.createShakeAnimation=function(){this.shakeAnimation=new af.Z({targets:[this.item,this.shadow],repeat:3,props:{x:4}})},n.createCountdownText=function(){this.countDownText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.countDownText.setY(40),this.add(this.countDownText)},n.activeItem=function(){this.revive(),e.prototype.activeItem.call(this),this.setInteractive(),this.setGiftClose(),this.startCountdown(),this.runEnterAnimation()},n.deactivateItem=function(){e.prototype.deactivateItem.call(this),this.disableInteractive(),this.stopCountdown(),this.runOutAnimation()},n.shakeItem=function(){var e=this.scene.tweens.createTimeline();e.add({targets:this.item,angle:{from:-12,to:12},ease:Phaser.Math.Easing.Sine.InOut,duration:150}),e.add({targets:this.item,angle:-6,ease:Phaser.Math.Easing.Sine.InOut,duration:150}),e.add({targets:this.item,angle:6,ease:Phaser.Math.Easing.Sine.InOut,duration:150}),e.add({targets:this.item,angle:0,ease:Phaser.Math.Easing.Sine.InOut,duration:150}),e.play()},n.stopCountdown=function(){var e;null==(e=this.timer)||e.remove(),this.countDownText.kill()},n.createGlowEffect=function(){this.glowEffect=this.scene.make.image({key:lf,frame:hf.ITEM_GLOW_EFFECT}),this.glowEffect.setWorldSize(81,84),this.add(this.glowEffect),this.moveBelow(this.glowEffect,this.item)},n.createStarEffect=function(){this.starTwinkleUp=new nf.Z(this.scene),this.add(this.starTwinkleUp)},n.runEnterAnimation=function(){new rh.Z({targets:[this]}).play()},n.runOutAnimation=function(){var e=this;new oh.Z({targets:[this],onComplete:function(){e.setGiftClose(),e.kill()}}).play()},n.runGiftOpenAnimation=function(){var e;null==(e=this.giftOpenAnimation)||e.remove();var t=1.03/this.scene.world.getPixelRatio();this.giftOpenAnimation=this.scene.tweens.add({targets:this.item,y:-5,scale:t,duration:300,loop:-1,yoyo:!0,ease:Phaser.Math.Easing.Sine.Out})},n.runGlowEffect=function(){var e;this.glowEffect.revive(),null==(e=this.glowAnimation)||e.remove(),this.glowAnimation=new tf.Z({targets:[this.glowEffect],repeat:-1,duration:12e3}),this.glowAnimation.play()},n.setGiftClose=function(){var e;this.isGiftOpen=!1,null==(e=this.giftOpenAnimation)||e.remove(),this.glowEffect.kill(),this.item.setFrame(hf.ITEM_GIF_CLOSE),this.item.setWorldSize(42,43),this.item.setY(0),this.shadow.setPosition(-2,25),this.starTwinkleUp.stop()},n.setGiftOpen=function(){if(this.scene.itemManager.isRunning()){this.isGiftOpen=!0,this.item.setFrame(hf.ITEM_GIFT_BOMB),this.item.setWorldSize(44,56),this.shadow.setPosition(-2,27),this.runGlowEffect(),this.runGiftOpenAnimation();var e=this.item,t=e.x,n=e.y,i=e.width,a=e.height;this.starTwinkleUp.run(4,t,n,i,a)}},t}(of),pf=df,ff=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.items={},n.start=function(){e.prototype.start.call((0,za.Z)(n)),n.scene.ads.enabled&&n.items[ef.GIFT.ID].activeItem()},n.stop=function(){e.prototype.stop.call((0,za.Z)(n)),n.items[ef.GIFT.ID].deactivateItem()},n.scene=t,n.createItems(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createItems=function(){this.createGiftItem()},n.getItem=function(e){return this.items[e]},n.createGiftItem=function(){var e=new pf(this.scene);this.items[ef.GIFT.ID]=e,this.scene.layoutManager.objects.footer.add(e),e.setPosition(-140,-90)},t}(rl),gf=ff,mf=function(e){function t(t,n){var i;(i=e.call(this,t,n,{allowRotation:!1})||this).scene=void 0,i.physicsRadius=void 0,i.ballSize=void 0,i.scene=n,i.scene.add.existing((0,za.Z)(i)),i.setActive(!0);var a=i.scene.data.get("physicsWorld"),s=i.scene.data.get("ball");i.physicsRadius=a.detachedBallCollisionRadius;var r=s.width,o=s.height;return i.ballSize=new Phaser.Structs.Size(r,o),i.scene.events.off("postupdate",i.postUpdate,(0,za.Z)(i)),i.scene.events.on("postupdate",i.postUpdate,(0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.postUpdate=function(){this.scene.stateManager.isPaused()||this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=this.createGridBall()),(n||0===n)&&i.setColor(n),this.world.enableBody(i),i.initDefault(),i.body.reset(e,t),i.setPosition(e,t),i.revive(),i.updatePhysicsRadius(this.physicsRadius),i.setGravityY(600),i.setCollideWorldBounds(!0,1,1),i.setBounce(1,1),i.setMaxVelocity(800,800),i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.createGridBall().kill()}},n.createGridBall=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,t=this.ballSize,n=t.width,i=t.height,a=new kp(this.scene,0,0,e);return this.add(a),a.setWorldSize(n,i),a.setDepth(1e3),a},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.contains=function(e){return"detach-ball"===e.name},t}(Phaser.Physics.Arcade.Group),vf=mf,yf=function(e){function t(t,n){var i;(i=e.call(this,t,n)||this).scene=void 0,i.tailParticles=void 0,i.physicsRadius=void 0,i.depth=void 0,i.bombSize=void 0,i.scene=n,i.setName("RainbowBallPool"),i.setActive(!0),i.scene.add.existing((0,za.Z)(i));var a=i.scene.data.get("physicsWorld");i.physicsRadius=a.rainbowBallCollisionRadius;var s=i.scene.data.get("rainbowBall"),r=s.width,o=s.height;return i.bombSize=new Phaser.Structs.Size(r,o),i.tailParticles=n.tailParticles,i.listenEvents(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setPhysicsRadius=function(e){return this.physicsRadius=e,this},n.setDepth=function(t,n){return this.depth=t,e.prototype.setDepth.call(this,t,n),this},n.listenEvents=function(){this.scene.events.on("postupdate",this.postUpdate,this)},n.postUpdate=function(){this.scene.stateManager.isPaused()||this.getChildren().forEach((function(e){e.active&&e.postUpdate()}))},n.spawn=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.scene.world.getPixelRatio(),i=this.getFirstDead();return i||(i=this.addBomb()),this.world.enableBody(i),i.initDefault(),i.revive(),i.setPosition(e,t),i.setCollideWorldBounds(!0,1,1),i.updatePhysicsRadius(this.physicsRadius*n),i.body.enable=!1,this.scene.bulletGroup.add(i),i},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.initObjects=function(e){for(var t=0;t<e;t++){this.addBomb().kill()}},n.getChildren=function(){return e.prototype.getChildren.call(this)},n.addBomb=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME,i=new xd(this.scene,0,0,t,n.ROCKET);i.setRocketShadow(),i.setDepth(ja.Z.BULLET);var a=[this.scene.tailParticles.createTailEmitterSmoke()];i.setTailEmitter(a),this.add(i),i.setPhysicsRadius(this.physicsRadius);var s=this.bombSize,r=s.width,o=s.height;return i.setWorldSize(r,o),i},t}(Phaser.Physics.Arcade.Group),Sf=yf,Ef=n(547),bf=n(550),Af=rc.Z.DEFAULT,wf=Af.KEY,Tf=Af.FRAME,Pf=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.name="TapTutorialHand",n.addHand(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:wf,frame:Tf.ICON_HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.playAnimation=function(e,t){var n,i=this;void 0===e&&(e=0),void 0===t&&(t=800);var a=1/this.scene.world.getPixelRatio();this.hand.angle=30,null==(n=this.scene)||n.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,value:1,duration:200},scale:{duration:400,start:1.6*a,to:1.2*a},angle:{from:30,value:0,duration:400}},onComplete:function(){var e;null==(e=i.scene)||e.tweens.add({targets:[i.hand],delay:200,duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:0},onComplete:function(){i.hand.x=0,i.hand.y=0,i.hand.scale=a,i.playAnimation(t)}})}})},n.stopAnimation=function(){this.scene.tweens.killTweensOf(this.hand)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Cf=Pf,If=n(552),xf=n(554),Bf=rc.Z.EFFECTS,kf=Bf.KEY,Rf=Bf.FRAME,Of=rc.Z.DEFAULT,_f=Of.KEY,Df=Of.FRAME,Lf=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).rewardValue=void 0,s.onReward=void 0,s.hand=void 0,s.viewAdButton=void 0,s.skipButton=void 0,s.closeButton=void 0,s.giftIcon=void 0,s.giftIconWhite=void 0,s.giftAdsIcon=void 0,s.glowFx=void 0,s.currencyText=void 0,s.popupContents=void 0,s.cometTwinkle=void 0,s.starTwinkleUp=void 0,s.sparksExplosive=void 0,s.popupFadeOutAnimation=void 0,s.backgroundFadeInAnimation=void 0,s.contentShowUpAnimation=void 0,s.giftEntrancesAnimation=void 0,s.giftAttentionAnimation=void 0,s.iconAttentionAnimation=void 0,s.giftShakeAnimation=void 0,s.giftOpenAnimation=void 0,s.open=function(t){e.prototype.open.call((0,za.Z)(s),t);var n=s.getData("awardCoins");s.setRewardValue(n),s.runOpenAnimation()},s.handleClosePopup=function(){s.runCloseAnimation()},s.updateCoinData=function(){var e=window.game.player,t=e.getCoins()+s.rewardValue;e.setCustomData("coin",t)},s.handleShowRewardedVideoAd=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.viewAdButton.setDisabled(!0),t=s.scene,e.next=4,t.showRewardedVideoAsync();case 4:e.sent&&(s.starTwinkleUp.stop(),s.popupContents.killGroup(),s.runTheGiftEntrancesAnimation(0,1500)),s.viewAdButton.setDisabled(!1);case 7:case"end":return e.stop()}}),e)}))),s.handleTheGiftClick=function(){s.setTheGiftClickable(!1),s.logButtonEvent("OpenGift"),s.hand.kill(),s.giftIconWhite.revive(),s.scene.tweens.killTweensOf(s.giftIcon),Phaser.Display.Align.In.Center(s.giftIconWhite,s.giftIcon),s.scene.audio.playSound(Qa.Z.GIFT_CHARGE),s.runShakeTheGift(),s.runOpenTheGift()},s.runCloseAnimation=function(){s.runExitsAnimation(0,200)},s.setDepth(qa.Ks.POPUP),s.background.setAlpha(.8),s.createCloseButton(),s.createViewAdsButton(),s.createSkipButton(),s.createGiftGlow(),s.createGiftAdsIcon(),s.createCurrencyText(),s.createEffects(),s.createGiftIcon(),s.createHand(),s.createContentsGroup(),s}(0,c.Z)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(qt._.BUTTON_CLICK,{button_name:e,screen_name:t})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new rh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.Z({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.giftAdsIcon,n=t.x,i=t.y,a=t.width,s=t.height;this.starTwinkleUp.run(1,n,i,a,s),this.iconAttentionAnimation||(this.iconAttentionAnimation=new gc({targets:[this.giftAdsIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var a=this.giftIcon,s=a.x,r=a.y,o=this.giftIconWhite,c={x:s,y:r},l={x:o.x,y:o.y},h=1/this.scene.world.getPixelRatio();this.giftEntrancesAnimation=new bf.Z({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[l.x,l.y]],props:{scale:{start:.5*h,to:h},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,t,n)},onComplete:function(){i.scene.audio.playSound(Qa.Z.GIFT_REVEAL);i.starTwinkleUp.setScale(1.5);var e=i.giftIcon,t=e.x,n=e.y,a=e.width,s=e.height;i.starTwinkleUp.run(1,t,n,a/1.5,s/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new gc({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),this.hand.playAnimation(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new af.Z({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/this.scene.world.getPixelRatio();this.giftOpenAnimation=new Ef.Z({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onStart:this.updateCoinData,onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.scene.audio.playSound(Qa.Z.GIFT_EXPLODE),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Cf(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.glowFx,this.giftAdsIcon,this.currencyText,this.viewAdButton,this.skipButton,this.closeButton])},n.createGiftAdsIcon=function(){this.giftAdsIcon=this.scene.add.image(0,0,_f,Df.LOGO_GIFT_ADS),this.giftAdsIcon.setWorldSize(117,121),Phaser.Display.Align.In.Center(this.giftAdsIcon,this.zone,0,-80),this.add(this.giftAdsIcon)},n.createGiftGlow=function(){this.glowFx=this.scene.add.image(0,0,kf,Rf.FX_GLOW_GOLD),this.glowFx.setWorldSize(246,246),Phaser.Display.Align.In.Center(this.glowFx,this.zone,0,-80),this.add(this.glowFx),this.scene.tweens.add({targets:[this.glowFx],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:Xa.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText("Watch a video to get\n"+e+" coins!"),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.giftAdsIcon,0,90)},n.createViewAdsButton=function(){this.viewAdButton=new sc.Z(this.scene,_f,Df.BUTTON_GREEN_134X50,134,50),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.5},text:"Get Now!"});e.setHighQuality(),e.setStroke("#3ea915",3),e.setFontSize(16);var t=this.scene.make.image({key:_f,frame:Df.ICON_ADS_VIDEO});t.setWorldSize(35,28),this.viewAdButton.add([e,t]),this.add(this.viewAdButton),Phaser.Display.Align.In.Center(e,this.viewAdButton,20,-1),Phaser.Display.Align.In.Center(t,this.viewAdButton,-34,-1),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,125)},n.createCloseButton=function(){this.closeButton=new Sh.Z(this.scene,{key:_f,frame:Df.BUTTON_CLOSE,width:32,height:32,paddingZone:20}),this.closeButton.setName("Close"),this.closeButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(this.closeButton,this.zone,-15,-15),this.add(this.closeButton)},n.createSkipButton=function(){var e=1/this.scene.world.getPixelRatio();this.skipButton=new sc.Z(this.scene,rc.Z.TEXTS.KEY,this.scene.lang.Texture.skip),this.skipButton.setName("Skip"),this.skipButton.button.setScale(e),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,35),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:_f,frame:Df.LOGO_GIFT_GLOW,visible:!0}),this.giftIconWhite.setWorldSize(123,131),this.giftIconWhite.setDepth(ja.Z.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:_f,frame:Df.LOGO_GIFT,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(104,114),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new If.Z(this.scene),this.starTwinkleUp=new nf.Z(this.scene),this.sparksExplosive=new xf.Z(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),Nf=Lf;function Mf(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Gf(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ff,Zf=GameCore.Configs.LeadersBoard,Uf=Zf.UseMock,Yf=Zf.Limit,zf=function(e,t,n,i){return void 0===n&&(n=Yf),void 0===i&&(i=0),function(){var s=(0,o.Z)(h().mark((function s(r){var o,c,l,u,d,p,f,g,m,v,y,S,E,b,A,w,T,P,C;return h().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r(Hf()),r({type:Ai,payload:{leaderboardId:e,type:t,limit:n,offset:i}}),!Uf){s.next=13;break}return s.next=8,(0,Ee.qZ)(1e3);case 8:return 145,d=de()(l=Ds()(u=new Array(n)).call(u,null)).call(l,(function(e,t){var n=(t+1)*(i+1);return{playerId:145===t?c:"0"+n,name:145===t?"Current Player":"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(17*Math.random()*1e4/n)}})),d.length>0&&(p=d.length-1,d[p].name="You",d[p].playerId=c,d[p].photo="./assets/images/others/avatar.jpg"),r(Wf(d,t)),s.abrupt("return");case 13:if(f=[],t!==ns){s.next=20;break}return s.next=17,gs({limit:n,offset:i});case 17:f=s.sent,s.next=28;break;case 20:if(t!==is){s.next=28;break}return(g=o.getConnectedPlayerIds(n,i)).push(c),m=GameCore.Utils.Array.unique(g),s.next=26,ys({playerIds:m,limit:m.length});case 26:f=s.sent,m.forEach((function(e){var t=he()(f).call(f,(function(t){return t.playerId===e}));t&&0!==t.length||f.push({playerId:e,score:0})}));case 28:for(v={},y=Mf(f);!(S=y()).done;)E=S.value,b=E.playerId,A=E.score,w=E.rank,T=E.getPlayer(),P=T.getPhoto(),C=T.getName(),v[b]={playerId:b,name:C,photo:P,score:A,rank:w};r(Wf(v,t)),s.next=38;break;case 34:s.prev=34,s.t0=s.catch(0),r(Wf([],t)),(0,a.tO)(s.t0);case 38:case"end":return s.stop()}}),s,null,[[0,34]])})));return function(e){return s.apply(this,arguments)}}()},Wf=function(e,t){return{type:wi,payload:{leaders:e,type:t}}},Hf=function(){return{type:Ti,payload:{}}},Kf=rc.Z.DEFAULT,Vf=Kf.KEY,jf=Kf.FRAME,Xf=function(e){function t(t){var n;return(n=e.call(this,t,Vf,jf.BUTTON_GREEN_214X56)||this).buttonsPulsateAnimation=void 0,n.setName("PlaySingle"),n.button.setWorldSize(214,56),n.createText(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.play});t.setScale(e),this.add(t)},n.runAnimation=function(){var e,t,n=this;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new gc({targets:[this],props:{scale:{from:.9,to:1},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play(),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){n.buttonsPulsateAnimation.stop()})),this.hitZone.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){var e;null!=(e=n.buttonsPulsateAnimation.tween)&&e.isPlaying()||n.buttonsPulsateAnimation.play()}))},t}(sc.Z),qf=Xf,Qf=rc.Z.DEFAULT,Jf=Qf.KEY,$f=Qf.FRAME,eg=function(e){function t(t){var n;return(n=e.call(this,t,Jf,$f.BUTTON_BLUE_214X56)||this).setName("PlayWithFriends"),n.button.setWorldSize(214,56),n.createText(),n}return(0,c.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.55},text:"Play With"});e.setHighQuality(),e.setPosition(0,0),e.setStroke("#2155eb",3),e.setFontSize(this.scene.fontSize(24)),this.add(e)},t}(sc.Z),tg=eg,ng=function(e){function t(t){var n;return(n=e.call(this,t)||this).playSingleButton=void 0,n.playWithFriendsButton=void 0,n.logo=void 0,n.createLogo(),n.createPlayWithFriendButton(),n.createPlaySingleButton(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createLogo=function(){var e=rc.Z.GAMEPLAY.TEXTURES,t=e.KEY,n=e.FRAME,i=this.scene.make.image({key:t,frame:n.LOGO});i.setWorldSize(300,124),i.setY(-this.scene.gameZone.height/2+180),this.add(i),this.logo=i,this.runLogoAnimation()},n.createPlaySingleButton=function(){this.playSingleButton=new qf(this.scene),this.add(this.playSingleButton),this.playSingleButton.setPosition(0,100)},n.createPlayWithFriendButton=function(){this.playWithFriendsButton=new tg(this.scene),this.add(this.playWithFriendsButton),this.playWithFriendsButton.kill(),this.playWithFriendsButton.setPosition(0,120)},n.runLogoAnimation=function(){this.logo.setWorldSize(300,124),this.logo.setAngle(.5),this.scene.tweens.add({targets:[this.logo],scale:1.005*this.logo.scale,angle:-.5,yoyo:!0,repeat:-1})},t}(Phaser.GameObjects.Container),ig=ng,ag=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).startAbbreviate=void 0,a.fractionalDigits=void 0,a.key=void 0,a.frames=void 0,a.bar=void 0,a.icon=void 0,a.button=void 0,a.value=void 0,a.key=n,a.frames=i,a.startAbbreviate=99999,a.fractionalDigits=2,a.createBar(),a.createValue(),a.createIcon(),a.createButton(),a.alignObject(),a.scene.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.setValue=function(e){var t=this.formatScore(e);this.value.setText(t)},n.getValue=function(){return this.value},n.alignObject=function(){var e=this.bar,t=e.width,n=e.height;this.setSize(t,n),Phaser.Display.Align.In.LeftCenter(this.icon,this.bar),Phaser.Display.Align.In.Center(this.value,this.bar,10,1),this.button&&Phaser.Display.Align.In.RightCenter(this.button,this.bar)},n.createBar=function(){this.bar=this.scene.add.image(0,0,this.key,this.frames.background),this.bar.setY(4),this.add(this.bar)},n.createValue=function(){this.value=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.55}}),this.setValue(0),this.add(this.value)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,this.key,this.frames.icon),this.add(this.icon)},n.createButton=function(){this.frames.button&&this.scene.ads.enabled&&(this.button=this.scene.add.image(0,0,this.key,this.frames.button),this.add(this.button))},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(qt._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen)return e.getScreenName();e=e.parentContainer}return this.scene.getSceneName()},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e)},(0,G.Z)(t,[{key:"onClick",set:function(e){var t=this;this.scene.ads.enabled&&(this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t.logButtonEvent(),e(),t.scene.audio.playSound(Qa.Z.BUTTON_CLICK)})))}}]),t}(Phaser.GameObjects.Container),sg=ag,rg=rc.Z.DEFAULT,og=rg.KEY,cg=rg.FRAME,lg=function(e){function t(t){var n;return(n=e.call(this,t,og,{background:cg.BG_VALUE_BAR,icon:cg.ICON_CROWN})||this).setName("ScoreBar"),n.startAbbreviate=1e3,n.fractionalDigits=3,n.bar.setWorldSize(100,30),n.icon.setWorldSize(21,17),n.value.setOrigin(.5,.5),n.alignObject(),Phaser.Display.Align.In.LeftCenter(n.icon,n.bar,-6,0),n}return(0,c.Z)(t,e),t}(sg),hg=lg,ug=rc.Z.DEFAULT,dg=ug.KEY,pg=ug.FRAME,fg=function(e){function t(t){var n;(n=e.call(this,t)||this).scoreBar=void 0,n.rankButton=void 0,n.missionsButton=void 0,n.settingIcon=void 0,n.luckySpinIcon=void 0;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createScoreBar(),n.createRankButton(),n.createMissionsButton(),n.createSettingButton(),n.createLuckySpinButton(),n.alignObjects(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createScoreBar=function(){this.scoreBar=new hg(this.scene),this.add(this.scoreBar)},n.createRankButton=function(){this.rankButton=new sc.Z(this.scene,dg,pg.BUTTON_RANK,29,29),this.rankButton.setName("Rank"),this.add(this.rankButton),this.rankButton.kill()},n.createMissionsButton=function(){this.missionsButton=new sc.Z(this.scene,dg,pg.BUTTON_DAILY_MISSION,29,30),this.missionsButton.setName("Daily-missions"),this.add(this.missionsButton),this.missionsButton.kill(),Phaser.Display.Align.In.LeftCenter(this.missionsButton,this,-52,44)},n.createSettingButton=function(){this.settingIcon=new sc.Z(this.scene,dg,pg.BUTTON_SETTINGS,28,29),this.settingIcon.setName("Setting"),this.add(this.settingIcon)},n.alignObjects=function(){this.scene.world.isLandscape()?(Phaser.Display.Align.In.TopCenter(this.scoreBar,this,-180,-11),Phaser.Display.Align.In.TopCenter(this.rankButton,this,150,-16),Phaser.Display.Align.In.TopCenter(this.settingIcon,this,190,-16)):(Phaser.Display.Align.In.LeftCenter(this.scoreBar,this,-15,-4),Phaser.Display.Align.In.RightCenter(this.rankButton,this,-55,1),Phaser.Display.Align.In.RightCenter(this.settingIcon,this,-15,1))},n.createLuckySpinButton=function(){this.luckySpinIcon=new sc.Z(this.scene,dg,pg.BUTTON_LUCKY_SPIN,29,30),this.luckySpinIcon.setName("LuckySpin"),this.add(this.luckySpinIcon),this.luckySpinIcon.kill(),Phaser.Display.Align.In.RightCenter(this.luckySpinIcon,this,-50,44)},t}(Phaser.GameObjects.Container),gg=fg,mg=n(559),vg=[{id:"collect-bubbles",title:"Collect 300 bubbles",require:{amount:300},reward:{coin:400}},{id:"complete-games",title:"Complete game 3 times",require:{amount:3},reward:{coin:400}},{id:"invite-friends",title:"Challenge friends 3 times",require:{amount:3},reward:{coin:1e3}},{id:"collect-bombs",title:"Collect 3 Bomb items",require:{amount:3},reward:{coin:400}},{id:"reach-target-points",title:"Reach 10,000 points",require:{amount:1e4},reward:{coin:400}},{id:"get-rainbow-bubble",title:"Get a Fire bubble",require:{amount:1},reward:{coin:400}},{id:"use-rescue",title:"Use Second Chance 2 times",require:{amount:2},reward:{coin:1e3}},{id:"drop-bubbles",title:"Drop 50 bubbles into holes",require:{amount:50},reward:{coin:1e3}}],yg=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vg);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sg=GameCore.Configs.DailyTasks,Eg=function(e){return function(t){t({type:Di,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>Sg.Duration?bg(e):Ag(r))}},bg=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},X()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(Ag(n)),Br.emit(lr.EVENTS.TASKS_RESET)}},Ag=function(e){return{type:Li,payload:{process:e}}},wg=function(){return function(e){e({type:Gi,payload:{}}),Br.emit(lr.EVENTS.NOTICE_UPDATE)}},Tg=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.process=void 0,i.minProcess=void 0,i.maxProcess=void 0,i.progressBoxLeft=void 0,i.progressBoxBg=void 0,i.progressBoxRight=void 0,i.progressBarLeft=void 0,i.progressBarBg=void 0,i.progressBarRight=void 0,i.progressAnimation=void 0,i.payload=n;var a=n.width;return i.setSize(a,16),i.process=0,i.minProcess=0,i.maxProcess=1,i.createProgressBox(),i.createProgressBar(),i.createContainer(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setProcess=function(e,t){void 0===t&&(t=!1),this.process=this.getCorrectValue(e),this.scene&&!t?this.runProcessAnimation(e):this.updateProcess()},n.updateProcess=function(){var e=this.progressBarBg.displayHeight,t=this.getDisplayWidthByProcess(this.process);this.progressBarBg.setWorldSize(t,e);var n=this.progressBarBg.x;this.progressBarRight.setX(n+t)},n.getCorrectValue=function(e){var t=e;return isFinite(t)||(t=0),t<this.minProcess&&(t=this.minProcess),t>this.maxProcess&&(t=this.maxProcess),t},n.getDisplayWidthByProcess=function(e){return(this.width-17)*e},n.runProcessAnimation=function(e){var t,n=this;null==(t=this.progressAnimation)||t.stop(1),this.progressAnimation=this.scene.add.tween({targets:[this.progressBarBg],duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,props:{displayWidth:function(){var t=n.getCorrectValue(e);return n.getDisplayWidthByProcess(t)}},onStart:function(){var e=n.progressBarBg.displayHeight,t=n.getDisplayWidthByProcess(n.process);n.progressBarBg.setWorldSize(t,e)},onUpdate:function(){var e=n.progressBarBg,t=e.x,i=e.displayWidth;n.progressBarRight.setX(t+i)},onComplete:function(){n.updateProcess()}})},n.createProgressBox=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBoxLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BG_LEFT}),this.progressBoxLeft.setOrigin(0,.5),this.progressBoxLeft.setWorldSize(9,17),this.progressBoxRight=this.scene.make.image({key:t,frame:n.PROGRESS_BG_RIGHT}),this.progressBoxRight.setOrigin(0,.5),this.progressBoxRight.setWorldSize(9,17),this.progressBoxBg=this.scene.make.image({key:t,frame:n.PROGRESS_BG_MID}),this.progressBoxBg.setOrigin(0,.5),this.progressBoxBg.setWorldSize(20,17);var i=this.progressBoxBg.displayHeight,a=this.displayWidth,s=this.progressBoxLeft.displayWidth,r=this.progressBoxRight.displayWidth;this.progressBoxLeft.setWorldSize(s,i),this.progressBoxRight.setWorldSize(r,i),this.progressBoxBg.setWorldSize(a-(s+r),i),Phaser.Display.Align.In.Center(this.progressBoxBg,this,0,0),Phaser.Display.Align.In.LeftCenter(this.progressBoxLeft,this,0,0),Phaser.Display.Align.In.RightCenter(this.progressBoxRight,this,0,0)},n.createProgressBar=function(){var e=this.payload,t=e.key,n=e.frames;this.progressBarLeft=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_LEFT}),this.progressBarLeft.setOrigin(0,.5),this.progressBarLeft.setWorldSize(9,17),this.progressBarRight=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_RIGHT}),this.progressBarRight.setOrigin(0,.5),this.progressBarRight.setWorldSize(9,17),this.progressBarBg=this.scene.make.image({key:t,frame:n.PROGRESS_BAR_MID}),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setWorldSize(20,17);Phaser.Display.Align.In.LeftCenter(this.progressBarBg,this,-8),Phaser.Display.Align.In.LeftCenter(this.progressBarLeft,this,0),Phaser.Display.Align.In.LeftCenter(this.progressBarRight,this,0),this.setProcess(0,!0)},n.createContainer=function(){this.add([this.progressBoxBg,this.progressBoxLeft,this.progressBoxRight,this.progressBarBg,this.progressBarLeft,this.progressBarRight]),this.scene.add.existing(this)},t}(Phaser.GameObjects.Container),Pg=Tg,Cg=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},Ig=rc.Z.DEFAULT,xg=Ig.KEY,Bg=Ig.FRAME,kg=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).payload=void 0,a.process=void 0,a.isCompleted=void 0,a.background=void 0,a.titleText=void 0,a.processText=void 0,a.progressBar=void 0,a.claimButton=void 0,a.valueText=void 0,a.rewardedIcon=void 0,a.missionIcon=void 0,a.handleOnClaim=function(e){return function(){var t=a.payload,n=t.id,i=t.reward,s=a.claimButton.getWorldPosition();a.scene.storage.dispatch(function(e){return function(t){var n=Cg();if(GameCore.Utils.Valid.isObject(n)){var i=n;GameCore.Utils.Object.hasOwn(i,e)&&(i[e].rewarded=!0,window.game.player.setCustomData("dailyTasks",{logTasks:i}),t({type:Mi,payload:{id:e}}))}}}(n)),a.claimButton.kill(),X()(i).forEach((function(t){var n=i[t];e(t,n),a.scene.events.emit("claim-reward",s,n)}))}},a.updateData=function(){var e,t,n=a.getProcessValue(),i=n.current,s=n.target,r=i/s;a.progressBar.setProcess(r,!0),a.setProcessText(i,s),a.isCompleted=i>=s&&!(null!=(e=a.process)&&e.rewarded),a.claimButton.setDisabled(!a.isCompleted),null!=(t=a.process)&&t.rewarded&&a.claimButton.kill(),a.isCompleted&&(a.rewardedIcon.setFrame(Bg.MISSION_GOLD_COIN),a.claimButton.button.setFrame(Bg.BUTTON_GREEN_57X25),a.valueText.setStroke("#3ea915",2))},a.payload=n,a.process=i,a.setName("Task: "+n.id),a.createBackground(),a.updateBlockSize(),a.createMissionIcon(),a.createTitle(),a.createProcessBar(),a.createProcessStatus(),a.createClaimButton(),a.updateData(),a}(0,c.Z)(t,e);var n=t.prototype;return n.setProcess=function(e){this.process=e,this.updateData()},n.getId=function(){return this.payload.id},n.getProcessValue=function(){var e=this,t=this.payload.require,n=X()(t),i=0,a=0;return n.forEach((function(n){i=t[n]||0;var s=e.process[n];a="number"===typeof s?s:0})),{current:a,target:i}},n.setProcessText=function(e,t){this.processText.setText(e+" / "+t)},n.createBackground=function(){this.background=this.scene.make.image({key:xg,frame:Bg.MISSION_BLOCK_BG}),this.background.setWorldSize(284,62),this.add(this.background)},n.updateBlockSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createMissionIcon=function(){var e=this.payload.id,t=lr.COLLECT_BUBBLES,n=lr.COMPLETE_GAMES,i=lr.INVITE_FRIENDS,a=lr.COLLECT_BOMBS,s=lr.REACH_TARGET_POINTS,r=lr.GET_RAINBOW_BUBBLE,o=lr.USE_RESCUE,c=lr.DROP_BUBBLES;switch(this.missionIcon=this.scene.make.image({key:xg,frame:Bg.ICON_COIN_SMALL}),e){case t.ID:this.missionIcon.setFrame(Bg.MISSION_BUBBLE),this.missionIcon.setWorldSize(47,43);break;case n.ID:this.missionIcon.setFrame(Bg.MISSION_CROWN),this.missionIcon.setWorldSize(42,35);break;case i.ID:this.missionIcon.setFrame(Bg.MISSION_INVITE),this.missionIcon.setWorldSize(39,46);break;case a.ID:this.missionIcon.setFrame(Bg.MISSION_BOMB),this.missionIcon.setWorldSize(41,37);break;case s.ID:this.missionIcon.setFrame(Bg.MISSION_10K),this.missionIcon.setWorldSize(53,27);break;case r.ID:this.missionIcon.setFrame(Bg.MISSION_RAINBOW_BUBBLE),this.missionIcon.setWorldSize(42,55);break;case o.ID:this.missionIcon.setFrame(Bg.MISSION_2ND),this.missionIcon.setWorldSize(45,27);break;case c.ID:this.missionIcon.setFrame(Bg.MISSION_SCORING_RING),this.missionIcon.setWorldSize(46,50)}this.add(this.missionIcon),this.missionIcon.setPosition(-110,0)},n.createTitle=function(){var e=this.payload.title;this.titleText=this.scene.make.text({text:e,style:{color:"#8294d7",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"14px"},origin:{x:0,y:.5}}),this.titleText.setHighQuality(),this.add(this.titleText),Phaser.Display.Align.In.LeftCenter(this.titleText,this,-70,-14)},n.createProcessBar=function(){this.progressBar=new Pg(this.scene,{width:145,key:xg,frames:Bg}),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,-5,10)},n.createProcessStatus=function(){this.processText=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.5},text:"Settings"}),this.processText.setHighQuality(),this.processText.setStroke("#3ea915",2),this.processText.setFontSize(this.scene.fontSize(12)),this.add(this.processText),Phaser.Display.Align.In.Center(this.processText,this.progressBar,0,.5)},n.createClaimButton=function(){this.claimButton=new sc.Z(this.scene,xg,Bg.BUTTON_GREY_57X25,57,25);var e="Claim:"+GameCore.Utils.String.toUpperCamelCase(this.payload.id);this.claimButton.setName(e),this.createRewardIcon(),this.createRewardValue(),this.add(this.claimButton),Phaser.Display.Align.In.RightCenter(this.claimButton,this.background,-8,8)},n.createRewardIcon=function(){this.rewardedIcon=this.scene.make.image({key:xg,frame:Bg.MISSION_GOLD_COIN}),this.rewardedIcon.setFrame(Bg.MISSION_GREY_COIN),this.rewardedIcon.setWorldSize(16,16),this.claimButton.add(this.rewardedIcon),Phaser.Display.Align.In.Center(this.rewardedIcon,this.claimButton,-15,-1)},n.createRewardValue=function(){var e=this.payload.reward,t=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.5},text:""+e.coin});t.setHighQuality(),t.setStroke("#ababab",2),t.setFontSize(13),this.valueText=t,this.claimButton.add(t),Phaser.Display.Align.In.Center(t,this.claimButton,8,0)},(0,G.Z)(t,[{key:"onClaim",set:function(e){this.claimButton.onClick=this.handleOnClaim(e),this.updateData()}}]),t}(Phaser.GameObjects.Container),Rg=kg,Og=rc.Z.DEFAULT,_g=Og.KEY,Dg=Og.FRAME,Lg=GameCore.Configs.DailyTasks,Ng=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).onReward=void 0,s.missionsData=void 0,s.missionProcess=void 0,s.startedTime=void 0,s.scroller=void 0,s.popup=void 0,s.missionBlocks=void 0,s.countdownTimer=void 0,s.countdownText=void 0,s.countdownContainer=void 0,s.backgroundFadeInAnimation=void 0,s.popupShowUpAnimation=void 0,s.popupExitsAnimation=void 0,s.contentShowUpAnimation=void 0,s.handleClosePopup=function(){s.scene.storage.dispatch(wg()),s.runCloseAnimation()},s.handleOnClaim=function(e,t){s.claimReward(e,t)},s.resetTaskData=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.startedTime=Date.now(),e.next=3,s.scene.storage.dispatch(bg(s.missionsData));case 3:s.updateTasksData(),s.scroller.value=0,s.createMissionBlocks();case 6:case"end":return e.stop()}}),e)}))),s.updateTasksData=function(){var e=s.scene,t=e.player,n=e.storage.getState(),i=sp(n)||[],a=rp(n)||{},r=(t.getCustomData("dailyTasks")||{}).startedTime,o=void 0===r?0:r;s.missionsData=i,s.missionProcess=a,s.startedTime=o},s.updateCountdown=(0,o.Z)(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.startedTime){e.next=2;break}return e.abrupt("return");case 2:if(t=Date.now(),n=t-s.startedTime,!((i=1e3*Lg.Duration-n)<0)){e.next=9;break}return i=0,e.next=9,s.resetTaskData();case 9:s.countdownText.setText(""+(0,Ee.F0)(i,!0));case 10:case"end":return e.stop()}}),e)}))),s.createPopup(),s.createPopupContents(),s.createScroller(),s.createDebugTools(),s.setDepth(qa.Ks.POPUP),s.createCloseButton(),s.background.setAlpha(.8),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.scene.storage.dispatch(wg()),this.updateTasksData(),this.scroller.value=0,this.createCountdownTimer(),this.createMissionBlocks(),this.runOpenAnimation(),this.scroller.gotoTop(),this.scroller.setEnable(!0)},n.createScroller=function(){this.scroller=new mg.Z(this.scene,{width:300,height:270,marginTop:10,marginBottom:-30}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(rc.Z.DEFAULT.KEY,rc.Z.DEFAULT.FRAME.BLANK,4,2826565),this.scroller.createMask(),this.scroller.setPosition(0,25),this.popup.add(this.scroller)},n.claimReward=function(e,t){"function"===typeof this.onReward&&(this.onReward(e,t),this.updateTasksData(),this.updateMissionBlocks(),this.scene.audio.playSound(Qa.Z.DAILY_REWARD))},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(200,500),this.runPopupContentEntrancesAnimation(400,400)},n.runCloseAnimation=function(){this.scene.audio.playSound(Qa.Z.POPUP_OFF),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){var n;this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new rh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:.8}}})),null==(n=this.backgroundFadeInAnimation)||n.play()},n.runPopupEntrancesAnimation=function(e,t){var n,i;if(!this.popupShowUpAnimation)return this.popupShowUpAnimation=new Ic({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:this.popup.y},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}}),void(null==(i=this.popupShowUpAnimation)||i.play());null==(n=this.popupShowUpAnimation)||n.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i,a=this.missionBlocks.getChildren();a.length<1||(this.missionBlocks.setAlpha(0),null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.Z({targets:a,duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{from:0,to:1}}}),null==(i=this.contentShowUpAnimation)||i.play())},n.runPopupExitsAnimation=function(e,t){var n,i,a=this;if(!this.popupExitsAnimation)return this.popupExitsAnimation=new oh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.scene.screen.close(a.name),a.popup.setY(0)}}),void(null==(i=this.popupExitsAnimation)||i.play());null==(n=this.popupExitsAnimation)||n.play()},n.createDebugTools=function(){if(GameCore.Utils.Valid.isDebugger()){var e=new sc.Z(this.scene,_g,Dg.ICON_CANCEL);e.button.setWorldSize(21,23),e.setName("Reset"),e.onClick=this.resetTaskData,this.add(e),Phaser.Display.Align.In.TopLeft(e,this.zone,-30,-60)}},n.createCloseButton=function(){var e=new Sh.Z(this.scene,{key:_g,frame:Dg.BUTTON_CLOSE,width:23,height:23,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,5,5)},n.createPopup=function(){this.popup=new Ih(this.scene,0,0,309,343),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContents=function(){this.createTitle(),this.createCountdown()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.5},text:"Daily Missions"});t.setHighQuality(),t.setStroke("#1d52eb",3),t.setFontSize(this.scene.fontSize(22)),e.add([t]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-22)},n.createCountdown=function(){this.countdownContainer=this.scene.add.container();var e=this.scene.make.image({key:_g,frame:Dg.ICON_CLOCK});e.setWorldSize(17,20),this.countdownText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00:00",origin:{x:.5,y:.5}}),Phaser.Display.Align.To.RightCenter(this.countdownText,e,3);var t=e.width+this.countdownText.width-10;this.countdownContainer.add([e,this.countdownText]),this.popup.add(this.countdownContainer),Phaser.Display.Align.In.TopCenter(this.countdownContainer,this.popup,-t/2,-50)},n.createCountdownTimer=function(){var e;null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})},n.createMissionBlocks=function(){var e,t,n=this;null==(e=this.missionBlocks)||e.destroy(!0);var i=this.missionsData.length,a=Ds()(t=new Array(i)).call(t,null);this.missionBlocks=this.scene.add.group({maxSize:i}),a.forEach((function(e,t){var i=n.createMissionBlock(t);null!==i&&n.missionBlocks.add(i)})),this.missionBlocks.setX(0);var s=this.missionBlocks.getChildren();this.scroller.addItems(s)},n.createMissionBlock=function(e){var t=this.missionsData[e].id;if(!GameCore.Utils.Object.hasOwn(this.missionProcess,t))return null;var n=this.missionProcess[t];if(!GameCore.Utils.Valid.isObject(n))return null;var i=new Rg(this.scene,this.missionsData[e],n);return i.setY(68*e-110),i.onClaim=this.handleOnClaim,i},n.updateMissionBlocks=function(){var e=this;this.missionBlocks.getChildren().forEach((function(t){if(t instanceof Rg){var n=t.getId();if(!GameCore.Utils.Object.hasOwn(e.missionProcess,n))return;var i=e.missionProcess[n];if(!GameCore.Utils.Valid.isObject(i))return;t.setProcess(i)}}))},t}(GameCore.Screen),Mg=Ng,Gg=n(535),Fg=[{id:1,type:"diamond",value:500},{id:2,type:"diamond",value:600},{id:3,type:"diamond",value:700},{id:4,type:"diamond",value:800},{id:5,type:"diamond",value:900},{id:6,type:"diamond",value:1e3}],Zg=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fg);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ug={REWARDED:"rewarded",SKIPPED:"skipped",READY:"ready",WAITING:"waiting"},Yg=(0,Y.P1)([function(e){var t;return null==(t=e.dailyRewards)?void 0:t.rewards}],(function(e){return e})),zg=(0,Y.P1)([function(e){var t;return null==(t=e.dailyRewards)?void 0:t.isRequesting}],(function(e){return e})),Wg=GameCore.Configs.DailyRewards,Hg=function(e){return function(t){var n,i=window.game.player.getCustomData("dailyRewarded")||{},a=i.logDays,s=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,l=new Date,h=new Date(c),u=new Date(h.toDateString()),d=Math.abs(l.valueOf()-u.valueOf()),p=Math.floor(d/864e5)>1,f=Wg.CheckInterrupt&&p||s.length>=Wg.MaxDays,g=f?[!1]:y()(n=[]).call(n,s,[!1]);Kg(g);var m=de()(e).call(e,(function(e,t){var n=t<g.length,i=g.length===t+1,a=!1===g[t],s=Ug.WAITING;return i?s=Ug.READY:f?s=Ug.WAITING:n&&a?s=Ug.SKIPPED:n&&(s=Ug.REWARDED),(0,r.Z)({},e,{status:s})}));t({type:zi,payload:{rewards:m}})}},Kg=function(e,t){void 0===t&&(t=!1),window.game.player.setCustomData("dailyRewarded",{logDays:e,lastRewarded:t?0:Date.now()})},Vg=rc.Z.DEFAULT,jg=Vg.KEY,Xg=Vg.FRAME,qg=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.blockBg=void 0,i.titleText=void 0,i.iconStatus=void 0,i.glowLight=void 0,i.currencyIcon=void 0,i.currencyText=void 0,i.glowAnimation=void 0,i.scaleAnimation=void 0,i.currencyBackground=void 0,i.payload=n,i.setName("Day: "+n.day),i.drawObjects(),i.setStatus(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setStatus=function(){var e=this.payload,t=e.status,n=e.day,i=Ug.READY,a=Ug.REWARDED,s=Ug.SKIPPED;switch(this.setCurrentIconByDay(n),t){case i:this.setStatusReady(),this.runAnimations();break;case s:this.setStatusSkipped();break;case a:this.setStatusRewarded();break;default:this.setStatusWaiting()}},n.setStatusReady=function(){this.blockBg.setFrame(Xg.DAILY_DAY_BG),this.glowLight.setVisible(!0),Phaser.Display.Align.In.Center(this.glowLight,this.blockBg)},n.setStatusRewarded=function(){this.titleText.setText("OWNED"),this.titleText.setStroke("#93550e",2).setColor("#fee45a"),this.blockBg.setFrame(Xg.DAILY_DAY_BG)},n.setStatusSkipped=function(){this.titleText.setText("SKIPPED"),this.titleText.setStroke("#93550e",2).setColor("#fee45a"),this.currencyIcon.setPipeline("Grayscale"),this.blockBg.setFrame(Xg.DAILY_DAY_BG)},n.setStatusWaiting=function(){this.blockBg.setFrame(Xg.DAILY_DAY_BG)},n.setCurrentIconByDay=function(e){var t=Xg.DAILY_DAY_COIN_DAY_1;switch(e){case 1:t=Xg.DAILY_DAY_COIN_DAY_1,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(38,31);break;case 2:t=Xg.DAILY_DAY_COIN_DAY_2,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(32,32);break;case 3:t=Xg.DAILY_DAY_COIN_DAY_3,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(58,38);break;case 4:t=Xg.DAILY_DAY_COIN_DAY_4,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(47,54);break;case 5:t=Xg.DAILY_DAY_COIN_DAY_5,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(55,57);break;case 6:t=Xg.DAILY_DAY_COIN_DAY_6,this.currencyIcon.setFrame(t),this.currencyIcon.setWorldSize(50,50)}},n.drawObjects=function(){this.createGlowLight(),this.createBlockBG(),this.createTitleText(),this.createCurrencyIcon(),this.createCurrencyBackground(),this.createCurrencyText(),this.createIconStatus()},n.createGlowLight=function(){var e=rc.Z.EFFECTS,t=e.KEY,n=e.FRAME;this.glowLight=this.scene.make.image({key:t,frame:n.FX_GLOW_LIGHT}),this.glowLight.setVisible(!1),this.glowLight.setWorldSize(160,160),this.add(this.glowLight)},n.createBlockBG=function(){this.blockBg=this.scene.make.image({key:jg,frame:Xg.DAILY_DAY_BG}),this.blockBg.setWorldSize(84,97),this.add(this.blockBg)},n.createTitleText=function(){var e=this.payload.day;this.titleText=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:.5,y:.5},text:"DAY "+e}),this.titleText.setHighQuality(),this.titleText.setFontSize(this.scene.fontSize(14)),this.titleText.setStroke("#2155eb",2),this.add(this.titleText),Phaser.Display.Align.In.TopCenter(this.titleText,this.blockBg,0,-5)},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.make.image({key:jg,frame:Xg.DAILY_DAY_COIN_DAY_1}),this.currencyIcon.setWorldSize(32,30.5),this.add(this.currencyIcon),Phaser.Display.Align.In.Center(this.currencyIcon,this.blockBg,0,-3)},n.createIconStatus=function(){this.iconStatus=this.scene.make.image({key:jg,frame:Xg.ICON_DOT}),this.iconStatus.setVisible(!1),this.iconStatus.setWorldSize(10,11),this.add(this.iconStatus),Phaser.Display.Align.In.Center(this.iconStatus,this.currencyIcon,20,10)},n.createCurrencyText=function(){var e=this.payload.value;this.currencyText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:""+e,origin:{x:.5,y:.5}}),this.add(this.currencyText),Phaser.Display.Align.In.Center(this.currencyText,this.currencyBackground,0,2)},n.createCurrencyBackground=function(){this.currencyBackground=this.scene.make.image({key:jg,frame:Xg.DAILY_BG_VALUE}),this.currencyBackground.setWorldSize(60,20),this.add(this.currencyBackground),Phaser.Display.Align.In.BottomCenter(this.currencyBackground,this.blockBg,0,-8)},n.runAnimations=function(){this.runGlowAnimation(),this.runScaleAnimation()},n.runGlowAnimation=function(){this.glowAnimation||(this.glowAnimation=new tf.Z({targets:[this.glowLight],repeat:-1,duration:6e3})),this.glowAnimation.play()},n.runScaleAnimation=function(){var e=this;this.scaleAnimation||(this.scaleAnimation=new _h.Z({targets:[this],delay:1e3,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.2},onStart:function(){var t;null==(t=e.parentContainer)||t.bringToTop(e)}})),this.scaleAnimation.play()},t}(Phaser.GameObjects.Container),Qg=qg,Jg=rc.Z.DEFAULT,$g=Jg.KEY,em=Jg.FRAME,tm=GameCore.Configs.DailyRewards,nm={id:0,type:"diamond",value:0},im=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).onReward=void 0,s.logDays=void 0,s.rewardsData=void 0,s.popup=void 0,s.loading=void 0,s.dayBlocks=void 0,s.currentDayBlocks=void 0,s.claimButton=void 0,s.claimButton2X=void 0,s.backgroundFadeInAnimation=void 0,s.popupShowUpAnimation=void 0,s.popupExitsAnimation=void 0,s.contentShowUpAnimation=void 0,s.adsTimer=void 0,s.handleClosePopup=function(){s.runCloseAnimation()},s.handleOnClaim=function(){var e=s.getCurrentRewardValue();s.claimReward(e)},s.handleOnClaimX2=(0,o.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.claimButton.setDisabled(!0),s.claimButton2X.setDisabled(!0),t=!1,!(s.scene instanceof jy)){e.next=7;break}return e.next=6,s.scene.showRewardedVideoAsync();case 6:t=e.sent;case 7:t&&(n=s.getCurrentRewardValue(),s.claimReward(2*n)),s.claimButton.setDisabled(!1),s.claimButton2X.setDisabled(!1);case 10:case"end":return e.stop()}}),e)}))),s.updateRewardsData=(0,o.Z)(h().mark((function e(){var t,n,i,a,r,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.scene,i=n.storage,a=n.player,e.next=3,i.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!zg(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Yi,payload:{}}),e.next=7,Zg();case 7:a=e.sent,t(Hg(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:if(r=i.getState(),!((null==(c=Yg(r)||[])?void 0:c.length)<1)){e.next=7;break}return e.abrupt("return");case 7:s.rewardsData=c,l=a.getCustomData("dailyRewarded"),u=(l||{}).logDays,d=void 0===u?[]:u,s.logDays=y()(t=[]).call(t,d);case 11:case"end":return e.stop()}}),e)}))),s.checkOpenable=(0,o.Z)(h().mark((function e(){var t,n,i,a,r,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.player,n=t.getCustomData("dailyRewarded"),a=(i=n||{}).logDays,r=void 0===a?[]:a,o=i.lastRewarded,c=void 0===o?0:o,!(r.length>tm.MaxDays)){e.next=5;break}return e.abrupt("return",!0);case 5:if(!(tm.MockTime>0)){e.next=9;break}if(!(Date.now()-c>=1e3*tm.MockTime)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(0,Ee.Gm)(c)){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),s.rewardsData=[],s.createPopup(),s.createCloseButton(),s.createPopupContents(),s.setDepth(qa.Ks.POPUP),s.background.setAlpha(.8),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,o.Z)(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(n||{}).readonly,a=void 0!==i&&i,t.next=3,this.checkOpenable();case 3:if(t.sent||a){t.next=6;break}return t.abrupt("return");case 6:return e.prototype.open.call(this),a&&(this.claimButton.setDisabled(!0),this.claimButton2X.setDisabled(!0)),t.next=10,this.updateRewardsData();case 10:this.createDayBlocks(),this.runOpenAnimation();case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.claimReward=function(e){var t,n;if("function"===typeof this.onReward&&!((null==(t=this.logDays)?void 0:t.length)<1)&&!this.logDays[this.logDays.length-1]){this.logDays[this.logDays.length-1]=!0,Kg(y()(n=[]).call(n,this.logDays));var i=this.currentDayBlocks.getWorldPosition().x,a=this.currentDayBlocks.getWorldPosition().y;this.scene.events.emit("claim-reward",{x:i,y:a},e),this.onReward(e),this.scene.audio.playSound(Qa.Z.DAILY_REWARD),this.runCloseAnimation()}},n.getCurrentRewardValue=function(){var e,t=Qu()(e=this.rewardsData).call(e,(function(e){return e.status===Ug.READY}));return(null==t?void 0:t.value)||0},n.getRewardByDay=function(e){var t;return Qu()(t=this.rewardsData).call(t,(function(t){return t.id===e}))||nm},n.runOpenAnimation=function(){this.setVisible(!0),this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runBackgroundEntrancesAnimation(0,300),this.runPopupEntrancesAnimation(150,400),this.runPopupContentEntrancesAnimation(300,300)},n.runCloseAnimation=function(){this.scene.audio.playSound(Qa.Z.POPUP_OFF),this.runPopupExitsAnimation(0,200)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new rh.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{getStart:function(){return 0},getEnd:function(){return.8}}}})),this.backgroundFadeInAnimation.play()},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new Ic({targets:[this.popup],delay:e,duration:t,props:{y:{from:250,to:-45},scale:{start:0,from:0,to:1},alpha:{start:1,from:1,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n,i=this.dayBlocks.getChildren();i.length<1||(null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.Z({targets:i,duration:t,delay:this.scene.tweens.stagger(150,{start:e}),props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play())},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupExitsAnimation||(this.popupExitsAnimation=new oh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.scene.screen.close(n.name)}})),this.dayBlocks.destroy(!0,!0),this.popupExitsAnimation.play()},n.createCloseButton=function(){var e=new Sh.Z(this.scene,{key:$g,frame:em.BUTTON_CLOSE,width:23,height:23,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClosePopup,Phaser.Display.Align.In.TopRight(e,this.popup,5,5)},n.createPopup=function(){this.popup=new Ih(this.scene,0,0,329,312);var e=this.scene.make.image({key:$g,frame:em.POPUP_DAILY_REWARDS});e.setWorldSize(316,260),this.popup.add(e),this.add(this.popup),Phaser.Display.Align.In.BottomCenter(e,this.popup,0,-8)},n.createPopupContents=function(){this.createTitle(),this.createLoading(),this.createClaimButton(),this.createClaimX2Button()},n.createTitle=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:.5,y:.5},text:"Daily Rewards"});e.setHighQuality(),e.setFontSize(this.scene.fontSize(26)),e.setStroke("#1d52eb",3),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-5)},n.createLoading=function(){this.loading=new Gg.Z(this.scene),this.loading.setVisible(!1),this.loading.setTint(12237498),this.popup.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.popup)},n.createDayBlocks=function(){var e,t,n=this;null==(e=this.dayBlocks)||e.destroy(!0,!0);var i=tm.MaxDays;this.dayBlocks=this.scene.make.group({maxSize:i}),Ds()(t=new Array(i)).call(t,null).forEach((function(e,t){var i=n.createDayBlock(t+1);n.dayBlocks.add(i)})),Phaser.Actions.GridAlign(this.dayBlocks.getChildren(),{width:3,height:2,cellWidth:100,cellHeight:120,x:-50,y:20})},n.createDayBlock=function(e){var t=this.getRewardByDay(e),n=t.type,i=t.value,a=t.status,s=void 0===a?"":a,r=new Qg(this.scene,{day:e,type:n,value:i,status:s});return r.setAlpha(0),this.popup.add(r),s===Ug.READY&&(this.currentDayBlocks=r),r},n.createClaimButton=function(){this.claimButton=new sc.Z(this.scene,$g,em.BUTTON_BLUE_100X50,100,50),this.claimButton.setName("Claim");var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:.5,y:.5},text:"Claim"});e.setHighQuality(),e.setFontSize(this.scene.fontSize(20)),e.setStroke("#2155eb",2),this.claimButton.add(e),Phaser.Display.Align.In.Center(e,this.claimButton),this.popup.add(this.claimButton),Phaser.Display.Align.To.BottomRight(this.claimButton,this.popup,-35,15),this.claimButton.onClick=this.handleOnClaim},n.createClaimX2Button=function(){this.claimButton2X=new sc.Z(this.scene,$g,em.BUTTON_GREEN_134X50,134,50),this.claimButton2X.setName("ClaimX2");var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:0,y:.5},text:"Claim X2"});e.setHighQuality(),e.setFontSize(this.scene.fontSize(16)),e.setStroke("#3ea915",2);var t=this.scene.make.image({key:$g,frame:em.ICON_ADS_VIDEO});t.setWorldSize(36,28),Phaser.Display.Align.In.Center(t,this.claimButton2X,-34),Phaser.Display.Align.In.Center(e,this.claimButton2X,19,0),this.claimButton2X.add([e,t]),this.popup.add(this.claimButton2X),Phaser.Display.Align.To.BottomLeft(this.claimButton2X,this.popup,-35,15),this.claimButton2X.onClick=this.handleOnClaimX2},t}(GameCore.Screen),am=im,sm=n(560),rm=rc.Z.DEFAULT,om=rm.KEY,cm=rm.FRAME,lm=function(e){function t(t){var n;return(n=e.call(this,t,om,cm.BUTTON_BLUE_84X36)||this).setName("Tournaments"),n.button.setWorldSize(84,36),n.createText(),n}return(0,c.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.55},text:"JOIN\nGLOBAL"});e.setAlign("center"),e.setHighQuality(),e.setPosition(0,0),e.setStroke("#2155eb",2),e.setFontSize(this.scene.fontSize(11)),e.setLineSpacing(-2),this.add(e)},t}(sc.Z),hm=lm,um=rc.Z.DEFAULT,dm=um.KEY,pm=um.FRAME,fm=function(e){function t(t){var n;return(n=e.call(this,t,dm,pm.BUTTON_PURPLE_84X36)||this).setName("Invite"),n.button.setWorldSize(84,36),n.createText(),n}return(0,c.Z)(t,e),t.prototype.createText=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.55},text:"INVITE\nFRIENDS"});e.setAlign("center"),e.setHighQuality(),e.setPosition(0,0),e.setStroke("#ab1fe9",2),e.setFontSize(this.scene.fontSize(11)),e.setLineSpacing(-2),this.add(e)},t}(sc.Z),gm=fm,mm=rc.Z.DEFAULT,vm=mm.KEY,ym=mm.FRAME,Sm=function(e){function t(t){var n;return(n=e.call(this,t,vm,ym.BUTTON_PLUS)||this).setName("InviteButton"),n.button.setWorldSize(29,30),n}return(0,c.Z)(t,e),t}(sc.Z),Em=Sm,bm=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,za.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,c.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(ma.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,ma.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Gg.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-6;this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background,0,-1)},t}(Phaser.GameObjects.Container),Am=bm,wm=rc.Z.DEFAULT,Tm=wm.KEY,Pm=wm.FRAME,Cm=function(e){function t(t,n,i){var a;return void 0===n&&(n=37),void 0===i&&(i=37),(a=e.call(this,t,{key:Tm,background:Pm.AVATAR_DASHBOARD,width:n,height:i,loadDelay:100})||this).scene.add.existing((0,za.Z)(a)),a}return(0,c.Z)(t,e),t.prototype.loadPhoto=function(t,n,i){void 0===i&&(i=100),n&&(t===this.payload.id&&n===this.payload.url||e.prototype.loadPhoto.call(this,t,n,i))},t}(Am),Im=Cm,xm=rc.Z.DEFAULT,Bm=xm.KEY,km=xm.FRAME,Rm=function(e){function t(t,n,i){var a;return(a=e.call(this,t,Bm,km.AVATAR_DASHBOARD)||this).playerId=void 0,a.playerPhoto=void 0,a.avatar=void 0,a.handleChallengeFriend=function(){a.scene.storage.dispatch(Ho(a.playerId))},a.setName("Invite"),a.button.setWorldSize(36,36),a.button.setAlpha(0),a.playerId=n,a.playerPhoto=i,a.createAvatar(),a}(0,c.Z)(t,e);var n=t.prototype;return n.createAvatar=function(){var e=new Im(this.scene);e.loadPhoto(this.playerId,this.playerPhoto),this.add(e),this.avatar=e},n.updatePayload=function(e,t){this.playerId=e,this.playerPhoto=t,this.avatar.loadPhoto(this.playerId,this.playerPhoto)},t}(sc.Z),Om=Rm,_m=rc.Z.DEFAULT,Dm=_m.KEY,Lm=_m.FRAME,Nm=function(e){function t(t){var n;return(n=e.call(this,t)||this).inviteButton=void 0,n.missionIcon=void 0,n.joinGlobalButton=void 0,n.plusButton=void 0,n.block=void 0,n.friendBlocks=void 0,n.payload=void 0,n.createBlock(),n.createButtons(),n.createAvatars(),n.alignAvatars(),n.createPlusButton(),n.updateLeaders(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBlock=function(){this.block=this.scene.add.image(0,0,Dm,Lm.DASHBOARD_FOOTER_BLOCK),this.block.setOrigin(.5,.5),this.block.setWorldSize(375,64),this.add(this.block),Phaser.Display.Align.In.BottomCenter(this.block,this,0,-30)},n.alignAvatars=function(){var e=this;this.friendBlocks.forEach((function(t,n){var i=30+42*n;t.setPosition(i,0),Phaser.Display.Align.In.Center(t,e.block,i)}))},n.createButtons=function(){this.createJoinGlobalButton(),this.createInviteButton()},n.createAvatars=function(){this.friendBlocks=[];for(var e=0;e<3;e++){var t=new Om(this.scene,va.playerId,va.photo);this.friendBlocks.push(t),t.onClick=t.handleChallengeFriend,this.add(t)}},n.createJoinGlobalButton=function(){this.joinGlobalButton=new hm(this.scene),this.add(this.joinGlobalButton),Phaser.Display.Align.In.Center(this.joinGlobalButton,this.block,-126)},n.createInviteButton=function(){this.inviteButton=new gm(this.scene),this.add(this.inviteButton),Phaser.Display.Align.In.Center(this.inviteButton,this.block,-36)},n.createPlusButton=function(){this.plusButton=new Em(this.scene),this.add(this.plusButton),Phaser.Display.Align.In.Center(this.plusButton,this.block,155)},n.updateLeaders=function(){var e,t=this;this.friendBlocks.forEach((function(e){return e.kill()}));var n=this.scene.player.getPlayerId(),i=this.scene.player.getConnectedPlayers(),a=Si()(i);if(0!==a.length){var s=st()(e=he()(a).call(a,(function(e){return e.playerId!==n}))).call(e,0,3);s.forEach((function(e,n){t.friendBlocks[n].revive(),t.friendBlocks[n].updatePayload(e.playerId,e.photo)}))}},t}(Phaser.GameObjects.Container),Mm=Nm,Gm={segmentCount:8,segments:[{id:1,rewardType:"coin",text:"500",value:500},{id:2,rewardType:"miss",text:"Miss",value:0},{id:3,rewardType:"coin",text:"3000",value:3e3},{id:4,rewardType:"spin",text:"+1 spin",value:1},{id:5,rewardType:"coin",text:"1000",value:1e3},{id:6,rewardType:"miss",text:"Miss",value:0},{id:7,rewardType:"spin",text:"+2 spin",value:2},{id:8,rewardType:"coin",text:"2000",value:2e3}]},Fm=function(e){return function(){var t=(0,o.Z)(h().mark((function t(n){var i,a,s,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=window.game.player,a=i.getCustomData("luckySpin"),s=(a||{}).spin,r=(void 0===s?0:s)+e,i.setCustomData("luckySpin",{spin:r}),n({type:Vi,payload:{spin:r}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Zm=(0,Y.P1)([function(e){var t;return(null==(t=e.luckySpin)?void 0:t.spin)||0}],(function(e){return e})),Um=rc.Z.DEFAULT,Ym=Um.KEY,zm=Um.FRAME,Wm=GameCore.Configs.LuckySpin,Hm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).openAnimation=void 0,s.closeAnimation=void 0,s.pulsateSpinTextAnimation=void 0,s.canSpin=void 0,s.wheel=void 0,s.popupContainer=void 0,s.luckySpinData=void 0,s.prize=void 0,s.spinButton=void 0,s.freeSpinButton=void 0,s.adsRewardSpinButton=void 0,s.spinText=void 0,s.spin=void 0,s.closeScreen=function(){s.runCloseAnimation()},s.handleSpin=function(){var e=s.luckySpinData.segmentCount,t=360/e;if(s.canSpin){s.canSpin=!1,s.decreaseSpin();var n=Phaser.Math.Between(4,5),i=Phaser.Math.Between(0,360),a=i-Math.round(i/t)*t;Math.abs(a)<10&&(a<0?i-=10:i+=10),s.prize=e-1-Math.floor(i/(360/e)),s.processPrize(),s.scene.tweens.add({targets:[s.wheel],angle:360*n+i,duration:4e3,ease:"Cubic.easeOut",callbackScope:(0,za.Z)(s),onComplete:function(){s.canSpin=!0;var e=s.luckySpinData.segments[s.prize];if("coin"===e.rewardType){var t=s.spinButton.getWorldPosition(),n=t.x,i=t.y;s.scene.events.emit("claim-reward",{x:n,y:i},e.value)}else"spin"===e.rewardType&&s.updateSpin()}})}},s.handleViewAdsRewardSpin=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.adsRewardSpinButton.setDisabled(!0),t=s.scene,e.next=4,t.showRewardedVideoAsync();case 4:e.sent&&s.increaseSpin(1),s.adsRewardSpinButton.setDisabled(!1);case 7:case"end":return e.stop()}}),e)}))),s.handleRewardSpin=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.player.setCustomData("luckySpin",{lastRewarded:Date.now()}),s.increaseSpin(1),s.showAdsRewardButton();case 3:case"end":return e.stop()}}),e)}))),s.luckySpinData=Gm,s.createPopup(),s.createTitle(),s.createCloseButton(),s.createLuckySpin(),s.createSpinButton(),s.createSpinCountText(),s.createFreeSpinButton(),s.createAdsRewardSpinButton(),s.freeSpinButton.kill(),s.createDebugTools(),s.setDepth(qa.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.canReceiveFreeSpin()&&(this.freeSpinButton.revive(),this.adsRewardSpinButton.kill()),this.scene.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=window.game.player,i=n.getCustomData("luckySpin"),s=(a=i||{}).spin,r=void 0===s?0:s,o=a.lastRewarded,t({type:Ki,payload:{spin:r,lastRewarded:void 0===o?0:o}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.updateSpin(),this.runOpenAnimation()},n.canReceiveFreeSpin=function(){var e=(this.scene.player.getCustomData("luckySpin")||{}).lastRewarded,t=void 0===e?0:e;if(Wm.MockTime>0&&Date.now()-t>=1e3*Wm.MockTime)return!0;return!(0,Ee.Gm)(t)},n.updateSpin=function(){var e=this.scene.storage.getState(),t=Zm(e);this.spin=t,this.spinText.setText("x"+this.spin),0==this.spin?this.spinButton.setDisabled(!0):this.spinButton.setDisabled(!1),this.pulsateSpinTextAnimation=new vc({targets:[this.spinText]}),this.pulsateSpinTextAnimation.play()},n.increaseSpin=function(e){this.scene.storage.dispatch(Fm(e)),this.updateSpin()},n.decreaseSpin=function(){this.scene.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=window.game.player,i=n.getCustomData("luckySpin"),a=(i||{}).spin,r=(s=void 0===a?0:a)>0?s-1:0,n.setCustomData("luckySpin",{spin:r}),t({type:Vi,payload:{spin:r}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.updateSpin()},n.processPrize=function(){var e=this.luckySpinData.segments[this.prize];if("coin"===e.rewardType){var t=this.scene.player.getCustomData("coin")+e.value;this.scene.player.setCustomData("coin",t)}else"spin"===e.rewardType&&this.scene.storage.dispatch(Fm(e.value))},n.createPopup=function(){this.popupContainer=this.scene.make.container({}),this.add(this.popupContainer),this.canSpin=!0,Phaser.Display.Align.In.Center(this.popupContainer,this.zone,0,-20)},n.createTitle=function(){var e=this.scene.make.image({key:Ym,frame:zm.TEXT_LUCKY_SPIN});e.setOrigin(.5,.5),e.setWorldSize(184,30),this.popupContainer.add(e),Phaser.Display.Align.In.Center(e,this.popupContainer,0,-200)},n.createCloseButton=function(){var e=new sc.Z(this.scene,Ym,zm.BUTTON_CLOSE,23,23);e.setName("Close"),this.popupContainer.add(e),Phaser.Display.Align.In.Center(e,this.popupContainer,130,-160),e.onClick=this.closeScreen},n.createLuckySpin=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:Ym,frame:zm.LUCKY_SPIN_BACKGROUND}),n=this.scene.make.image({key:Ym,frame:zm.LUCKY_SPIN_WHEEL});n.setOrigin(.5,.5),n.setWorldSize(255,255),t.setWorldSize(297,297);var i=this.scene.make.image({key:Ym,frame:zm.LUCKY_SPIN_FOREGROUND});i.setWorldSize(275,278),e.add([t,n,i]),this.popupContainer.add(e),Phaser.Display.Align.In.Center(e,this.popupContainer),this.wheel=n},n.createSpinButton=function(){var e=new sc.Z(this.scene,Ym,zm.LUCKY_SPIN_SPIN,84,84);e.setName("Spin");var t=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#ffffff"},origin:{x:.5,y:.5},text:"Spin"});t.setHighQuality(),t.setFontSize(24),t.setStroke("#93550e",2),t.setAlign("center"),t.setY(-12),e.add(t),this.popupContainer.add(e),e.onClick=this.handleSpin,e.setDisabled(!0),e.setDisabled(!1),Phaser.Display.Align.In.Center(e,this.popupContainer),this.spinButton=e},n.createSpinCountText=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#ffffff"},origin:{x:.5,y:.5},text:"x0"});e.setHighQuality(),e.setFontSize(24),e.setStroke("#93550e",2),e.setAlign("center"),e.setY(15),this.spinButton.add(e),this.spinText=e},n.createAdsRewardSpinButton=function(){this.adsRewardSpinButton=new sc.Z(this.scene,Ym,zm.BUTTON_GREEN_134X50,134,50),this.adsRewardSpinButton.setName("ads-reward-spin");var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:.5,y:.5},text:"+1 spin"});e.setHighQuality(),e.setFontSize(16),e.setStroke("#3ea915",2);var t=this.scene.make.image({key:Ym,frame:zm.ICON_ADS_VIDEO});t.setWorldSize(36,28),Phaser.Display.Align.In.Center(t,this.adsRewardSpinButton,-30),Phaser.Display.Align.In.Center(e,this.adsRewardSpinButton,19,0),this.adsRewardSpinButton.add([e,t]),this.popupContainer.add(this.adsRewardSpinButton),Phaser.Display.Align.In.Center(this.adsRewardSpinButton,this.popupContainer,0,200),this.adsRewardSpinButton.onClick=this.handleViewAdsRewardSpin},n.createFreeSpinButton=function(){this.freeSpinButton=new sc.Z(this.scene,Ym,zm.BUTTON_GREEN_134X50,134,50),this.freeSpinButton.setName("free-spin");var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fff"},origin:{x:.5,y:.5},text:"Free spin"});e.setHighQuality(),e.setFontSize(20),e.setStroke("#3ea915",2),this.freeSpinButton.add([e]),this.popupContainer.add(this.freeSpinButton),Phaser.Display.Align.In.Center(this.freeSpinButton,this.popupContainer,0,200),this.freeSpinButton.onClick=this.handleRewardSpin},n.showAdsRewardButton=function(){this.freeSpinButton.kill(),this.adsRewardSpinButton.revive(),this.adsRewardSpinButton.setScale(0),this.scene.tweens.add({targets:[this.adsRewardSpinButton],duration:500,scale:{from:0,to:1}})},n.runOpenAnimation=function(){if(!this.openAnimation){var e=this.popupContainer,t=e.y,n=e.scale;this.openAnimation=new Ic({targets:[this.popupContainer],duration:400,props:{y:{from:350,to:t},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.openAnimation.play()},n.runCloseAnimation=function(){var e=this;this.closeAnimation||(this.closeAnimation=new oh.Z({targets:[this.popupContainer],duration:400,props:{y:250,scale:0},onComplete:function(){e.popupContainer.setY(0),e.scene.screen.close(e.name)}})),this.closeAnimation.play()},n.createDebugTools=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new sc.Z(this.scene,Ym,zm.BUTTON_PLUS_SMALL);t.button.setWorldSize(21,23),t.setName("Reset"),t.onClick=function(){e.increaseSpin(1)},this.add(t),Phaser.Display.Align.In.BottomLeft(t,this.zone,-30,-100)}},t}(GameCore.Screen),Km=Hm,Vm=rc.Z.DEFAULT,jm=Vm.KEY,Xm=Vm.FRAME,qm=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.settingMusic=void 0,s.settingVibrate=void 0,s.blockMusic=void 0,s.blockVibrate=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic(),s.scene.player.setSetting("sound",e)},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){s.scene.player.setSetting("vibrate",e),e&&Nl(350)},s.createPopup(),s.createCloseButton(),s.createTitle(),s.createButtons(),s.addItem(),s.createInput(),s.setDepth(qa.Ks.POPUP),s.background.setAlpha(.6),s}(0,c.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=t.vibrate;this.settingMusic.updateStatus(n),this.settingVibrate.updateStatus(i),_l()||(this.blockVibrate.kill(),this.blockMusic.setPosition(0,-5)),this.runOpenAnimation()},n.createInput=function(){this.settingMusic.onClick=this.handleMusicSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createCloseButton=function(){var e=new Sh.Z(this.scene,{key:jm,frame:Xm.BUTTON_CLOSE,width:23,height:23,paddingZone:20});this.popup.add(e),e.setName("Close"),e.useSound=!1,e.onClick=this.handleClose,Phaser.Display.Align.In.TopRight(e,this.popup,5,5)},n.createPopup=function(){this.popup=new Ih(this.scene,0,0,212,167);var e=this.scene.make.image({key:jm,frame:Xm.POPUP_SETTING_DASHBOARD});e.setWorldSize(196,119),this.popup.add(e),this.add(this.popup),Phaser.Display.Align.In.BottomCenter(e,this.popup,0,-8),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=1/this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rc.Z.TEXTS.KEY,frame:this.scene.lang.Texture.settings});t.setPosition(0,0),t.setScale(.9*e),this.title.add(t),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.music,n=e.vibrate;this.createMusicButton(t),this.createVibrateButton(n)},n.createMusicButton=function(e){this.blockMusic=this.scene.make.container({}),this.settingMusic=new Ah(this.scene,{enable:e,frameOn:Xm.SWITCH_ON,frameOff:Xm.SWITCH_OFF,framePanelOn:Xm.SWITCH_PANEL_ON,framePanelOff:Xm.SWITCH_PANEL_OFF}),this.settingMusic.setName("Music"),this.settingMusic.setPosition(27,20),this.settingMusic.icon.setWorldSize(26,26);var t=this.scene.make.image({key:jm,frame:Xm.ICON_SOUND});t.setPosition(-45,20),t.setWorldSize(31,28),this.blockMusic.add([t,this.settingMusic]),this.popup.add(this.blockMusic),this.blockMusic.setPosition(0,-30)},n.createVibrateButton=function(e){this.blockVibrate=this.scene.make.container({}),this.settingVibrate=new Ah(this.scene,{enable:e,frameOn:Xm.SWITCH_ON,frameOff:Xm.SWITCH_OFF,framePanelOn:Xm.SWITCH_PANEL_ON,framePanelOff:Xm.SWITCH_PANEL_OFF}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.setPosition(27,-20),this.settingVibrate.icon.setWorldSize(26,26);var t=this.scene.make.image({key:jm,frame:Xm.ICON_VIBRATE});t.setPosition(-45,-20),t.setWorldSize(29,35),this.blockVibrate.add([t,this.settingVibrate]),this.blockVibrate.setPosition(0,60)},n.addItem=function(){this.popup.add([this.title,this.blockMusic,this.blockVibrate]),this.contents=this.scene.add.group(),this.contents.addMultiple([this.blockMusic,this.blockVibrate])},n.runOpenAnimation=function(){var e,t;null!=(e=this.popupShowUpAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Qa.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,400),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t;null!=(e=this.popupFadeOutAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(this.scene.audio.playSound(Qa.Z.POPUP_OFF),this.runPopupExitsAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new Ic({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new oh.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},t}(GameCore.Screen),Qm=qm,Jm=GameCore.Configs.LeadersBoard,$m=function(e){function t(t,n){var i,a=t.gameZone,s=a.width,r=a.height;return(i=e.call(this,t,n,s,r)||this).scene=void 0,i.main=void 0,i.header=void 0,i.footer=void 0,i.rewardScreen=void 0,i.dailyMissionScreen=void 0,i.dailyRewardsScreen=void 0,i.currentCoins=void 0,i.timerDailyRewards=void 0,i.coinsExplosive2=void 0,i.coinsExplosiveTimer=void 0,i.opened=void 0,i.openAnim=void 0,i.closeAnim=void 0,i.open=function(){e.prototype.open.call((0,za.Z)(i)),i.opened=!0,i.runOpenAnimation(),i.run()},i.close=function(){i.opened=!1,i.runCloseAnimation()},i.run=function(){var e;i.currentCoins=0,i.main.playSingleButton.runAnimation(),i.main.runLogoAnimation(),i.updateCurrentBestScore(),i.updateCurrentCoins(),null==(e=i.timerDailyRewards)||e.remove(),i.scene.storage.dispatch(zf(Jm.LeaderboardId,ns,10,0)),i.scene.facebook.attemptToAddShortcut()},i.eatCoins=function(e){var t=i.currentCoins+e;i.scene.player.setCustomData("coin",t)},i.handlePlayOnline=function(){i.scene.storage.dispatch(qo())},i.handlePlaySingle=function(){i.scene.storage.dispatch(Wo())},i.handlePlayWithFriend=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.scene.storage.dispatch(No(!0));case 2:return e.next=4,i.scene.storage.dispatch(Ko());case 4:return e.next=6,i.scene.storage.dispatch(No(!1));case 6:case"end":return e.stop()}}),e)}))),i.handleSettingClick=function(){i.scene.screen.open(qa.o4.SETTINGS_SCREEN)},i.handleMatchingGroup=(0,o.Z)(h().mark((function e(){var t,n,a,s,r,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.scene,n=t.player,a=t.storage,s=t.game,r=t.facebook,e.prev=1,s.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"Matching...",loading:!0}),o=n.getPlayer(),c="global","en"===(l=ac(o.locale))&&(c="en"),"in"===l&&(c="in"),e.next=10,r.matchPlayerAsync(c,!0,!0);case 10:if(u=e.sent,s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),u){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(jo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),i.handleInviteIconClick=function(){var e=i.scene.storage.getState();Ta(e)===ba?i.scene.storage.dispatch(ic()):i.scene.storage.dispatch(nc())},i.handleLuckyScreen=function(){i.scene.screen.open(qa.o4.LUCKY_SPIN_SCREEN)},i.handleRankButtonClick=function(){i.scene.scene.switch(Ba.C.LEADERBOARD_SCENE)},i.handleDailyIconClick=function(){i.scene.screen.open(qa.o4.DAILY_MISSIONS_SCREEN)},i.scene=t,i.create(),i.setDepth(qa.Ks.POPUP),i.opened=!0,i.background.setAlpha(.4),i.setPosition(0,0),i}(0,c.Z)(t,e);var n=t.prototype;return n.isOpen=function(){return this.opened},n.updateCurrentBestScore=function(){var e=this.scene.player.getBestScore(),t=this.scene.storage.getState(),n=Pr(t).bestScore,i=void 0===n?0:n,a=e>i?e:i;this.header.scoreBar.setValue(a)},n.updateCurrentCoins=function(){var e=this.scene.player.getCoins();this.setCoins(e)},n.create=function(){this.createEffects(),this.createSettingsScreen(),this.createHeaderBar(),this.createMainContent()},n.setCoins=function(e){var t=e<0?0:e;this.currentCoins=t},n.createLuckySpinScreen=function(){this.scene.screen.add(qa.o4.LUCKY_SPIN_SCREEN,Km)},n.createSettingsScreen=function(){this.scene.screen.add(qa.o4.SETTINGS_SCREEN,Qm)},n.createRewardScreen=function(){this.rewardScreen=this.scene.screen.add(qa.o4.REWARD_SCREEN,Nf)},n.createDailyMissionScreen=function(){var e=this;this.dailyMissionScreen=this.scene.screen.add(qa.o4.DAILY_MISSIONS_SCREEN,Mg),this.dailyMissionScreen.onReward=function(t,n){"coin"===t&&e.eatCoins(n)}},n.createDailyRewardsScreen=function(){var e=this;this.dailyRewardsScreen=this.scene.screen.add(qa.o4.DAILY_REWARD_SCREEN,am),this.dailyRewardsScreen.onReward=function(t){e.eatCoins(t)}},n.createHeaderBar=function(){this.header=new gg(this.scene),this.header.setDepth(ja.Z.BUTTON),this.header.rankButton.onClick=this.handleRankButtonClick,this.header.missionsButton.onClick=this.handleDailyIconClick,this.header.settingIcon.onClick=this.handleSettingClick,this.header.luckySpinIcon.onClick=this.handleLuckyScreen,this.add(this.header),Phaser.Display.Align.In.TopCenter(this.header,this,0,-15)},n.createMainContent=function(){this.main=new ig(this.scene),this.main.setDepth(ja.Z.LOGO),this.main.playSingleButton.onClick=this.handlePlaySingle,this.main.playWithFriendsButton.onClick=this.handlePlayWithFriend,this.add(this.main),Phaser.Display.Align.In.Center(this.main,this,0)},n.createFooterBar=function(){this.footer=new Mm(this.scene),this.footer.setDepth(ja.Z.BUTTON),this.footer.inviteButton.onClick=this.handleInviteIconClick,this.footer.joinGlobalButton.onClick=this.handleMatchingGroup,this.footer.plusButton.onClick=this.handlePlayWithFriend,this.add(this.footer),Phaser.Display.Align.In.BottomCenter(this.footer,this,0,20)},n.createEffects=function(){this.coinsExplosive2=new sm.Z(this.scene),this.coinsExplosive2.setDepth(ja.Z.ON_TOP)},n.runOpenAnimation=function(){var e;this.revive(),!this.openAnim||null!=(e=this.openAnim.tween)&&e.isPlaying()?(this.openAnim=new rh.Z({targets:[this],duration:500}),this.openAnim.play()):this.openAnim.play()},n.runCloseAnimation=function(){var e,t=this;this.closeAnim?null!=(e=this.closeAnim.tween)&&e.isPlaying()||this.closeAnim.play():(this.closeAnim=new oh.Z({targets:[this],duration:300,onComplete:function(){t.kill()}}),this.closeAnim.play())},t}(GameCore.Screen),ev=$m,tv=n(543),nv=function(e){return e.leaderboards},iv=((0,Y.P1)([function(e){return nv(e).leaderboardId}],(function(e){return e})),(0,Y.P1)([function(e){return nv(e).leaders}],(function(e){return e}))),av=(0,Y.P1)([function(e){return nv(e).isRequesting}],(function(e){return e})),sv=rc.Z.GAMEPLAY.TEXTURES_32BIT,rv=sv.KEY,ov=sv.FRAME,cv=function(e){function t(t){var n;return(n=e.call(this,t,rv)||this).setDepth(ja.Z.SHOOTER+1),n.scene.add.existing((0,za.Z)(n)),n}return(0,c.Z)(t,e),t.prototype.createShotGuideEmitter=function(){var e=1/this.scene.world.getPixelRatio(),t={on:!1,frame:[ov.PARTICLE_SHOT_GUIDE],speed:20,gravityY:-200,frequency:80,alpha:{start:1,end:.2},scale:{start:.6*e,end:.3*e},lifespan:{min:350,max:500}};return this.createEmitter(t)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),lv=cv,hv=function(e){function t(t){var n,i=t.scene,a=t.x,s=t.y,r=t.width,o=void 0===r?0:r,c=t.height,l=void 0===c?0:c;return(n=e.call(this,i,a,s)||this).color=void 0,n.score=0,n.hole=void 0,n.lightAnimation=void 0,n.setSize(o,l),n.createObjects(),n.createLightAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createObjects=function(){var e=this.scene,t=this.width,n=rc.Z.GAMEPLAY.TEXTURES_32BIT,i=n.KEY,a=n.FRAME,s=e.make.image({key:i,frame:a.BLANK,x:t/2});s.setWorldSize(64,24),this.add([s]),this.hole=s,this.hole.kill()},n.createLightAnimation=function(){var e=rc.Z.GAMEPLAY.TEXTURES,t=e.KEY,n=e.FRAME;this.lightAnimation=this.scene.add.sprite(0,-10,t,n.GREY_LIGHT+"00"),this.lightAnimation.setWorldSize(66.5,116.5),this.add(this.lightAnimation)},n.playLightAnimation=function(){this.lightAnimation.setTint(this.color),this.lightAnimation.play("hole-light")},n.setColor=function(e){var t=rc.Z.GAMEPLAY.TEXTURES_32BIT.FRAME;switch(this.color=e,e){case zc.Green:case zc.Orange:case zc.Purple:this.hole.setFrame(t.BLANK)}this.hole.setWorldSize(64,24),this.playLightAnimation()},n.setScore=function(e,t){this.score=e},n.getScore=function(){return this.score},t}(Phaser.GameObjects.Container),uv=hv,dv=rc.Z.GAMEPLAY.TEXTURES,pv=dv.KEY,fv=dv.FRAME,gv=function(e){function t(t){var n,i=t.scene,a=t.x,s=void 0===a?0:a,r=t.y,o=void 0===r?0:r;(n=e.call(this,i,s,o)||this).separatorGroup=void 0,n.collectingHoles=void 0,n.bgHide=void 0;var c=i.gameZone.width;return n.collectingHoles=[],n.setSize(c,100),n.createCollectingBallHole(),n.setStyle2(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createCollectingBallHole=function(){var e=this,t=(this.scene.gameZone.width-375)/2,n=[t+50,75+t+37.5,150+t+37.5,225+t+37.5,300+t+25],i=[50,100,250,100,50];[75,75,75,75,75].forEach((function(t,a){var s=GameCore.Utils.Number.toPerspectivePoint(n[a],e.scene.gameZone.height).x,r=new uv({scene:e.scene,width:t,height:40,x:s,y:0});r.setScore(i[a]),e.collectingHoles.push(r)})),this.add(this.collectingHoles),this.processCombosChanged(0)},n.setStyle1=function(){this.collectingHoles[0].setColor(zc.Green),this.collectingHoles[1].setColor(zc.Purple),this.collectingHoles[1].setY(4),this.collectingHoles[2].setColor(zc.Orange),this.collectingHoles[2].setY(8),this.collectingHoles[3].setColor(zc.Purple),this.collectingHoles[3].setY(4),this.collectingHoles[4].setColor(zc.Green)},n.setStyle2=function(){this.collectingHoles[0].setColor(zc.Green),this.collectingHoles[1].setColor(zc.Purple),this.collectingHoles[1].setY(0),this.collectingHoles[2].setColor(zc.Orange),this.collectingHoles[2].setY(0),this.collectingHoles[3].setColor(zc.Purple),this.collectingHoles[3].setY(0),this.collectingHoles[4].setColor(zc.Green)},n.createSeparator=function(){var e=this,t=this.scene.physics.add.group({immovable:!0});[72,147,220,295].forEach((function(n){var i=e.scene.physics.add.image(n,0,pv,fv.BLANK);i.setWorldSize(8,40);var a=i.scaleX,s=i.scaleY;i.setSize(10/a,40/s),i.setOrigin(0,0),t.add(i)})),this.separatorGroup=t,this.add(t.getChildren())},n.createBgHidden=function(){var e=this.scene.registry.get("zones").zones.zone5,t=rc.Z.GAMEPLAY.TEXTURES_32BIT,n=t.KEY,i=t.FRAME;this.bgHide=this.scene.add.image(0,0,n,i.HOLE_BG_HIDE),this.bgHide.setDepth(ja.Z.BG_HOLE),this.bgHide.setWorldSize(375,30),this.bgHide.setPosition(187,e.bottomY-25)},n.processCombosChanged=function(e){if(0===e)this.updateHoleScore([20,30,50,30,20])},n.getHoleByX=function(e){for(var t=[],n=0;n<this.collectingHoles.length-1;n++)t.push((this.collectingHoles[n].x+this.collectingHoles[n+1].x)/2);t.push(999);var i=Ha()(t).call(t,(function(t){return e<t}));return this.collectingHoles[i]},n.updateHoleScore=function(e){this.collectingHoles.forEach((function(t,n){t.setScore(e[n],!0)}))},n.getObjects=function(){return[this,this.bgHide]},t}(Phaser.GameObjects.Container),mv=gv,vv=function(){function e(e){var t=this;this.scene=void 0,this.debugContainer=void 0,this.buttons=void 0,this.initTesting=function(e){var n=rc.Z.DEFAULT,i=n.KEY,a=n.FRAME,s=e.add.container(0,0);t.debugContainer=s,t.createSpeedUpDescendingButton(e,s),t.createSpeedLevelUpButton(e,s),t.createAttachBombButton(),t.createFireBallButton(),t.createHandleLifeLostButton(),t.createSpeedText(),t.createBottomYText(),s.setDepth(ja.Z.BUTTON);var r=new sc.Z(e,i,a.BLANK,25,25);r.onClick=function(){s.setVisible(!s.visible)},r.kill(),Phaser.Display.Align.In.BottomLeft(r,e.gameZone,0,-100)},this.createHandleLifeLostButton=function(){var e=rc.Z.DEFAULT,n=e.KEY,i=e.FRAME,a=new sc.Z(t.scene,n,i.BUTTON_BLUE_84X36,35,20),s=t.scene.make.text({text:"End game",style:{color:"#",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"6px"},origin:{x:.5,y:.5}});s.setTint(16777215).setAlign("center").setHighQuality(),a.add(s),a.onClick=function(){t.scene.stateManager.rescue()},Phaser.Display.Align.In.RightCenter(a,t.scene.layoutManager.objects.header,-60,0),t.debugContainer.add(a),t.buttons.push(a)},this.createSpeedUpDescendingButton=function(e,n){var i=rc.Z.DEFAULT,a=i.KEY,s=i.FRAME,r=new sc.Z(e,a,s.BUTTON_BLUE_84X36,35,20),o=e.make.text({text:"speed up\ndescending",style:{color:"#",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"6px"},origin:{x:.5,y:.5}});o.setTint(16777215).setAlign("center").setHighQuality(),r.add(o);var c=!1;r.setAlpha(.6),r.onClick=function(){c?(e.descentController.setSpeedScale(1),c=!1,r.setAlpha(.6)):(e.descentController.setSpeedScale(8),c=!0,r.setAlpha(1))},Phaser.Display.Align.In.TopCenter(r,e.gameZone,-100,0),n.add(r),t.buttons.push(r)},this.createSpeedLevelUpButton=function(e,n){var i=rc.Z.DEFAULT,a=i.KEY,s=i.FRAME,r=new sc.Z(e,a,s.BUTTON_GREEN_84X36,35,20),o=e.make.text({text:"Speed up\nLevelUp",style:{color:"#",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"6px"},origin:{x:.5,y:.5}});o.setTint(16777215).setAlign("center").setHighQuality(),r.add(o);var c=!1;r.setAlpha(.6),r.onClick=function(){c?(e.levelUpController.setTimeScale(1),c=!1,r.setAlpha(.6)):(e.levelUpController.setTimeScale(4),c=!0,r.setAlpha(1))},Phaser.Display.Align.In.TopCenter(r,e.gameZone,-100,-35),n.add(r),t.buttons.push(r)},this.createSpeedText=function(){var e=t.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:t.scene.fontSize(10),text:"speed: 0",origin:{x:0,y:.5}});e.setDepth(ja.Z.BUTTON),Phaser.Display.Align.In.TopLeft(e,t.scene.gameZone,-10,-60),t.scene.events.on("update",(function(){var n,i,a=Math.round(10*(null==(n=t.scene.descentController)?void 0:n.getSpeed())||0)/10,s=((null==(i=t.scene.descentController)?void 0:i.speedRate)||0).toFixed(2);e.setText("speed: "+a+", "+s)})),t.debugContainer.add(e)},this.createBottomYText=function(){var e=t.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:t.scene.fontSize(10),text:"speed: 0",origin:{x:0,y:.5}});e.setDepth(ja.Z.BUTTON),Phaser.Display.Align.In.TopLeft(e,t.scene.gameZone,-10,-70),t.scene.events.on("update",(function(){var n=Math.round(t.scene.grid.bottomY||0);e.setText("bottom Y: "+n)})),t.debugContainer.add(e)},this.scene=e,this.buttons=[],this.initTesting(e);for(var n=0;n<this.buttons.length;n++)this.buttons[this.buttons.length-n-1].setPosition(30,100+30*n)}e.config=function(t){GameCore.Utils.Valid.isDebugger()&&(window.generalManager=new e(t))};var t=e.prototype;return t.createAttachBombButton=function(){var e=this,t=this.scene,n=rc.Z.GAMEPLAY.TEXTURES_32BIT,i=n.KEY,a=n.FRAME,s=new sc.Z(t,i,a.BOMB,28*.8,32);t.make.text({text:"",style:{color:"#",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"6px"},origin:{x:.5,y:.5}}).setTint(16777215).setAlign("center").setHighQuality(),s.onClick=function(){e.scene.shooter.attachBomb()},this.buttons.push(s)},t.createFireBallButton=function(){var e=this,t=this.scene,n=rc.Z.GAMEPLAY.TEXTURES_32BIT,i=n.KEY,a=n.FRAME,s=new sc.Z(t,i,a.ROCKET,30,30);t.make.text({text:"",style:{color:"#",fontFamily:Xa.Z.FONT_FAMILY,fontSize:"6px"},origin:{x:.5,y:.5}}).setTint(16777215).setAlign("center").setHighQuality(),s.onClick=function(){e.scene.shooter.attachRainbowBall()},this.buttons.push(s)},e}(),yv=vv,Sv=function(){function e(e){var t=this;this.scene=void 0,this.fps=void 0,this.avgFps=void 0,this.avgFpsInTime=void 0,this.countTimeToUpdateFps=void 0,this.countTimeToUpdateAvgFPS=void 0,this.countTimeToTrackFPS=void 0,this.update=function(e,n){t.countTimeToUpdateFps+=n,t.countTimeToUpdateAvgFPS+=n,t.countTimeToTrackFPS+=n,t.countTimeToUpdateFps<1e3||(t.countTimeToUpdateFps-=1e3,t.updateFps(),t.updateAvgFps(),t.updateAvgFpsInTime())},this.scene=e,this.countTimeToUpdateFps=0,this.countTimeToUpdateAvgFPS=0,this.countTimeToTrackFPS=0}var t=e.prototype;return t.getFps=function(){return this.fps},t.getAvgFps=function(){return Math.round(this.avgFps.average)},t.getAvgFpsInTime=function(){return this.avgFpsInTime.average},t.updateFps=function(){this.fps=this.scene.game.loop.actualFps},t.updateAvgFps=function(){this.avgFps.sum+=this.fps,this.avgFps.total+=1,this.avgFps.average=this.avgFps.sum/this.avgFps.total,this.avgFps.min>this.avgFps.average&&(this.avgFps.min=this.avgFps.average),this.avgFps.max<this.avgFps.average&&(this.avgFps.max=this.avgFps.average)},t.updateAvgFpsInTime=function(){this.avgFpsInTime.sum+=this.fps,this.avgFpsInTime.total+=1,this.countTimeToUpdateAvgFPS>5e3&&(this.avgFpsInTime.average=this.avgFpsInTime.sum/(this.avgFpsInTime.total||1),this.avgFpsInTime.sum=0,this.avgFpsInTime.total=0,this.countTimeToUpdateAvgFPS-=5e3,this.avgFpsInTime.min>this.avgFpsInTime.average&&(this.avgFpsInTime.min=this.avgFpsInTime.average),this.avgFpsInTime.max<this.avgFpsInTime.average&&(this.avgFpsInTime.max=this.avgFpsInTime.average))},t.updateTimeToTrackFps=function(){this.countTimeToTrackFPS>3e4&&(this.scene.analytics.event(qt._.FPS_METER,{fps:Math.round(this.getFps()),avg_fps_last:Math.round(this.avgFpsInTime.min),avg_fps_min:Math.round(this.avgFpsInTime.min),avg_fps_max:Math.round(this.avgFpsInTime.max)}),this.countTimeToTrackFPS-=3e4)},t.reset=function(){this.fps=0,this.avgFps={sum:0,total:0,average:60,min:120,max:0},this.avgFpsInTime={sum:0,total:0,average:60,min:120,max:0}},t.start=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update),this.reset()},t.stop=function(){this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update)},e}(),Ev=Sv;!function(e){e.GridBallLayer="grid ball layer",e.FlyingBallShadowLayer="shadow flying ball layer",e.FlyingBallLayer="flying ball layer",e.BulletBallLayer="bullet ball layer",e.ShadowLayer="shadow layer",e.AnimsLayer="anims layer"}(Ff||(Ff={}));var bv=Ff,Av=["Box","Bomb","Rocket"],wv=[20,20,5],Tv=function(){function e(e){this.scene=void 0,this.totalStampUsed=0,this.scene=e}var t=e.prototype;return t.handleUtil=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scene.audio.playSound(Qa.Z.RECEIVE_STAMP,{volume:.5}),t.stopFadeOut(),t.assignLayer(this.scene.animsLayer),n=t.getStampType(),e.t0=n,e.next=e.t0===Jl.StampGift?7:e.t0===Jl.StampUp?11:13;break;case 7:return e.next=9,this.playAnimationGotoCenter(t);case 9:return this.handleUtilGift(),e.abrupt("break",15);case 11:return this.handleUtilUp(),e.abrupt("break",15);case 13:return e.abrupt("break",15);case 15:this.totalStampUsed+=1,t.kill();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.handleUtilUp=function(){var e=5,t=500,n=this.scene,i=n.grid,a=n.descentController,s=i.ballInterval*e;a.revert(s,t),this.scene.shake(500,6e-4);var r=this.scene.registry.get("log_level");this.scene.analytics.event(qt._.USE_STAMP,{stamp_type:"stamp-up",level:r,level_name:"level_"+r})},t.handleUtilGift=function(){var e=ud()(wv).call(wv,(function(e,t){return e+t}),0),t=Math.ceil(Math.random()*e),n=Ha()(wv).call(wv,(function(e){return(t-=e)<=0}));switch(Av[n]){case"Bomb":this.scene.shooter.attachBomb();break;case"Rocket":this.scene.shooter.attachRainbowBall();break;case"Box":this.scene.layoutManager.objects.header.progressTargets.targetPool.handleClaimBoxGift()}var i=this.scene.registry.get("log_level");this.scene.analytics.event(qt._.USE_STAMP,{stamp_type:Av[n],level:i,level_name:"level_"+i})},t.playAnimationGotoCenter=function(){var e=(0,o.Z)(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new(Q())((function(e){var i=n.scene.world.getWorldSize(),a=i.width/2,s=i.height/2+50,r=1/n.scene.world.getPixelRatio();t.image3D.setAlpha(1);n.scene.tweens.add({targets:t.image3D,scale:2*r,x:a,y:s,duration:500,ease:"Power0",onComplete:function(){e("success")}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),Pv=Tv,Cv=function(e){function t(t){var n;n=e.call(this,t)||this;var i=t.registry.get("zones").zones.zone5;return n.setPosition(n.scene.gameZone.width/2,i.bottomY),n.setDepth(ja.Z.BUTTON),t.add.existing((0,za.Z)(n)),n}return(0,c.Z)(t,e),t}(Phaser.GameObjects.Container),Iv=Cv,xv=rc.Z.GAMEPLAY.TEXTURES_32BIT,Bv=xv.KEY,kv=xv.FRAME,Rv=function(e){function t(t,n,i){var a;return void 0===n&&(n=37),void 0===i&&(i=37),(a=e.call(this,t,{key:Bv,frame:kv.AVATAR_BLUE,background:kv.AVATAR_BG,width:n,height:i,loadDelay:100})||this).scene.add.existing((0,za.Z)(a)),a}return(0,c.Z)(t,e),t.prototype.loadPhoto=function(t,n,i){void 0===i&&(i=0),n&&(t===this.payload.id&&n===this.payload.url||e.prototype.loadPhoto.call(this,t,n,i))},t}(Am),Ov=Rv,_v=rc.Z.GAMEPLAY.TEXTURES_32BIT,Dv=_v.KEY,Lv=_v.FRAME,Nv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentPlayer=void 0,n.slideDuration=void 0,n.floatInBlock=void 0,n.floatOutBlock=void 0,n.deltaX=5,n.avatar=void 0,n.rankFlag=void 0,n.rankNumber=void 0,n.updateLeader=function(e,t){"photo"===t&&n.updateAvatar(),"rank"===t&&n.updateRankNumber()},n.show=function(){n.setVisible(!0)},n.hide=function(){n.setVisible(!1)},n.scene=t,n.setSize(50,50),n.setDurationAnimation(2e3),n.setDataEnabled(),n.createAvatar(),n.createRank(),n.listenEvents(),n.setDepth(ja.Z.UI),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.isCurrentPlayer=function(){return this.currentPlayer},n.setCurrentPlayer=function(e){this.currentPlayer=e,this.updateRankFlag()},n.listenEvents=function(){this.on(Phaser.Data.Events.SET_DATA,this.updateLeader),this.on(Phaser.Data.Events.CHANGE_DATA,this.updateLeader)},n.setDurationAnimation=function(e){this.slideDuration=e},n.runFloatInAnimation=function(e,t,n){var i,a,s,r=this.deltaX;null==(i=this.floatOutBlock)||null==(a=i.tween)||a.complete();var o=t?e-r:e+r;this.floatInBlock=new rh.Z({targets:[this],delay:25*n,duration:this.slideDuration,props:{x:{start:o,from:o,to:e}}}),this.setVisible(!0),null==(s=this.floatInBlock)||s.play()},n.runFloatOutAnimation=function(e,t,n){var i,a,s,r=this,o=this.deltaX;null==(i=this.floatInBlock)||null==(a=i.tween)||a.complete();var c=t?e+o:e-o;this.floatOutBlock=new oh.Z({targets:[this],delay:50*n,duration:this.slideDuration,props:{x:{start:e,from:e,to:c}},onComplete:function(){r.setVisible(!1),r.x=e}}),null==(s=this.floatOutBlock)||s.play()},n.stopFloatAnimation=function(){var e,t,n,i,a,s;null==(e=this.floatInBlock)||null==(t=e.tween)||t.stop(1),null==(n=this.floatInBlock)||n.remove(),null==(i=this.floatOutBlock)||null==(a=i.tween)||a.stop(1),null==(s=this.floatOutBlock)||s.remove()},n.createAvatar=function(){this.avatar=new Ov(this.scene),Phaser.Display.Align.In.Center(this.avatar,this),this.add(this.avatar)},n.createRank=function(){this.rankFlag=this.scene.make.image({key:Dv,frame:Lv.RANK_YELLOW}),this.rankFlag.setWorldSize(25,20),this.rankNumber=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.TopCenter(this.rankFlag,this,0,4),Phaser.Display.Align.In.Center(this.rankNumber,this.rankFlag,-2,-1),this.add([this.rankFlag,this.rankNumber])},n.updateAvatar=function(){var e=this.getData("playerId"),t=this.getData("photo");this.avatar.loadPhoto(e,t)},n.updateRankFlag=function(){this.isCurrentPlayer()?this.rankFlag.setFrame(Lv.RANK_YELLOW):this.rankFlag.setFrame(Lv.RANK_VIOLET)},n.updateRankNumber=function(){var e=this.getData("rank");this.rankNumber.setText(""+e)},t}(Phaser.GameObjects.Container),Mv=Nv,Gv=GameCore.Configs.Gameplay.MockScoreDifficult,Fv=function(e){function t(t){var n;(n=e.call(this,t)||this).playerId=void 0,n.currentScore=void 0,n.maxBlocks=5,n.xArray=void 0,n.lastUpdate=0,n.durationAnimation=400,n.timer=void 0,n.lastScore=void 0,n.playersScore=void 0,n.playersDifficult=void 0,n.leaders=void 0;var i=n.scene.player;return n.playerId=i.getPlayerId(),n.initMockData(),n.createPosition(),n.createLeaders(),n.alignLeaders(),n.run(),n.setDepth(ja.Z.LEADERBOARD),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.run=function(){var e=this;if(this.revive(),this.timer){this.timer.remove();var t=this.getLeadersData();if(t.length<1)return;var n=this.mockupLeaderScores(this.currentScore,t);this.updateScores(n),this.updateLeaders(n)}this.timer=this.scene.time.addEvent({delay:5e3,repeat:-1,callback:function(){var t=e.getLeadersData();if(!(t.length<1)){var n=e.mockupLeaderScores(e.currentScore,t);e.updateScores(n),e.updateLeaders(n)}}})},n.reset=function(){var e;this.lastScore=0,this.currentScore=0,this.playersScore={},this.kill(),null==(e=this.timer)||e.destroy(),this.leaders.getChildren().forEach((function(e,t){e.setData("rank",t+1),e.stopFloatAnimation(),e.setAlpha(1)})),this.alignLeaders()},n.alignLeaders=function(){var e=this;this.leaders.setVisible(!1),this.leaders.getChildren().forEach((function(t,n){var i=t,a=e.xArray[n];i.setX(a),i.setVisible(!0)}))},n.getPosX=function(e){var t=this.getCurrentPlayer();if(!t)return 0;var n=t.getData("rank")||0,i=e.getData("rank");n>this.maxBlocks?i-=this.maxBlocks:i-=n;var a=i/Math.abs(i),s=.5*t.displayWidth-.5*e.displayWidth;return t.x+(10+e.displayWidth)*i+s*a},n.getLeadersData=function(){var e=this.scene.storage.getState(),t=wr(e);return Si()(t)},n.updatePlayer=function(e){var t=this,n=this.getLeadersData();if(!(n.length<1)&&Qu()(n).call(n,(function(e){return e.playerId===t.playerId}))){var i=this.mockupLeaderScores(e,n);this.updateLeaders(i),this.currentScore=e}},n.initMockData=function(){var e=this;this.playersScore={},this.playersDifficult={},io.forEach((function(t){var n=t.playerId,i=t.difficult;e.playersDifficult[n]=i}))},n.mockupLeaderScores=function(e,t){var n=this,i=e-this.lastScore;i=i<=0?Phaser.Math.RND.between(0,200):i,this.lastScore=e;var a=de()(t).call(t,(function(t){var a=(0,r.Z)({},t,{rank:0,score:e});if(a.playerId===n.playerId)return a;var s=0,o=Phaser.Math.RND.between(0,100);s=(s=o<=20?.5*i:o<=60?1*i:o<90?1.4*i:2.5*i)>2500?2500:s;var c=(s=Phaser.Math.RND.between(0,s))*n.playersDifficult[a.playerId],l=10*Math.round(c*Gv/10);if(!GameCore.Utils.Object.hasOwn(n.playersScore,a.playerId)){var h;if(!n.playersScore)n.playersScore=((h={})[a.playerId]=0,h);n.playersScore[a.playerId]=0}return n.playersScore[a.playerId]+=l,a.score=n.playersScore[a.playerId],a})),s=bi()(a).call(a,(function(e,t){return t.score-e.score}));return s.forEach((function(e,t){e.rank=t+1})),s},n.updateLeaders=function(e){var t=this,n=Date.now();if(!(n-this.lastUpdate<this.durationAnimation+1e3)){this.lastUpdate=n;var i=Ha()(e).call(e,(function(e){return e.playerId===t.playerId}));if(!(i<0)){var a=Math.floor(this.maxBlocks/2),s=i-a,r=i+a;s<0&&(s=0),r>=e.length&&(r=e.length);var o=st()(e).call(e,s,r+1);this.processLogicUpdateOrder(o,i-s)}}},n.updateScores=function(e){this.scene.storage.dispatch(function(e){return{type:ni,payload:{leaders:e}}}(e))},n.processLogicUpdateOrder=function(e,t){var n=this,i=this.leaders.getChildren(),a=this.getCurrentPlayer(),s=null==a?void 0:a.getData("rank"),r=e[t].rank,o=Math.floor(this.maxBlocks/2),c=s>r;s!=r?(i.forEach((function(e,t){if(!e.isCurrentPlayer()){var i=n.xArray[t];e.setDurationAnimation(n.durationAnimation),e.runFloatOutAnimation(i,c,t)}})),this.scene.time.delayedCall(this.durationAnimation,(function(){e.forEach((function(e,a){var s=i[a+o-t],r=n.playerId===e.playerId,l=n.xArray[a+o-t];s.setData(e),r?s.setCurrentPlayer(!0):s.runFloatInAnimation(l,c,a)}))}))):e.forEach((function(e,n){i[n+o-t].setData(e)}))},n.createPosition=function(){for(var e=Math.floor(this.maxBlocks/2),t=[],n=0;n<this.maxBlocks;n++){var i=n-e,a=50*i;i<0?a-=5:i>0&&(a+=5),t.push(a)}this.xArray=t},n.createLeaders=function(){this.leaders=this.scene.make.group({maxSize:this.maxBlocks});for(var e=Math.floor(this.maxBlocks/2),t=0;t<this.maxBlocks;t++){var n=new Mv(this.scene);n.setData({playerId:""+t,score:0,photo:"",rank:t+1}),t===e?(n.setWorldSize(50,50),n.setCurrentPlayer(!0),n.setData("playerId",this.playerId)):(n.setPosition(0,5),n.setWorldSize(40,40),n.setCurrentPlayer(!1)),this.leaders.add(n)}var i=this.leaders.getChildren();this.add(i),this.bringToTop(i[0])},n.getCurrentPlayer=function(){var e=this.leaders.getChildren();return Qu()(e).call(e,(function(e){return e.isCurrentPlayer()}))},t}(Phaser.GameObjects.Container),Zv=Fv,Uv=function(e){function t(t){var n;return(n=e.call(this,t)||this).avatar=void 0,n.scoreText=void 0,n.createAvatar(),n.createScore(),n.setScore(0),n}(0,c.Z)(t,e);var n=t.prototype;return n.setScore=function(e){var t=e?GameCore.Utils.Number.toAbbreviatedString(e||0,{fractionalDigits:1,startAbbreviate:1e5}):"Waiting";this.scoreText.setText(t)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,100)},n.createAvatar=function(){this.avatar=new Im(this.scene),this.add(this.avatar)},n.createScore=function(){this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(13)}),this.scoreText.setOrigin(.5,.5),Phaser.Display.Align.In.BottomCenter(this.scoreText,this.avatar,0,5),this.add(this.scoreText)},t}(Phaser.GameObjects.Container),Yv=Uv,zv=function(e){function t(t){var n;return(n=e.call(this,t)||this).vsText=void 0,n.leftPlayer=void 0,n.rightPlayer=void 0,n.createVsText(),n.createLeftAvatar(),n.createRightAvatar(),n.alignObjects(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createVsText=function(){this.vsText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(25),text:"VS",origin:{x:.5,y:.5}}),this.add(this.vsText)},n.createLeftAvatar=function(){this.leftPlayer=new Yv(this.scene),this.add(this.leftPlayer)},n.createRightAvatar=function(){this.rightPlayer=new Yv(this.scene),this.add(this.rightPlayer)},n.alignObjects=function(){this.scene.world.isLandscape()?(this.vsText.setPosition(25.5,2),this.leftPlayer.setX(-27),this.rightPlayer.setX(75)):(this.vsText.setPosition(4.5,2),this.leftPlayer.setX(-46),this.rightPlayer.setX(56))},t}(Phaser.GameObjects.Container),Wv=zv,Hv=rc.Z.GAMEPLAY.TEXTURES_32BIT,Kv=Hv.KEY,Vv=Hv.FRAME,jv=function(e){function t(t){var n;return(n=e.call(this,t)||this).topOnePlayer=void 0,n.topTwoPlayer=void 0,n.topThreePlayer=void 0,n.topOneScore=void 0,n.topTwoScore=void 0,n.topThreeScore=void 0,n.createTopOnePlayer(),n.createTopTwoPlayer(),n.createThreeTwoPlayer(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.updateData=function(e){var t=ma.Z.AVATAR,n=t.KEY,i=t.FILE,a=e[0],s=e[1],r=e[2];if(a){var o=GameCore.Utils.Number.toAbbreviatedString(+a.score,{startAbbreviate:1e5});this.topOneScore.setText(o),this.topOnePlayer.loadPhoto(a.playerId,a.photo)}else this.topOneScore.setText("???"),this.topOnePlayer.loadPhoto(n,i);if(s){var c=GameCore.Utils.Number.toAbbreviatedString(+s.score,{startAbbreviate:1e5});this.topTwoScore.setText(c),this.topTwoPlayer.loadPhoto(s.playerId,s.photo)}else this.topTwoScore.setText("???"),this.topTwoPlayer.loadPhoto(n,i);if(r){var l=GameCore.Utils.Number.toAbbreviatedString(+r.score,{startAbbreviate:1e5});this.topThreeScore.setText(l),this.topThreePlayer.loadPhoto(r.playerId,r.photo)}else this.topThreeScore.setText("???"),this.topThreePlayer.loadPhoto(n,i)},n.createTopOnePlayer=function(){this.topOnePlayer=new Ov(this.scene);var e=this.scene.make.image({key:Kv,frame:Vv.ICON_GOLD});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topOneScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"99999",origin:{x:.5,y:0}}),this.topOneScore.setY(12),this.topOnePlayer.add([this.topOneScore,e]),this.topOnePlayer.setX(-68),this.add(this.topOnePlayer)},n.createTopTwoPlayer=function(){this.topTwoPlayer=new Ov(this.scene);var e=this.scene.make.image({key:Kv,frame:Vv.ICON_SILVER});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topTwoScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"99999",origin:{x:.5,y:0}}),this.topTwoScore.setY(12),this.topTwoPlayer.add([this.topTwoScore,e]),Phaser.Display.Align.In.Center(this.topTwoPlayer,this.topOnePlayer,68),this.add(this.topTwoPlayer)},n.createThreeTwoPlayer=function(){this.topThreePlayer=new Ov(this.scene);var e=this.scene.make.image({key:Kv,frame:Vv.ICON_BRONZE});e.setPosition(-18,-9),e.setWorldSize(28,27),this.topThreeScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(13),text:"99999",origin:{x:.5,y:0}}),this.topThreeScore.setY(12),this.topThreePlayer.add([this.topThreeScore,e]),Phaser.Display.Align.In.Center(this.topThreePlayer,this.topTwoPlayer,68),this.add(this.topThreePlayer)},t}(Phaser.GameObjects.Container),Xv=jv,qv=rc.Z.GAMEPLAY.TEXTURES_32BIT,Qv=qv.KEY,Jv=qv.FRAME,$v=function(e){function t(t){var n;return(n=e.call(this,t)||this).fullWidth=void 0,n.left=void 0,n.middle=void 0,n.right=void 0,n.timeline=void 0,n.scene=t,n.fullWidth=198,n.createBar(),n.alignBar(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBar=function(){this.left=this.scene.make.image({key:Qv,frame:Jv.PROGRESS_BAR_LEFT,origin:{x:0,y:.5}}),this.left.setWorldSize(0,13),this.middle=this.scene.make.image({key:Qv,frame:Jv.PROGRESS_BAR_MIDDLE,origin:{x:0,y:.5}}),this.middle.setWorldSize(0,13),this.right=this.scene.make.image({key:Qv,frame:Jv.PROGRESS_BAR_RIGHT,origin:{x:0,y:.5}}),this.right.setWorldSize(0,13),this.add([this.left,this.middle,this.right])},n.alignBar=function(){0==this.left.width&&(this.left.setWorldSize(6.5,13),this.right.setWorldSize(6.5,13)),this.left.x=0,this.left.y=0,this.middle.x=this.left.x+this.left.width-.25,this.middle.y=this.left.y,this.right.x=this.middle.x+this.middle.displayWidth-.5,this.right.y=this.middle.y},n.runFullBarAndResetAnimation=function(){var e=this;this.timeline=this.scene.tweens.createTimeline(),this.timeline.add({targets:this.middle,duration:200,ease:Phaser.Math.Easing.Sine.In,props:{displayWidth:{from:this.middle.displayWidth,to:this.fullWidth+7}},onUpdate:function(){e.alignBar()}}),this.timeline.add({targets:this.middle,delay:200,duration:400,ease:Phaser.Math.Easing.Sine.Out,props:{displayWidth:{from:this.fullWidth+7,to:0}},onUpdate:function(){e.alignBar()}}),this.timeline.play()},n.runProgressBarAnimation=function(e){var t=this;this.scene.tweens.add({targets:this.middle,duration:500,ease:Phaser.Math.Easing.Sine.Out,displayWidth:this.fullWidth*e,onUpdate:function(){t.alignBar()}})},t}(Phaser.GameObjects.Container),ey=$v,ty=n(439),ny=function(e){function t(t){var n;return(n=e.call(this,t)||this).stroke=void 0,n.text=void 0,n.stroke=t.make.bitmapText({font:Xa.Z.STROKE.KEY,size:n.scene.fontSize(20)}),n.text=t.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:n.scene.fontSize(20)}),n.add([n.stroke,n.text]),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.setFontSize=function(e){this.stroke.setFontSize(this.scene.fontSize(e)),this.text.setFontSize(this.scene.fontSize(e))},n.setText=function(e){this.stroke.setText(e),this.text.setText(e)},n.setStroke=function(e){this.stroke.setTint(e)},n.setColor=function(e){this.text.setTint(e)},n.setOrigin=function(e,t){this.stroke.setOrigin(e,t),this.text.setOrigin(e,t)},n.setLetterSpacing=function(e){this.stroke.setLetterSpacing(e),this.text.setLetterSpacing(e)},t}(Phaser.GameObjects.Container),iy=ny,ay=rc.Z.GAMEPLAY.TEXTURES_32BIT,sy=ay.KEY,ry=ay.FRAME,oy=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).item=void 0,a.texture=void 0,a.score=void 0,a.text=void 0,a.scene=t,a.texture=n,a.score=i,a.createItems(),a.setFrame(a.texture),a.loadScore(),a.scene.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.createItems=function(){this.item=this.scene.make.image({key:sy,frame:ry.COIN_BUBBLE,origin:{x:.5,y:.5}}),this.item.setWorldSize(21,24.5),this.add(this.item),Phaser.Display.Align.In.Center(this.item,this)},n.setFrame=function(e){"BOMB"===e?this.item.setFrame(ry.BOMB_BUBBLE):"ROCKET"===e?this.item.setFrame(ry.ROCKET_ICON):"BOX"===e&&this.item.setFrame(ry.BOX_BUBBLE)},n.loadScore=function(){this.text=new iy(this.scene),this.text.setFontSize(10),this.text.setOrigin(.5,.5);var e=this.formatScore(this.score);this.text.setText(e),this.text.setColor(16777215),this.text.setStroke(2118317),this.add(this.text),Phaser.Display.Align.In.BottomCenter(this.text,this,0,12)},n.setSelect=function(){this.text.setColor(4448511),this.text.setStroke(8910)},n.setUnselect=function(){this.text.setColor(16777215),this.text.setStroke(2118317)},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e)},t}(Phaser.GameObjects.Container),cy=oy,ly=rc.Z.GAMEPLAY.TEXTURES_32BIT.FRAME,hy=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).text=void 0,a.width=n,a.height=i,a.scene.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.setAvatar=function(e){this.background.setFrame(ly.AVATAR_YELLOW).setWorldSize(this.width,this.height),this.avtFrame.setVisible(!1),this.setPhoto(e)},n.setPhoto=function(t){e.prototype.setPhoto.call(this,t);var n=Math.min(this.width,this.height)-3;this.photo.setWorldSize(n,n),Phaser.Display.Align.In.Center(this.photo,this.background,0,-2)},n.loadScore=function(e){this.text=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(8),origin:{x:.5,y:0}}),this.scene.add.existing(this.text),this.text.setText(e.toString()),this.add(this.text),Phaser.Display.Align.In.BottomCenter(this.text,this,0,6)},n.setSelect=function(){this.text.setTint(16777215),this.background.setFrame(ly.AVATAR_BLUE).setWorldSize(this.width,this.height)},n.setUnselect=function(){this.text.setTint(16704602),this.background.setFrame(ly.AVATAR_YELLOW).setWorldSize(this.width,this.height)},t}(Ov),uy=hy;function dy(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return py(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return py(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fy=1e5,gy=[{start:.7,end:.65},{start:.4,end:.35},{start:.1,end:.05}],my=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.leaders=void 0,i.leadersPool=void 0,i.targets=void 0,i.fullWidth=void 0,i.targetsSorted=void 0,i.index=void 0,i.isTargetChanged=void 0,i.selectTimeline=void 0,i.passTimeline=void 0,i.typeOfItems=void 0,i.typeIndex=void 0,i.itemQueue=void 0,i.handleBoxExplosive=function(e,t){for(var n=0;n<15;n++){var a=i.scene.ballLayoutData.getRandomColor(),s=i.scene.detachedBallPool.spawn(e,t,a),r=Phaser.Math.Between(-200,200),o=Phaser.Math.Between(-400,100);s.explosiveDetach(r,o)}},i.scene=t,i.leaders=n,i.fullWidth=205,i.isTargetChanged=!1,i.itemQueue=[],i.typeIndex=-1,i.createLeadersPool(),i.createTypeOfItems(),i.scene.add.existing((0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.getLeadersPool=function(){return this.leadersPool},n.getPlayersOnLevel=function(e){var t;return he()(t=this.leadersPool).call(t,(function(t){return t.index===e}))},n.updateTargetPool=function(e,t){this.leaders=e,this.createLeadersPool(),this.createTargetsOnBar(t)},n.createLeadersPool=function(){var e;this.leadersPool=[];for(var t,n=dy(bi()(e=this.leaders).call(e,(function(e,t){return e.score-t.score})));!(t=n()).done;){var i=t.value,a=i.playerId,s=i.score,r=i.photo,o={index:Math.floor(s/fy),playerId:a,score:s,photo:r};this.leadersPool.push(o)}},n.createTypeOfItems=function(){this.typeOfItems=["BOX","BOMB","BOX","BOMB","BOX","ROCKET"]},n.getTypeOfItem=function(){return this.typeIndex++,this.typeIndex>=this.typeOfItems.length&&(this.typeIndex=0),this.typeOfItems[this.typeIndex]},n.createTargetsOnBar=function(e){var t,n;null==(t=this.selectTimeline)||t.stop(),null==(n=this.passTimeline)||n.stop(),this.targets&&this.targets.forEach((function(e){return e.destroy()})),this.targets=[],this.index=-1;var i=[];this.targetsSorted=[];var a=0,s=0;this.itemQueue.length>0?(i.push(this.itemQueue[0]),a=this.itemQueue[0].score):a=fy*e,this.itemQueue=[];for(var r=this.scene.layoutManager.objects.header,o=r.progressTargets.getStartScore(),c=r.progressTargets.getEndScore(),l=c-o,h=0;h<3;h++){var u=gy[h],d=u.start,p=u.end;s=Phaser.Math.Between(c-l*d,c-l*p);var f={index:e,playerId:"item",score:a=s=1e3*Math.round(s/1e3),photo:this.getTypeOfItem()};a<=c?i.push(f):a>c&&this.itemQueue.push(f)}this.targetsSorted=bi()(i).call(i,(function(e,t){return e.score-t.score}));for(var g,m=dy(this.targetsSorted);!(g=m()).done;){var v=g.value,y=(v.score-o)/(c-o)*this.fullWidth+10.5;if("item"===v.playerId){var S=new cy(this.scene,v.photo,v.score);S.setPosition(y,this.y-3),this.targets.push(S)}else{var E=new uy(this.scene,13,18);E.setAvatar(v.playerId),E.loadPhoto(v.playerId,v.photo,20),E.loadScore(v.score),E.setPosition(y,this.y-1),this.targets.push(E)}}this.add(this.targets),-1==this.index&&this.setFirstTargetSelect()},n.setFirstTargetSelect=function(){this.index++,this.runSelectedAnimation(this.index)},n.selectTarget=function(e){this.index<this.targets.length&&e>=this.targetsSorted[this.index].score&&(this.isTargetChanged=!0),this.isTargetChanged&&(this.isTargetChanged=!1,this.runPassAnimation(this.index),this.index++,this.index<this.targets.length&&this.runSelectedAnimation(this.index),this.showReachedScoreText(e))},n.showReachedScoreText=function(e){var t="You reached "+GameCore.Utils.Number.formatScore(e)+"\n Well done",n=this.scene.gameZone.width,i=this.scene.gameZone.height,a=Phaser.Math.Between(100,n-100),s=Phaser.Math.Between(this.scene.gameSettings.topY+300,i-400),r=(0,ty.Z)(a,s),o=r.x,c=r.y;this.scene.floatingNotificationPool.spawn(o,c,t).playAnimation()},n.handleClaimItem=function(e){switch(this.scene.audio.playSound(Qa.Z.RECEIVE_STAMP,{volume:.5}),this.targetsSorted[e].photo){case"BOMB":this.scene.shooter.isBombAttached()||this.scene.shooter.attachBomb();break;case"ROCKET":this.scene.shooter.isBombAttached()||this.scene.shooter.attachRainbowBall();break;case"BOX":this.handleClaimBoxGift()}},n.runSelectedAnimation=function(e){var t=this;this.selectTimeline=this.scene.tweens.createTimeline({}),this.bringToTop(this.targets[e]),this.selectTimeline.add({targets:this.targets[e],duration:0,props:{scale:{from:1,to:1}},onUpdate:function(){var n;null==(n=t.targets[e])||n.setSelect()}}),this.selectTimeline.add({targets:this.targets[e],duration:333}),this.selectTimeline.add({targets:this.targets[e],delay:333,duration:100,props:{scale:{from:1,to:1.5}}}),this.selectTimeline.add({targets:this.targets[e],delay:433,duration:233,props:{scale:{from:1.5,to:1.3}}}),this.selectTimeline.play()},n.runPassAnimation=function(e){var t=this;this.handleClaimItem(e),this.passTimeline=this.scene.tweens.createTimeline({}),this.passTimeline.add({targets:this.targets[e],duration:0,props:{scale:{from:1,to:1}},onUpdate:function(){t.targets[e].setUnselect()}}),this.passTimeline.add({targets:this.targets[e],duration:100,props:{scale:{from:1,to:1.3}}}),this.passTimeline.add({targets:this.targets[e],delay:100,duration:233,props:{scale:{from:1.3,to:1}}}),this.passTimeline.add({targets:this.targets[e],delay:333,duration:167,props:{alpha:{from:1,to:.5}}}),this.passTimeline.play()},n.getBoxPosition=function(){return this.scene.world.isLandscape()?{x:Phaser.Math.Between(240,529),y:this.scene.gameZone.height-500-Phaser.Math.Between(0,50)}:{x:Phaser.Math.Between(100,275),y:this.scene.gameZone.height-500-Phaser.Math.Between(0,50)}},n.handleClaimBoxGift=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,r,o,c,l,u,d,p=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=rc.Z.GAMEPLAY.TEXTURES,n=t.KEY,i=t.FRAME,a=this.getBoxPosition(),s=a.x,r=a.y,o=(0,ty.Z)(s,r),c=o.x,l=o.y,u=o.scale,(d=this.scene.animationsManager.explosivePool.spawn(c,l)).setTexture(n,i.BOX),d.setWorldSize(203.5,203.5),d.clearTint(),d.setAlpha(1),d.setScale(u),this.scene.tweens.addCounter({from:0,to:1,duration:50,loop:5,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(){var e=Phaser.Math.Between(c-5,c+5),t=Phaser.Math.Between(l-5,l+5);d.setPosition(e,t)},onComplete:function(){d.play("box-explosive")}}),d.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){p.handleBoxExplosive(s,r),d.kill()}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reset=function(){this.itemQueue=[],this.typeIndex=-1},t}(Phaser.GameObjects.Container),vy=my,yy=rc.Z.GAMEPLAY.TEXTURES_32BIT,Sy=yy.KEY,Ey=yy.FRAME,by=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.startScore=void 0,n.endScore=void 0,n.level=void 0,n.leaders=void 0,n.fillBar=void 0,n.targetPool=void 0,n.animateToFill=function(){var e=n.scene.scoreCounter.getScore();if(0!==e){if(n.fillBar.middle)if(n.targetPool.selectTarget(e),e>=n.endScore)n.level+=1,n.updateScoreLevel(),n.fillBar.runFullBarAndResetAnimation();else{var t,i,a=(e-n.startScore)/(n.endScore-n.startScore);null!=(t=n.fillBar)&&null!=(i=t.timeline)&&i.isPlaying()&&n.fillBar.timeline.stop(),n.fillBar.runProgressBarAnimation(a)}}else n.fillBar.runProgressBarAnimation(0)},n.setSize(226,28.5),n.scene=t,n.leaders=[],n.createBackground(),n.createFillBar(),n.createTargetPool(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.getStartScore=function(){return this.startScore},n.getEndScore=function(){return this.endScore},n.createBackground=function(){var e=this.scene.make.image({key:Sy,frame:Ey.PROGRESS_BAR_BG,origin:{x:0,y:.5}});e.setWorldSize(226,28.5),e.setX(-4),this.add(e)},n.updateLeaders=function(e){var t;this.leaders=e,null==(t=this.targetPool)||t.updateTargetPool(e,this.level)},n.createFillBar=function(){this.fillBar=new ey(this.scene),this.add(this.fillBar)},n.createTargetPool=function(){this.targetPool=new vy(this.scene,this.leaders),this.add(this.targetPool)},n.updateScoreLevel=function(){var e=this.scene.levelUpController.getLevel(),t=Math.min(3,1+(e-1)/4);this.startScore=this.endScore,this.endScore=this.startScore+1e5*t,this.targetPool.createTargetsOnBar(this.level)},n.reset=function(){this.level=0,this.startScore=0,this.endScore=0,this.targetPool.reset(),this.updateScoreLevel(),this.animateToFill()},t}(Phaser.GameObjects.Container),Ay=by,wy=rc.Z.GAMEPLAY.TEXTURES_32BIT,Ty=wy.KEY,Py=wy.FRAME,Cy=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.leaders=void 0,n.challengeBlock=void 0,n.tournamentPlayers=void 0,n.scoreBlock=void 0,n.updateScoreTimer=void 0,n.progressTargets=void 0,n.pauseButton=void 0,n.updateScore=function(){var e,t=n.scene.scoreCounter.getScore(),i=n.formatScore(t);n.scoreText.setText(i),null==(e=n.updateScoreTimer)||e.remove(),n.updateScoreTimer=n.scene.time.delayedCall(500,(function(){n.scene.storage.dispatch(Fo({score:t}))}))},n.scene=t;var i=n.scene.gameZone.width;return n.setSize(i,50),n.createBackground(),n.createPauseButton(),n.createLeaders(),n.createTournamentPlayers(),n.createChallengeBlock(),n.createScoreBar(),n.createProgressTargets(),n.listenEvents(),n.align(),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,-this.height/2,Ty,Py.BLANK);e.setOrigin(.5,0),e.setTint(11184810),e.setWorldSize(375,this.height),e.setAlpha(0),this.add(e)},n.createPauseButton=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME,i=new sc.Z(this.scene,t,n.BUTTON_PAUSE,28.5,28.5);i.setName("Pause"),i.onClick=this.scene.handlePauseGame,this.add(i),Phaser.Display.Align.In.RightCenter(i,this,-0,0),this.pauseButton=i},n.createLeaders=function(){this.leaders=new Zv(this.scene),this.leaders.setY(-2),this.leaders.kill(),this.add(this.leaders)},n.createTournamentPlayers=function(){this.tournamentPlayers=new Xv(this.scene),this.tournamentPlayers.setPosition(20,-4),this.tournamentPlayers.kill(),this.add(this.tournamentPlayers)},n.createChallengeBlock=function(){this.challengeBlock=new Wv(this.scene),this.challengeBlock.kill(),this.challengeBlock.setY(-3),this.add(this.challengeBlock)},n.createScoreBar=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:Ty,frame:Py.TAB_SCORE,origin:{x:0,y:.5}});e.setWorldSize(80,28.5),this.scoreText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"0"}),Phaser.Display.Align.In.Center(this.scoreText,e,0,1),this.scoreBlock.add([e,this.scoreText]),this.add(this.scoreBlock),Phaser.Display.Align.In.LeftCenter(this.scoreBlock,this,-25)},n.createProgressTargets=function(){this.progressTargets=new Ay(this.scene),this.progressTargets.setY(0),this.progressTargets.setX(-85),this.progressTargets.kill(),this.add(this.progressTargets)},n.updateLeaders=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Si()(t)||[],null==(n=this.progressTargets)||n.updateLeaders(i);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.listenEvents=function(){this.scene.events.on(cl.SCORE_CHANGED,this.updateScore)},n.align=function(){Phaser.Display.Align.To.LeftCenter(this.scoreBlock,this.progressTargets,-25,0),Phaser.Display.Align.To.RightCenter(this.pauseButton,this.progressTargets,115,0)},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e,1e6)},t}(Phaser.GameObjects.Container),Iy=Cy,xy=function(){function e(e){this.scene=void 0,this.ropeLine=[],this.footer=void 0,this.header=void 0,this.scene=e,this.createObjects()}var t=e.prototype;return t.createObjects=function(){this.createRope(),this.createHeader(),this.createFooter()},t.createRope=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT,t=e.KEY,n=e.FRAME,i=this.scene.registry.get("zones").zones,a=GameCore.Utils.Number.toPerspectivePoint(337.5,i.zone5.topY-8).y,s=this.scene.add.image(window.game.world.getWorldSize().width/2,a,t,n.ROPE);s.setDepth(6);var r=this.scene.add.image(window.game.world.getWorldSize().width/2,a+16,t,n.ROPE_SHADOW);r.setAlpha(.8);var o=GameCore.Utils.Number.toPerspectivePoint(0,i.zone5.topY-8).x,c=GameCore.Utils.Number.toPerspectivePoint(398,i.zone5.topY-8).x-o;s.setWorldSize(0,5),r.setWorldSize(0,5),s.setOrigin(0),r.setOrigin(0),s.x-=c/2,r.x-=c/2,this.ropeLine.push(s,r)},t.resetRopeWidth=function(){var e=this;this.scene.time.delayedCall(200,(function(){e.ropeLine.forEach((function(e){return e.displayWidth=0}))}))},t.createHeader=function(){this.header=new Iy(this.scene),this.header.setDepth(ja.Z.UI)},t.createFooter=function(){this.footer=new Iv(this.scene)},e}(),By=xy,ky=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Ry=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,c.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone,t=this.objects.header;Phaser.Display.Align.In.TopCenter(t,e,0,0)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(ky),Oy=Ry,_y=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone,n=this.objects.header;Phaser.Display.Align.In.TopCenter(n,t,-24,0)}},t}(Oy),Dy=_y,Ly=il.STATUS,Ny=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.showing=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n.showing=!0,n}(0,c.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new By(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Dy(this.scene):this.layout=new Oy(this.scene),this.layout.setUIObjects(this.objects)},n.init=function(){e.prototype.init.call(this),this.initUILogic(),this.setState(Ly.READY)},n.alignUI=function(){this.layout.alignUI()},n.alignShooter=function(){var e=this.scene,t=e.shooter,n=e.gameSettings,i=t.launcher,a=GameCore.Utils.Number.toPerspectivePoint(t.shootingPosition.x,t.shootingPosition.y).y,s=GameCore.Utils.Number.toPerspectivePoint(t.x,t.y).y-a,r=73*i.scaleY/2-s;0!=n.bannerHeight?i.y=r+(n.bannerHeight-43)/7:i.y=r-1.5,Phaser.Display.Align.In.Center(t.combosText,t.launcher,0,-5)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(Ly.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(Ly.STOPPED)},n.initUILogic=function(){},n.updateUIState=function(){},n.showPauseScreen=function(){var e=this.scene.screen,t=e.get(qa.o4.PAUSE_SCREEN);t||(t=e.add(qa.o4.PAUSE_SCREEN,Oh)),e.open(qa.o4.PAUSE_SCREEN)},n.showRewardScreen=function(e){var t=this.scene.screen,n=t.get(qa.o4.REWARD_SCREEN);n||(n=t.add(qa.o4.REWARD_SCREEN,Nf)),t.open(qa.o4.REWARD_SCREEN,{awardDiamonds:e})},n.showRescueScreen=function(){var e=this.scene.screen,t=e.get(qa.o4.RESCUE_SCREEN);t||(t=e.add(qa.o4.RESCUE_SCREEN,Vh)),e.open(qa.o4.RESCUE_SCREEN)},n.showUI=function(e){if(!this.showing){this.showing=!0,this.scene.tweens.getTweensOf(this.objects.header).forEach((function(e){return e.complete()})),this.slideIn([this.objects.header],0,50,e),this.scene.tweens.killTweensOf(this.objects.ropeLine);var t=this.scene.registry.get("zones").zones,n=GameCore.Utils.Number.toPerspectivePoint(0,t.zone5.topY-8).x,i=GameCore.Utils.Number.toPerspectivePoint(400,t.zone5.topY-8).x-n;this.scene.tweens.add({targets:this.objects.ropeLine,displayWidth:i,duration:e,alpha:1})}},n.hideUI=function(e){this.showing&&(this.showing=!1,this.scene.tweens.getTweensOf(this.objects.header).forEach((function(e){return e.complete()})),this.slideOut([this.objects.header],0,-50,e),this.scene.tweens.add({targets:this.objects.ropeLine,alpha:0,duration:200}))},n.slideIn=function(e,t,n,i){var a=this;void 0===i&&(i=0),e.forEach((function(e){var s=e.x+t,r=e.y+n;a.scene.tweens.add({targets:e,x:s,y:r,alpha:1,duration:i,onComplete:function(){e.x=s,e.y=r}})}))},n.slideOut=function(e,t,n,i){var a=this;void 0===i&&(i=0),e.forEach((function(e){var s=e.x+t,r=e.y+n;a.scene.tweens.add({targets:e,x:s,y:r,alpha:0,duration:i,onComplete:function(){e.x=s,e.y=r}})}))},t}(rl),My=Ny,Gy=function(){function e(e){var t=this;this.scene=void 0,this.pauseTime=void 0,this.gamePlayTime=void 0,this.gamePlayedTime=void 0,this.update=function(e,n){t.gamePlayTime+=n,t.scene.stateManager.isPaused()&&(t.pauseTime+=n),t.scene.stateManager.isPlaying()&&(t.gamePlayedTime+=n)},this.scene=e,this.pauseTime=0,this.gamePlayTime=0,this.gamePlayedTime=0}var t=e.prototype;return t.getPauseTime=function(){return this.pauseTime},t.getGamePlayTime=function(){return this.gamePlayTime},t.getGamePlayedTime=function(){return this.gamePlayTime},t.start=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},t.stop=function(){this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update)},t.reset=function(){this.pauseTime=0,this.gamePlayTime=0,this.gamePlayedTime=0},e}(),Fy=Gy,Zy=function(){function e(){var e=this;this.isVisible=!0,this.browserPrefixes=["moz","ms","o","","webkit"],this.visibleCallbacks=[],this.hiddenCallbacks=[],this.handleVisibilityChange=function(t){if("boolean"===typeof t)return t?e.onVisibleEvent():e.onHiddenEvent();var n=e.getBrowserPrefix(),i=e.getHiddenPropertyName(n);return document[i]?e.onHiddenEvent():e.onVisibleEvent()};var t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)}var t=e.prototype;return t.addEventVisible=function(e){this.visibleCallbacks.push(e)},t.addEventHidden=function(e){this.hiddenCallbacks.push(e)},t.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},t.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},t.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},t.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},t.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},e}(),Uy=Zy,Yy=[Xa.Z.GREEN_STROKE.KEY,Xa.Z.RED_STROKE.KEY,Xa.Z.PURPLE_STROKE.KEY,Xa.Z.BLUE_STROKE.KEY],zy=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i,Xa.Z.GREEN_STROKE.KEY)||this).setText("").setOrigin(.5).setFontSize(a.scene.fontSize(20)).setDepth(ja.Z.EFFECT).setCenterAlign(),a}(0,c.Z)(t,e);var n=t.prototype;return n.setDefault=function(){this.setActive(!0).setVisible(!0).setScale(0).setAlpha(1).setBigFloating()},n.playAnimation=function(){var e=this,t=Phaser.Math.Between(0,Yy.length-1);this.setFont(Yy[t]);var n=this.scene.tweens.timeline();return n.add({targets:this,scale:1,duration:500,delay:0}),n.add({targets:this,alpha:0,scale:.8,y:"-=10",duration:2e3,onComplete:function(){e.setInactiveAndHide()}}),n.play(),this},n.setBigFloating=function(){return this.setFontSize(this.scene.fontSize(24)),this},n.setInactiveAndHide=function(){this.kill(),this.setPosition()},t}(Phaser.GameObjects.BitmapText),Wy=zy,Hy=function(e){function t(t){var n;return(n=e.call(this,t,{classType:Wy,frame:[],maxSize:-1})||this).scene=void 0,n.scene=t,n.init(),n}(0,c.Z)(t,e);var n=t.prototype;return n.init=function(){var e,t,n=this,i=de()(e=Ds()(t=Array(50)).call(t,null)).call(e,(function(){return new Wy(n.scene,0,0)}));i.forEach((function(e){e.setVisible(!1),e.setActive(!1)})),this.scene.animsLayer.add(i,!0)},n.spawn=function(e,t,n){var i=this.getFirstDead();return i||(i=new Wy(this.scene,0,0),this.add(i),this.scene.animsLayer.add(i,!0)),i.setDefault(),i.setPosition(e,t),i.setText(n),i},n.despawn=function(e){this.killAndHide(e)},n.reset=function(){this.getChildren().forEach((function(e){e.active&&e.kill()}))},n.getChildren=function(){return e.prototype.getChildren.call(this)},t}(Phaser.GameObjects.Group),Ky=Hy,Vy=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).visibilityChangeHandler=void 0,n.gameSettings=void 0,n.bulletGroup=void 0,n.bulletBallPool=void 0,n.gridBallPool=void 0,n.detachedBallPool=void 0,n.bombPool=void 0,n.rainbowBallPool=void 0,n.stampPool=void 0,n.floatingScorePool=void 0,n.floatingNotificationPool=void 0,n.shotGuide=void 0,n.scoreArea=void 0,n.tailParticles=void 0,n.shotGuideParticles=void 0,n.drag=void 0,n.shooter=void 0,n.grid=void 0,n.ballLayoutData=void 0,n.descentController=void 0,n.levelUpController=void 0,n.scoreCounter=void 0,n.vibrateController=void 0,n.dashboardScreen=void 0,n.readyScreen=void 0,n.pauseScreen=void 0,n.guideScreen=void 0,n.gameOverScreen=void 0,n.rescueScreen=void 0,n.gameModeManager=void 0,n.stateManager=void 0,n.physicsManager=void 0,n.animationsManager=void 0,n.itemManager=void 0,n.fpsManager=void 0,n.stampUtilManager=void 0,n.gamePlayTimeManger=void 0,n.layoutManager=void 0,n.isNeedShowGuide=void 0,n.timerEvents=[],n.shadowLayer=void 0,n.gridBallLayer=void 0,n.flyingBallShadowLayer=void 0,n.flyingBallLayer=void 0,n.bulletBallLayer=void 0,n.animsLayer=void 0,n.processSwitchScene=function(e){e===n.scene.key&&(n.stateManager.play(),n.screen.close(qa.o4.DASHBOARD_SCREEN))},n.run=function(){var e=n.storage.getState(),t=(0,tv.V)(e),i=n.stateManager.getState();t===Ba.C.DASHBOARD_SCENE?(n.stateManager.quit(),n.stateManager.ready(),n.descentController.initialize(),n.shooter.initBullet(),n.shooter.hide(),n.layoutManager.objects.resetRopeWidth(),n.screen.open(qa.o4.DASHBOARD_SCREEN)):i===Vu.Initial?(n.stateManager.ready(),n.descentController.initialize(),n.shooter.initBullet(),n.shooter.hide(),n.stateManager.play(),n.handleGameModeChange()):i===Vu.Quit&&(n.stateManager.ready(),n.descentController.initialize(),n.shooter.initBullet(),n.shooter.hide(),n.stateManager.play());var a=[{selector:iv,callback:function(){var e=n.game.storage.getState(),t=iv(e);n.time.delayedCall(0,(function(){n.layoutManager.objects.header.updateLeaders(t)}))}}];n.handleStateChange(a),n.dashboardScreen.main.playSingleButton.runAnimation()},n.create=function(){e.prototype.create.call((0,za.Z)(n)),n.visibilityChangeHandler=new Uy,n.createBackground(),n.gameSettings=new qc((0,za.Z)(n)),n.createLayer(),n.createController(),n.createParticle(),n.createPhysicsWorld(),n.createObjectPools(),n.createGlobalAnims(),n.createUI(),n.createManagers(),n.checkAndAddShortcut(),n.checkNewUser(),n.createHandleStampUtil(),yv.config((0,za.Z)(n)),n.layoutManager.alignUI(),n.visibilityChangeHandler.addEventHidden(n.handleBlurGameScene)},n.handleShowAd=(0,o.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.game.globalScene,!1!==n.ads.canbeShowInterstitialAd()){e.next=3;break}return e.abrupt("return");case 3:return n.audio.stopMusic(),n.audio.muteAll(),t.screen.open(qa.o4.NOTIFY_SCREEN,{message:n.lang.Text.loadingAds,duration:0,loading:!0}),i=setTimeout((function(){t.screen.open(qa.o4.NOTIFY_SCREEN,{message:n.lang.Text.loading,duration:0,loading:!0})}),3e3),e.prev=7,e.next=10,n.ads.showMidRollAdAsync();case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:i&&clearTimeout(i),t.screen.close(qa.o4.NOTIFY_SCREEN),n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadMidRollAdAsync().catch((function(e){}));case 19:case"end":return e.stop()}}),e,null,[[7,12]])}))),n.pauseGame=function(){var e,t;n.tweens.pauseAll(),n.shooter.pause(),n.tailParticles.pause(),n.shotGuideParticles.pause(),null==(e=n.physics.world)||e.pause(),n.timerEvents=he()(t=n.timerEvents).call(t,(function(e){return e.paused=!0,!e.hasDispatched}))},n.resumeGame=function(){var e;n.tweens.resumeAll(),n.shooter.resume(),n.tailParticles.resume(),n.shotGuideParticles.resume(),n.physics.world.resume(),n.timerEvents=he()(e=n.timerEvents).call(e,(function(e){return e.paused=!1,!e.hasDispatched}))},n.handlePauseGame=function(){n.stateManager.isPlaying()&&(n.descentController.playTimeline.isPlaying()||(n.screen.open(qa.o4.PAUSE_SCREEN),n.stateManager.pause()))},n.handleBlurGameScene=function(){if(n.stateManager.isPlaying()&&!n.descentController.playTimeline.isPlaying()){n.stateManager.pause();var e=n.game.globalScene;e.screen.open(qa.o4.NOTIFY_SCREEN,{message:n.game.lang.Text.touchContinue,duration:0,loading:!1}),e.input.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,n.handleCloseScreen)}},n.handleCloseScreen=function(){n.game.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),n.stateManager.play()},n.handleShowBannerAds=function(){n.ads.showBannerAdAsync().catch((function(e){}))},n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){}))},n.destroyGamePlay=function(){n.stopManager(),n.destroyOldObject(),n.resetObjectPools(),n.background.clearTint(),n.removeAllListeners(),n.timerEvents=[],n.tweens.killAll(),n.time.removeAllEvents()},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.game.globalScene.events.on(Ba.K.SWITCH,this.processSwitchScene)},n.logPageviewOnOpen=function(){var t=this;this.time.delayedCall(1e3,(function(){e.prototype.logPageviewOnOpen.call(t)}))},n.createLayer=function(){this.gridBallLayer=this.add.layer(),this.gridBallLayer.setName(bv.GridBallLayer),this.gridBallLayer.setDepth(ja.Z.GRID_LAYER),this.flyingBallShadowLayer=this.add.layer(),this.flyingBallShadowLayer.setName(bv.FlyingBallShadowLayer),this.flyingBallShadowLayer.setDepth(ja.Z.FLYING_SHADOW_LAYER),this.flyingBallLayer=this.add.layer(),this.flyingBallLayer.setName(bv.FlyingBallLayer),this.flyingBallLayer.setDepth(ja.Z.FLYING_LAYER),this.bulletBallLayer=this.add.layer(),this.bulletBallLayer.setName(bv.BulletBallLayer),this.bulletBallLayer.setDepth(ja.Z.BULLET_LAYER),this.shadowLayer=this.add.layer(),this.shadowLayer.setName(bv.ShadowLayer),this.shadowLayer.setDepth(ja.Z.TAIL),this.animsLayer=this.add.layer(),this.animsLayer.setName(bv.AnimsLayer),this.animsLayer.setDepth(ja.Z.EFFECT)},n.createController=function(){this.vibrateController=new Gl(this)},n.createPhysicsWorld=function(){var e=this.gameZone,t=e.width,n=e.height,i=this.data.get("physicsWorld").worldBoundWidth;this.physics.world.setBounds(.5*t-.5*i,.5*-n,i,1.5*n),this.physics.world.setBoundsCollision(!0,!0,!1,!1)},n.createObjectPools=function(){var e=rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,t=this.physics.world;this.bulletGroup=this.add.group(),this.bulletBallPool=new xl(t,this),this.bulletBallPool.initObjects(5),this.gridBallPool=new Ol(t,this,e),this.gridBallPool.initObjects(500),this.detachedBallPool=new vf(t,this),this.detachedBallPool.initObjects(200),this.bombPool=new Xl(t,this),this.bombPool.initObjects(2),this.rainbowBallPool=new Sf(t,this),this.rainbowBallPool.initObjects(2),this.stampPool=new sh(this),this.floatingScorePool=new jc(this),this.floatingNotificationPool=new Ky(this),this.shotGuide=new nl(this)},n.createParticle=function(){this.tailParticles=new Pp(this),this.shotGuideParticles=new lv(this)},n.createGlobalAnims=function(){new Pu(this)},n.createManagers=function(){this.layoutManager=new My(this),this.gameModeManager=new ul(this),this.gameModeManager.init(),this.physicsManager=new Vp(this),this.physicsManager.init(),this.animationsManager=new $p(this),this.animationsManager.init(),this.itemManager=new gf(this),this.itemManager.init(),this.fpsManager=new Ev(this),this.fpsManager.reset(),this.gamePlayTimeManger=new Fy(this),this.gamePlayTimeManger.reset(),this.stateManager=new Ep(this),this.stateManager.init(),this.layoutManager.init()},n.createScoreArea=function(){this.scoreArea=new mv({scene:this,y:this.gameZone.height-this.ads.getBannerHeight()+5})},n.createUI=function(){this.createDashboardScreen(),this.createGuideScreen(),this.createPauseScreen(),this.createRescueScreen(),this.createScoreArea()},n.createDashboardScreen=function(){this.dashboardScreen=this.screen.add(qa.o4.DASHBOARD_SCREEN,ev)},n.createReadyScreen=function(){this.readyScreen=this.screen.add(qa.o4.READY_SCREEN,vh)},n.createGuideScreen=function(){this.guideScreen=this.screen.add(qa.o4.GUIDE_SCREEN,Zu)},n.createPauseScreen=function(){this.pauseScreen=this.screen.add(qa.o4.PAUSE_SCREEN,Oh)},n.createRescueScreen=function(){this.rescueScreen=this.screen.add(qa.o4.RESCUE_SCREEN,Vh)},n.createGameOverScreen=function(){this.gameOverScreen=this.screen.add(qa.o4.GAME_OVER_SCREEN,dh)},n.createDarkEffect=function(){var e=rc.Z.GAMEPLAY.TEXTURES,t=e.KEY,n=e.FRAME,i=this.add.image(0,0,t,n.DEPTH_EFFECT),a=this.gameZone,s=a.displayWidth,r=a.displayHeight;i.setDisplaySize(s+10,r).setAlpha(.7).setDepth(ja.Z.BULLET+1),Phaser.Display.Align.In.Center(i,this.gameZone)},n.checkNewUser=function(){this.isNeedShowGuide=!1,(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&(this.isNeedShowGuide=!0,this.handleCloseGuide())},n.createHandleStampUtil=function(){this.stampUtilManager=new Pv(this)},n.showGuide=function(){this.isNeedShowGuide&&(this.isNeedShowGuide=!1,this.stateManager.pause(),this.screen.open(qa.o4.GUIDE_SCREEN),this.analytics.event(qt._.TUTORIAL_BEGIN),this.scene.scene.player.incUserGuideDisplays())},n.checkAndAddShortcut=function(){var e;this.game.player.getPlayer().isUserNew||(null==(e=this.gameModeManager)?void 0:e.gameMode)!==Sa&&this.facebook.attemptToAddShortcut()},n.handleCloseGuide=function(){var e=this;this.guideScreen.once(GameCore.Screens.Events.CLOSE,(function(){e.showDrag(),e.stateManager.play(),e.analytics.event(qt._.TUTORIAL_COMPLETE)}))},n.showDrag=function(){var e=this;this.drag=new Hu(this,0,0).setDepth(ja.Z.UI),Phaser.Display.Align.In.Center(this.drag,this.gameZone,-50,-10),this.drag.show(),this.events.once(cl.SHOOT_BALL,(function(){e.drag.hide()}))},n.update=function(e,t){this.stateManager.update(t),this.physicsManager.update(),this.insertionSort(this.gridBallLayer.list),this.insertionSort(this.flyingBallLayer.list)},n.insertionSort=function(e){e:for(var t=1;t<e.length;t++)for(var n=e[t],i=t-1;i>=0;i--){if(n.y>=e[i].y){e[i+1]=n;continue e}e[i+1]=e[i],e[i]=n}return e},n.handleGameModeChange=function(){var e=this,t=[{selector:ks,callback:function(t){t!==e.gameModeManager.gameMode&&(e.gameModeManager.stop(),e.gameModeManager.start(),e.removeStateChange())}}];this.handleStateChange(t)},n.startManager=function(){this.stateManager.start(),this.gameModeManager.start(),this.physicsManager.start(),this.animationsManager.start()},n.stopManager=function(){this.stateManager.stop(),this.gameModeManager.stop(),this.physicsManager.stop(),this.animationsManager.stop(),this.itemManager.stop(),this.layoutManager.stop()},n.destroyOldObject=function(){var e,t,n,i;null==(e=this.grid)||e.destroy(),null==(t=this.drag)||t.destroy(),null==(n=this.shooter)||n.destroy(),null==(i=this.levelUpController)||i.destroy()},n.resetObjectPools=function(){var e,t,n,i,a,s,r,o;null==(e=this.bombPool)||e.reset(),null==(t=this.stampPool)||t.reset(),null==(n=this.gridBallPool)||n.reset(),null==(i=this.bulletBallPool)||i.reset(),null==(a=this.floatingScorePool)||a.reset(),null==(s=this.floatingNotificationPool)||s.reset(),null==(r=this.detachedBallPool)||r.reset(),null==(o=this.rainbowBallPool)||o.reset()},n.removeAllListeners=function(){this.events.off(cl.SHOOT_BALL),this.events.off(cl.TIMER_CREATED),this.game.events.off(Phaser.Core.Events.RESUME,this.handleBlurGameScene)},n.shake=function(e,t){this.cameras.main.shake(e,t,!0)},n.hideGamePlayUI=function(e){void 0===e&&(e=0),this.layoutManager.hideUI(e)},n.showGamePlayUI=function(e){var t=this;void 0===e&&(e=500),this.time.addEvent({delay:100,callback:function(){t.layoutManager.showUI(e)}}),this.shooter.show()},n.showRewardedVideoAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,r,o,c,l,u=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Configs.Network,i=this.game.globalScene,a=i.screen,s=i.time,r=!1,this.audio.stopMusic(),this.audio.muteAll(),a.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loadingAds,duration:0,loading:!0}),e.prev=7,e.next=10,new(Q())((function(e,t){o=s.delayedCall(n.Timeout,t),u.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?u.events.once(GameCore.Ads.Events.LOADED,e):u.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 10:return c=setTimeout((function(){a.open(qa.o4.NOTIFY_SCREEN,{message:window.game.lang.Text.loading,duration:0,loading:!0})}),3e3),e.next=13,this.ads.showRewardedVideoAsync();case 13:a.close(qa.o4.NOTIFY_SCREEN),r=!0,e.next=23;break;case 17:e.prev=17,e.t0=e.catch(7),a.close(qa.o4.NOTIFY_SCREEN),l=window.game.lang.Text.noAds,e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"USER_INPUT"===e.t0.code&&(l=window.game.lang.Text.noRewarded),a.open(qa.o4.NOTIFY_SCREEN,{message:l,duration:1500,loading:!1});case 23:return null==(t=o)||t.remove(),c&&clearTimeout(c),this.audio.unmuteAll(),this.audio.playMusic(),this.ads.preloadRewardedVideoAsync().catch((function(e){})),e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(){return e.apply(this,arguments)}}(),t}(Za.Z);var jy=Vy,Xy=n(533),qy=rc.Z.DEFAULT,Qy=qy.KEY,Jy=qy.FRAME,$y=function(e){function t(t){var n;return(n=e.call(this,t)||this).homeButton=void 0,n.scene=t,n.createButtons(),n.alignButtons(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,0)},n.createButtons=function(){this.createHomeButton()},n.createHomeButton=function(){this.homeButton=new sc.Z(this.scene,Qy,Jy.BUTTON_HOME,37,37),this.homeButton.setName("Home"),this.add(this.homeButton)},t}(Phaser.GameObjects.Container),eS=$y,tS=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,c.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,c.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return he()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Ds()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&de()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,G.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(mg.Z)),nS={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},iS=function(e){function t(t){return e.call(this,nS,t)||this}return(0,c.Z)(t,e),t}(dc.Z),aS={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},sS=function(e){function t(t){return e.call(this,aS,t)||this}return(0,c.Z)(t,e),t}(dc.Z),rS=rc.Z.DEFAULT,oS=rS.KEY,cS=rS.FRAME,lS=function(e){function t(t){var n;return(n=e.call(this,t)||this).winnerIcon=void 0,n.crownRank=void 0,n.ribbonRank=void 0,n.ribbonRankText=void 0,n.scene=t,n.createWinnerIcon(),n.createRankIcon(),n.createRibbonRankIcon(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.killAll=function(){this.getAll().forEach((function(e){return e.setVisible(!1)}))},n.setWinner=function(e){this.killAll(),e?this.winnerIcon.revive():this.winnerIcon.kill()},n.setRank=function(e){this.killAll(),e<=3?this.setCrownRank(e):this.setRibbonRank(e)},n.setCrownRank=function(e){switch(this.crownRank.revive(),e){case 1:this.crownRank.setFrame(cS.ICON_CROWN_1),this.crownRank.setWorldSize(31,26.5);break;case 2:this.crownRank.setFrame(cS.ICON_CROWN_2),this.crownRank.setWorldSize(31,26.5);break;case 3:this.crownRank.setFrame(cS.ICON_CROWN_3),this.crownRank.setWorldSize(31,26.5)}},n.setRibbonRank=function(e){this.ribbonRank.revive(),this.ribbonRankText.setText(""+e)},n.createWinnerIcon=function(){this.winnerIcon=this.scene.make.image({key:oS,frame:cS.ICON_CROWN_WINNER}),this.winnerIcon.setWorldSize(33,28),this.add(this.winnerIcon),this.winnerIcon.setVisible(!1),Phaser.Display.Align.In.Center(this.winnerIcon,this,-5,-8)},n.createRankIcon=function(){this.crownRank=this.scene.make.image({key:oS,frame:cS.ICON_CROWN_1}),this.crownRank.setWorldSize(33,28),this.add(this.crownRank),this.crownRank.setVisible(!1),Phaser.Display.Align.In.Center(this.crownRank,this,0,0)},n.createRibbonRankIcon=function(){this.ribbonRank=this.scene.add.container();var e=this.scene.make.image({key:oS,frame:cS.ICON_RANK});e.setWorldSize(20,30),this.ribbonRankText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"",origin:{x:.5,y:.5},y:-2}),this.ribbonRank.add([e,this.ribbonRankText]),Phaser.Display.Align.In.Center(this.ribbonRank,this,0,0),this.add(this.ribbonRank)},t}(Phaser.GameObjects.Container),hS=lS,uS=rc.Z.DEFAULT,dS=uS.KEY,pS=uS.FRAME,fS=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.isCurrentPlayer=!1,i.highlightLeaderBg=void 0,i.avatar=void 0,i.block=void 0,i.playerScoreContainer=void 0,i.playerScore=void 0,i.label=void 0,i.rankBlock=void 0,i.playerNameText=void 0,i.shareButton=void 0,i.playButton=void 0,i.showItems=void 0,i.showPopUp=void 0,i.scaleAnimation=void 0,i.scene=t,i.createLeaderBlock(),i.createAvatar(),i.createPlayerName(),i.createPlayButton(),i.createShareButton(),i.createPlayerScore(),i.createRankIcon(),i.updateInfo(n),i.scene.add.existing((0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.createLeaderBlock=function(){var e=this.scene.add.image(0,0,dS,pS.LEADER_BLOCK);e.setWorldSize(283.5,55);var t=this.scene.add.image(0,0,dS,pS.HIGHLIGHT_LEADER_BLOCK);t.setWorldSize(291.5,64);var n=this.scene.add.container();n.add([t,e]),this.add([n]);var i=e.width,a=e.height;this.setSize(i,a),this.highlightLeaderBg=t},n.updateInfo=function(e){e&&(this.payload=e),this.updateAvatar(),this.updatePlayerName(),this.updatePlayerScore(),this.updateLeaderRankIcon();var t=(null==e?void 0:e.playerId)===this.scene.player.getPlayerId();this.setHighLight(t),this.updatePosition()},n.setLabel=function(e){this.label.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.showAnimations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=200*e;this.runShowItemAnimation(n,t),this.runShowPopUpAnimation(n,t)},n.updateLeaderRankIcon=function(){var e,t;null!=(e=this.payload)&&e.rank?this.rankBlock.setRank(this.payload.rank):this.rankBlock.setWinner(!0===(null==(t=this.payload)?void 0:t.isWin))},n.updatePosition=function(){var e;!0===(null==(e=this.payload)?void 0:e.scoreRight)?(this.useNoButton(),Phaser.Display.Align.To.RightCenter(this.playerNameText,this.avatar,15,0),Phaser.Display.Align.To.RightCenter(this.playerScoreContainer,this.avatar,130,0)):(Phaser.Display.Align.To.RightCenter(this.playerNameText,this.avatar,15,-11),Phaser.Display.Align.To.RightCenter(this.playerScoreContainer,this.avatar,16,7))},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new sS({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),n.forEach((function(e){e.setScale(1)})),this.showItems=new iS({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.createAvatar=function(){this.avatar=new Im(this.scene),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-24,0)},n.updateAvatar=function(){var e,t;if(null!=(e=this.payload)&&e.playerId&&null!=(t=this.payload)&&t.photo){var n=this.payload,i=n.playerId,a=n.photo;this.avatar.loadPhoto(i,a,100)}else this.avatar.loadPhoto(ma.Z.AVATAR.KEY,ma.Z.AVATAR.FILE,100)},n.createPlayerScore=function(){this.playerScoreContainer=this.scene.add.container(),this.playerScoreContainer.setSize(71,16);var e=this.scene.make.image({key:dS,frame:pS.BG_SCORE});e.setWorldSize(90,16),this.playerScoreContainer.add(e),this.playerScore=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.43}}),this.playerScore.setTint(16777215),this.playerScoreContainer.add(this.playerScore),Phaser.Display.Align.To.RightCenter(this.playerScoreContainer,this.avatar,10,7),this.add([this.playerScoreContainer])},n.createRankIcon=function(){this.rankBlock=new hS(this.scene),this.add(this.rankBlock),Phaser.Display.Align.In.Center(this.rankBlock,this,-130,-20)},n.updatePlayerScore=function(){var e,t=this.formatScore((null==(e=this.payload)?void 0:e.score)||0);this.playerScore.setText(t)},n.updatePlayerName=function(){var e;if(null!=(e=this.payload)&&e.name){var t=this.payload.name,n=GameCore.Utils.String.getShortName(t,9),i=GameCore.Utils.String.removeDiacritics(n);this.playerNameText.setText(i)}},n.createPlayButton=function(){var e=this;this.playButton=new sc.Z(this.scene,dS,pS.BUTTON_GREEN_84X36,84,36),this.playButton.setName("Play"),this.playButton.onClick=(0,o.Z)(h().mark((function t(){var n,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null==(n=e.payload)?void 0:n.playerId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.scene.storage.dispatch(Ho(i));case 5:case"end":return t.stop()}}),t)}))),this.add(this.playButton);var t=this.scene.make.image({key:dS,frame:pS.ICON_PLAY_WITH_2});t.setWorldSize(25,23),this.playButton.add(t),Phaser.Display.Align.In.Center(t,this.playButton,0,-1),Phaser.Display.Align.In.Center(this.playButton,this,85,0)},n.createShareButton=function(){var e=this;this.shareButton=new sc.Z(this.scene,dS,pS.BUTTON_BLUE_84X36,84,36),this.shareButton.setName("Share"),this.shareButton.onClick=function(){e.scene.storage.dispatch(Rr())},this.add(this.shareButton);var t=this.scene.make.image({key:dS,frame:pS.ICON_SHARE});t.setWorldSize(24,27),this.shareButton.add(t),Phaser.Display.Align.In.Center(t,this.shareButton,0,-1),Phaser.Display.Align.In.Center(this.shareButton,this,85,0)},n.setHighLight=function(e){var t,n,i;(this.isCurrentPlayer=e,this.highlightLeaderBg.setVisible(e),e)?this.useShareButton():!1===(null==(t=this.payload)?void 0:t.useChallenge)?(null==(n=this.playButton)||n.kill(),null==(i=this.shareButton)||i.kill()):this.usePlayButton()},n.useShareButton=function(){var e,t;null==(e=this.playButton)||e.kill(),null==(t=this.shareButton)||t.revive()},n.usePlayButton=function(){var e,t;null==(e=this.playButton)||e.revive(),null==(t=this.shareButton)||t.kill()},n.useNoButton=function(){var e,t;null==(e=this.playButton)||e.kill(),null==(t=this.shareButton)||t.kill()},n.setCurrentUserLeader=function(){this.runScaleAnimation()},n.runScaleAnimation=function(){!this.scaleAnimation&&this.isCurrentPlayer&&(this.scaleAnimation=new _h.Z({targets:[this.avatar],delay:1e3,duration:2e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.15,y:this.avatar.y-3}}),this.scaleAnimation.play())},n.createPlayerName=function(){this.playerNameText=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},text:"Sample"}),this.playerNameText.setTint(7894724),this.playerNameText.setHighQuality(),this.playerNameText.setFontSize(14),this.add(this.playerNameText),Phaser.Display.Align.To.RightCenter(this.playerNameText,this.avatar,15,-11)},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.formatScore=function(e){return GameCore.Utils.Number.formatScore(e,1e7)},(0,G.Z)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,i=t.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),gS=fS;function mS(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return vS(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vS(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var yS=function(e){function t(t,n){var i;(i=e.call(this,t)||this).scene=void 0,i.currentPlayerId=void 0,i.scroller=void 0,i.animationTween=void 0,i.allowScrollEvent=void 0,i.scene=t;var a=i.scene.player;return i.currentPlayerId=a.getPlayerId(),i.createReuseScroller(n),i.scene.add.existing((0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(e){this.scroller=new tS(this.scene,{classType:gS,listConfigs:[],width:310,height:e,padding:12,marginTop:10,marginBottom:10,maxScrollOver:.05}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(rc.Z.DEFAULT.KEY,rc.Z.DEFAULT.FRAME.BLANK,10,2826565),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i,a,s,r,o,c,l,u,d,p,f,g,m,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Si()(t)||[]).length<1)){e.next=5;break}return this.scene.isSwitchable=!0,this.scene.board.showMessage(!0,this.scene.lang.Text.leaderBoardEmpty),e.abrupt("return");case 5:i=bi()(n).call(n,(function(e,t){return+t.score-+e.score})),a=[],s=mS(i);case 8:if((r=s()).done){e.next=26;break}if(o=r.value,c=o.playerId,l=o.photo,u=o.score,d=o.name,p=o.rank,c){e.next=14;break}return e.abrupt("continue",24);case 14:if(f=this.currentPlayerId===c,g=this.scene.tabId===ns,m=!f&&this.scene.tabId===is,!f||!g){e.next=22;break}return e.next=20,this.getCurrentPlayerRank(c);case 20:p=e.sent,GameCore.Configs.LeadersBoard.UseMock&&(p=Phaser.Math.Between(999,9999));case 22:v={playerId:c,photo:l,name:d,rank:p,score:u,scoreRight:g,useChallenge:m},a.push(v);case 24:e.next=8;break;case 26:this.scroller.updateConfig(a),this.showLeaders();case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.removeLeaders=function(){this.scroller.updateConfig([])},n.getCurrentPlayerRank=function(){var e=(0,o.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bs(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,e.abrupt("return",n.rank);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getLeaders=function(){return this.scroller.getChildren()},n.getMaxLeadersCanShow=function(){var e=this.scroller.height;return Math.ceil(e/55)},n.showLeaders=function(){var e,t=this;null==(e=this.allowScrollEvent)||e.remove();var n=this.getLeaders();if(n.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.Text.leaderBoardEmpty);for(var i=this.getMaxLeadersCanShow(),a=Math.min(n.length,i),s=0;s<a;s++){var r=n[s];r&&(r.setVisible(!0),r.runShowUpAnimation(s,300))}var o=300+100*a+250,c=this.scene.time.delayedCall(o,(function(){t.scene.isSwitchable=!0,t.scroller.setEnable(!0)}));this.allowScrollEvent=c},t}(Phaser.GameObjects.Container),SS=yS,ES=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.background=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.createBackground(),n.updateSize(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.messageAnimation.play())},n.createBackground=function(){var e=this.scene.gameZone.height,t=wS.BOARD_Y,n=wS.TABS_Y,i=wS.FOOTER_Y,a=e-(t+n+this.scene.ads.getBannerHeight()+i-5);this.background=new Ih(this.scene,0,0,298,a),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createLoading=function(){this.loading=new Gg.Z(this.scene),this.add(this.loading),this.loading.setTint(5982858),this.loading.setWorldSize(55,55),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders()},n.createLeaders=function(){var e=this.background.height-20;this.leaders=new SS(this.scene,e),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background)},n.createAnimation=function(){this.messageAnimation=new af.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),bS=ES,AS=GameCore.Configs.LeadersBoard,wS={TABS_Y:50,BOARD_Y:75,FOOTER_Y:40},TS=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).board=void 0,n.footerButtons=void 0,n.tabId=void 0,n.offset=void 0,n.isSwitchable=void 0,n.isRequesting=void 0,n.run=function(){n.isRequesting=!1;var e=[{selector:av,callback:function(e){if(n.isRequesting=e,n.board.showLoading(e),!1===e){var t=n.game.storage.getState(),i=iv(t);n.time.delayedCall(0,(function(){n.board.leaders.updateData(i)}))}}}];n.handleStateChange(e),n.selectWorldTab()},n.handleSelectFriendTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1)},n.handleSelectWorldTab=function(){n.isRequesting||n.isSwitchable&&(n.isSwitchable=!1,n.selectWorldTab())},n.handleHomeClick=function(){n.scene.switch(Ba.C.DASHBOARD_SCENE)},n.handleShareLeaderboard=function(){n.storage.dispatch(Lr())},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(),this.createMaskBackground(.5),this.createHeader(),this.createBoard(),this.createFooter()},n.selectWorldTab=function(){this.tabId=ns,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.storage.dispatch(zf(AS.LeaderboardId,ns,AS.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=AS.Limit,this.storage.dispatch(zf(AS.LeaderboardId,is,AS.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=AS.Limit,this.storage.dispatch(zf(AS.LeaderboardId,ns,AS.Limit,this.offset)))},n.createHeader=function(){var e=this,t=rc.Z.DEFAULT,n=t.KEY,i=t.FRAME,a=this.add.container(375,50),s=this.make.image({key:n,frame:i.LEADERBOARD_BAR});s.setWorldSize(375,68);var r=1/this.world.getPixelRatio(),o=this.make.image({key:rc.Z.TEXTS.KEY,frame:this.lang.Texture.leaderboard});o.setScale(.9*r),o.setY(-5);var c=new sc.Z(this,n,i.BUTTON_BACK,37,37);c.onClick=function(){e.scene.switch(Ba.C.GAME_SCENE)},a.add([s,o,c]),Phaser.Display.Align.In.LeftCenter(c,s,-8,-5),Phaser.Display.Align.In.TopCenter(a,this.gameZone,0,-28)},n.createBoard=function(){this.board=new bS(this);var e=wS.BOARD_Y;Phaser.Display.Align.In.TopCenter(this.board,this.gameZone,0,-e)},n.createFooter=function(){this.footerButtons=new eS(this),Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.board,0,40),this.footerButtons.homeButton.onClick=this.handleHomeClick},t}(Za.Z);var PS=TS,CS=n(433),IS=n.n(CS),xS=GameCore.Configs.Notification.ApiUrl,BS=function(){var e=(0,o.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,Be("players/"+n,t,{},xS,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kS=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),RS=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t,i=e.type,a=e.value;if(!(a<1)&&(-1!==ge()(t=n.requireTypes).call(t,i)&&!n.isPassRequiredTarget(i)&&n.processMore(e))){i=e.type,a=e.value;var s=n.getCorrectValue(i,a);n.game.storage.dispatch(function(e,t,n){return function(i){var a=Cg();if(GameCore.Utils.Valid.isObject(a)){var s=a;GameCore.Utils.Object.hasOwn(s,e)&&(s[e].rewarded||(s[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:s}),i({type:Ni,payload:{id:e,type:t,value:n}})))}}}(n.id,i,s)),n.isTaskFinished(i)&&n.game.storage.dispatch(function(e){return function(t){t({type:Fi,payload:{id:e}}),Br.emit(lr.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=sp(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:Qu()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=X()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=rp(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),OS=RS,_S=lr.COLLECT_BUBBLES,DS=_S.ID,LS=_S.EVENT,NS=function(e){function t(t){return e.call(this,t,DS)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(LS,this.process),Br.on(LS,this.process)},n.processMore=function(){return!0},t}(OS),MS=lr.INVITE_FRIENDS,GS=MS.ID,FS=MS.EVENT,ZS=function(e){function t(t){var n;return(n=e.call(this,t,GS)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;Br.off(FS,this.process),Br.on(FS,this.process),Br.on(lr.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t,n=e.opponentId;return!!n&&(-1===ge()(t=this.invitedFriends).call(t,n)&&(this.invitedFriends.push(n),!0))},t}(OS),US=ZS,YS=lr.COMPLETE_GAMES,zS=YS.ID,WS=YS.EVENT,HS=function(e){function t(t){var n;return(n=e.call(this,t,zS)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(WS,this.process),Br.on(WS,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(OS),KS=lr.GET_RAINBOW_BUBBLE,VS=KS.ID,jS=KS.EVENT,XS=function(e){function t(t){return e.call(this,t,VS)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(jS,this.process),Br.on(jS,this.process)},n.processMore=function(){return!0},t}(OS),qS=lr.REACH_TARGET_POINTS,QS=qS.ID,JS=qS.EVENT,$S=function(e){function t(t){return e.call(this,t,QS)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(JS,this.process),Br.on(JS,this.process)},n.processMore=function(){return!0},t}(OS),eE=lr.COLLECT_BOMBS,tE=eE.ID,nE=eE.EVENT,iE=function(e){function t(t){return e.call(this,t,tE)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(nE,this.process),Br.on(nE,this.process)},n.processMore=function(){return!0},t}(OS),aE=lr.USE_RESCUE,sE=aE.ID,rE=aE.EVENT,oE=function(e){function t(t){return e.call(this,t,sE)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(rE,this.process),Br.on(rE,this.process)},n.processMore=function(){return!0},t}(OS),cE=lr.DROP_BUBBLES,lE=cE.ID,hE=cE.EVENT,uE=function(e){function t(t){return e.call(this,t,lE)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(hE,this.process),Br.on(hE,this.process)},n.processMore=function(){return!0},t}(OS),dE=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!op(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:_i,payload:{}}),e.next=7,yg();case 7:a=e.sent,t(Eg(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[lr.COLLECT_BUBBLES.ID]=new NS(this.game),this.eventsListener[lr.COMPLETE_GAMES.ID]=new HS(this.game),this.eventsListener[lr.INVITE_FRIENDS.ID]=new US(this.game),this.eventsListener[lr.COLLECT_BOMBS.ID]=new iE(this.game),this.eventsListener[lr.REACH_TARGET_POINTS.ID]=new $S(this.game),this.eventsListener[lr.GET_RAINBOW_BUBBLE.ID]=new XS(this.game),this.eventsListener[lr.USE_RESCUE.ID]=new oE(this.game),this.eventsListener[lr.DROP_BUBBLES.ID]=new uE(this.game)},e}(),pE=dE,fE=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],gE=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fE);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mE=(0,Y.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.missions}],(function(e){return e})),vE=(0,Y.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.isRequesting}],(function(e){return e})),yE=((0,Y.P1)([mE,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:xi,payload:{missions:e}}}),SE={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:{UNUSED:"testing"}},EE=(0,Y.P1)([function(e){var t;return null==(t=e.missions)?void 0:t.mission}],(function(e){return e})),bE=((0,Y.P1)([EE],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:Bi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Br.emit(SE.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:ki,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=EE(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=EE(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return X()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),AE=bE,wE=SE.EVENTS,TE=SE.TYPES,PE=function(e){function t(t,n){return e.call(this,t,TE.COLLECT_GEMS,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(wE.MISSION_UPDATE,this.process),Br.on(wE.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(AE),CE=SE.EVENTS,IE=SE.TYPES,xE=function(e){function t(t,n){return e.call(this,t,IE.COMBO,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(CE.MISSION_UPDATE,this.process),Br.on(CE.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(AE),BE=SE.EVENTS,kE=SE.TYPES,RE=function(e){function t(t,n){return e.call(this,t,kE.USE_ITEM,n)||this}(0,c.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Br.off(BE.MISSION_UPDATE,this.process),Br.on(BE.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(AE),OE=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!vE(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ii,payload:{}}),e.next=7,gE();case 7:a=e.sent,t(yE(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=mE(t);n&&X()(n).forEach((function(t){switch(n[t].id){case SE.TYPES.COLLECT_GEMS:e.listener[t]=new PE(e.game,t);break;case SE.TYPES.COMBO:e.listener[t]=new xE(e.game,t);break;case SE.TYPES.USE_ITEM:e.listener[t]=new RE(e.game,t)}}))},t.initEvents=function(){Br.off(SE.EVENTS.MISSION_START,this.startListener),Br.on(SE.EVENTS.MISSION_START,this.startListener)},e}(),_E=OE,DE=function(){return function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=wa(r),c=Ta(r),l=i.getPlayer(),h=(o.entryPointData||{}).type;if(l.isUserNew&&a.event(qt._.NEW_USER),c===ba)return void e(NE());if(c===Sa){if(h===da)return void e(ME());if(h===fa)return void e(GE())}if(c===Ea)return void e(FE());if(l.isUserNew)return a.event(qt._.NEW_USER),void e(ZE());s.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE)}catch(u){s.events.emit(Ba.K.SWITCH,Ba.C.DASHBOARD_SCENE)}}},LE=function(e){try{var t=wa(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?va:new He.Z(a,s,r).toObject()}catch(o){return va}},NE=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Hs(n))})).catch((function(e){})),e(zo())}catch(t){}}},ME=function(){return function(e,t){try{var n=t(),i=wa(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,l=LE(n);c||a.updateConnectedPlayers([l]);var h=l.playerId;e(Ko(r,h,!0,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},GE=function(){return function(e,t){try{var n=t(),i=wa(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,l=a.playerId===c;e(Xo(r,l?o:c,!0))}catch(h){throw new Error("processChallengeFriendMode: "+h)}}},FE=function(){return function(e,t){try{var n=t(),i=wa(n).entryPointData||{},a=i.playerId,s=i.playerScore;e(Go(a,{score:s,level:0}));var o=LE(n),c=(0,r.Z)({},o,{score:s});e(jo(c))}catch(l){throw new Error("processMatchingGroupMode: "+l)}}},ZE=function(){return function(e){try{e(Wo())}catch(t){throw new Error("processNewUserMode: "+t)}}},UE=n(529),YE={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json"}},zE=GameCore.Configs,WE=zE.AppId,HE=zE.Notification,KE=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).progressFbTimeEvent=void 0,n.percentProgressFb=0,n.startPercent=0,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers(),setTimeout(n.subscribebot,500)},n.processAfterUpdatePlayerProfile=function(){HE.Enable&&(n.updatePlayerProfileToNotificationService(),n.sendNotificationForNewUser())},n.startGame=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.storage.dispatch((0,UE.I)(Ba.C.LOAD_SCENE)),e.next=3,n.storage.dispatch(DE());case 3:n.analytics.event(qt._.APP_READY);case 4:case"end":return e.stop()}}),e)}))),n.subscribebot=function(){n.facebook.attemptToSubscribeBot()},n.handleLoadSoundCompleted=function(){n.audio.initSound(YE.EFFECTS.KEY)},n.handleLoadMusicCompleted=function(){n.audio.initMusic(YE.BACKGROUND.KEY),n.audio.playMusic()},n}(0,c.Z)(t,e);var n=t.prototype;return n.loadingProgressFb=function(){var e=this;this.percentProgressFb=this.registry.get("PercentProgressFb"),(!this.percentProgressFb||this.percentProgressFb<30)&&(this.percentProgressFb=60),this.startPercent=this.percentProgressFb,this.progressFbTimeEvent=this.time.addEvent({delay:50,callback:function(){e.facebook.setLoadingProgress(Math.round(e.percentProgressFb)),e.percentProgressFb+=.1},repeat:-1})},n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(qt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.analytics.event(qt._.LOAD_START),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new kS("Load resources at LoadScene failed.");(0,a.R0)(t,{file:null==e?void 0:e.url})})),this.load.on(Phaser.Loader.Events.COMPLETE,(function(){e.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR)})),this.world.isLandscape()?this.load.image(ma.Z.LANDSCAPE.KEY,ma.Z.LANDSCAPE.FILE):this.load.image(ma.Z.PORTRAIT.KEY,ma.Z.PORTRAIT.FILE),this.load.atlas({key:rc.Z.GAMEPLAY.TEXTURES_32BIT.KEY,textureURL:rc.Z.GAMEPLAY.TEXTURES_32BIT.TEXTURE,atlasURL:rc.Z.GAMEPLAY.TEXTURES_32BIT.JSON}),this.load.atlas({key:rc.Z.GAMEPLAY.TEXTURES.KEY,textureURL:rc.Z.GAMEPLAY.TEXTURES.TEXTURE,atlasURL:rc.Z.GAMEPLAY.TEXTURES.JSON}),this.load.atlas({key:rc.Z.DEFAULT.KEY,textureURL:rc.Z.DEFAULT.TEXTURE,atlasURL:rc.Z.DEFAULT.JSON}),this.load.atlas({key:rc.Z.EFFECTS.KEY,textureURL:rc.Z.EFFECTS.TEXTURE,atlasURL:rc.Z.EFFECTS.JSON}),this.load.bitmapFont(Xa.Z.GREEN_STROKE.KEY,Xa.Z.GREEN_STROKE.TEXTURE,Xa.Z.GREEN_STROKE.DATA),this.load.bitmapFont(Xa.Z.PURPLE_STROKE.KEY,Xa.Z.PURPLE_STROKE.TEXTURE,Xa.Z.PURPLE_STROKE.DATA),this.load.bitmapFont(Xa.Z.RED_STROKE.KEY,Xa.Z.RED_STROKE.TEXTURE,Xa.Z.RED_STROKE.DATA),this.load.bitmapFont(Xa.Z.BLUE_STROKE.KEY,Xa.Z.BLUE_STROKE.TEXTURE,Xa.Z.BLUE_STROKE.DATA);var t=this.lang.getCurrentLanguage();this.load.atlas({key:rc.Z.TEXTS.KEY,textureURL:rc.Z.TEXTS.TEXTURE+"text-"+t+".png",atlasURL:rc.Z.TEXTS.JSON+"text-"+t+".json"}),this.textStyler.addFont({type:"local",fontType:"woff",fontName:Xa.Z.FONT_FAMILY}),this.load.bitmapFont(Xa.Z.PRIMARY.KEY,Xa.Z.PRIMARY.TEXTURE,Xa.Z.PRIMARY.DATA),this.load.bitmapFont(Xa.Z.STROKE.KEY,Xa.Z.STROKE.TEXTURE,Xa.Z.STROKE.DATA),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(a.tO)},n.create=function(){this.analytics.event(qt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;BS({appId:WE,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.sendNotificationForNewUser=function(){if(this.player.getPlayerIsNew()){var e=this.player.getPlayerASID();e&&this.facebook.sendNotificationAsync({message:"Hi @["+e+"] your friends are waiting to play with you, play now!",delayTime:3600})}},n.setupGlobalScene=function(){var e=this.scene.get(Ba.C.GLOBAL_SCENE);e instanceof Xy.Z&&e.setup()},n.initModules=function(){try{new _E(this.game),new pE(this.game)}catch(e){(0,a.tO)(e)}},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.loadTexture32Bit(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+YE.EFFECTS.KEY,this.handleLoadSoundCompleted),this.load.once(e+"audio-"+YE.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(YE.BACKGROUND.KEY,YE.BACKGROUND.FILE),this.load.audioSprite(YE.EFFECTS.KEY,YE.EFFECTS.JSON,YE.EFFECTS.FILE),this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-share":"./assets/wideframes/wide-frame-share.jpg","wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.jpg","wide-frame-game-result":"./assets/wideframes/wide-frame-game-result.jpg","wide-frame-avatar-frame":"./assets/wideframes/avatar-frame.png","wide-frame-crown":"./assets/wideframes/crown.png"})},n.loadTexture32Bit=function(){var e=this;GameCore.Configs.LazyTexture32Bit&&(this.load.atlas({key:rc.Z.DEFAULT_32BIT.KEY,textureURL:rc.Z.DEFAULT_32BIT.TEXTURE,atlasURL:rc.Z.DEFAULT.JSON}),this.load.start(),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){if(e.textures.exists("default-resources-32bit")){var t=e.textures.get(rc.Z.DEFAULT_32BIT.KEY),n=e.textures.get(rc.Z.DEFAULT.KEY);X()(n.frames).forEach((function(e){IS()(n.get(e),t.get(e))}))}})))},t}(Phaser.Scene),VE=KE,jE=rc.Z.DEFAULT,XE=jE.KEY,qE=jE.FRAME,QE=function(e){function t(t){var n;return(n=e.call(this,t)||this).congratulationContainer=void 0,n.gameStateGold=void 0,n.gameStateGrey=void 0,n.waitingAnimation=void 0,n.createCongratulationRibbon(),n.createGameStateGold(),n.createGameStateGrey(),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.updateState=function(e){var t;this.congratulationContainer.revive(),this.gameStateGold.kill(),this.gameStateGrey.kill(),null==(t=this.waitingAnimation)||t.remove(),"win"===e?(this.gameStateGold.revive(),this.gameStateGold.setText("YOU WIN")):"draw"===e?(this.gameStateGold.revive(),this.gameStateGold.setText("DRAW")):"lose"===e?(this.gameStateGrey.revive(),this.gameStateGrey.setText("YOU LOSE"),this.congratulationContainer.kill()):"waiting"===e&&(this.gameStateGold.revive(),this.gameStateGold.setText("WAITING"),this.playWaitingAnimation()),Phaser.Display.Align.In.Center(this.gameStateGold,this.congratulationContainer,0,50),Phaser.Display.Align.In.Center(this.gameStateGrey,this.congratulationContainer,0,50)},n.playWaitingAnimation=function(){var e=this,t=0;this.waitingAnimation=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n="WAITING"+Array(t+1).join(".");e.gameStateGold.setText(n)}})},n.createCongratulationRibbon=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.add.image(0,0,XE,qE.RIBBON_CONGRATULATION);t.setWorldSize(313.5,100.5);var n=this.scene.add.image(0,-24,rc.Z.TEXTS.KEY,this.scene.lang.Texture.congratulation);n.setScale(e);var i=this.scene.add.container();i.add([t,n]),this.add(i),Phaser.Display.Align.In.TopCenter(i,this,0,20),this.congratulationContainer=i},n.createGameStateGold=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY,color:"#fee45a"},origin:{x:0,y:.5},text:""}),t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#ffea5f"),t.addColorStop(1,"#f7ac2f"),e.setFill(t),e.setHighQuality(),e.setFontSize(this.scene.fontSize(32)),this.add(e),this.gameStateGold=e},n.createGameStateGrey=function(){var e=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:.5,y:.55},text:""}),t=e.context.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"#cee4fc"),t.addColorStop(1,"#6995c6"),e.setFill(t),e.setHighQuality(),e.setFontSize(this.scene.fontSize(32)),this.add(e),this.gameStateGrey=e},t}(Phaser.GameObjects.Container),JE=QE,$E=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).homeButton=void 0,n.congratulation=void 0,n.leaderBlockAbove=void 0,n.leaderBlockBelow=void 0,n.footerButtons=void 0,n.footerBar=void 0,n.scaleAnimation=void 0,n.counterScoreTimer=void 0,n.counterPlayerScore=void 0,n.counterOpponentScore=void 0,n.confettiEffect=void 0,n.run=function(){n.updateResultInfo(),n.footerButtons.runAnimation()},n.handleInviteIconClick=function(){var e=n.storage.getState();Ta(e)===ba?n.storage.dispatch(ic()):n.storage.dispatch(nc())},n.handleChallengeFriend=function(e){n.storage.dispatch(Ho(e))},n.handlePlayWithFriend=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.storage.dispatch(Vo());case 1:case"end":return e.stop()}}),e)}))),n.handleHomeClick=function(){n.scene.switch(Ba.C.DASHBOARD_SCENE)},n.handleShareMatchResult=function(){n.storage.dispatch(Gr())},n.handleMatchingGroup=(0,o.Z)(h().mark((function e(){var t,i,a,s,r,o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,za.Z)(n),i=t.player,a=t.storage,s=t.game,r=t.facebook,e.prev=1,s.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"Matching...",loading:!0}),o=i.getPlayer(),c="global","en"===(l=ac(o.locale))&&(c="en"),"in"===l&&(c="in"),e.next=10,r.matchPlayerAsync(c,!0,!0);case 10:if(u=e.sent,s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN),u){e.next=14;break}return e.abrupt("return");case 14:a.dispatch(jo()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),s.globalScene.screen.close(qa.o4.NOTIFY_SCREEN);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),n.runConfettiEffect=function(){var e=n.gameZone,t=e.width,i=e.height;n.confettiEffect.run(0,i+8,t+5,i+8)},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.updateResultInfo=function(){var e=this.storage.getState(),t=ks(e),n=Tr(e),i=this.player.getPlayer(),a=i.playerId,s=i.photo,r=i.name,o=yr(e),c=o.playerId,l=o.photo,h=o.name,u=(n[a]||{}).score,d=void 0===u?0:u,p=(n[c]||{}).score,f=void 0===p?0:p,g=Er(e,{playerId:a}),m=br(e,{opponentId:c});t===Ea&&(g=!0,m=!0);var v=g&&m&&d>f,y=g&&m&&d<f;this.leaderBlockAbove.updateInfo({playerId:a,photo:s,score:d,name:r,isWin:v}),this.leaderBlockBelow.updateInfo({playerId:c,photo:l,score:f,name:h,isWin:y}),g&&m?d===f?this.congratulation.updateState("draw"):d>f?(this.runConfettiEffect(),this.congratulation.updateState("win")):d<f&&this.congratulation.updateState("lose"):(this.congratulation.updateState("waiting"),this.runConfettiEffect());var S=.5*(this.gameZone.height-620);Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.gameZone,0,-130-S)},n.updateSoundEffect=function(e,t,n,i){},n.create=function(){e.prototype.create.call(this),this.createBackground(),this.createMaskBackground(.5),this.createHomeButton(),this.createCongratulation(),this.createResultMatch(),this.createFooter(),this.createConfettiEffect()},n.createHomeButton=function(){this.homeButton=new uc(this),this.homeButton.setName("Home"),this.homeButton.onClick=this.handleHomeClick,this.world.isLandscape()?Phaser.Display.Align.In.TopCenter(this.homeButton,this.gameZone,-167,-26):Phaser.Display.Align.In.TopLeft(this.homeButton,this.gameZone,-15,-15)},n.createCongratulation=function(){this.congratulation=new JE(this),Phaser.Display.Align.In.TopCenter(this.congratulation,this.gameZone,0,-160)},n.createResultMatch=function(){this.leaderBlockAbove=new gS(this),this.leaderBlockBelow=new gS(this),Phaser.Display.Align.To.BottomCenter(this.leaderBlockAbove,this.congratulation,0,90),Phaser.Display.Align.To.BottomCenter(this.leaderBlockBelow,this.leaderBlockAbove,0,20)},n.createFooter=function(){this.createFooterButton(),this.createFooterBar()},n.createFooterButton=function(){this.footerButtons=new Uc(this),Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.gameZone,0,-140),this.footerButtons.playButton.onClick=this.handlePlayWithFriend},n.createFooterBar=function(){this.footerBar=new Mm(this),this.footerBar.setDepth(ja.Z.BUTTON),this.footerBar.inviteButton.onClick=this.handleInviteIconClick,this.footerBar.joinGlobalButton.onClick=this.handleMatchingGroup,this.footerBar.plusButton.onClick=this.handleInviteIconClick,Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone)},n.runScaleAnimation=function(e){this.scaleAnimation||(this.scaleAnimation=new _h.Z({targets:[e],delay:0,duration:500,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1.1}}),this.scaleAnimation.play())},n.createConfettiEffect=function(){this.confettiEffect=new $a.Z(this),this.confettiEffect.setDepth(ja.Z.EFFECT)},t}(Za.Z);var eb=$E,tb=n(564),nb={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{alpha:{from:0,to:1},scale:{from:3,to:1}}},ib=function(e){function t(t){return e.call(this,nb,t)||this}return(0,c.Z)(t,e),t}(dc.Z),ab=rc.Z.DEFAULT,sb=ab.KEY,rb=ab.FRAME,ob=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.avatar=void 0,i.rankIcon=void 0,i.username=void 0,i.score=void 0,i.background=void 0,i.showPopUp=void 0,i.showSlideIn=void 0,i.scene=t,i.setSize(320,50),i.setDataEnabled(),i.setData(n),i.createBackground(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.updatePosition(),i.scene.add.existing(i.setDepth(ja.Z.POPUP)),i}(0,c.Z)(t,e);var n=t.prototype;return n.updatePosition=function(){this.getData("scoreRight")&&Phaser.Display.Align.In.Center(this.score,this,60)},n.createBackground=function(){this.background=this.scene.make.image({key:sb,frame:rb.LEADERBOARD_BG_DARK});var e=this.width,t=this.height;this.background.setWorldSize(e,t),this.add(this.background)},n.updateHighLightBackground=function(){var e=this.background.getWorldPosition();this.background.setFrame(rb.LEADERBOARD_BG_LIGHT);var t=this.width,n=this.height;this.background.setWorldSize(t,n),this.add(this.background),this.background.setPosition(e.x,e.y)},n.createAvatar=function(){var e=this.getData("playerId"),t=this.getData("photo");this.avatar=new Am(this.scene,{id:e,url:t,key:sb,frame:rb.LEADERBOARD_BG_DARK,background:rb.AVATAR_BG,width:46,height:46,radius:34,loadDelay:100}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-45)},n.createRank=function(){var e=this.getData("rank");this.createRankIcon(e),this.createRankText(e)},n.createRankIcon=function(e){var t="";switch(e){case 1:t=rb.ICON_GOLD;break;case 2:t=rb.ICON_SILVER;break;case 3:t=rb.ICON_BRONZE}this.rankIcon=this.scene.make.image({key:sb,frame:t}),""!=t?this.rankIcon.setWorldSize(40,48):this.rankIcon.setVisible(!1),this.add(this.rankIcon);var n=new Phaser.GameObjects.Zone(this.scene,0,0,45,50);Phaser.Display.Align.In.LeftCenter(n,this),Phaser.Display.Align.In.Center(this.rankIcon,n,0,0)},n.createRankText=function(e){if(!(e<4)){var t=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:""+e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.Center(t,this.rankIcon,0,0)}},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){var e=this.getData("name"),t=GameCore.Utils.String.removeDiacritics(this.getShortName(e));this.username=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),text:t,origin:{x:0,y:.5}}),this.username.setTint(13882337),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,8),this.add(this.username)},n.createScore=function(){var e=this.getData("score"),t=this.getData("rank");this.score=this.scene.add.container();var n=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:GameCore.Utils.Number.toAbbreviatedString(e,{startAbbreviate:1e8}),origin:{x:1,y:.5}});switch(t){case 1:n.setTint(16766720);break;case 2:n.setTint(13882337);break;case 3:n.setTint(13467442)}this.score.add([n]),this.add(this.score),Phaser.Display.Align.In.RightCenter(this.score,this,-16)},n.showPopUpAnimations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t)},n.showSlideInBackAnimations=function(e,t){void 0===e&&(e=100),void 0===t&&(t=500),this.runShowSlideInBackAnimation(e,t)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new sS({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowSlideInBackAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showSlideIn=new ib({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showSlideIn.play()},t}(Phaser.GameObjects.Container),cb=ob;function lb(e,t){var n="undefined"!==typeof $u()&&td()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return hb(e,t);var i=st()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Zl()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ub=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.currentPlayerId=void 0,i.leaders=void 0,i.currentPlayerLeader=void 0,i.scene=t,i.currentPlayerId=n.playerId,i.scene.add.existing((0,za.Z)(i)),i}(0,c.Z)(t,e);var n=t.prototype;return n.updateData=function(e){var t,n=Si()(e)||[];this.leaders&&de()(t=this.leaders).call(t,(function(e){return e.kill()})),this.currentPlayerLeader&&this.currentPlayerLeader.kill(),this.leaders=[];for(var i,a=lb(st()(n).call(n,0,3));!(i=a()).done;){var s=i.value,r=s.playerId,o=s.photo,c=s.score,l=s.name,h=s.rank;if(r){var u={playerId:r,photo:o,score:c||0,rank:h,name:l},d=new cb(this.scene,u);this.leaders.push(d),r===this.currentPlayerId&&d.updateHighLightBackground()}}this.showLeaders(),this.currentPlayerLeader&&this.currentPlayerLeader.active||this.getCurrentPlayerLeader(n),this.showCurrentPlayerLeaders()},n.updateAnimations=function(){this.leaders.forEach((function(e,t){e.showPopUpAnimations(t,500)})),this.currentPlayerLeader&&this.currentPlayerLeader.showSlideInBackAnimations(500,500)},n.getCurrentPlayerLeader=function(e){var t=this,n=Qu()(e).call(e,(function(e){return e.playerId===t.currentPlayerId}));if(n){var i=n.playerId,a=n.photo,s=n.score,r=n.name,o=n.rank;if(!(o<4)){var c={playerId:i,photo:a,score:s||0,rank:o,name:r},l=new cb(this.scene,c);this.currentPlayerLeader=l,this.currentPlayerLeader.revive(),l.updateHighLightBackground()}}},n.showLeaders=function(){var e=this.leaders,t=e.length>3?3:e.length;de()(e).call(e,(function(e){return e.setVisible(!1)}));for(var n=0;n<t;n++){var i=e[n];if(!i)return;Phaser.Display.Align.In.Center(i,this.scene.content,0,55*n-40),i.setVisible(!0)}},n.showCurrentPlayerLeaders=function(){var e=this.currentPlayerLeader;e&&Phaser.Display.Align.In.Center(e,this.scene.content,0,125)},t}(Phaser.GameObjects.Container),db=ub,pb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).leadersBar=void 0,i.scene=void 0,i.payload=void 0,i.contentShowUpAnimation=void 0,i.scene=t,i.payload=n,i.createLeadersBar(),i.scene.add.existing((0,za.Z)(i)),i.runPopupContentEntrancesAnimation(50,100),i}(0,c.Z)(t,e);var n=t.prototype;return n.createLeadersBar=function(){this.leadersBar=new db(this.scene,this.payload),Phaser.Display.Align.In.Center(this.leadersBar,this)},n.updateLeadersBar=function(e){var t=e.leaders;this.leadersBar.updateData(t)},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.Z({targets:this.getAll(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},t}(Phaser.GameObjects.Container),fb=pb,gb=rc.Z.DEFAULT,mb=gb.KEY,vb=gb.FRAME,yb=function(e){function t(t){var n;return(n=e.call(this,t,mb,vb.BUTTON_YELLOW,154,62)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,c.Z)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY WITH"});Phaser.Display.Align.In.Center(e,this.button,0,-11);var t=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,7),this.add([e,t])},t}(sc.Z),Sb=yb,Eb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.buttonsPulsateAnimation=void 0,n.runAnimation=function(){var e;n.entrancesAnimation.play(),null==(e=n.buttonsPulsateAnimation)||e.play()},n.scene=t,n.setName("FooterBar"),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.createPulsateAnimation(),n.alignIcons(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new Dc.Z({targets:[this],delay:400,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.createPulsateAnimation=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new gc({targets:[this],props:{scale:{from:.9,to:1},duration:500}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6)},n.createPlayWithFriendsButton=function(){this.pwfButton=new Sb(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),bb=Eb,Ab=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,y()(t=[this]).call(t,a))||this).content=void 0,n.footerButtons=void 0,n.currentPlayer=void 0,n.confetti1Effect=void 0,n.confetti2Effect=void 0,n.confetti3Effect=void 0,n.confetti4Effect=void 0,n.run=function(){n.updateResultInfo(),n.footerButtons.runAnimation(),n.content.leadersBar.updateAnimations(),n.handleShowCongratsTitle()},n.handlePlayWithFriend=function(){n.storage.dispatch(Ko())},n.handleHomeClick=function(){n.scene.switch(Ba.C.DASHBOARD_SCENE)},n.handleShareScore=function(){n.storage.dispatch(Rr())},n.explodeConfettiEffect=function(){n.confetti1Effect.stop(),n.confetti2Effect.stop(),n.confetti3Effect.stop(),n.confetti4Effect.stop(),n.children.bringToTop(n.confetti1Effect),n.children.bringToTop(n.confetti2Effect),n.children.bringToTop(n.confetti3Effect),n.children.bringToTop(n.confetti4Effect),n.confetti1Effect.run(1,110,83),n.confetti2Effect.run(1,281,82),n.confetti3Effect.run(1,73,121),n.confetti4Effect.run(1,316,120),n.tweens.addCounter({duration:500,onStart:function(){n.confetti1Effect.explode(12,110,83),n.confetti2Effect.explode(12,281,82),n.confetti3Effect.explode(12,73,121),n.confetti4Effect.explode(12,316,120)}})},n}(0,c.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.handleShowCongratsTitle=function(){var e=this;this.currentPlayer&&this.currentPlayer.rank<4&&this.scene.scene.time.delayedCall(800,(function(){e.explodeConfettiEffect()}))},n.updateResultInfo=function(){var e=this,t=this.storage.getState(),n=this.player.getPlayerId(),i=Pr(t).score,a=void 0===i?0:i,s=wr(t),r=Si()(s)||[],o=Tr(t),c=Si()(o)||[],l=[];r.forEach((function(t,i){var s=c[i].score;t.playerId===n&&(s=a);var r={playerId:t.playerId,photo:t.photo,score:s||0,rank:1,name:t.name};l.push(r),t.playerId===n&&(e.currentPlayer=r)}));var h=bi()(l).call(l,(function(e,t){return t.score-e.score}));de()(h).call(h,(function(e,t){return e.rank=t+1}));var u={playerId:n,leaders:h};this.content.updateLeadersBar(u)},n.create=function(){e.prototype.create.call(this),this.createBackground(),this.createContent(),this.createConfettiSmallAnimation(),this.createFooter()},n.createContent=function(){var e={playerId:this.player.getPlayerId(),leaders:[]};this.content=new fb(this,e),Phaser.Display.Align.In.Center(this.content,this.gameZone,0,-40)},n.createFooter=function(){this.footerButtons=new bb(this),Phaser.Display.Align.In.BottomCenter(this.footerButtons,this.gameZone,0,-70),this.footerButtons.pwfButton.onClick=this.handlePlayWithFriend},n.createConfettiSmallAnimation=function(){this.confetti1Effect=new tb.Z(this,{speedX:{min:-13.3,max:-66.5},speedY:{min:-13.3,max:-66.5},rotate:{start:-1080,end:0},angle:{min:210,max:245}}),this.confetti2Effect=new tb.Z(this,{speedX:{min:13.3,max:66.5},speedY:{min:-13.3,max:-66.5},rotate:{start:0,end:1080},angle:{min:320,max:355}}),this.confetti3Effect=new tb.Z(this,{speedX:{min:-13.3,max:-66.5},speedY:{min:0,max:-53.2},rotate:{start:-1080,end:0},angle:{min:120,max:155}}),this.confetti4Effect=new tb.Z(this,{speedX:{min:13.3,max:66.5},speedY:{min:0,max:-53.2},rotate:{start:0,end:1080},angle:{min:30,max:65}}),this.confetti1Effect.setDepth(ja.Z.EFFECT),this.confetti2Effect.setDepth(ja.Z.EFFECT)},t}(Za.Z),wb=Ab,Tb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="ContinueTournamentFail",i.message=t||"Can't continue this tournament",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),Pb=n(117),Cb=n.n(Pb),Ib=rc.Z.DEFAULT,xb=Ib.KEY,Bb=Ib.FRAME,kb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).rank=void 0,i.avatar=void 0,i.rankIcon=void 0,i.cupIcon=void 0,i.username=void 0,i.score=void 0,i.background=void 0,i.showPopUp=void 0,i.scene=t,i.rank=n,i.createBackground(),i.updateSize(),i.createAvatar(),i.createRankIcon(),i.createCupIcon(),i.createUsername(),i.createScore(),i.scene.add.existing(i.setDepth(ja.Z.POPUP)),i}(0,c.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:xb,frame:Bb.LEADERBOARD_BG_DARK}),this.background.setWorldSize(270,44),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Am(this.scene,{key:xb,frame:Bb.AVATAR_FRAME_PURPLE,background:Bb.AVATAR_BG,width:38,height:40,loadDelay:100}),this.avatar.update(),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-40,-2)},n.createRankIcon=function(){var e=this.rank;this.rankIcon=this.scene.make.image({key:xb,frame:""}),this.add(this.rankIcon),this.updateRankIcon(e)},n.updateRankIcon=function(e){var t="";switch(e){case 1:t=Bb.ICON_GOLD;break;case 2:t=Bb.ICON_SILVER;break;case 3:t=Bb.ICON_BRONZE;break;case 0:t=Bb.ICON_QUESTION}this.rankIcon.setFrame(t),0===e?(this.rankIcon.setWorldSize(11,16),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.avatar,25,3)):(this.rankIcon.setWorldSize(38,49),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.avatar,38,2))},n.createCupIcon=function(){this.cupIcon=this.scene.make.image({key:xb,frame:Bb.ICON_BEST_SCORE_CUP}),this.cupIcon.setWorldSize(26,24.5),this.cupIcon.scale-=.1,Phaser.Display.Align.To.RightCenter(this.cupIcon,this.avatar,97,2),this.add(this.cupIcon)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:Xa.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setTint(13221313),this.username.setHighQuality(),this.username.setFontSize(16),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,6,3),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:1,y:.5}}),this.score.setTint(13221313),Phaser.Display.Align.To.RightCenter(this.score,this.avatar,180,2),this.add(this.score),this.setScore(0)},n.setScore=function(e){var t=GameCore.Utils.Number.toAbbreviatedString(+e,{startAbbreviate:1e6});this.score.setText(""+t)},n.setUsername=function(e){var t=GameCore.Utils.String.getShortName(e,12),n=GameCore.Utils.String.removeDiacritics(t);this.username.setText(n)},n.updateData=function(e){var t=e||{},n=t.playerId,i=void 0===n?"10":n,a=t.name,s=void 0===a?"???":a,r=t.photo,o=void 0===r?"":r,c=t.score,l=void 0===c?0:c,h=t.rank,u=void 0===h?0:h;this.setScore(l),this.setUsername(s),this.updateRankIcon(u),this.avatar.loadPhoto(i,o)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new sS({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},t}(Phaser.GameObjects.Container),Rb=kb,Ob=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.maxLeaders=void 0,n.scene=t,n.setSize(320,200),n.maxLeaders=3,n.leaders=n.scene.make.group({maxSize:n.maxLeaders}),n.createLeaders(),n.alignLeaders(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createLeaders=function(){for(var e=0;e<this.maxLeaders;e++){var t=new Rb(this.scene,e+1);this.add(t),this.leaders.add(t)}},n.alignLeaders=function(){this.leaders.incY(15,45)},n.updateLeaders=function(e){var t=0;Cb()(this.leaders.children).forEach((function(n){n instanceof Rb&&(n.updateData((0,r.Z)({},e[t],{rank:t+1})),t++)}))},t}(Phaser.GameObjects.Container),_b=Ob,Db=function(e){function t(t){var n;return(n=e.call(this,t)||this).title=void 0,n.prize=void 0,n.createTitle(),n.createPrize(),n.setSize(320,60),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(22),origin:{x:.5,y:.2}}),this.title.setCenterAlign(),this.title.setMaxWidth(300),this.title.kill(),this.add(this.title)},n.createPrize=function(){this.prize=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.prize.kill(),this.add(this.prize)},n.setTitle=function(e){this.title.revive();var t=GameCore.Utils.String.removeDiacritics(e);this.title.setText(t)},n.setPrize=function(e){this.prize.revive(),this.prize.setText("Total: "+e)},t}(Phaser.GameObjects.Container),Lb=Db,Nb=rc.Z.DEFAULT,Mb=Nb.KEY,Gb=Nb.FRAME,Fb=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerContainer=void 0,n.timerText=void 0,n.timerIcon=void 0,n.rightButton=void 0,n.rightButtonLabel=void 0,n.updateCountdown=(0,o.Z)(h().mark((function e(){var t,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i<0&&(i=0),n.timerText.setText("End time: "+a+":"+(0,Ee.F0)(Math.abs(i),!0));case 5:case"end":return e.stop()}}),e)}))),n.setSize(320,60),n.createLeftContainer(),n.createJoinButton(),n.createCountdownTimer(),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createLeftContainer=function(){this.createTimerContainer()},n.createTimerContainer=function(){this.timerContainer=this.scene.add.container(0,0),this.timerContainer.setSize(180,60),this.add(this.timerContainer),this.timerText=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(15),origin:{x:0,y:.5}}),this.timerIcon=this.scene.make.image({key:Mb,frame:Gb.ICON_CLOCK}),this.timerIcon.setPosition(-12,0),this.timerIcon.setWorldSize(18,20.5),this.timerContainer.add([this.timerText,this.timerIcon]),Phaser.Display.Align.In.LeftCenter(this.timerContainer,this,45,0)},n.createJoinButton=function(){this.rightButton=new sc.Z(this.scene,Mb,Gb.TOURNAMENT_GREEN_BUTTON,80,38),this.rightButtonLabel=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"Join",origin:{x:.5,y:.5}}),this.rightButton.setName("Join"),this.rightButton.add(this.rightButtonLabel),this.add(this.rightButton),Phaser.Display.Align.In.RightCenter(this.rightButton,this,-20,0)},n.createCountdownTimer=function(){var e;this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},t}(Phaser.GameObjects.Container),Zb=Fb,Ub=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).scene=void 0,a.id=void 0,a.payload=void 0,a.popup=void 0,a.topBar=void 0,a.leaders=void 0,a.bottomBar=void 0,a.loading=void 0,a.isNeedUpdate=void 0,a.isRequesting=void 0,a.handleJoinTournament=function(){var e=a.payload,t=e.id,n=e.contextID;a.scene.handleJoinTournament(""+t,n)},a.scene=t,a.setSize(320,245),a.createPopup(),a.createTopBar(),a.createLeaders(),a.createLoading(),a.createBottomBar(),a.scene.add.existing((0,za.Z)(a)),a}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){var e=this.width,t=this.height;this.popup=new Ih(this.scene,0,0,e,t),this.add(this.popup)},n.createTopBar=function(){this.topBar=new Lb(this.scene),this.popup.add(this.topBar),Phaser.Display.Align.In.TopCenter(this.topBar,this.popup,0,0)},n.createLeaders=function(){this.leaders=new _b(this.scene),this.leaders.kill(),this.popup.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.topBar,0,30)},n.createLoading=function(){this.loading=new Gg.Z(this.scene),this.loading.setTint(5982858),this.loading.kill(),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this,0,0)},n.createBottomBar=function(){this.bottomBar=new Zb(this.scene),this.bottomBar.rightButton.onClick=this.handleJoinTournament,this.popup.add(this.bottomBar),Phaser.Display.Align.In.BottomCenter(this.bottomBar,this.popup,0,-5)},n.updateData=function(e){this.id=e.id,this.payload=e,this.isNeedUpdate=!0,this.topBar.setTitle(""+e.title),this.bottomBar.setCountdown(e.endTime)},n.fetchLeaderboardData=function(){var e=(0,o.Z)(h().mark((function e(){var t,n,i,a,s,r,o,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRequesting){e.next=2;break}return e.abrupt("return");case 2:if(this.isNeedUpdate){e.next=4;break}return e.abrupt("return");case 4:if(!this.loading.active){e.next=6;break}return e.abrupt("return");case 6:if(e.prev=6,this.isRequesting=!0,this.payload.payload){e.next=10;break}throw new Error("Payload is empty");case 10:if(t=this.payload.payload.leaderboardId){e.next=13;break}throw new Error("Leaderboard ID is not defined");case 13:return!this.leaders.active&&this.loading.revive(),e.next=16,Ys(t,{limit:5});case 16:if(!((n=e.sent).length>0)){e.next=30;break}return i=de()(n).call(n,(function(e){return e.playerId})),e.next=21,this.scene.profile.requestProfiles(i);case 21:if(a=this.scene.profile.getProfiles(),s=de()(n).call(n,(function(e){var t=e.playerId,n=e.score,i=e.rank,s=a[t];if(!s)return null;var r=s.name;return{playerId:t,photo:s.photo,score:n,rank:i,name:r}})),!((r=he()(s).call(s,(function(e){return null!==e}))).length<1)){e.next=26;break}throw new Error(this.scene.lang.Text.leaderBoardEmpty);case 26:this.leaders.revive(),this.leaders.updateLeaders(r),e.next=40;break;case 30:return o=this.payload.payload.playerId,e.next=33,this.scene.profile.requestProfiles([o]);case 33:if(c=this.scene.profile.getProfiles(),l=c[o]||this.scene.player.getPlayer()){e.next=37;break}throw new Error("Tournament owner profile is not defined");case 37:u=l.name,d=l.photo,this.leaders.revive(),this.leaders.updateLeaders([{playerId:o,name:u,photo:d,score:0,rank:1}]);case 40:this.isNeedUpdate=!1,e.next=48;break;case 43:e.prev=43,e.t0=e.catch(6),this.kill(),this.scene.alignObjects();case 48:return e.prev=48,this.loading.kill(),this.isRequesting=!1,e.finish(48);case 52:case"end":return e.stop()}}),e,this,[[6,43,48,52]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Yb=Ub,zb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.payload=void 0,n.popup=void 0,n.topBar=void 0,n.leader=void 0,n.bottomBar=void 0,n.handleJoinTournament=function(){var e=n.payload,t=e.id,i=e.contextID;n.scene.handleJoinTournament(""+t,i)},n.scene=t,n.setSize(320,120),n.createPopup(),n.createTopBar(),n.createBottomBar(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){var e=this.width,t=this.height;this.popup=new Ih(this.scene,0,0,e,t),this.add(this.popup)},n.createTopBar=function(){this.topBar=new Lb(this.scene),this.popup.add(this.topBar),Phaser.Display.Align.In.TopCenter(this.topBar,this.popup,0,0)},n.createLeaders=function(){this.leader=new Rb(this.scene,1),this.popup.add(this.leader);var e=-this.leader.height/2+8;Phaser.Display.Align.To.BottomCenter(this.leader,this.topBar,0,e)},n.createBottomBar=function(){this.bottomBar=new Zb(this.scene),this.bottomBar.rightButton.onClick=this.handleJoinTournament,this.popup.add(this.bottomBar),Phaser.Display.Align.To.BottomCenter(this.bottomBar,this.popup,0,-60)},n.updateData=function(e){this.payload=e,this.topBar.setTitle(e.title),this.bottomBar.setCountdown(e.endTime)},t}(Phaser.GameObjects.Container),Wb=zb,Hb=function(e){function t(t){var n;return(n=e.call(this,t)||this).title=void 0,n.createTitle(),n.setSize(320,80),t.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createTitle=function(){this.title=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(20),origin:{x:.5,y:.5},y:-10,x:0}),this.add(this.title)},n.setTitle=function(e){this.title.setText(e)},t}(Phaser.GameObjects.Container),Kb=Hb,Vb=rc.Z.DEFAULT,jb=Vb.KEY,Xb=Vb.FRAME,qb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.popup=void 0,n.topBar=void 0,n.player=void 0,n.button=void 0,n.handleCreateTournament=function(){n.scene.handleCreateTournament()},n.scene=t,n.setSize(320,160),n.createPopup(),n.createTopBar(),n.createPlayerInfo(),n.createButton(),n.updatePlayerData(),n.scene.add.existing((0,za.Z)(n)),n}(0,c.Z)(t,e);var n=t.prototype;return n.createPopup=function(){var e=this.width,t=this.height;this.popup=new Ih(this.scene,0,0,e,t),this.add(this.popup)},n.createTopBar=function(){this.topBar=new Kb(this.scene),this.topBar.setTitle("Create Your Tournament"),this.popup.add(this.topBar),Phaser.Display.Align.In.TopCenter(this.topBar,this.popup,0,-2)},n.createPlayerInfo=function(){this.player=new Rb(this.scene,1),this.player.score.setTint(14002497),this.player.score.setOrigin(1,.45);var e=this.scene.fontSize(22);this.player.score.setFontSize(e),this.player.cupIcon.x-=8,this.popup.add(this.player),Phaser.Display.Align.In.Center(this.player,this.topBar,0,30)},n.createButton=function(){this.button=new sc.Z(this.scene,jb,Xb.TOURNAMENT_GREEN_BUTTON,80,38);var e=this.scene.make.bitmapText({font:Xa.Z.PRIMARY.KEY,size:this.scene.fontSize(17),text:"Create",origin:{x:.5,y:.5}});this.button.setName("Create"),this.button.add(e),this.button.onClick=this.handleCreateTournament,this.add(this.button),Phaser.Display.Align.In.BottomRight(this.button,this,-20,-15)},n.updatePlayerData=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.data.score;this.player.updateData({playerId:t,name:n,photo:i,score:a,rank:1})},t}(Phaser.GameObjects.Container),Qb=qb,Jb=function(e){function t(t){var n;(n=e.call(this,t)||this).handleContinueTournament=function(){if(n.payload){var e=n.payload.id;n.scene.handleContinueTournament(""+e)}},n.bottomBar.rightButton.setName("Continue"),n.bottomBar.rightButton.onClick=n.handleContinueTournament,n.bottomBar.rightButtonLabel.setText("Continue");var i=n.scene.fontSize(15);return n.bottomBar.rightButtonLabel.setFontSize(i),n}return(0,c.Z)(t,e),t.prototype.updateData=function(t){e.prototype.updateData.call(this,t),this.topBar.setTitle("Current Tournament"),this.fetchLeaderboardData()},t}(Yb),$b=Jb,eA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentPayloadInvalid",i.message=t||"The tournament payload invalid",i.payload=n,i}return(0,c.Z)(t,e),t}((0,I.Z)(Error)),tA=rc.Z.DEFAULT,nA=tA.KEY,iA=tA.FRAME,aA=GameCore.Configs.Tournament,sA=aA.UseGlobalTournament,rA=aA.GlobalTournaments,oA=function(e){function t(t){var n,i=t.gameZone,a=i.width,s=i.height,r={width:a,height:s+80,marginTop:40,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5};return(n=e.call(this,t,r)||this).scene=void 0,n.currentTournamentId=null,n.dinoTitle=void 0,n.createTournamentBlock=void 0,n.continueTournamentBlock=void 0,n.listObjects=void 0,n.listTournamentBlocks=void 0,n.listMainTournamentBlocks=void 0,n.updateObjectVisible=(0,oa.D)((function(){for(var e=n.objects.getChildren(),t=0;t<e.length;t++){var i=e[t];i.y+i.height<-n.height||i.y-i.height>n.height?i.setVisible(!1):i.active&&(i.setVisible(!0),i instanceof Yb&&i.fetchLeaderboardData())}}),100,{maxWait:100}),n.scene=t,n.createObjects(),n.alignObjects(),n.setPosition(187.5,s/2-40),n.setEnable(!0),n.createMask(),n}(0,c.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.listObjects=this.scene.add.group(),this.listTournamentBlocks=this.scene.add.group(),this.listMainTournamentBlocks=this.scene.add.group(),this.createDinoTitle(),this.createCreateTournamentBlock(),this.createContinueTournamentBlock()},n.createDinoTitle=function(){this.dinoTitle=this.scene.add.image(0,0,nA,iA.TOURNAMENT_TITLE_LOGO),this.dinoTitle.setWorldSize(215,176.5),this.addItem(this.dinoTitle),this.listObjects.add(this.dinoTitle)},n.createCreateTournamentBlock=function(){this.createTournamentBlock=new Qb(this.scene),this.addItem(this.createTournamentBlock),this.listObjects.add(this.createTournamentBlock)},n.createContinueTournamentBlock=function(){this.continueTournamentBlock=new $b(this.scene),this.continueTournamentBlock.kill(),this.addItem(this.continueTournamentBlock),this.listObjects.add(this.continueTournamentBlock)},n.addMainTournamentBlock=function(){var e=new Wb(this.scene);return this.addItem(e),this.listObjects.add(e),this.listMainTournamentBlocks.add(e),e},n.addTournamentBlock=function(){var e=new Yb(this.scene);return this.addItem(e),this.listObjects.add(e),this.listTournamentBlocks.add(e),e},n.alignObjects=function(){var e;this.reset(),this.setEnable(!0);var t=he()(e=Cb()(this.listObjects.children)).call(e,(function(e){return e.active}));if(0!==t.length){var n=t[0];n.setY(-180),st()(t).call(t,1).forEach((function(e){var t=n.y+n.height/2+10+e.height/2;e.setY(t),n=e}));var i=t[t.length-1],a=i.y+.5*i.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(a,0)}},n.updateContinueTournamentBlock=function(e){try{if(!e)throw new Error("Current tournament is null");var t=e.getID(),n=e.getPayload();if(!n)throw new Error("Current tournament payload is null");var i=JSON.parse(n),a=i.playerName;if(!i.leaderboardId)throw new Error("Current tournament payload leaderboardId is null");this.currentTournamentId=t;var s={id:t,title:e.getTitle()||a+"'s Tournament",payload:i,endTime:e.getEndTime(),contextID:e.getContextID()};this.continueTournamentBlock.revive(),this.continueTournamentBlock.updateData(s)}catch(r){this.continueTournamentBlock.kill()}},n.updateData=function(){var e=(0,o.Z)(h().mark((function e(t,n){var i,a,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n?(this.createTournamentBlock.kill(),this.updateContinueTournamentBlock(n)):(this.continueTournamentBlock.kill(),this.createTournamentBlock.revive(),this.createTournamentBlock.updatePlayerData()),!(t.length<1)){e.next=6;break}return this.setScrollerState(!1),e.abrupt("return");case 6:this.setScrollerState(!0);case 7:sA&&rA.length>0&&(i=Cb()(this.listMainTournamentBlocks.children),this.listMainTournamentBlocks.killGroup(),rA.forEach((function(e,t){if(t>=i.length){s.addMainTournamentBlock().updateData(e)}else{var n=i[t];n.revive(),n.updateData(e)}}))),this.listTournamentBlocks.children.each((function(e){e instanceof Yb&&e.kill()})),a=Cb()(this.listTournamentBlocks.children),t.forEach((function(e){try{var t=e.getID();if(t===s.currentTournamentId)return;var n=e.getPayload();if(!n)return;var i=JSON.parse(n),r=i.playerName;if(!i.leaderboardId)throw new eA(null,i);var o=e.getTitle()||r+"'s Tournament",c={id:t,title:o,payload:i,endTime:e.getEndTime(),contextID:e.getContextID()},l=Qu()(a).call(a,(function(e){return e instanceof Yb&&e.id===t}));if(l){if(l.id===s.currentTournamentId)return;l.revive(),l.updateData(c)}else{s.addTournamentBlock().updateData(c)}}catch(h){}})),this.alignObjects();case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setScrollerState=function(e){this.isEnable!==e&&(e?(this.setEnable(!0),this.addItem(this.dinoTitle),this.dinoTitle.setPosition(0,0)):(this.setEnable(!1),this.remove(this.dinoTitle),Phaser.Display.Align.In.TopCenter(this.dinoTitle,this.scene.gameZone,0,-30)))},t}(mg.Z),cA=oA,lA=rc.Z.DEFAULT,hA=lA.KEY,uA=lA.FRAME,dA=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,y()(t=[this]).call(t,s))||this).closeButton=void 0,n.tournamentScroller=void 0,n.run=function(){n.loadTournament()},n.handleHomeClick=function(){n.scene.switch(Ba.C.DASHBOARD_SCENE)},n.handleCreateTournament=(0,o.Z)(h().mark((function e(){var t,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.player.getPlayer(),i=t.playerId,a=t.name,s={playerId:i,playerName:a,score:1e4,autoStartGame:!0},e.next=5,Vs(s);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n.game.globalScene.screen.open(qa.o4.NOTIFY_SCREEN,{message:"Oops!\n You are not able to create\ntournaments right now.\n\nPlease try again later.",duration:5e3,loading:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleJoinTournament=function(){var e=(0,o.Z)(h().mark((function e(t,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,n.facebook.tournament.joinAsync(t);case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,n.facebook.switchAsync(i);case 10:n.storage.dispatch(Hs(t)),n.storage.dispatch(zo()),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),(0,a.tO)(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14],[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleContinueTournament=function(){var e=(0,o.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.facebook.getTournamentAsync();case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t===""+i.getID()){e.next=8;break}return e.abrupt("return");case 8:n.storage.dispatch(Hs(t)),n.storage.dispatch(zo()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,a.tO)(new Tb(null,{tournamentID:t,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n}(0,c.Z)(t,e);var n=t.prototype;return n.loadTournament=function(){var e=(0,o.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrentTournament();case 2:return t=e.sent,e.prev=3,e.next=6,this.facebook.tournament.getTournamentsAsync();case 6:n=e.sent,this.tournamentScroller.updateData(n,t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.tournamentScroller.updateData([],t);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),n.getCurrentTournament=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.facebook.getTournamentAsync();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(),this.createTournamentScroller(),this.createCloseButton()},n.createCloseButton=function(){this.closeButton=new Sh.Z(this,{key:hA,frame:uA.BUTTON_CLOSE,width:37,height:37,paddingZone:20}),this.closeButton.setName("Close"),this.closeButton.onClick=this.handleHomeClick,Phaser.Display.Align.In.TopLeft(this.closeButton,this.gameZone,-5,-5)},n.createTournamentScroller=function(){this.tournamentScroller=new cA(this)},n.alignObjects=function(){this.tournamentScroller.alignObjects()},t}(Za.Z),pA=dA;var fA=n(565),gA=["Enable"],mA=function(e){function t(t){return e.call(this,t)||this}(0,c.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,o.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.handleShowInterAdWhenStartGame();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var e=new m(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.customCheckWorldBounds(),e.customQueueDepthSortLayer()},i.addExtraFBInstantFunctions=function(){var e=new u.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new f(this)},i.addPlugins=function(){this.plugins.install("Storage",ta,!0,"storage"),this.plugins.install("Rollbar",Vt,!0,"rollbar"),this.plugins.install("AdsManager",R,!0,"ads"),this.plugins.install("AuthManager",V,!0,"auth"),this.plugins.install("AudioManager",M,!0,"audio"),this.plugins.install("WorldManager",la,!0,"world"),this.plugins.install("PlayerManager",Bt,!0,"player"),this.plugins.install("LanguageManager",_a,!0,"lang"),this.plugins.install("ProfileManager",Mt,!0,"profile"),this.plugins.install("AnalyticsManager",D,!0,"analytics"),this.plugins.install("AdaptivePerformance",oe,!0,"performance"),this.plugins.installScenePlugin("textStyler",ra,"textStyler"),this.plugins.installScenePlugin("ScreenManager",nn,"screen"),this.plugins.installScenePlugin("FrameCapture",ee,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance")},i.addDevPlugins=function(){var e=(0,o.Z)(h().mark((function e(){var t,i,a,s,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,503));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(114),n.e(530)]).then(n.bind(n,504));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,514));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,515));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,505));case 16:r=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Ba.C.BOOT_SCENE,Fa,!0),this.scene.add(Ba.C.LOAD_SCENE,VE,!1),this.scene.add(Ba.C.GAME_SCENE,jy,!1),this.scene.add(Ba.C.GAME_OVER_SCENE,Wc,!1),this.scene.add(Ba.C.DASHBOARD_SCENE,Ya,!1),this.scene.add(Ba.C.LEADERBOARD_SCENE,PS,!1),this.scene.add(Ba.C.TOURNAMENT_SCENE,pA,!1),this.scene.add(Ba.C.RESULT_MATCH_SCENE,eb,!1),this.scene.add(Ba.C.RESULT_ONLINE_SCENE,wb),this.scene.add(Ba.C.GLOBAL_SCENE,Xy.Z,!1)},i.addDevScenes=function(){var e=(0,o.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,435));case 4:return t=e.sent.default,e.next=7,n.e(673).then(n.bind(n,517));case 7:i=e.sent.default,this.scene.add(Ba.C.TEST_SCENE,t,!1),this.scene.add(Ba.C.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,o.Z)(h().mark((function e(){var t,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,fA.Z.setGame(this),i=fA.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,518));case 6:a=e.sent.default,i=a;case 8:(s=(0,r.Z)({},t.InterstitialAdOptions)).showWhenStartGame&&(s.secondsFirstTime=0),this.ads.configure(i,(0,r.Z)({},t,{InterstitialAdOptions:s}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,h=e.FullSizeOnLandscape,u=n,d=i,p=a,f=s,g=r,m=o;this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:f,landscapeWidth:g,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:h}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new xa(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:this.getUpperCaseForLang(e)})},i.getUpperCaseForLang=function(e){switch(e){default:return!1;case"ru":case"hi":case"ja":case"zh":return!0}},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,s.Z)(e,gA);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,r.Z)({pixelRatio:i},n)),this.performance.active()}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,document.addEventListener("visibilitychange",(function(){document.hidden?e.audio.pauseMusic():e.audio.playMusic()}))},i.handleShowInterAdWhenStartGame=function(){var e=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.audio.stopMusic(),this.audio.muteAll(),e.next=8,this.ads.preloadPreRollAdAsync();case 8:return e.next=10,this.ads.showPreRollAdAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),(0,a.tO)(e.t0);case 15:return e.prev=15,this.audio.unmuteAll(),this.audio.playMusic(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[3,12,15,19]])})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Game),vA=mA,yA=GameCore.Configs.Debugger.ShowInspector,SA={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},audio:{noAudio:!1,disableWebAudio:!1},input:{gamepad:!1,keyboard:yA,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{antialias:!0,antialiasGL:!0,desynchronized:!1,powerPreference:"high-performance",transparent:!0,clearBeforeRender:!1,roundPixels:!1},physics:{default:"arcade",arcade:{}},plugins:{global:[]}};(0,a.j6)();var EA=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(EA),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new vA(SA);window.game=e}catch(t){(0,a.tO)(t)}}())}),50)},443:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_FAIL:"match_fail",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",INVITE:"invite",MESSAGE:"message",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",FPS_METER:"fps_meter",FPS_MATCH:"fps_match",USE_ITEM:"use_item",USE_GIFT:"use_gift",COLOR_LEVEL_UP:"color_level_up",PROCESS_LEVEL_UP:"process_level_up",USE_STAMP:"use_stamp"}},444:function(e,t,n){"use strict";var i=n(445),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},529:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(525),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},543:function(e,t,n){"use strict";n.d(t,{$:function(){return a},V:function(){return s}});var i=n(526),a=(0,i.P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),s=(0,i.P1)([function(e){return e.scene.prevSceneKey}],(function(e){return e}))},521:function(e,t,n){"use strict";n.d(t,{qZ:function(){return o},Gm:function(){return c},F0:function(){return l}});var i=n(26),a=n.n(i),s=n(15),r=n.n(s),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},l=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?r()(n).call(n,11,-5):r()(n).call(n,14,-5)}},441:function(e,t,n){"use strict";n.d(t,{j6:function(){return v},sw:function(){return S},Tv:function(){return E},R0:function(){return A},tO:function(){return w}});var i=n(119),a=n(96),s=n.n(a),r=(n(52),n(28)),o=n.n(r),c=["player","match"],l="https://957172bc9373496c961638e32bee6b59@o4503901864525824.ingest.sentry.io/4503901865181184",h=function(e,t){try{if(f(e,t))return null;if(u(),p(t)){var n=d(e,t);if(n)return n}return e}catch(i){return null}},u=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,n=e.match,a=(0,i.Z)(e,c);window.Sentry.setExtra("player",t),window.Sentry.setExtra("match",n),window.Sentry.setExtra("other",a)}catch(s){}},d=function(e,t){var n;if(!t)return null;var i=Phaser.Utils.Objects.DeepCopy(e),a=((null==(n=i.exception)?void 0:s()(n))||[])[0];if(!a)return null;var r=t.originalException.code;return r?(a.type=r,i):null},p=function(e){if(!e)return!1;if(!e.originalException)return!1;return"Non-Error promise rejection captured with keys: code, message"===e.originalException.message},f=function(e,t){try{if(!t)return!1;var n=!1,i=t.originalException;return i instanceof Object&&(n=g(i)||m(i)),n}catch(a){return!1}},g=function(e){try{if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=GameCore.Configs.Sentry.errorCodes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(o()(i).call(i,t)>=0)return!1;if(o()(a).call(a,t)>=0)return!0}}return!1}catch(s){return!1}},m=function(e){try{if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=GameCore.Configs.Sentry.errorMessages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(o()(i).call(i,t)>=0)return!1;if(o()(a).call(a,t)>=0)return!0}}return!1}catch(s){return!1}},v=function(){var e=setInterval((function(){if(window.Sentry){clearInterval(e);var t={debug:!0,dsn:l,environment:"production",release:"4",sampleRate:1,beforeSend:h,ignoreErrors:y(),beforeBreadcrumb:function(e){return"ui.click"===e.category?null:e}};window.Sentry.init(t)}}),100)},y=function(){return[]},S=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},E=function(e){window.Sentry&&window.Sentry.setUser(e)},b=function(e){window.Sentry&&window.Sentry.captureException(e)},A=function(e,t){e&&window.Sentry.withScope((function(n){n.setExtras(t),b(e)}))},w=function(e){e&&b(e)}},439:function(e,t){"use strict";t.Z=function(e,t){var n=window.game.world.getWorldSize(),i=n.width,a=n.height,s=246.09375,r=2*a,o=0*a/667,c=a-o-t,l=2.45/4448890*667/a*667/a*c*c-2/3335*667/a*c+1.39-(i-375)/7880,h=375*c*a/(s*a+c*(375-s));return{x:(e-i/2)/r*(r-h)*l+i/2,y:a-o-.7*h,scale:(r-h)/r*l}}},446:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var i=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],a=e[h][1],s=e[h][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(h--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var h=c(n)}for(t&&t(i);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(437)})),n.O(void 0,[216,630,542],(function(){return n(438)})),n.O(void 0,[216,630,542],(function(){return n(371)})),n.O(void 0,[216,630,542],(function(){return n(447)})),n.O(void 0,[216,630,542],(function(){return n(508)})),n.O(void 0,[216,630,542],(function(){return n(406)}));var i=n.O(void 0,[216,630,542],(function(){return n(473)}));i=n.O(i)})();